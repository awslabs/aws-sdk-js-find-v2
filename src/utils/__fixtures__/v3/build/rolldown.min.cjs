var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(e&&(t=e(e=0)),t),s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=(e,n)=>{let r={};for(var i in e)t(r,i,{get:e[i],enumerable:!0});return n&&t(r,Symbol.toStringTag,{value:`Module`}),r},l=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},u=(n,r,a)=>(a=n==null?{}:e(i(n)),l(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),d=e=>a.call(e,`module.exports`)?e[`module.exports`]:l(t({},`__esModule`,{value:!0}),e),f=s((e=>{e.HttpAuthLocation=void 0,(function(e){e.HEADER=`header`,e.QUERY=`query`})(e.HttpAuthLocation||={}),e.HttpApiKeyAuthLocation=void 0,(function(e){e.HEADER=`header`,e.QUERY=`query`})(e.HttpApiKeyAuthLocation||={}),e.EndpointURLScheme=void 0,(function(e){e.HTTP=`http`,e.HTTPS=`https`})(e.EndpointURLScheme||={}),e.AlgorithmId=void 0,(function(e){e.MD5=`md5`,e.CRC32=`crc32`,e.CRC32C=`crc32c`,e.SHA1=`sha1`,e.SHA256=`sha256`})(e.AlgorithmId||={});let t=t=>{let n=[];return t.sha256!==void 0&&n.push({algorithmId:()=>e.AlgorithmId.SHA256,checksumConstructor:()=>t.sha256}),t.md5!=null&&n.push({algorithmId:()=>e.AlgorithmId.MD5,checksumConstructor:()=>t.md5}),{addChecksumAlgorithm(e){n.push(e)},checksumAlgorithms(){return n}}},n=e=>{let t={};return e.checksumAlgorithms().forEach(e=>{t[e.algorithmId()]=e.checksumConstructor()}),t};e.FieldPosition=void 0,(function(e){e[e.HEADER=0]=`HEADER`,e[e.TRAILER=1]=`TRAILER`})(e.FieldPosition||={}),e.IniSectionType=void 0,(function(e){e.PROFILE=`profile`,e.SSO_SESSION=`sso-session`,e.SERVICES=`services`})(e.IniSectionType||={}),e.RequestHandlerProtocol=void 0,(function(e){e.HTTP_0_9=`http/0.9`,e.HTTP_1_0=`http/1.0`,e.TDS_8_0=`tds/8.0`})(e.RequestHandlerProtocol||={}),e.SMITHY_CONTEXT_KEY=`__smithy_context`,e.getDefaultClientConfiguration=e=>t(e),e.resolveDefaultRuntimeConfig=e=>n(e)})),p=s((e=>{var t=f();let n=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,n){e.httpHandler?.updateHttpClientConfig(t,n)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),r=e=>({httpHandler:e.httpHandler()});var i=class{name;kind;values;constructor({name:e,kind:n=t.FieldPosition.HEADER,values:r=[]}){this.name=e,this.kind=n,this.values=r}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(t=>t!==e)}toString(){return this.values.map(e=>e.includes(`,`)||e.includes(` `)?`"${e}"`:e).join(`, `)}get(){return this.values}},a=class{entries={};encoding;constructor({fields:e=[],encoding:t=`utf-8`}){e.forEach(this.setField.bind(this)),this.encoding=t}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(t=>t.kind===e)}},o=class e{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||`GET`,this.hostname=e.hostname||`localhost`,this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)===`:`?e.protocol:`${e.protocol}:`:`https:`,this.path=e.path?e.path.charAt(0)===`/`?e.path:`/${e.path}`:`/`,this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(t){let n=new e({...t,headers:{...t.headers}});return n.query&&=s(n.query),n}static isInstance(e){if(!e)return!1;let t=e;return`method`in t&&`protocol`in t&&`hostname`in t&&`path`in t&&typeof t.query==`object`&&typeof t.headers==`object`}clone(){return e.clone(this)}};function s(e){return Object.keys(e).reduce((t,n)=>{let r=e[n];return{...t,[n]:Array.isArray(r)?[...r]:r}},{})}var c=class{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let t=e;return typeof t.statusCode==`number`&&typeof t.headers==`object`}};function l(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}e.Field=i,e.Fields=a,e.HttpRequest=o,e.HttpResponse=c,e.getHttpHandlerExtensionConfiguration=n,e.isValidHostname=l,e.resolveHttpHandlerRuntimeConfig=r})),m=s((e=>{var t=p();function n(e){return e}let r=e=>n=>async r=>{if(!t.HttpRequest.isInstance(r.request))return n(r);let{request:i}=r,{handlerProtocol:a=``}=e.requestHandler.metadata||{};if(a.indexOf(`h2`)>=0&&!i.headers[`:authority`])delete i.headers.host,i.headers[`:authority`]=i.hostname+(i.port?`:`+i.port:``);else if(!i.headers.host){let e=i.hostname;i.port!=null&&(e+=`:${i.port}`),i.headers.host=e}return n(r)},i={name:`hostHeaderMiddleware`,step:`build`,priority:`low`,tags:[`HOST`],override:!0};e.getHostHeaderPlugin=e=>({applyToStack:t=>{t.add(r(e),i)}}),e.hostHeaderMiddleware=r,e.hostHeaderMiddlewareOptions=i,e.resolveHostHeaderConfig=n})),h=s((e=>{let t=()=>(e,t)=>async n=>{try{let r=await e(n),{clientName:i,commandName:a,logger:o,dynamoDbDocumentClientOptions:s={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:l}=s,u=c??t.inputFilterSensitiveLog,d=l??t.outputFilterSensitiveLog,{$metadata:f,...p}=r.output;return o?.info?.({clientName:i,commandName:a,input:u(n.input),output:d(p),metadata:f}),r}catch(e){let{clientName:r,commandName:i,logger:a,dynamoDbDocumentClientOptions:o={}}=t,{overrideInputFilterSensitiveLog:s}=o,c=s??t.inputFilterSensitiveLog;throw a?.error?.({clientName:r,commandName:i,input:c(n.input),error:e,metadata:e.$metadata}),e}},n={name:`loggerMiddleware`,tags:[`LOGGER`],step:`initialize`,override:!0};e.getLoggerPlugin=e=>({applyToStack:e=>{e.add(t(),n)}}),e.loggerMiddleware=t,e.loggerMiddlewareOptions=n})),g=c({InvokeStore:()=>S,InvokeStoreBase:()=>y}),_,v,y,b,x,S,C=o((()=>{_={REQUEST_ID:Symbol.for(`_AWS_LAMBDA_REQUEST_ID`),X_RAY_TRACE_ID:Symbol.for(`_AWS_LAMBDA_X_RAY_TRACE_ID`),TENANT_ID:Symbol.for(`_AWS_LAMBDA_TENANT_ID`)},v=[`true`,`1`].includes(process.env?.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA??``),v||(globalThis.awslambda=globalThis.awslambda||{}),y=class{static PROTECTED_KEYS=_;isProtectedKey(e){return Object.values(_).includes(e)}getRequestId(){return this.get(_.REQUEST_ID)??`-`}getXRayTraceId(){return this.get(_.X_RAY_TRACE_ID)}getTenantId(){return this.get(_.TENANT_ID)}},b=class extends y{currentContext;getContext(){return this.currentContext}hasContext(){return this.currentContext!==void 0}get(e){return this.currentContext?.[e]}set(e,t){if(this.isProtectedKey(e))throw Error(`Cannot modify protected Lambda context field: ${String(e)}`);this.currentContext=this.currentContext||{},this.currentContext[e]=t}run(e,t){return this.currentContext=e,t()}},x=class e extends y{als;static async create(){let t=new e;return t.als=new(await(import(`node:async_hooks`))).AsyncLocalStorage,t}getContext(){return this.als.getStore()}hasContext(){return this.als.getStore()!==void 0}get(e){return this.als.getStore()?.[e]}set(e,t){if(this.isProtectedKey(e))throw Error(`Cannot modify protected Lambda context field: ${String(e)}`);let n=this.als.getStore();if(!n)throw Error(`No context available`);n[e]=t}run(e,t){return this.als.run(e,t)}},(function(e){let t=null;async function n(){return t||=(async()=>{let e=`AWS_LAMBDA_MAX_CONCURRENCY`in process.env?await x.create():new b;return!v&&globalThis.awslambda?.InvokeStore?globalThis.awslambda.InvokeStore:(!v&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=e),e)})(),t}e.getInstanceAsync=n,e._testing=process.env.AWS_LAMBDA_BENCHMARK_MODE===`1`?{reset:()=>{t=null,globalThis.awslambda?.InvokeStore&&delete globalThis.awslambda.InvokeStore,globalThis.awslambda={}}}:void 0})(S||={})})),w=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.recursionDetectionMiddleware=void 0;let t=(C(),d(g)),n=p(),r=`X-Amzn-Trace-Id`;e.recursionDetectionMiddleware=()=>e=>async i=>{let{request:a}=i;if(!n.HttpRequest.isInstance(a))return e(i);let o=Object.keys(a.headers??{}).find(e=>e.toLowerCase()===`x-amzn-trace-id`)??r;if(a.headers.hasOwnProperty(o))return e(i);let s=process.env.AWS_LAMBDA_FUNCTION_NAME,c=process.env._X_AMZN_TRACE_ID,l=(await t.InvokeStore.getInstanceAsync())?.getXRayTraceId()??c,u=e=>typeof e==`string`&&e.length>0;return u(s)&&u(l)&&(a.headers[r]=l),e({...i,request:a})}})),T=s((e=>{var t=w();let n={step:`build`,tags:[`RECURSION_DETECTION`],name:`recursionDetectionMiddleware`,override:!0,priority:`low`};e.getRecursionDetectionPlugin=e=>({applyToStack:e=>{e.add(t.recursionDetectionMiddleware(),n)}}),Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})})),E,D,O=o((()=>{E=f(),D=e=>e[E.SMITHY_CONTEXT_KEY]||(e[E.SMITHY_CONTEXT_KEY]={})})),k=s((e=>{var t=f();e.getSmithyContext=e=>e[t.SMITHY_CONTEXT_KEY]||(e[t.SMITHY_CONTEXT_KEY]={}),e.normalizeProvider=e=>{if(typeof e==`function`)return e;let t=Promise.resolve(e);return()=>t}})),A,j=o((()=>{A=(e,t)=>{if(!t||t.length===0)return e;let n=[];for(let r of t)for(let t of e)t.schemeId.split(`#`)[1]===r&&n.push(t);for(let t of e)n.find(({schemeId:e})=>e===t.schemeId)||n.push(t);return n}}));function M(e){let t=new Map;for(let n of e)t.set(n.schemeId,n);return t}var ee,te,ne=o((()=>{ee=k(),j(),te=(e,t)=>(n,r)=>async i=>{let a=A(e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,r,i.input)),e.authSchemePreference?await e.authSchemePreference():[]),o=M(e.httpAuthSchemes),s=(0,ee.getSmithyContext)(r),c=[];for(let n of a){let i=o.get(n.schemeId);if(!i){c.push(`HttpAuthScheme \`${n.schemeId}\` was not enabled for this service.`);continue}let a=i.identityProvider(await t.identityProviderConfigProvider(e));if(!a){c.push(`HttpAuthScheme \`${n.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:l={},signingProperties:u={}}=n.propertiesExtractor?.(e,r)||{};n.identityProperties=Object.assign(n.identityProperties||{},l),n.signingProperties=Object.assign(n.signingProperties||{},u),s.selectedHttpAuthScheme={httpAuthOption:n,identity:await a(n.identityProperties),signer:i.signer};break}if(!s.selectedHttpAuthScheme)throw Error(c.join(`
`));return n(i)}})),re,ie,ae=o((()=>{ne(),re={step:`serialize`,tags:[`HTTP_AUTH_SCHEME`],name:`httpAuthSchemeMiddleware`,override:!0,relation:`before`,toMiddleware:`endpointV2Middleware`},ie=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(te(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),re)}})})),oe=s((e=>{var t=p();let n=(e,n)=>(i,a)=>async o=>{let{response:s}=await i(o);try{return{response:s,output:await n(s,e)}}catch(e){if(Object.defineProperty(e,`$response`,{value:s,enumerable:!1,writable:!1,configurable:!1}),!(`$metadata`in e)){let n=`Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.`;try{e.message+=`
  `+n}catch{!a.logger||a.logger?.constructor?.name===`NoOpLogger`?console.warn(n):a.logger?.warn?.(n)}e.$responseBodyText!==void 0&&e.$response&&(e.$response.body=e.$responseBodyText);try{if(t.HttpResponse.isInstance(s)){let{headers:t={}}=s,n=Object.entries(t);e.$metadata={httpStatusCode:s.statusCode,requestId:r(/^x-[\w-]+-request-?id$/,n),extendedRequestId:r(/^x-[\w-]+-id-2$/,n),cfId:r(/^x-[\w-]+-cf-id$/,n)}}}catch{}}throw e}},r=(e,t)=>(t.find(([t])=>t.match(e))||[void 0,void 0])[1],i=(e,t)=>(n,r)=>async i=>{let a=e,o=r.endpointV2?.url&&a.urlParser?async()=>a.urlParser(r.endpointV2.url):a.endpoint;if(!o)throw Error(`No valid endpoint provider available.`);let s=await t(i.input,{...e,endpoint:o});return n({...i,request:s})},a={name:`deserializerMiddleware`,step:`deserialize`,tags:[`DESERIALIZER`],override:!0},o={name:`serializerMiddleware`,step:`serialize`,tags:[`SERIALIZER`],override:!0};function s(e,t,r){return{applyToStack:s=>{s.add(n(e,r),a),s.add(i(e,t),o)}}}e.deserializerMiddleware=n,e.deserializerMiddlewareOption=a,e.getSerdePlugin=s,e.serializerMiddleware=i,e.serializerMiddlewareOption=o})),se,ce,le,ue=o((()=>{se=oe(),ne(),ce={step:`serialize`,tags:[`HTTP_AUTH_SCHEME`],name:`httpAuthSchemeMiddleware`,override:!0,relation:`before`,toMiddleware:se.serializerMiddlewareOption.name},le=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(te(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),ce)}})})),de=o((()=>{ne(),ae(),ue()})),fe,pe,me,he,ge,_e=o((()=>{fe=p(),pe=k(),me=e=>e=>{throw e},he=(e,t)=>{},ge=e=>(e,t)=>async n=>{if(!fe.HttpRequest.isInstance(n.request))return e(n);let r=(0,pe.getSmithyContext)(t).selectedHttpAuthScheme;if(!r)throw Error(`No HttpAuthScheme was selected: unable to sign request`);let{httpAuthOption:{signingProperties:i={}},identity:a,signer:o}=r,s=await e({...n,request:await o.sign(n.request,a,i)}).catch((o.errorHandler||me)(i));return(o.successHandler||he)(s.response,i),s}})),ve,ye,be=o((()=>{_e(),ve={step:`finalizeRequest`,tags:[`HTTP_SIGNING`],name:`httpSigningMiddleware`,aliases:[`apiKeyMiddleware`,`tokenMiddleware`,`awsAuthMiddleware`],override:!0,relation:`after`,toMiddleware:`retryMiddleware`},ye=e=>({applyToStack:t=>{t.addRelativeTo(ge(e),ve)}})})),xe=o((()=>{_e(),be()})),Se,Ce=o((()=>{Se=e=>{if(typeof e==`function`)return e;let t=Promise.resolve(e);return()=>t}}));function we(e,t,n,r,i){return async function*(a,o,...s){let c=o,l=a.startingToken??c[n],u=!0,d;for(;u;){if(c[n]=l,i&&(c[i]=c[i]??a.pageSize),a.client instanceof e)d=await Te(t,a.client,o,a.withCommand,...s);else throw Error(`Invalid client, expected instance of ${e.name}`);yield d;let f=l;l=Ee(d,r),u=!!(l&&(!a.stopOnSameToken||l!==f))}return void 0}}var Te,Ee,De=o((()=>{Te=async(e,t,n,r=e=>e,...i)=>{let a=new e(n);return a=r(a)??a,await t.send(a,...i)},Ee=(e,t)=>{let n=e,r=t.split(`.`);for(let e of r){if(!n||typeof n!=`object`)return;n=n[e]}return n}})),Oe=s((e=>{e.isArrayBuffer=e=>typeof ArrayBuffer==`function`&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)===`[object ArrayBuffer]`})),ke=s((e=>{var t=Oe(),n=require(`buffer`);e.fromArrayBuffer=(e,r=0,i=e.byteLength-r)=>{if(!t.isArrayBuffer(e))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return n.Buffer.from(e,r,i)},e.fromString=(e,t)=>{if(typeof e!=`string`)throw TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?n.Buffer.from(e,t):n.Buffer.from(e)}})),Ae=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.fromBase64=void 0;let t=ke(),n=/^[A-Za-z0-9+/]*={0,2}$/;e.fromBase64=e=>{if(e.length*3%4!=0)throw TypeError(`Incorrect padding on base64 string.`);if(!n.exec(e))throw TypeError(`Invalid base64 string.`);let r=(0,t.fromString)(e,`base64`);return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}})),N=s((e=>{var t=ke();let n=e=>{let n=t.fromString(e,`utf8`);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT)};e.fromUtf8=n,e.toUint8Array=e=>typeof e==`string`?n(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),e.toUtf8=e=>{if(typeof e==`string`)return e;if(typeof e!=`object`||typeof e.byteOffset!=`number`||typeof e.byteLength!=`number`)throw Error(`@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.`);return t.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength).toString(`utf8`)}})),je=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.toBase64=void 0;let t=ke(),n=N();e.toBase64=e=>{let r;if(r=typeof e==`string`?(0,n.fromUtf8)(e):e,typeof r!=`object`||typeof r.byteOffset!=`number`||typeof r.byteLength!=`number`)throw Error(`@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.`);return(0,t.fromArrayBuffer)(r.buffer,r.byteOffset,r.byteLength).toString(`base64`)}})),Me=s((e=>{var t=Ae(),n=je();Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),Object.keys(n).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})})),Ne=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ChecksumStream=void 0;let t=Me(),n=require(`stream`);e.ChecksumStream=class extends n.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:e,checksum:n,source:r,checksumSourceLocation:i,base64Encoder:a}){if(super(),typeof r.pipe==`function`)this.source=r;else throw Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);this.base64Encoder=a??t.toBase64,this.expectedChecksum=e,this.checksum=n,this.checksumSourceLocation=i,this.source.pipe(this)}_read(e){}_write(e,t,n){try{this.checksum.update(e),this.push(e)}catch(e){return n(e)}return n()}async _final(e){try{let t=await this.checksum.digest(),n=this.base64Encoder(t);if(this.expectedChecksum!==n)return e(Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(t){return e(t)}return this.push(null),e()}}})),Pe=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.isBlob=e.isReadableStream=void 0,e.isReadableStream=e=>typeof ReadableStream==`function`&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream),e.isBlob=e=>typeof Blob==`function`&&(e?.constructor?.name===Blob.name||e instanceof Blob)})),Fe=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ChecksumStream=void 0;let t=typeof ReadableStream==`function`?ReadableStream:function(){};e.ChecksumStream=class extends t{}})),Ie=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createChecksumStream=void 0;let t=Me(),n=Pe(),r=Fe();e.createChecksumStream=({expectedChecksum:e,checksum:i,source:a,checksumSourceLocation:o,base64Encoder:s})=>{if(!(0,n.isReadableStream)(a))throw Error(`@smithy/util-stream: unsupported source type ${a?.constructor?.name??a} in ChecksumStream.`);let c=s??t.toBase64;if(typeof TransformStream!=`function`)throw Error(`@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.`);let l=new TransformStream({start(){},async transform(e,t){i.update(e),t.enqueue(e)},async flush(t){let n=c(await i.digest());if(e!==n){let r=Error(`Checksum mismatch: expected "${e}" but received "${n}" in response header "${o}".`);t.error(r)}else t.terminate()}});a.pipeThrough(l);let u=l.readable;return Object.setPrototypeOf(u,r.ChecksumStream.prototype),u}})),Le=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createChecksumStream=i;let t=Pe(),n=Ne(),r=Ie();function i(e){return typeof ReadableStream==`function`&&(0,t.isReadableStream)(e.source)?(0,r.createChecksumStream)(e):new n.ChecksumStream(e)}})),Re=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ByteArrayCollector=void 0,e.ByteArrayCollector=class{allocByteArray;byteLength=0;byteArrays=[];constructor(e){this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){let e=this.byteArrays[0];return this.reset(),e}let e=this.allocByteArray(this.byteLength),t=0;for(let n=0;n<this.byteArrays.length;++n){let r=this.byteArrays[n];e.set(r,t),t+=r.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}}})),ze=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createBufferedReadable=void 0,e.createBufferedReadableStream=n,e.merge=r,e.flush=i,e.sizeOf=a,e.modeOf=o;let t=Re();function n(e,n,s){let c=e.getReader(),l=!1,u=0,d=[``,new t.ByteArrayCollector(e=>new Uint8Array(e))],f=-1,p=async e=>{let{value:t,done:m}=await c.read(),h=t;if(m){if(f!==-1){let t=i(d,f);a(t)>0&&e.enqueue(t)}e.close()}else{let t=o(h,!1);if(f!==t&&(f>=0&&e.enqueue(i(d,f)),f=t),f===-1){e.enqueue(h);return}let c=a(h);u+=c;let m=a(d[f]);if(c>=n&&m===0)e.enqueue(h);else{let t=r(d,f,h);!l&&u>n*2&&(l=!0,s?.warn(`@smithy/util-stream - stream chunk size ${c} is below threshold of ${n}, automatically buffering.`)),t>=n?e.enqueue(i(d,f)):await p(e)}}};return new ReadableStream({pull:p})}e.createBufferedReadable=n;function r(e,t,n){switch(t){case 0:return e[0]+=n,a(e[0]);case 1:case 2:return e[t].push(n),a(e[t])}}function i(e,t){switch(t){case 0:let n=e[0];return e[0]=``,n;case 1:case 2:return e[t].flush()}throw Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function a(e){return e?.byteLength??e?.length??0}function o(e,t=!0){return t&&typeof Buffer<`u`&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e==`string`?0:-1}})),Be=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createBufferedReadable=a;let t=require(`node:stream`),n=Re(),r=ze(),i=Pe();function a(e,a,o){if((0,i.isReadableStream)(e))return(0,r.createBufferedReadableStream)(e,a,o);let s=new t.Readable({read(){}}),c=!1,l=0,u=[``,new n.ByteArrayCollector(e=>new Uint8Array(e)),new n.ByteArrayCollector(e=>Buffer.from(new Uint8Array(e)))],d=-1;return e.on(`data`,e=>{let t=(0,r.modeOf)(e,!0);if(d!==t&&(d>=0&&s.push((0,r.flush)(u,d)),d=t),d===-1){s.push(e);return}let n=(0,r.sizeOf)(e);l+=n;let i=(0,r.sizeOf)(u[d]);if(n>=a&&i===0)s.push(e);else{let t=(0,r.merge)(u,d,e);!c&&l>a*2&&(c=!0,o?.warn(`@smithy/util-stream - stream chunk size ${n} is below threshold of ${a}, automatically buffering.`)),t>=a&&s.push((0,r.flush)(u,d))}}),e.on(`end`,()=>{if(d!==-1){let e=(0,r.flush)(u,d);(0,r.sizeOf)(e)>0&&s.push(e)}s.push(null)}),s}})),Ve=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getAwsChunkedEncodingStream=void 0,e.getAwsChunkedEncodingStream=(e,t)=>{let{base64Encoder:n,bodyLengthChecker:r,checksumAlgorithmFn:i,checksumLocationName:a,streamHasher:o}=t,s=n!==void 0&&r!==void 0&&i!==void 0&&a!==void 0&&o!==void 0,c=s?o(i,e):void 0,l=e.getReader();return new ReadableStream({async pull(e){let{value:t,done:i}=await l.read();if(i){if(e.enqueue(`0\r
`),s){let t=n(await c);e.enqueue(`${a}:${t}\r\n`),e.enqueue(`\r
`)}e.close()}else e.enqueue(`${(r(t)||0).toString(16)}\r\n${t}\r\n`)}})}})),He=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getAwsChunkedEncodingStream=i;let t=require(`node:stream`),n=Ve(),r=Pe();function i(e,i){let a=e,o=e;if((0,r.isReadableStream)(o))return(0,n.getAwsChunkedEncodingStream)(o,i);let{base64Encoder:s,bodyLengthChecker:c,checksumAlgorithmFn:l,checksumLocationName:u,streamHasher:d}=i,f=s!==void 0&&l!==void 0&&u!==void 0&&d!==void 0,p=f?d(l,a):void 0,m=new t.Readable({read:()=>{}});return a.on(`data`,e=>{let t=c(e)||0;t!==0&&(m.push(`${t.toString(16)}\r\n`),m.push(e),m.push(`\r
`))}),a.on(`end`,async()=>{if(m.push(`0\r
`),f){let e=s(await p);m.push(`${u}:${e}\r\n`),m.push(`\r
`)}m.push(null)}),m}})),Ue=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.headStream=t;async function t(e,t){let n=0,r=[],i=e.getReader(),a=!1;for(;!a;){let{done:e,value:o}=await i.read();if(o&&(r.push(o),n+=o?.byteLength??0),n>=t)break;a=e}i.releaseLock();let o=new Uint8Array(Math.min(t,n)),s=0;for(let e of r){if(e.byteLength>o.byteLength-s){o.set(e.subarray(0,o.byteLength-s),s);break}else o.set(e,s);s+=e.length}return o}})),We=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.headStream=void 0;let t=require(`stream`),n=Ue(),r=Pe();e.headStream=(e,t)=>(0,r.isReadableStream)(e)?(0,n.headStream)(e,t):new Promise((n,r)=>{let a=new i;a.limit=t,e.pipe(a),e.on(`error`,e=>{a.end(),r(e)}),a.on(`error`,r),a.on(`finish`,function(){n(new Uint8Array(Buffer.concat(this.buffers)))})});var i=class extends t.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(e,t,n){if(this.buffers.push(e),this.bytesBuffered+=e.byteLength??0,this.bytesBuffered>=this.limit){let e=this.bytesBuffered-this.limit,t=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=t.subarray(0,t.byteLength-e),this.emit(`finish`)}n()}}})),Ge=s((e=>{let t=e=>encodeURIComponent(e).replace(/[!'()*]/g,n),n=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;e.escapeUri=t,e.escapeUriPath=e=>e.split(`/`).map(t).join(`/`)})),Ke=s((e=>{var t=Ge();function n(e){let n=[];for(let r of Object.keys(e).sort()){let i=e[r];if(r=t.escapeUri(r),Array.isArray(i))for(let e=0,a=i.length;e<a;e++)n.push(`${r}=${t.escapeUri(i[e])}`);else{let e=r;(i||typeof i==`string`)&&(e+=`=${t.escapeUri(i)}`),n.push(e)}}return n.join(`&`)}e.buildQueryString=n})),qe=s((e=>{var t=p(),n=Ke(),r=require(`http`),i=require(`https`),a=require(`stream`),o=require(`http2`);let s=[`ECONNRESET`,`EPIPE`,`ETIMEDOUT`],c=e=>{let t={};for(let n of Object.keys(e)){let r=e[n];t[n]=Array.isArray(r)?r.join(`,`):r}return t},l={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},u=1e3,d=(e,t,n=0)=>{if(!n)return-1;let r=r=>{let i=l.setTimeout(()=>{e.destroy(),t(Object.assign(Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${n} ms.`),{name:`TimeoutError`}))},n-r),a=e=>{e?.connecting?e.on(`connect`,()=>{l.clearTimeout(i)}):l.clearTimeout(i)};e.socket?a(e.socket):e.on(`socket`,a)};return n<2e3?(r(0),0):l.setTimeout(r.bind(null,u),u)},f=(e,t,n=0,r,i)=>n?l.setTimeout(()=>{let a=`@smithy/node-http-handler - [${r?`ERROR`:`WARN`}] a request has exceeded the configured ${n} ms requestTimeout.`;if(r){let n=Object.assign(Error(a),{name:`TimeoutError`,code:`ETIMEDOUT`});e.destroy(n),t(n)}else a+=` Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.`,i?.warn?.(a)},n):-1,m=(e,{keepAlive:t,keepAliveMsecs:n},r=3e3)=>{if(t!==!0)return-1;let i=()=>{e.socket?e.socket.setKeepAlive(t,n||0):e.on(`socket`,e=>{e.setKeepAlive(t,n||0)})};return r===0?(i(),0):l.setTimeout(i,r)},h=3e3,g=(e,t,n=0)=>{let r=r=>{let i=n-r,a=()=>{e.destroy(),t(Object.assign(Error(`@smithy/node-http-handler - the request socket timed out after ${n} ms of inactivity (configured by client requestHandler).`),{name:`TimeoutError`}))};e.socket?(e.socket.setTimeout(i,a),e.on(`close`,()=>e.socket?.removeListener(`timeout`,a))):e.setTimeout(i,a)};return 0<n&&n<6e3?(r(0),0):l.setTimeout(r.bind(null,n===0?0:h),h)},_=6e3;async function v(e,t,n=_,r=!1){let i=t.headers??{},a=i.Expect||i.expect,o=-1,s=!0;!r&&a===`100-continue`&&(s=await Promise.race([new Promise(e=>{o=Number(l.setTimeout(()=>e(!0),Math.max(_,n)))}),new Promise(t=>{e.on(`continue`,()=>{l.clearTimeout(o),t(!0)}),e.on(`response`,()=>{l.clearTimeout(o),t(!1)}),e.on(`error`,()=>{l.clearTimeout(o),t(!1)})})])),s&&y(e,t.body)}function y(e,t){if(t instanceof a.Readable){t.pipe(e);return}if(t){let n=Buffer.isBuffer(t);if(n||typeof t==`string`){n&&t.byteLength===0?e.end():e.end(t);return}let r=t;if(typeof r==`object`&&r.buffer&&typeof r.byteOffset==`number`&&typeof r.byteLength==`number`){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var b=class e{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:`http/1.1`};static create(t){return typeof t?.handle==`function`?t:new e(t)}static checkSocketUsage(e,t,n=console){let{sockets:r,requests:i,maxSockets:a}=e;if(typeof a!=`number`||a===1/0||Date.now()-15e3<t)return t;if(r&&i)for(let e in r){let t=r[e]?.length??0,o=i[e]?.length??0;if(t>=a&&o>=2*a)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${t} and ${o} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return t}constructor(e){this.configProvider=new Promise((t,n)=>{typeof e==`function`?e().then(e=>{t(this.resolveDefaultConfig(e))}).catch(n):t(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{requestTimeout:t,connectionTimeout:n,socketTimeout:a,socketAcquisitionWarningTimeout:o,httpAgent:s,httpsAgent:c,throwOnRequestTimeout:l,logger:u}=e||{};return{connectionTimeout:n,requestTimeout:t,socketTimeout:a,socketAcquisitionWarningTimeout:o,throwOnRequestTimeout:l,httpAgent:s instanceof r.Agent||typeof s?.destroy==`function`?(this.externalAgent=!0,s):new r.Agent({keepAlive:!0,maxSockets:50,...s}),httpsAgent:c instanceof i.Agent||typeof c?.destroy==`function`?(this.externalAgent=!0,c):new i.Agent({keepAlive:!0,maxSockets:50,...c}),logger:u}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(a,{abortSignal:o,requestTimeout:u}={}){return this.config||=await this.configProvider,new Promise((p,h)=>{let _=this.config,y,b=[],x=async e=>{await y,b.forEach(l.clearTimeout),p(e)},S=async e=>{await y,b.forEach(l.clearTimeout),h(e)};if(o?.aborted){let e=Error(`Request aborted`);e.name=`AbortError`,S(e);return}let C=a.protocol===`https:`,w=a.headers??{},T=(w.Expect??w.expect)===`100-continue`,E=C?_.httpsAgent:_.httpAgent;T&&!this.externalAgent&&(E=new(C?i.Agent:r.Agent)({keepAlive:!1,maxSockets:1/0})),b.push(l.setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(E,this.socketWarningTimestamp,_.logger)},_.socketAcquisitionWarningTimeout??(_.requestTimeout??2e3)+(_.connectionTimeout??1e3)));let D=n.buildQueryString(a.query||{}),O;(a.username!=null||a.password!=null)&&(O=`${a.username??``}:${a.password??``}`);let k=a.path;D&&(k+=`?${D}`),a.fragment&&(k+=`#${a.fragment}`);let A=a.hostname??``;A=A[0]===`[`&&A.endsWith(`]`)?a.hostname.slice(1,-1):a.hostname;let j={headers:a.headers,host:A,method:a.method,path:k,port:a.port,agent:E,auth:O},M=(C?i.request:r.request)(j,e=>{x({response:new t.HttpResponse({statusCode:e.statusCode||-1,reason:e.statusMessage,headers:c(e.headers),body:e})})});if(M.on(`error`,e=>{s.includes(e.code)?S(Object.assign(e,{name:`TimeoutError`})):S(e)}),o){let e=()=>{M.destroy();let e=Error(`Request aborted`);e.name=`AbortError`,S(e)};if(typeof o.addEventListener==`function`){let t=o;t.addEventListener(`abort`,e,{once:!0}),M.once(`close`,()=>t.removeEventListener(`abort`,e))}else o.onabort=e}let ee=u??_.requestTimeout;b.push(d(M,S,_.connectionTimeout)),b.push(f(M,S,ee,_.throwOnRequestTimeout,_.logger??console)),b.push(g(M,S,_.socketTimeout));let te=j.agent;typeof te==`object`&&`keepAlive`in te&&b.push(m(M,{keepAlive:te.keepAlive,keepAliveMsecs:te.keepAliveMsecs})),y=v(M,a,ee,this.externalAgent).catch(e=>(b.forEach(l.clearTimeout),h(e)))})}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:t}))}httpHandlerConfigs(){return this.config??{}}},x=class{sessions=[];constructor(e){this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(t=>t!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let t of this.sessions)t===e&&(t.destroyed||t.destroy())}},S=class{constructor(e){if(this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw RangeError(`maxConcurrency must be greater than zero.`)}config;sessionCache=new Map;lease(e,t){let n=this.getUrlString(e),r=this.sessionCache.get(n);if(r){let e=r.poll();if(e&&!this.config.disableConcurrency)return e}let i=o.connect(n);this.config.maxConcurrency&&i.settings({maxConcurrentStreams:this.config.maxConcurrency},t=>{if(t)throw Error(`Fail to set maxConcurrentStreams to `+this.config.maxConcurrency+`when creating new session for `+e.destination.toString())}),i.unref();let a=()=>{i.destroy(),this.deleteSession(n,i)};i.on(`goaway`,a),i.on(`error`,a),i.on(`frameError`,a),i.on(`close`,()=>this.deleteSession(n,i)),t.requestTimeout&&i.setTimeout(t.requestTimeout,a);let s=this.sessionCache.get(n)||new x;return s.offerLast(i),this.sessionCache.set(n,s),i}deleteSession(e,t){let n=this.sessionCache.get(e);n&&n.contains(t)&&(n.remove(t),this.sessionCache.set(e,n))}release(e,t){let n=this.getUrlString(e);this.sessionCache.get(n)?.offerLast(t)}destroy(){for(let[e,t]of this.sessionCache){for(let e of t)e.destroyed||e.destroy(),t.remove(e);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(e&&e<=0)throw RangeError(`maxConcurrentStreams must be greater than zero.`);this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}},C=class e{config;configProvider;metadata={handlerProtocol:`h2`};connectionManager=new S({});static create(t){return typeof t?.handle==`function`?t:new e(t)}constructor(e){this.configProvider=new Promise((t,n)=>{typeof e==`function`?e().then(e=>{t(e||{})}).catch(n):t(e||{})})}destroy(){this.connectionManager.destroy()}async handle(e,{abortSignal:r,requestTimeout:i}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:a,disableConcurrentStreams:s}=this.config,l=i??a;return new Promise((i,a)=>{let u=!1,d,f=async e=>{await d,i(e)},p=async e=>{await d,a(e)};if(r?.aborted){u=!0;let e=Error(`Request aborted`);e.name=`AbortError`,p(e);return}let{hostname:m,method:h,port:g,protocol:_,query:y}=e,b=``;(e.username!=null||e.password!=null)&&(b=`${e.username??``}:${e.password??``}@`);let x=`${_}//${b}${m}${g?`:${g}`:``}`,S={destination:new URL(x)},C=this.connectionManager.lease(S,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:s||!1}),w=e=>{s&&this.destroySession(C),u=!0,p(e)},T=n.buildQueryString(y||{}),E=e.path;T&&(E+=`?${T}`),e.fragment&&(E+=`#${e.fragment}`);let D=C.request({...e.headers,[o.constants.HTTP2_HEADER_PATH]:E,[o.constants.HTTP2_HEADER_METHOD]:h});if(C.ref(),D.on(`response`,e=>{let n=new t.HttpResponse({statusCode:e[`:status`]||-1,headers:c(e),body:D});u=!0,f({response:n}),s&&(C.close(),this.connectionManager.deleteSession(x,C))}),l&&D.setTimeout(l,()=>{D.close();let e=Error(`Stream timed out because of no activity for ${l} ms`);e.name=`TimeoutError`,w(e)}),r){let e=()=>{D.close();let e=Error(`Request aborted`);e.name=`AbortError`,w(e)};if(typeof r.addEventListener==`function`){let t=r;t.addEventListener(`abort`,e,{once:!0}),D.once(`close`,()=>t.removeEventListener(`abort`,e))}else r.onabort=e}D.on(`frameError`,(e,t,n)=>{w(Error(`Frame type id ${e} in stream id ${n} has failed with code ${t}.`))}),D.on(`error`,w),D.on(`aborted`,()=>{w(Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${D.rstCode}.`))}),D.on(`close`,()=>{C.unref(),s&&C.destroy(),u||w(Error(`Unexpected error: http2 request did not get a response`))}),d=v(D,e,l)})}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:t}))}httpHandlerConfigs(){return this.config??{}}destroySession(e){e.destroyed||e.destroy()}},w=class extends a.Writable{bufferedBytes=[];_write(e,t,n){this.bufferedBytes.push(e),n()}};let T=e=>E(e)?D(e):new Promise((t,n)=>{let r=new w;e.pipe(r),e.on(`error`,e=>{r.end(),n(e)}),r.on(`error`,n),r.on(`finish`,function(){t(new Uint8Array(Buffer.concat(this.bufferedBytes)))})}),E=e=>typeof ReadableStream==`function`&&e instanceof ReadableStream;async function D(e){let t=[],n=e.getReader(),r=!1,i=0;for(;!r;){let{done:e,value:a}=await n.read();a&&(t.push(a),i+=a.length),r=e}let a=new Uint8Array(i),o=0;for(let e of t)a.set(e,o),o+=e.length;return a}e.DEFAULT_REQUEST_TIMEOUT=0,e.NodeHttp2Handler=C,e.NodeHttpHandler=b,e.streamCollector=T})),Je=s((e=>{var t=p(),n=Ke(),r=Me();function i(e,t){return new Request(e,t)}function a(e=0){return new Promise((t,n)=>{e&&setTimeout(()=>{let t=Error(`Request did not complete within ${e} ms`);t.name=`TimeoutError`,n(t)},e)})}let o={supported:void 0};var s=class e{config;configProvider;static create(t){return typeof t?.handle==`function`?t:new e(t)}constructor(e){typeof e==`function`?this.configProvider=e().then(e=>e||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),o.supported===void 0&&(o.supported=typeof Request<`u`&&`keepalive`in i(`https://[::1]`))}destroy(){}async handle(e,{abortSignal:r,requestTimeout:s}={}){this.config||=await this.configProvider;let c=s??this.config.requestTimeout,l=this.config.keepAlive===!0,u=this.config.credentials;if(r?.aborted){let e=Error(`Request aborted`);return e.name=`AbortError`,Promise.reject(e)}let d=e.path,f=n.buildQueryString(e.query||{});f&&(d+=`?${f}`),e.fragment&&(d+=`#${e.fragment}`);let p=``;(e.username!=null||e.password!=null)&&(p=`${e.username??``}:${e.password??``}@`);let{port:m,method:h}=e,g=`${e.protocol}//${p}${e.hostname}${m?`:${m}`:``}${d}`,_=h===`GET`||h===`HEAD`?void 0:e.body,v={body:_,headers:new Headers(e.headers),method:h,credentials:u};this.config?.cache&&(v.cache=this.config.cache),_&&(v.duplex=`half`),typeof AbortController<`u`&&(v.signal=r),o.supported&&(v.keepalive=l),typeof this.config.requestInit==`function`&&Object.assign(v,this.config.requestInit(e));let y=()=>{},b=i(g,v),x=[fetch(b).then(e=>{let n=e.headers,r={};for(let e of n.entries())r[e[0]]=e[1];return e.body==null?e.blob().then(n=>({response:new t.HttpResponse({headers:r,reason:e.statusText,statusCode:e.status,body:n})})):{response:new t.HttpResponse({headers:r,reason:e.statusText,statusCode:e.status,body:e.body})}}),a(c)];return r&&x.push(new Promise((e,t)=>{let n=()=>{let e=Error(`Request aborted`);e.name=`AbortError`,t(e)};if(typeof r.addEventListener==`function`){let e=r;e.addEventListener(`abort`,n,{once:!0}),y=()=>e.removeEventListener(`abort`,n)}else r.onabort=n})),Promise.race(x).finally(y)}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=t,n))}httpHandlerConfigs(){return this.config??{}}};let c=async e=>typeof Blob==`function`&&e instanceof Blob||e.constructor?.name===`Blob`?Blob.prototype.arrayBuffer===void 0?l(e):new Uint8Array(await e.arrayBuffer()):u(e);async function l(e){let t=await d(e),n=r.fromBase64(t);return new Uint8Array(n)}async function u(e){let t=[],n=e.getReader(),r=!1,i=0;for(;!r;){let{done:e,value:a}=await n.read();a&&(t.push(a),i+=a.length),r=e}let a=new Uint8Array(i),o=0;for(let e of t)a.set(e,o),o+=e.length;return a}function d(e){return new Promise((t,n)=>{let r=new FileReader;r.onloadend=()=>{if(r.readyState!==2)return n(Error(`Reader aborted too early`));let e=r.result??``,i=e.indexOf(`,`),a=i>-1?i+1:e.length;t(e.substring(a))},r.onabort=()=>n(Error(`Read aborted`)),r.onerror=()=>n(r.error),r.readAsDataURL(e)})}e.FetchHttpHandler=s,e.keepAliveSupport=o,e.streamCollector=c})),Ye=s((e=>{let t={},n={};for(let e=0;e<256;e++){let r=e.toString(16).toLowerCase();r.length===1&&(r=`0${r}`),t[e]=r,n[r]=e}function r(e){if(e.length%2!=0)throw Error(`Hex encoded strings must have an even number length`);let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let i=e.slice(r,r+2).toLowerCase();if(i in n)t[r/2]=n[i];else throw Error(`Cannot decode unrecognized sequence ${i} as hexadecimal`)}return t}function i(e){let n=``;for(let r=0;r<e.byteLength;r++)n+=t[e[r]];return n}e.fromHex=r,e.toHex=i})),Xe=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.sdkStreamMixin=void 0;let t=Je(),n=Me(),r=Ye(),i=N(),a=Pe(),o=`The stream has already been transformed.`;e.sdkStreamMixin=e=>{if(!s(e)&&!(0,a.isReadableStream)(e)){let t=e?.__proto__?.constructor?.name||e;throw Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${t}`)}let c=!1,l=async()=>{if(c)throw Error(o);return c=!0,await(0,t.streamCollector)(e)},u=e=>{if(typeof e.stream!=`function`)throw Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return e.stream()};return Object.assign(e,{transformToByteArray:l,transformToString:async e=>{let t=await l();if(e===`base64`)return(0,n.toBase64)(t);if(e===`hex`)return(0,r.toHex)(t);if(e===void 0||e===`utf8`||e===`utf-8`)return(0,i.toUtf8)(t);if(typeof TextDecoder==`function`)return new TextDecoder(e).decode(t);throw Error(`TextDecoder is not available, please make sure polyfill is provided.`)},transformToWebStream:()=>{if(c)throw Error(o);if(c=!0,s(e))return u(e);if((0,a.isReadableStream)(e))return e;throw Error(`Cannot transform payload to web stream, got ${e}`)}})};let s=e=>typeof Blob==`function`&&e instanceof Blob})),Ze=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.sdkStreamMixin=void 0;let t=qe(),n=ke(),r=require(`stream`),i=Xe(),a=`The stream has already been transformed.`;e.sdkStreamMixin=e=>{if(!(e instanceof r.Readable))try{return(0,i.sdkStreamMixin)(e)}catch{let t=e?.__proto__?.constructor?.name||e;throw Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${t}`)}let o=!1,s=async()=>{if(o)throw Error(a);return o=!0,await(0,t.streamCollector)(e)};return Object.assign(e,{transformToByteArray:s,transformToString:async e=>{let t=await s();return e===void 0||Buffer.isEncoding(e)?(0,n.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString(e):new TextDecoder(e).decode(t)},transformToWebStream:()=>{if(o)throw Error(a);if(e.readableFlowing!==null)throw Error(`The stream has been consumed by other callbacks.`);if(typeof r.Readable.toWeb!=`function`)throw Error(`Readable.toWeb() is not supported. Please ensure a polyfill is available.`);return o=!0,r.Readable.toWeb(e)}})}})),Qe=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.splitStream=t;async function t(e){return typeof e.stream==`function`&&(e=e.stream()),e.tee()}})),$e=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.splitStream=i;let t=require(`stream`),n=Qe(),r=Pe();async function i(e){if((0,r.isReadableStream)(e)||(0,r.isBlob)(e))return(0,n.splitStream)(e);let i=new t.PassThrough,a=new t.PassThrough;return e.pipe(i),e.pipe(a),[i,a]}})),et=s((e=>{var t=Me(),n=N(),r=Ne(),i=Le(),a=Be(),o=He(),s=We(),c=Ze(),l=$e(),u=Pe(),d=class e extends Uint8Array{static fromString(r,i=`utf-8`){if(typeof r==`string`)return i===`base64`?e.mutate(t.fromBase64(r)):e.mutate(n.fromUtf8(r));throw Error(`Unsupported conversion from ${typeof r} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(e=`utf-8`){return e===`base64`?t.toBase64(this):n.toUtf8(this)}};Object.defineProperty(e,`isBlob`,{enumerable:!0,get:function(){return u.isBlob}}),Object.defineProperty(e,`isReadableStream`,{enumerable:!0,get:function(){return u.isReadableStream}}),e.Uint8ArrayBlobAdapter=d,Object.keys(r).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}),Object.keys(i).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}),Object.keys(a).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})}),Object.keys(o).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})}),Object.keys(s).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})}),Object.keys(c).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})}),Object.keys(l).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})})})),tt,nt,rt=o((()=>{tt=et(),nt=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return tt.Uint8ArrayBlobAdapter.mutate(e);if(!e)return tt.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let n=t.streamCollector(e);return tt.Uint8ArrayBlobAdapter.mutate(await n)}}));function it(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return`%`+e.charCodeAt(0).toString(16).toUpperCase()})}var at=o((()=>{})),ot,st=o((()=>{ot=e=>typeof e==`function`?e():e})),ct,lt=o((()=>{ct=(e,t,n,r,i)=>({name:t,namespace:e,traits:n,input:r,output:i})})),ut,dt,ft,pt,mt=o((()=>{ut=p(),dt=k(),lt(),ft=e=>(t,n)=>async r=>{let{response:i}=await t(r),{operationSchema:a}=(0,dt.getSmithyContext)(n),[,o,s,c,l,u]=a??[];try{return{response:i,output:await e.protocol.deserializeResponse(ct(o,s,c,l,u),{...e,...n},i)}}catch(e){if(Object.defineProperty(e,`$response`,{value:i,enumerable:!1,writable:!1,configurable:!1}),!(`$metadata`in e)){let t=`Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.`;try{e.message+=`
  `+t}catch{!n.logger||n.logger?.constructor?.name===`NoOpLogger`?console.warn(t):n.logger?.warn?.(t)}e.$responseBodyText!==void 0&&e.$response&&(e.$response.body=e.$responseBodyText);try{if(ut.HttpResponse.isInstance(i)){let{headers:t={}}=i,n=Object.entries(t);e.$metadata={httpStatusCode:i.statusCode,requestId:pt(/^x-[\w-]+-request-?id$/,n),extendedRequestId:pt(/^x-[\w-]+-id-2$/,n),cfId:pt(/^x-[\w-]+-cf-id$/,n)}}}catch{}}throw e}},pt=(e,t)=>(t.find(([t])=>t.match(e))||[void 0,void 0])[1]})),ht,gt,_t=o((()=>{ht=k(),lt(),gt=e=>(t,n)=>async r=>{let{operationSchema:i}=(0,ht.getSmithyContext)(n),[,a,o,s,c,l]=i??[],u=n.endpointV2?.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint,d=await e.protocol.serializeRequest(ct(a,o,s,c,l),r.input,{...e,...n,endpoint:u});return t({...r,request:d})}}));function vt(e){return{applyToStack:t=>{t.add(gt(e),bt),t.add(ft(e),yt),e.protocol.setSerdeContext(e)}}}var yt,bt,xt=o((()=>{mt(),_t(),yt={name:`deserializerMiddleware`,step:`deserialize`,tags:[`DESERIALIZER`],override:!0},bt={name:`serializerMiddleware`,step:`serialize`,tags:[`SERIALIZER`],override:!0}})),St,Ct=o((()=>{St=class{name;namespace;traits;static assign(e,t){return Object.assign(e,t)}static[Symbol.hasInstance](e){let t=this.prototype.isPrototypeOf(e);return!t&&typeof e==`object`&&e?e.symbol===this.symbol:t}getName(){return this.namespace+`#`+this.name}}})),wt,Tt,Et=o((()=>{Ct(),wt=class e extends St{static symbol=Symbol.for(`@smithy/lis`);name;traits;valueSchema;symbol=e.symbol},Tt=(e,t,n,r)=>St.assign(new wt,{name:t,namespace:e,traits:n,valueSchema:r})})),Dt,Ot,kt=o((()=>{Ct(),Dt=class e extends St{static symbol=Symbol.for(`@smithy/map`);name;traits;keySchema;valueSchema;symbol=e.symbol},Ot=(e,t,n,r,i)=>St.assign(new Dt,{name:t,namespace:e,traits:n,keySchema:r,valueSchema:i})})),At,jt,Mt=o((()=>{Ct(),At=class e extends St{static symbol=Symbol.for(`@smithy/ope`);name;traits;input;output;symbol=e.symbol},jt=(e,t,n,r,i)=>St.assign(new At,{name:t,namespace:e,traits:n,input:r,output:i})})),Nt,Pt,Ft=o((()=>{Ct(),Nt=class e extends St{static symbol=Symbol.for(`@smithy/str`);name;traits;memberNames;memberList;symbol=e.symbol},Pt=(e,t,n,r,i)=>St.assign(new Nt,{name:t,namespace:e,traits:n,memberNames:r,memberList:i})})),It,Lt,Rt=o((()=>{Ct(),Ft(),It=class e extends Nt{static symbol=Symbol.for(`@smithy/err`);ctor;symbol=e.symbol},Lt=(e,t,n,r,i,a)=>St.assign(new It,{name:t,namespace:e,traits:n,memberNames:r,memberList:i,ctor:null})}));function zt(e){if(typeof e==`object`)return e;e|=0;let t={},n=0;for(let r of[`httpLabel`,`idempotent`,`idempotencyToken`,`sensitive`,`httpPayload`,`httpResponseCode`,`httpQueryParams`])(e>>n++&1)==1&&(t[r]=1);return t}var Bt=o((()=>{}));function Vt(e,t){return e instanceof P?Object.assign(e,{memberName:t,_isMemberSchema:!0}):new P(e,t)}var Ht,P,Ut,Wt,Gt=o((()=>{st(),Bt(),Ht={it:Symbol.for(`@smithy/nor-struct-it`)},P=class e{ref;memberName;static symbol=Symbol.for(`@smithy/nor`);symbol=e.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(t,n){this.ref=t,this.memberName=n;let r=[],i=t,a=t;for(this._isMemberSchema=!1;Ut(i);)r.push(i[1]),i=i[0],a=ot(i),this._isMemberSchema=!0;if(r.length>0){this.memberTraits={};for(let e=r.length-1;e>=0;--e){let t=r[e];Object.assign(this.memberTraits,zt(t))}}else this.memberTraits=0;if(a instanceof e){let e=this.memberTraits;Object.assign(this,a),this.memberTraits=Object.assign({},e,a.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=n??a.memberName;return}if(this.schema=ot(a),Wt(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(a),this.traits=0),this._isMemberSchema&&!n)throw Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){let t=this.prototype.isPrototypeOf(e);return!t&&typeof e==`object`&&e?e.symbol===this.symbol:t}static of(t){let n=ot(t);if(n instanceof e)return n;if(Ut(n)){let[r,i]=n;if(r instanceof e)return Object.assign(r.getMergedTraits(),zt(i)),r;throw Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new e(n)}getSchema(){let e=this.schema;return Array.isArray(e)&&e[0]===0?e[4]:e}getName(e=!1){let{name:t}=this;return!e&&t&&t.includes(`#`)?t.split(`#`)[1]:t||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let e=this.getSchema();return typeof e==`number`?e>=64&&e<128:e[0]===1}isMapSchema(){let e=this.getSchema();return typeof e==`number`?e>=128&&e<=255:e[0]===2}isStructSchema(){let e=this.getSchema();if(typeof e!=`object`)return!1;let t=e[0];return t===3||t===-3||t===4}isUnionSchema(){let e=this.getSchema();return typeof e==`object`?e[0]===4:!1}isBlobSchema(){let e=this.getSchema();return e===21||e===42}isTimestampSchema(){let e=this.getSchema();return typeof e==`number`&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()===`unit`}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){return!!this.getMergedTraits().idempotencyToken}getMergedTraits(){return this.normalizedTraits??={...this.getOwnTraits(),...this.getMemberTraits()}}getMemberTraits(){return zt(this.memberTraits)}getOwnTraits(){return zt(this.traits)}getKeySchema(){let[e,t]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!t)throw Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema();return Vt([e?15:n[4]??0,0],`key`)}getValueSchema(){let e=this.getSchema(),[t,n,r]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e==`number`?63&e:e&&typeof e==`object`&&(n||r)?e[3+e[0]]:t?15:void 0;if(i!=null)return Vt([i,0],n?`value`:`member`);throw Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){let t=this.getSchema();if(this.isStructSchema()&&t[4].includes(e)){let n=t[4].indexOf(e),r=t[5][n];return Vt(Ut(r)?r:[r,0],e)}if(this.isDocumentSchema())return Vt([15,0],e);throw Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){let e={};try{for(let[t,n]of this.structIterator())e[t]=n}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(let[e,t]of this.structIterator())if(t.isStreaming()&&t.isStructSchema())return e}return``}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw Error(`@smithy/core/schema - cannot iterate non-struct schema.`);let e=this.getSchema(),t=e[4].length,n=e[Ht.it];if(n&&t===n.length){yield*n;return}n=Array(t);for(let r=0;r<t;++r){let t=e[4][r],i=Vt([e[5][r],0],t);yield n[r]=[t,i]}e[Ht.it]=n}},Ut=e=>Array.isArray(e)&&e.length===2,Wt=e=>Array.isArray(e)&&e.length>=5})),Kt,qt,Jt,Yt=o((()=>{Ct(),Kt=class e extends St{static symbol=Symbol.for(`@smithy/sim`);name;schemaRef;traits;symbol=e.symbol},qt=(e,t,n,r)=>St.assign(new Kt,{name:t,namespace:e,traits:r,schemaRef:n}),Jt=(e,t,n,r)=>St.assign(new Kt,{name:t,namespace:e,traits:n,schemaRef:r})})),Xt,Zt=o((()=>{Xt={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}})),F,Qt=o((()=>{F=class e{namespace;schemas;exceptions;static registries=new Map;constructor(e,t=new Map,n=new Map){this.namespace=e,this.schemas=t,this.exceptions=n}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}copyFrom(e){let{schemas:t,exceptions:n}=this;for(let[n,r]of e.schemas)t.has(n)||t.set(n,r);for(let[t,r]of e.exceptions)n.has(t)||n.set(t,r)}register(t,n){let r=this.normalizeShapeId(t);for(let t of[this,e.for(r.split(`#`)[0])])t.schemas.set(r,n)}getSchema(e){let t=this.normalizeShapeId(e);if(!this.schemas.has(t))throw Error(`@smithy/core/schema - schema not found for ${t}`);return this.schemas.get(t)}registerError(t,n){let r=t,i=r[1];for(let t of[this,e.for(i)])t.schemas.set(i+`#`+r[2],r),t.exceptions.set(r,n)}getErrorCtor(t){let n=t;return this.exceptions.has(n)?this.exceptions.get(n):e.for(n[1]).exceptions.get(n)}getBaseException(){for(let e of this.exceptions.keys())if(Array.isArray(e)){let[,t,n]=e,r=t+`#`+n;if(r.startsWith(`smithy.ts.sdk.synthetic.`)&&r.endsWith(`ServiceException`))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes(`#`)?e:this.namespace+`#`+e}}})),$t=c({ErrorSchema:()=>It,ListSchema:()=>wt,MapSchema:()=>Dt,NormalizedSchema:()=>P,OperationSchema:()=>At,SCHEMA:()=>Xt,Schema:()=>St,SimpleSchema:()=>Kt,StructureSchema:()=>Nt,TypeRegistry:()=>F,deref:()=>ot,deserializerMiddlewareOption:()=>yt,error:()=>Lt,getSchemaSerdePlugin:()=>vt,isStaticSchema:()=>Wt,list:()=>Tt,map:()=>Ot,op:()=>jt,operation:()=>ct,serializerMiddlewareOption:()=>bt,sim:()=>qt,simAdapter:()=>Jt,struct:()=>Pt,translateTraits:()=>zt}),I=o((()=>{st(),xt(),Et(),kt(),Mt(),lt(),Rt(),Gt(),Ct(),Yt(),Ft(),Zt(),Bt(),Qt()})),en,tn=o((()=>{en=(e,t,n=e=>e)=>e})),nn,rn,an,on,sn,cn,ln,un,dn,fn,pn,mn,hn,gn,_n,vn,yn,bn,xn,Sn,Cn,wn,Tn,En,Dn,On,kn,An,jn,Mn,Nn,Pn,Fn,In=o((()=>{nn=e=>{switch(e){case`true`:return!0;case`false`:return!1;default:throw Error(`Unable to parse boolean value "${e}"`)}},rn=e=>{if(e!=null){if(typeof e==`number`){if((e===0||e===1)&&Fn.warn(Pn(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e==`string`){let t=e.toLowerCase();if((t===`false`||t===`true`)&&Fn.warn(Pn(`Expected boolean, got ${typeof e}: ${e}`)),t===`false`)return!1;if(t===`true`)return!0}if(typeof e==`boolean`)return e;throw TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},an=e=>{if(e!=null){if(typeof e==`string`){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Fn.warn(Pn(`Expected number but observed string: ${e}`)),t}if(typeof e==`number`)return e;throw TypeError(`Expected number, got ${typeof e}: ${e}`)}},on=Math.ceil(2**127*(2-2**-23)),sn=e=>{let t=an(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>on)throw TypeError(`Expected 32-bit float, got ${e}`);return t},cn=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw TypeError(`Expected integer, got ${typeof e}: ${e}`)}},ln=cn,un=e=>pn(e,32),dn=e=>pn(e,16),fn=e=>pn(e,8),pn=(e,t)=>{let n=cn(e);if(n!==void 0&&mn(n,t)!==n)throw TypeError(`Expected ${t}-bit integer, got ${e}`);return n},mn=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},hn=(e,t)=>{if(e==null)throw t?TypeError(`Expected a non-null value for ${t}`):TypeError(`Expected a non-null value`);return e},gn=e=>{if(e==null)return;if(typeof e==`object`&&!Array.isArray(e))return e;let t=Array.isArray(e)?`array`:typeof e;throw TypeError(`Expected object, got ${t}: ${e}`)},_n=e=>{if(e!=null){if(typeof e==`string`)return e;if([`boolean`,`number`,`bigint`].includes(typeof e))return Fn.warn(Pn(`Expected string, got ${typeof e}: ${e}`)),String(e);throw TypeError(`Expected string, got ${typeof e}: ${e}`)}},vn=e=>{if(e==null)return;let t=gn(e),n=Object.entries(t).filter(([,e])=>e!=null).map(([e])=>e);if(n.length===0)throw TypeError(`Unions must have exactly one non-null member. None were found.`);if(n.length>1)throw TypeError(`Unions must have exactly one non-null member. Keys ${n} were not null.`);return t},yn=e=>an(typeof e==`string`?Cn(e):e),bn=yn,xn=e=>sn(typeof e==`string`?Cn(e):e),Sn=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Cn=e=>{let t=e.match(Sn);if(t===null||t[0].length!==e.length)throw TypeError(`Expected real number, got implicit NaN`);return parseFloat(e)},wn=e=>typeof e==`string`?On(e):an(e),Tn=wn,En=wn,Dn=e=>typeof e==`string`?On(e):sn(e),On=e=>{switch(e){case`NaN`:return NaN;case`Infinity`:return 1/0;case`-Infinity`:return-1/0;default:throw Error(`Unable to parse float value: ${e}`)}},kn=e=>cn(typeof e==`string`?Cn(e):e),An=kn,jn=e=>un(typeof e==`string`?Cn(e):e),Mn=e=>dn(typeof e==`string`?Cn(e):e),Nn=e=>fn(typeof e==`string`?Cn(e):e),Pn=e=>String(TypeError(e).stack||e).split(`
`).slice(0,5).filter(e=>!e.includes(`stackTraceWarning`)).join(`
`),Fn={warn:console.warn}}));function Ln(e){let t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),a=e.getUTCHours(),o=e.getUTCMinutes(),s=e.getUTCSeconds(),c=i<10?`0${i}`:`${i}`,l=a<10?`0${a}`:`${a}`,u=o<10?`0${o}`:`${o}`,d=s<10?`0${s}`:`${s}`;return`${Rn[r]}, ${c} ${zn[n]} ${t} ${l}:${u}:${d} GMT`}var Rn,zn,Bn,Vn,Hn,Un,Wn,Gn,Kn,qn,Jn,Yn,Xn,Zn,Qn,$n,er,tr,nr,rr,ir,ar,or,sr=o((()=>{In(),Rn=[`Sun`,`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`],zn=[`Jan`,`Feb`,`Mar`,`Apr`,`May`,`Jun`,`Jul`,`Aug`,`Sep`,`Oct`,`Nov`,`Dec`],Bn=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Vn=e=>{if(e==null)return;if(typeof e!=`string`)throw TypeError(`RFC-3339 date-times must be expressed as strings`);let t=Bn.exec(e);if(!t)throw TypeError(`Invalid RFC-3339 date-time value`);let[n,r,i,a,o,s,c,l]=t;return Yn(Mn(or(r)),rr(i,`month`,1,12),rr(a,`day`,1,31),{hours:o,minutes:s,seconds:c,fractionalMilliseconds:l})},Hn=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Un=e=>{if(e==null)return;if(typeof e!=`string`)throw TypeError(`RFC-3339 date-times must be expressed as strings`);let t=Hn.exec(e);if(!t)throw TypeError(`Invalid RFC-3339 date-time value`);let[n,r,i,a,o,s,c,l,u]=t,d=Yn(Mn(or(r)),rr(i,`month`,1,12),rr(a,`day`,1,31),{hours:o,minutes:s,seconds:c,fractionalMilliseconds:l});return u.toUpperCase()!=`Z`&&d.setTime(d.getTime()-ar(u)),d},Wn=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Gn=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Kn=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),qn=e=>{if(e==null)return;if(typeof e!=`string`)throw TypeError(`RFC-7231 date-times must be expressed as strings`);let t=Wn.exec(e);if(t){let[e,n,r,i,a,o,s,c]=t;return Yn(Mn(or(i)),$n(r),rr(n,`day`,1,31),{hours:a,minutes:o,seconds:s,fractionalMilliseconds:c})}if(t=Gn.exec(e),t){let[e,n,r,i,a,o,s,c]=t;return Qn(Yn(Xn(i),$n(r),rr(n,`day`,1,31),{hours:a,minutes:o,seconds:s,fractionalMilliseconds:c}))}if(t=Kn.exec(e),t){let[e,n,r,i,a,o,s,c]=t;return Yn(Mn(or(c)),$n(n),rr(r.trimLeft(),`day`,1,31),{hours:i,minutes:a,seconds:o,fractionalMilliseconds:s})}throw TypeError(`Invalid RFC-7231 date-time value`)},Jn=e=>{if(e==null)return;let t;if(typeof e==`number`)t=e;else if(typeof e==`string`)t=yn(e);else if(typeof e==`object`&&e.tag===1)t=e.value;else throw TypeError(`Epoch timestamps must be expressed as floating point numbers or their string representation`);if(Number.isNaN(t)||t===1/0||t===-1/0)throw TypeError(`Epoch timestamps must be valid, non-Infinite, non-NaN numerics`);return new Date(Math.round(t*1e3))},Yn=(e,t,n,r)=>{let i=t-1;return tr(e,i,n),new Date(Date.UTC(e,i,n,rr(r.hours,`hour`,0,23),rr(r.minutes,`minute`,0,59),rr(r.seconds,`seconds`,0,60),ir(r.fractionalMilliseconds)))},Xn=e=>{let t=new Date().getUTCFullYear(),n=Math.floor(t/100)*100+Mn(or(e));return n<t?n+100:n},Zn=50*365*24*60*60*1e3,Qn=e=>e.getTime()-new Date().getTime()>Zn?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,$n=e=>{let t=zn.indexOf(e);if(t<0)throw TypeError(`Invalid month: ${e}`);return t+1},er=[31,28,31,30,31,30,31,31,30,31,30,31],tr=(e,t,n)=>{let r=er[t];if(t===1&&nr(e)&&(r=29),n>r)throw TypeError(`Invalid day for ${zn[t]} in ${e}: ${n}`)},nr=e=>e%4==0&&(e%100!=0||e%400==0),rr=(e,t,n,r)=>{let i=Nn(or(e));if(i<n||i>r)throw TypeError(`${t} must be between ${n} and ${r}, inclusive`);return i},ir=e=>e==null?0:xn(`0.`+e)*1e3,ar=e=>{let t=e[0],n=1;if(t==`+`)n=1;else if(t==`-`)n=-1;else throw TypeError(`Offset direction, ${t}, must be "+" or "-"`);let r=Number(e.substring(1,3)),i=Number(e.substring(4,6));return n*(r*60+i)*60*1e3},or=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)===`0`;)t++;return t===0?e:e.slice(t)}})),cr=c({__addDisposableResource:()=>Ir,__assign:()=>Br,__asyncDelegator:()=>Or,__asyncGenerator:()=>Dr,__asyncValues:()=>kr,__await:()=>Er,__awaiter:()=>vr,__classPrivateFieldGet:()=>Nr,__classPrivateFieldIn:()=>Fr,__classPrivateFieldSet:()=>Pr,__createBinding:()=>Vr,__decorate:()=>dr,__disposeResources:()=>Lr,__esDecorate:()=>pr,__exportStar:()=>br,__extends:()=>lr,__generator:()=>yr,__importDefault:()=>Mr,__importStar:()=>jr,__makeTemplateObject:()=>Ar,__metadata:()=>_r,__param:()=>fr,__propKey:()=>hr,__read:()=>Sr,__rest:()=>ur,__rewriteRelativeImportExtension:()=>Rr,__runInitializers:()=>mr,__setFunctionName:()=>gr,__spread:()=>Cr,__spreadArray:()=>Tr,__spreadArrays:()=>wr,__values:()=>xr,default:()=>Gr});function lr(e,t){if(typeof t!=`function`&&t!==null)throw TypeError(`Class extends value `+String(t)+` is not a constructor or null`);zr(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function ur(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function dr(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function fr(e,t){return function(n,r){t(n,r,e)}}function pr(e,t,n,r,i,a){function o(e){if(e!==void 0&&typeof e!=`function`)throw TypeError(`Function expected`);return e}for(var s=r.kind,c=s===`getter`?`get`:s===`setter`?`set`:`value`,l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d,f=!1,p=n.length-1;p>=0;p--){var m={};for(var h in r)m[h]=h===`access`?{}:r[h];for(var h in r.access)m.access[h]=r.access[h];m.addInitializer=function(e){if(f)throw TypeError(`Cannot add initializers after decoration has completed`);a.push(o(e||null))};var g=(0,n[p])(s===`accessor`?{get:u.get,set:u.set}:u[c],m);if(s===`accessor`){if(g===void 0)continue;if(typeof g!=`object`||!g)throw TypeError(`Object expected`);(d=o(g.get))&&(u.get=d),(d=o(g.set))&&(u.set=d),(d=o(g.init))&&i.unshift(d)}else (d=o(g))&&(s===`field`?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,r.name,u),f=!0}function mr(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function hr(e){return typeof e==`symbol`?e:`${e}`}function gr(e,t,n){return typeof t==`symbol`&&(t=t.description?`[${t.description}]`:``),Object.defineProperty(e,`name`,{configurable:!0,value:n?`${n} ${t}`:t})}function _r(e,t){if(typeof Reflect==`object`&&typeof Reflect.metadata==`function`)return Reflect.metadata(e,t)}function vr(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})}function yr(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o=Object.create((typeof Iterator==`function`?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(s){if(r)throw TypeError(`Generator is already executing.`);for(;o&&(o=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function br(e,t){for(var n in e)n!==`default`&&!Object.prototype.hasOwnProperty.call(t,n)&&Vr(t,e,n)}function xr(e){var t=typeof Symbol==`function`&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==`number`)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?`Object is not iterable.`:`Symbol.iterator is not defined.`)}function Sr(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function Cr(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Sr(arguments[t]));return e}function wr(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function Tr(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function Er(e){return this instanceof Er?(this.v=e,this):new Er(e)}function Dr(e,t,n){if(!Symbol.asyncIterator)throw TypeError(`Symbol.asyncIterator is not defined.`);var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator==`function`?AsyncIterator:Object).prototype),s(`next`),s(`throw`),s(`return`,o),i[Symbol.asyncIterator]=function(){return this},i;function o(e){return function(t){return Promise.resolve(t).then(e,d)}}function s(e,t){r[e]&&(i[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||c(e,t)})},t&&(i[e]=t(i[e])))}function c(e,t){try{l(r[e](t))}catch(e){f(a[0][3],e)}}function l(e){e.value instanceof Er?Promise.resolve(e.value.v).then(u,d):f(a[0][2],e)}function u(e){c(`next`,e)}function d(e){c(`throw`,e)}function f(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}}function Or(e){var t,n;return t={},r(`next`),r(`throw`,function(e){throw e}),r(`return`),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:Er(e[r](t)),done:!1}:i?i(t):t}:i}}function kr(e){if(!Symbol.asyncIterator)throw TypeError(`Symbol.asyncIterator is not defined.`);var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof xr==`function`?xr(e):e[Symbol.iterator](),n={},r(`next`),r(`throw`),r(`return`),n[Symbol.asyncIterator]=function(){return this},n);function r(t){n[t]=e[t]&&function(n){return new Promise(function(r,a){n=e[t](n),i(r,a,n.done,n.value)})}}function i(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}}function Ar(e,t){return Object.defineProperty?Object.defineProperty(e,`raw`,{value:t}):e.raw=t,e}function jr(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Ur(e),r=0;r<n.length;r++)n[r]!==`default`&&Vr(t,e,n[r]);return Hr(t,e),t}function Mr(e){return e&&e.__esModule?e:{default:e}}function Nr(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)}function Pr(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n}function Fr(e,t){if(t===null||typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Cannot use 'in' operator on non-object`);return typeof e==`function`?t===e:e.has(t)}function Ir(e,t,n){if(t!=null){if(typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Object expected.`);var r,i;if(n){if(!Symbol.asyncDispose)throw TypeError(`Symbol.asyncDispose is not defined.`);r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw TypeError(`Symbol.dispose is not defined.`);r=t[Symbol.dispose],n&&(i=r)}if(typeof r!=`function`)throw TypeError(`Object not disposable.`);i&&(r=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}function Lr(e){function t(t){e.error=e.hasError?new Wr(t,e.error,`An error was suppressed during disposal.`):t,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(i,function(e){return t(e),i()})}else r|=1}catch(e){t(e)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function Rr(e,t){return typeof e==`string`&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,r,i,a){return n?t?`.jsx`:`.js`:r&&(!i||!a)?e:r+i+`.`+a.toLowerCase()+`js`}):e}var zr,Br,Vr,Hr,Ur,Wr,Gr,Kr=o((()=>{zr=function(e,t){return zr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},zr(e,t)},Br=function(){return Br=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Br.apply(this,arguments)},Vr=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Hr=Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t},Ur=function(e){return Ur=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},Ur(e)},Wr=typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r},Gr={__extends:lr,__assign:Br,__rest:ur,__decorate:dr,__param:fr,__esDecorate:pr,__runInitializers:mr,__propKey:hr,__setFunctionName:gr,__metadata:_r,__awaiter:vr,__generator:yr,__createBinding:Vr,__exportStar:br,__values:xr,__read:Sr,__spread:Cr,__spreadArrays:wr,__spreadArray:Tr,__await:Er,__asyncGenerator:Dr,__asyncDelegator:Or,__asyncValues:kr,__makeTemplateObject:Ar,__importStar:jr,__importDefault:Mr,__classPrivateFieldGet:Nr,__classPrivateFieldSet:Pr,__classPrivateFieldIn:Fr,__addDisposableResource:Ir,__disposeResources:Lr,__rewriteRelativeImportExtension:Rr}})),qr=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.randomUUID=void 0;let t=(Kr(),d(cr)).__importDefault(require(`crypto`));e.randomUUID=t.default.randomUUID.bind(t.default)})),Jr=s((e=>{var t=qr();let n=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,`0`));e.v4=()=>{if(t.randomUUID)return t.randomUUID();let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,n[e[0]]+n[e[1]]+n[e[2]]+n[e[3]]+`-`+n[e[4]]+n[e[5]]+`-`+n[e[6]]+n[e[7]]+`-`+n[e[8]]+n[e[9]]+`-`+n[e[10]]+n[e[11]]+n[e[12]]+n[e[13]]+n[e[14]]+n[e[15]]}})),Yr,Xr=o((()=>{Yr=Jr()})),Zr,Qr=o((()=>{Zr=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})},Zr.from=e=>e&&typeof e==`object`&&(e instanceof Zr||`deserializeJSON`in e)?e:typeof e==`string`||Object.getPrototypeOf(e)===String.prototype?Zr(String(e)):Zr(JSON.stringify(e)),Zr.fromObject=Zr.from}));function $r(e){return(e.includes(`,`)||e.includes(`"`))&&(e=`"${e.replace(/"/g,`\\"`)}"`),e}var ei=o((()=>{}));function ti(e,t,n){let r=Number(e);if(r<t||r>n)throw Error(`Value ${r} out of range [${t}, ${n}]`)}var ni,ri,ii,ai,oi,si,ci,li,ui,di,fi,pi,mi,hi=o((()=>{ni=`(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?`,ri=`(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)`,ii=`(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?`,ai=`(\\d?\\d)`,oi=`(\\d{4})`,si=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),ci=RegExp(`^${ni}, ${ai} ${ri} ${oi} ${ii} GMT$`),li=RegExp(`^${ni}, ${ai}-${ri}-(\\d\\d) ${ii} GMT$`),ui=RegExp(`^${ni} ${ri} ( [1-9]|\\d\\d) ${ii} ${oi}$`),di=[`Jan`,`Feb`,`Mar`,`Apr`,`May`,`Jun`,`Jul`,`Aug`,`Sep`,`Oct`,`Nov`,`Dec`],fi=e=>{if(e==null)return;let t=NaN;if(typeof e==`number`)t=e;else if(typeof e==`string`){if(!/^-?\d*\.?\d+$/.test(e))throw TypeError(`parseEpochTimestamp - numeric string invalid.`);t=Number.parseFloat(e)}else typeof e==`object`&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw TypeError(`Epoch timestamps must be valid finite numbers.`);return new Date(Math.round(t*1e3))},pi=e=>{if(e==null)return;if(typeof e!=`string`)throw TypeError(`RFC3339 timestamps must be strings`);let t=si.exec(e);if(!t)throw TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,n,r,i,a,o,s,,c,l]=t;ti(r,1,12),ti(i,1,31),ti(a,0,23),ti(o,0,59),ti(s,0,60);let u=new Date(Date.UTC(Number(n),Number(r)-1,Number(i),Number(a),Number(o),Number(s),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(u.setUTCFullYear(Number(n)),l.toUpperCase()!=`Z`){let[,e,t,n]=/([+-])(\d\d):(\d\d)/.exec(l)||[void 0,`+`,0,0],r=e===`-`?1:-1;u.setTime(u.getTime()+r*(Number(t)*60*60*1e3+Number(n)*60*1e3))}return u},mi=e=>{if(e==null)return;if(typeof e!=`string`)throw TypeError(`RFC7231 timestamps must be strings.`);let t,n,r,i,a,o,s,c;if((c=ci.exec(e))?[,t,n,r,i,a,o,s]=c:(c=li.exec(e))?([,t,n,r,i,a,o,s]=c,r=(Number(r)+1900).toString()):(c=ui.exec(e))&&([,n,t,i,a,o,s,r]=c),r&&o){let e=Date.UTC(Number(r),di.indexOf(n),Number(t),Number(i),Number(a),Number(o),s?Math.round(parseFloat(`0.${s}`)*1e3):0);ti(t,1,31),ti(i,0,23),ti(a,0,59),ti(o,0,60);let c=new Date(e);return c.setUTCFullYear(Number(r)),c}throw TypeError(`Invalid RFC7231 date-time value ${e}.`)}}));function gi(e,t,n){if(n<=0||!Number.isInteger(n))throw Error(`Invalid number of delimiters (`+n+`) for splitEvery.`);let r=e.split(t);if(n===1)return r;let i=[],a=``;for(let e=0;e<r.length;e++)a===``?a=r[e]:a+=t+r[e],(e+1)%n===0&&(i.push(a),a=``);return a!==``&&i.push(a),i}var _i=o((()=>{})),vi,yi=o((()=>{vi=e=>{let t=e.length,n=[],r=!1,i,a=0;for(let o=0;o<t;++o){let t=e[o];switch(t){case`"`:i!==`\\`&&(r=!r);break;case`,`:r||(n.push(e.slice(a,o)),a=o+1);break;default:}i=t}return n.push(e.slice(a)),n.map(e=>{e=e.trim();let t=e.length;return t<2?e:(e[0]===`"`&&e[t-1]===`"`&&(e=e.slice(1,t-1)),e.replace(/\\"/g,`"`))})}}));function bi(e){return new Si(String(e),`bigDecimal`)}var xi,Si,Ci=o((()=>{xi=/^-?\d*(\.\d+)?$/,Si=class e{string;type;constructor(e,t){if(this.string=e,this.type=t,!xi.test(e))throw Error(`@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".`)}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!=`object`)return!1;let n=t;return e.prototype.isPrototypeOf(t)||n.type===`bigDecimal`&&xi.test(n.string)}}})),wi=c({LazyJsonString:()=>Zr,NumericValue:()=>Si,_parseEpochTimestamp:()=>fi,_parseRfc3339DateTimeWithOffset:()=>pi,_parseRfc7231DateTime:()=>mi,copyDocumentWithTransform:()=>en,dateToUtcString:()=>Ln,expectBoolean:()=>rn,expectByte:()=>fn,expectFloat32:()=>sn,expectInt:()=>ln,expectInt32:()=>un,expectLong:()=>cn,expectNonNull:()=>hn,expectNumber:()=>an,expectObject:()=>gn,expectShort:()=>dn,expectString:()=>_n,expectUnion:()=>vn,generateIdempotencyToken:()=>Yr.v4,handleFloat:()=>Tn,limitedParseDouble:()=>wn,limitedParseFloat:()=>En,limitedParseFloat32:()=>Dn,logger:()=>Fn,nv:()=>bi,parseBoolean:()=>nn,parseEpochTimestamp:()=>Jn,parseRfc3339DateTime:()=>Vn,parseRfc3339DateTimeWithOffset:()=>Un,parseRfc7231DateTime:()=>qn,quoteHeader:()=>$r,splitEvery:()=>gi,splitHeader:()=>vi,strictParseByte:()=>Nn,strictParseDouble:()=>yn,strictParseFloat:()=>bn,strictParseFloat32:()=>xn,strictParseInt:()=>An,strictParseInt32:()=>jn,strictParseLong:()=>kn,strictParseShort:()=>Mn}),Ti=o((()=>{tn(),sr(),Xr(),Qr(),In(),ei(),hi(),_i(),yi(),Ci()})),Ei,Di=o((()=>{Ei=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}})),Oi,ki,Ai=o((()=>{Oi=N(),ki=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:e,serializer:t,deserializer:n,serdeContext:r,defaultContentType:i}){this.marshaller=e,this.serializer=t,this.deserializer=n,this.serdeContext=r,this.defaultContentType=i}async serializeEventStream({eventStream:e,requestSchema:t,initialRequest:n}){let r=this.marshaller,i=t.getEventStreamMember(),a=t.getMemberSchema(i),o=this.serializer,s=this.defaultContentType,c=Symbol(`initialRequestMarker`),l={async*[Symbol.asyncIterator](){if(n){let e={":event-type":{type:`string`,value:`initial-request`},":message-type":{type:`string`,value:`event`},":content-type":{type:`string`,value:s}};o.write(t,n);let r=o.flush();yield{[c]:!0,headers:e,body:r}}for await(let t of e)yield t}};return r.serialize(l,e=>{if(e[c])return{headers:e.headers,body:e.body};let t=Object.keys(e).find(e=>e!==`__type`)??``,{additionalHeaders:n,body:r,eventType:i,explicitPayloadContentType:o}=this.writeEventBody(t,a,e);return{headers:{":event-type":{type:`string`,value:i},":message-type":{type:`string`,value:`event`},":content-type":{type:`string`,value:o??s},...n},body:r}})}async deserializeEventStream({response:e,responseSchema:t,initialResponseContainer:n}){let r=this.marshaller,i=t.getEventStreamMember(),a=t.getMemberSchema(i).getMemberSchemas(),o=Symbol(`initialResponseMarker`),s=r.deserialize(e.body,async e=>{let n=Object.keys(e).find(e=>e!==`__type`)??``,r=e[n].body;if(n===`initial-response`){let e=await this.deserializer.read(t,r);return delete e[i],{[o]:!0,...e}}else if(n in a){let t=a[n];if(t.isStructSchema()){let i={},a=!1;for(let[o,s]of t.structIterator()){let{eventHeader:t,eventPayload:c}=s.getMergedTraits();if(a||=!!(t||c),c)s.isBlobSchema()?i[o]=r:s.isStringSchema()?i[o]=(this.serdeContext?.utf8Encoder??Oi.toUtf8)(r):s.isStructSchema()&&(i[o]=await this.deserializer.read(s,r));else if(t){let t=e[n].headers[o]?.value;t!=null&&(s.isNumericSchema()?t&&typeof t==`object`&&`bytes`in t?i[o]=BigInt(t.toString()):i[o]=Number(t):i[o]=t)}}if(a)return{[n]:i};if(r.byteLength===0)return{[n]:{}}}return{[n]:await this.deserializer.read(t,r)}}else return{$unknown:e}}),c=s[Symbol.asyncIterator](),l=await c.next();if(l.done)return s;if(l.value?.[o]){if(!t)throw Error(`@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.`);for(let[e,t]of Object.entries(l.value))n[e]=t}return{async*[Symbol.asyncIterator](){for(l?.value?.[o]||(yield l.value);;){let{done:e,value:t}=await c.next();if(e)break;yield t}}}}writeEventBody(e,t,n){let r=this.serializer,i=e,a=null,o,s=t.getSchema()[4].includes(e),c={};if(s){let i=t.getMemberSchema(e);if(i.isStructSchema()){for(let[t,r]of i.structIterator()){let{eventHeader:i,eventPayload:o}=r.getMergedTraits();if(o)a=t;else if(i){let i=n[e][t],a=`binary`;r.isNumericSchema()?a=(-2)**31<=i&&i<=2**31-1?`integer`:`long`:r.isTimestampSchema()?a=`timestamp`:r.isStringSchema()?a=`string`:r.isBooleanSchema()&&(a=`boolean`),i!=null&&(c[t]={type:a,value:i},delete n[e][t])}}if(a!==null){let t=i.getMemberSchema(a);t.isBlobSchema()?o=`application/octet-stream`:t.isStringSchema()&&(o=`text/plain`),r.write(t,n[e][a])}else r.write(i,n[e])}else if(i.isUnitSchema())r.write(i,{});else throw Error(`@smithy/core/event-streams - non-struct member not supported in event stream union.`)}else{let[t,a]=n[e];i=t,r.write(15,a)}let l=r.flush();return{body:typeof l==`string`?(this.serdeContext?.utf8Decoder??Oi.fromUtf8)(l):l,eventType:i,explicitPayloadContentType:o,additionalHeaders:c}}}})),ji=c({EventStreamSerde:()=>ki}),Mi=o((()=>{Ai()})),Ni,Pi,Fi=o((()=>{I(),Ni=p(),Di(),Pi=class extends Ei{options;compositeErrorRegistry;constructor(e){super(),this.options=e,this.compositeErrorRegistry=F.for(e.defaultNamespace);for(let t of e.errorTypeRegistries??[])this.compositeErrorRegistry.copyFrom(t)}getRequestType(){return Ni.HttpRequest}getResponseType(){return Ni.HttpResponse}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,t){if(`url`in t){e.protocol=t.url.protocol,e.hostname=t.url.hostname,e.port=t.url.port?Number(t.url.port):void 0,e.path=t.url.pathname,e.fragment=t.url.hash||void 0,e.username=t.url.username||void 0,e.password=t.url.password||void 0,e.query||={};for(let[n,r]of t.url.searchParams.entries())e.query[n]=r;return e}else return e.protocol=t.protocol,e.hostname=t.hostname,e.port=t.port?Number(t.port):void 0,e.path=t.path,e.query={...t.query},e}setHostPrefix(e,t,n){if(this.serdeContext?.disableHostPrefix)return;let r=P.of(t.input),i=zt(t.traits??{});if(i.endpoint){let t=i.endpoint?.[0];if(typeof t==`string`){let i=[...r.structIterator()].filter(([,e])=>e.getMergedTraits().hostLabel);for(let[e]of i){let r=n[e];if(typeof r!=`string`)throw Error(`@smithy/core/schema - ${e} in input must be a string as hostLabel.`);t=t.replace(`{${e}}`,r)}e.hostname=t+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers[`x-amzn-requestid`]??e.headers[`x-amzn-request-id`]??e.headers[`x-amz-request-id`],extendedRequestId:e.headers[`x-amz-id-2`],cfId:e.headers[`x-amz-cf-id`]}}async serializeEventStream({eventStream:e,requestSchema:t,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:t,initialRequest:n})}async deserializeEventStream({response:e,responseSchema:t,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:t,initialResponseContainer:n})}async loadEventStreamCapability(){let{EventStreamSerde:e}=await Promise.resolve().then(()=>(Mi(),ji));return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,t,n,r,i){return[]}getEventStreamMarshaller(){let e=this.serdeContext;if(!e.eventStreamMarshaller)throw Error(`@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.`);return e.eventStreamMarshaller}}})),Ii,Li,Ri,zi=o((()=>{I(),Ti(),Ii=p(),Li=et(),rt(),at(),Fi(),Ri=class extends Pi{async serializeRequest(e,t,n){let r={...t??{}},i=this.serializer,a={},o={},s=await n.endpoint(),c=P.of(e?.input),l=c.getSchema(),u=!1,d,f=new Ii.HttpRequest({protocol:``,hostname:``,port:void 0,path:``,fragment:void 0,query:a,headers:o,body:void 0});if(s){this.updateServiceEndpoint(f,s),this.setHostPrefix(f,e,r);let t=zt(e.traits);if(t.http){f.method=t.http[0];let[e,n]=t.http[1].split(`?`);f.path==`/`?f.path=e:f.path+=e;let r=new URLSearchParams(n??``);Object.assign(a,Object.fromEntries(r))}}for(let[e,t]of c.structIterator()){let n=t.getMergedTraits()??{},s=r[e];if(s==null&&!t.isIdempotencyToken()){if(n.httpLabel&&(f.path.includes(`{${e}+}`)||f.path.includes(`{${e}}`)))throw Error(`No value provided for input HTTP label: ${e}.`);continue}if(n.httpPayload)t.isStreaming()?t.isStructSchema()?r[e]&&(d=await this.serializeEventStream({eventStream:r[e],requestSchema:c})):d=s:(i.write(t,s),d=i.flush()),delete r[e];else if(n.httpLabel){i.write(t,s);let n=i.flush();f.path.includes(`{${e}+}`)?f.path=f.path.replace(`{${e}+}`,n.split(`/`).map(it).join(`/`)):f.path.includes(`{${e}}`)&&(f.path=f.path.replace(`{${e}}`,it(n))),delete r[e]}else if(n.httpHeader)i.write(t,s),o[n.httpHeader.toLowerCase()]=String(i.flush()),delete r[e];else if(typeof n.httpPrefixHeaders==`string`){for(let[e,r]of Object.entries(s)){let a=n.httpPrefixHeaders+e;i.write([t.getValueSchema(),{httpHeader:a}],r),o[a.toLowerCase()]=i.flush()}delete r[e]}else n.httpQuery||n.httpQueryParams?(this.serializeQuery(t,s,a),delete r[e]):u=!0}return u&&r&&(i.write(l,r),d=i.flush()),f.headers=o,f.query=a,f.body=d,f}serializeQuery(e,t,n){let r=this.serializer,i=e.getMergedTraits();if(i.httpQueryParams){for(let[r,a]of Object.entries(t))if(!(r in n)){let t=e.getValueSchema();Object.assign(t.getMergedTraits(),{...i,httpQuery:r,httpQueryParams:void 0}),this.serializeQuery(t,a,n)}return}if(e.isListSchema()){let a=!!e.getMergedTraits().sparse,o=[];for(let n of t){r.write([e.getValueSchema(),i],n);let t=r.flush();(a||t!==void 0)&&o.push(t)}n[i.httpQuery]=o}else r.write([e,i],t),n[i.httpQuery]=r.flush()}async deserializeResponse(e,t,n){let r=this.deserializer,i=P.of(e.output),a={};if(n.statusCode>=300){let i=await nt(n.body,t);throw i.byteLength>0&&Object.assign(a,await r.read(15,i)),await this.handleError(e,t,n,a,this.deserializeMetadata(n)),Error(`@smithy/core/protocols - HTTP Protocol error handler failed to throw.`)}for(let e in n.headers){let t=n.headers[e];delete n.headers[e],n.headers[e.toLowerCase()]=t}let o=await this.deserializeHttpMessage(i,t,n,a);if(o.length){let e=await nt(n.body,t);if(e.byteLength>0){let t=await r.read(i,e);for(let e of o)t[e]!=null&&(a[e]=t[e])}}else o.discardResponseBody&&await nt(n.body,t);return a.$metadata=this.deserializeMetadata(n),a}async deserializeHttpMessage(e,t,n,r,i){let a;a=r instanceof Set?i:r;let o=!0,s=this.deserializer,c=P.of(e),l=[];for(let[e,r]of c.structIterator()){let i=r.getMemberTraits();if(i.httpPayload){if(o=!1,r.isStreaming())r.isStructSchema()?a[e]=await this.deserializeEventStream({response:n,responseSchema:c}):a[e]=(0,Li.sdkStreamMixin)(n.body);else if(n.body){let i=await nt(n.body,t);i.byteLength>0&&(a[e]=await s.read(r,i))}}else if(i.httpHeader){let t=String(i.httpHeader).toLowerCase(),o=n.headers[t];if(o!=null)if(r.isListSchema()){let n=r.getValueSchema();n.getMergedTraits().httpHeader=t;let i;i=n.isTimestampSchema()&&n.getSchema()===4?gi(o,`,`,2):vi(o);let c=[];for(let e of i)c.push(await s.read(n,e.trim()));a[e]=c}else a[e]=await s.read(r,o)}else if(i.httpPrefixHeaders!==void 0){a[e]={};for(let[t,o]of Object.entries(n.headers))if(t.startsWith(i.httpPrefixHeaders)){let n=r.getValueSchema();n.getMergedTraits().httpHeader=t,a[e][t.slice(i.httpPrefixHeaders.length)]=await s.read(n,o)}}else i.httpResponseCode?a[e]=n.statusCode:l.push(e)}return l.discardResponseBody=o,l}}})),Bi,Vi,Hi=o((()=>{I(),Bi=p(),rt(),Fi(),Vi=class extends Pi{async serializeRequest(e,t,n){let r=this.serializer,i={},a={},o=await n.endpoint(),s=P.of(e?.input),c=s.getSchema(),l,u=new Bi.HttpRequest({protocol:``,hostname:``,port:void 0,path:`/`,fragment:void 0,query:i,headers:a,body:void 0});o&&(this.updateServiceEndpoint(u,o),this.setHostPrefix(u,e,t));let d={...t};if(t){let e=s.getEventStreamMember();if(e){if(d[e]){let t={};for(let[n,i]of s.structIterator())n!==e&&d[n]&&(r.write(i,d[n]),t[n]=r.flush());l=await this.serializeEventStream({eventStream:d[e],requestSchema:s,initialRequest:t})}}else r.write(c,d),l=r.flush()}return u.headers=a,u.query=i,u.body=l,u.method=`POST`,u}async deserializeResponse(e,t,n){let r=this.deserializer,i=P.of(e.output),a={};if(n.statusCode>=300){let i=await nt(n.body,t);throw i.byteLength>0&&Object.assign(a,await r.read(15,i)),await this.handleError(e,t,n,a,this.deserializeMetadata(n)),Error(`@smithy/core/protocols - RPC Protocol error handler failed to throw.`)}for(let e in n.headers){let t=n.headers[e];delete n.headers[e],n.headers[e.toLowerCase()]=t}let o=i.getEventStreamMember();if(o)a[o]=await this.deserializeEventStream({response:n,responseSchema:i,initialResponseContainer:a});else{let e=await nt(n.body,t);e.byteLength>0&&Object.assign(a,await r.read(i,e))}return a.$metadata=this.deserializeMetadata(n),a}}})),Ui,Wi=o((()=>{at(),Ui=(e,t,n,r,i,a)=>{if(t!=null&&t[n]!==void 0){let t=r();if(t.length<=0)throw Error(`Empty value provided for input HTTP label: `+n+`.`);e=e.replace(i,a?t.split(`/`).map(e=>it(e)).join(`/`):it(t))}else throw Error(`No value provided for input HTTP label: `+n+`.`);return e}}));function Gi(e,t){return new qi(e,t)}var Ki,qi,Ji=o((()=>{Ki=p(),Wi(),qi=class{input;context;query={};method=``;headers={};path=``;body=null;hostname=``;resolvePathStack=[];constructor(e,t){this.input=e,this.context=t}async build(){let{hostname:e,protocol:t=`https`,port:n,path:r}=await this.context.endpoint();this.path=r;for(let e of this.resolvePathStack)e(this.path);return new Ki.HttpRequest({protocol:t,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(t=>{this.path=`${t?.endsWith(`/`)?t.slice(0,-1):t||``}`+e}),this}p(e,t,n,r){return this.resolvePathStack.push(i=>{this.path=Ui(i,this.input,e,t,n,r)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}}));function Yi(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();let{httpLabel:n,httpPrefixHeaders:r,httpHeader:i,httpQuery:a}=e.getMergedTraits();return(t.httpBindings?typeof r==`string`||i?6:a||n?5:void 0:void 0)??t.timestampFormat.default}var Xi=o((()=>{})),Zi,Qi,$i,ea=o((()=>{I(),Ti(),Zi=Me(),Qi=N(),Di(),Xi(),$i=class extends Ei{settings;constructor(e){super(),this.settings=e}read(e,t){let n=P.of(e);if(n.isListSchema())return vi(t).map(e=>this.read(n.getValueSchema(),e));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??Zi.fromBase64)(t);if(n.isTimestampSchema())switch(Yi(n,this.settings)){case 5:return pi(t);case 6:return mi(t);case 7:return fi(t);default:return console.warn(`Missing timestamp format, parsing value with Date constructor:`,t),new Date(t)}if(n.isStringSchema()){let e=n.getMergedTraits().mediaType,r=t;if(e)return n.getMergedTraits().httpHeader&&(r=this.base64ToUtf8(r)),(e===`application/json`||e.endsWith(`+json`))&&(r=Zr.from(r)),r}return n.isNumericSchema()?Number(t):n.isBigIntegerSchema()?BigInt(t):n.isBigDecimalSchema()?new Si(t,`bigDecimal`):n.isBooleanSchema()?String(t).toLowerCase()===`true`:t}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??Qi.toUtf8)((this.serdeContext?.base64Decoder??Zi.fromBase64)(e))}}})),ta,na,ra=o((()=>{I(),ta=N(),Di(),ea(),na=class extends Ei{codecDeserializer;stringDeserializer;constructor(e,t){super(),this.codecDeserializer=e,this.stringDeserializer=new $i(t)}setSerdeContext(e){this.stringDeserializer.setSerdeContext(e),this.codecDeserializer.setSerdeContext(e),this.serdeContext=e}read(e,t){let n=P.of(e),r=n.getMergedTraits(),i=this.serdeContext?.utf8Encoder??ta.toUtf8;if(r.httpHeader||r.httpResponseCode)return this.stringDeserializer.read(n,i(t));if(r.httpPayload){if(n.isBlobSchema()){let e=this.serdeContext?.utf8Decoder??ta.fromUtf8;return typeof t==`string`?e(t):t}else if(n.isStringSchema())return`byteLength`in t?i(t):t}return this.codecDeserializer.read(n,t)}}})),ia,aa,oa=o((()=>{I(),Ti(),ia=Me(),Di(),Xi(),aa=class extends Ei{settings;stringBuffer=``;constructor(e){super(),this.settings=e}write(e,t){let n=P.of(e);switch(typeof t){case`object`:if(t===null){this.stringBuffer=`null`;return}if(n.isTimestampSchema()){if(!(t instanceof Date))throw Error(`@smithy/core/protocols - received non-Date value ${t} when schema expected Date in ${n.getName(!0)}`);switch(Yi(n,this.settings)){case 5:this.stringBuffer=t.toISOString().replace(`.000Z`,`Z`);break;case 6:this.stringBuffer=Ln(t);break;case 7:this.stringBuffer=String(t.getTime()/1e3);break;default:console.warn(`Missing timestamp format, using epoch seconds`,t),this.stringBuffer=String(t.getTime()/1e3)}return}if(n.isBlobSchema()&&`byteLength`in t){this.stringBuffer=(this.serdeContext?.base64Encoder??ia.toBase64)(t);return}if(n.isListSchema()&&Array.isArray(t)){let e=``;for(let r of t){this.write([n.getValueSchema(),n.getMergedTraits()],r);let t=this.flush(),i=n.getValueSchema().isTimestampSchema()?t:$r(t);e!==``&&(e+=`, `),e+=i}this.stringBuffer=e;return}this.stringBuffer=JSON.stringify(t,null,2);break;case`string`:let e=n.getMergedTraits().mediaType,r=t;if(e&&((e===`application/json`||e.endsWith(`+json`))&&(r=Zr.from(r)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??ia.toBase64)(r.toString());return}this.stringBuffer=t;break;default:n.isIdempotencyToken()?this.stringBuffer=(0,Yr.v4)():this.stringBuffer=String(t)}}flush(){let e=this.stringBuffer;return this.stringBuffer=``,e}}})),sa,ca=o((()=>{I(),oa(),sa=class{codecSerializer;stringSerializer;buffer;constructor(e,t,n=new aa(t)){this.codecSerializer=e,this.stringSerializer=n}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,t){let n=P.of(e),r=n.getMergedTraits();if(r.httpHeader||r.httpLabel||r.httpQuery){this.stringSerializer.write(n,t),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,t)}flush(){if(this.buffer!==void 0){let e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}})),la=c({FromStringShapeDeserializer:()=>$i,HttpBindingProtocol:()=>Ri,HttpInterceptingShapeDeserializer:()=>na,HttpInterceptingShapeSerializer:()=>sa,HttpProtocol:()=>Pi,RequestBuilder:()=>qi,RpcProtocol:()=>Vi,SerdeContext:()=>Ei,ToStringShapeSerializer:()=>aa,collectBody:()=>nt,determineTimestampFormat:()=>Yi,extendedEncodeURIComponent:()=>it,requestBuilder:()=>Gi,resolvedPath:()=>Ui}),ua=o((()=>{rt(),at(),zi(),Fi(),Hi(),Ji(),Wi(),ea(),ra(),ca(),oa(),Xi(),Di()})),da=o((()=>{ua()}));function fa(e,t,n){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=n}var pa=o((()=>{})),ma,ha=o((()=>{ma=class{authSchemes=new Map;constructor(e){for(let[t,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(t,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}})),ga,_a,va,ya=o((()=>{ga=p(),_a=f(),va=class{async sign(e,t,n){if(!n)throw Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!t.apiKey)throw Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let r=ga.HttpRequest.clone(e);if(n.in===_a.HttpApiKeyAuthLocation.QUERY)r.query[n.name]=t.apiKey;else if(n.in===_a.HttpApiKeyAuthLocation.HEADER)r.headers[n.name]=n.scheme?`${n.scheme} ${t.apiKey}`:t.apiKey;else throw Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return r}}})),ba,xa,Sa=o((()=>{ba=p(),xa=class{async sign(e,t,n){let r=ba.HttpRequest.clone(e);if(!t.token)throw Error("request could not be signed with `token` since the `token` is not defined");return r.headers.Authorization=`Bearer ${t.token}`,r}}})),Ca,wa=o((()=>{Ca=class{async sign(e,t,n){return e}}})),Ta=o((()=>{ya(),Sa(),wa()})),Ea,Da,Oa,ka,Aa,ja=o((()=>{Ea=e=>function(t){return ka(t)&&t.expiration.getTime()-Date.now()<e},Da=3e5,Oa=Ea(Da),ka=e=>e.expiration!==void 0,Aa=(e,t,n)=>{if(e===void 0)return;let r=typeof e==`function`?e:async()=>Promise.resolve(e),i,a,o,s=!1,c=async e=>{a||=r(e);try{i=await a,o=!0,s=!1}finally{a=void 0}return i};return t===void 0?async e=>((!o||e?.forceRefresh)&&(i=await c(e)),i):async e=>((!o||e?.forceRefresh)&&(i=await c(e)),s?i:n(i)?(t(i)&&await c(e),i):(s=!0,i))}})),Ma=o((()=>{ha(),Ta(),ja()})),Na=c({DefaultIdentityProviderConfig:()=>ma,EXPIRATION_MS:()=>Da,HttpApiKeyAuthSigner:()=>va,HttpBearerAuthSigner:()=>xa,NoAuthSigner:()=>Ca,createIsIdentityExpiredFunction:()=>Ea,createPaginator:()=>we,doesIdentityRequireRefresh:()=>ka,getHttpAuthSchemeEndpointRuleSetPlugin:()=>ie,getHttpAuthSchemePlugin:()=>le,getHttpSigningPlugin:()=>ye,getSmithyContext:()=>D,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>re,httpAuthSchemeMiddleware:()=>te,httpAuthSchemeMiddlewareOptions:()=>ce,httpSigningMiddleware:()=>ge,httpSigningMiddlewareOptions:()=>ve,isIdentityExpired:()=>Oa,memoizeIdentityProvider:()=>Aa,normalizeProvider:()=>Se,requestBuilder:()=>Gi,setFeature:()=>fa}),Pa=o((()=>{O(),de(),xe(),Ce(),De(),da(),pa(),Ma()})),Fa=s((e=>{var t=f(),n=class{capacity;data=new Map;parameters=[];constructor({size:e,params:t}){this.capacity=e??50,t&&(this.parameters=t)}get(e,t){let n=this.hash(e);if(n===!1)return t();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let e=this.data.keys(),t=0;for(;;){let{value:n,done:r}=e.next();if(this.data.delete(n),r||++t>10)break}}this.data.set(n,t())}return this.data.get(n)}size(){return this.data.size}hash(e){let t=``,{parameters:n}=this;if(n.length===0)return!1;for(let r of n){let n=String(e[r]??``);if(n.includes(`|;`))return!1;t+=n+`|;`}return t}};let r=RegExp(`^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$`),i=e=>r.test(e)||e.startsWith(`[`)&&e.endsWith(`]`),a=RegExp(`^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$`),o=(e,t=!1)=>{if(!t)return a.test(e);let n=e.split(`.`);for(let e of n)if(!o(e))return!1;return!0},s={},c=`endpoints`;function l(e){return typeof e!=`object`||!e?e:`ref`in e?`$${l(e.ref)}`:`fn`in e?`${e.fn}(${(e.argv||[]).map(l).join(`, `)})`:JSON.stringify(e,null,2)}var u=class extends Error{constructor(e){super(e),this.name=`EndpointError`}};let d=(e,t)=>e===t,p=e=>{let t=e.split(`.`),n=[];for(let r of t){let t=r.indexOf(`[`);if(t!==-1){if(r.indexOf(`]`)!==r.length-1)throw new u(`Path: '${e}' does not end with ']'`);let i=r.slice(t+1,-1);if(Number.isNaN(parseInt(i)))throw new u(`Invalid array index: '${i}' in path: '${e}'`);t!==0&&n.push(r.slice(0,t)),n.push(i)}else n.push(r)}return n},m=(e,t)=>p(t).reduce((n,r)=>{if(typeof n!=`object`)throw new u(`Index '${r}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]},e),h=e=>e!=null,g=e=>!e,_={[t.EndpointURLScheme.HTTP]:80,[t.EndpointURLScheme.HTTPS]:443},v={booleanEquals:d,getAttr:m,isSet:h,isValidHostLabel:o,not:g,parseURL:e=>{let n=(()=>{try{if(e instanceof URL)return e;if(typeof e==`object`&&`hostname`in e){let{hostname:t,port:n,protocol:r=``,path:i=``,query:a={}}=e,o=new URL(`${r}//${t}${n?`:${n}`:``}${i}`);return o.search=Object.entries(a).map(([e,t])=>`${e}=${t}`).join(`&`),o}return new URL(e)}catch{return null}})();if(!n)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=n.href,{host:a,hostname:o,pathname:s,protocol:c,search:l}=n;if(l)return null;let u=c.slice(0,-1);if(!Object.values(t.EndpointURLScheme).includes(u))return null;let d=i(o);return{scheme:u,authority:`${a}${r.includes(`${a}:${_[u]}`)||typeof e==`string`&&e.includes(`${a}:${_[u]}`)?`:${_[u]}`:``}`,path:s,normalizedPath:s.endsWith(`/`)?s:`${s}/`,isIp:d}},stringEquals:(e,t)=>e===t,substring:(e,t,n,r)=>t>=n||e.length<n?null:r?e.substring(e.length-n,e.length-t):e.substring(t,n),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)},y=(e,t)=>{let n=[],r={...t.endpointParams,...t.referenceRecord},i=0;for(;i<e.length;){let t=e.indexOf(`{`,i);if(t===-1){n.push(e.slice(i));break}n.push(e.slice(i,t));let a=e.indexOf(`}`,t);if(a===-1){n.push(e.slice(t));break}e[t+1]===`{`&&e[a+1]===`}`&&(n.push(e.slice(t+1,a)),i=a+2);let o=e.substring(t+1,a);if(o.includes(`#`)){let[e,t]=o.split(`#`);n.push(m(r[e],t))}else n.push(r[o]);i=a+1}return n.join(``)},b=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],x=(e,t,n)=>{if(typeof e==`string`)return y(e,n);if(e.fn)return C.callFunction(e,n);if(e.ref)return b(e,n);throw new u(`'${t}': ${String(e)} is not a string, function or reference.`)},S=({fn:e,argv:t},n)=>{let r=t.map(e=>[`boolean`,`number`].includes(typeof e)?e:C.evaluateExpression(e,`arg`,n)),i=e.split(`.`);return i[0]in s&&i[1]!=null?s[i[0]][i[1]](...r):v[e](...r)},C={evaluateExpression:x,callFunction:S},w=({assign:e,...t},n)=>{if(e&&e in n.referenceRecord)throw new u(`'${e}' is already defined in Reference Record.`);let r=S(t,n);return n.logger?.debug?.(`${c} evaluateCondition: ${l(t)} = ${l(r)}`),{result:r===``?!0:!!r,...e!=null&&{toAssign:{name:e,value:r}}}},T=(e=[],t)=>{let n={};for(let r of e){let{result:e,toAssign:i}=w(r,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!e)return{result:e};i&&(n[i.name]=i.value,t.logger?.debug?.(`${c} assign: ${i.name} := ${l(i.value)}`))}return{result:!0,referenceRecord:n}},E=(e,t)=>Object.entries(e).reduce((e,[n,r])=>({...e,[n]:r.map(e=>{let r=x(e,`Header value entry`,t);if(typeof r!=`string`)throw new u(`Header '${n}' value '${r}' is not a string`);return r})}),{}),D=(e,t)=>Object.entries(e).reduce((e,[n,r])=>({...e,[n]:k.getEndpointProperty(r,t)}),{}),O=(e,t)=>{if(Array.isArray(e))return e.map(e=>O(e,t));switch(typeof e){case`string`:return y(e,t);case`object`:if(e===null)throw new u(`Unexpected endpoint property: ${e}`);return k.getEndpointProperties(e,t);case`boolean`:return e;default:throw new u(`Unexpected endpoint property type: ${typeof e}`)}},k={getEndpointProperty:O,getEndpointProperties:D},A=(e,t)=>{let n=x(e,`Endpoint URL`,t);if(typeof n==`string`)try{return new URL(n)}catch(e){throw console.error(`Failed to construct URL with ${n}`,e),e}throw new u(`Endpoint URL must be a string, got ${typeof n}`)},j=(e,t)=>{let{conditions:n,endpoint:r}=e,{result:i,referenceRecord:a}=T(n,t);if(!i)return;let o={...t,referenceRecord:{...t.referenceRecord,...a}},{url:s,properties:u,headers:d}=r;return t.logger?.debug?.(`${c} Resolving endpoint from template: ${l(r)}`),{...d!=null&&{headers:E(d,o)},...u!=null&&{properties:D(u,o)},url:A(s,o)}},M=(e,t)=>{let{conditions:n,error:r}=e,{result:i,referenceRecord:a}=T(n,t);if(i)throw new u(x(r,`Error`,{...t,referenceRecord:{...t.referenceRecord,...a}}))},ee=(e,t)=>{for(let n of e)if(n.type===`endpoint`){let e=j(n,t);if(e)return e}else if(n.type===`error`)M(n,t);else if(n.type===`tree`){let e=te.evaluateTreeRule(n,t);if(e)return e}else throw new u(`Unknown endpoint rule: ${n}`);throw new u(`Rules evaluation failed`)},te={evaluateRules:ee,evaluateTreeRule:(e,t)=>{let{conditions:n,rules:r}=e,{result:i,referenceRecord:a}=T(n,t);if(i)return te.evaluateRules(r,{...t,referenceRecord:{...t.referenceRecord,...a}})}};e.EndpointCache=n,e.EndpointError=u,e.customEndpointFunctions=s,e.isIpAddress=i,e.isValidHostLabel=o,e.resolveEndpoint=(e,t)=>{let{endpointParams:n,logger:r}=t,{parameters:i,rules:a}=e;t.logger?.debug?.(`${c} Initial EndpointParams: ${l(n)}`);let o=Object.entries(i).filter(([,e])=>e.default!=null).map(([e,t])=>[e,t.default]);if(o.length>0)for(let[e,t]of o)n[e]=n[e]??t;let s=Object.entries(i).filter(([,e])=>e.required).map(([e])=>e);for(let e of s)if(n[e]==null)throw new u(`Missing required parameter: '${e}'`);let d=ee(a,{endpointParams:n,logger:r,referenceRecord:{}});return t.logger?.debug?.(`${c} Resolved endpoint: ${l(d)}`),d}})),Ia=s((e=>{function t(e){let t={};if(e=e.replace(/^\?/,``),e)for(let n of e.split(`&`)){let[e,r=null]=n.split(`=`);e=decodeURIComponent(e),r&&=decodeURIComponent(r),e in t?Array.isArray(t[e])?t[e].push(r):t[e]=[t[e],r]:t[e]=r}return t}e.parseQueryString=t})),La=s((e=>{var t=Ia();let n=e=>{if(typeof e==`string`)return n(new URL(e));let{hostname:r,pathname:i,port:a,protocol:o,search:s}=e,c;return s&&(c=t.parseQueryString(s)),{hostname:r,port:a?parseInt(a):void 0,protocol:o,path:i,query:c}};e.parseUrl=n})),Ra=s((e=>{var t=Fa(),n=La();let r=(e,n=!1)=>{if(n){for(let t of e.split(`.`))if(!r(t))return!1;return!0}return!(!t.isValidHostLabel(e)||e.length<3||e.length>63||e!==e.toLowerCase()||t.isIpAddress(e))},i=e=>{let t=e.split(`:`);if(t.length<6)return null;let[n,r,i,a,o,...s]=t;return n!==`arn`||r===``||i===``||s.join(`:`)===``?null:{partition:r,service:i,region:a,accountId:o,resourceId:s.map(e=>e.split(`/`)).flat()}};var a={partitions:[{id:`aws`,outputs:{dnsSuffix:`amazonaws.com`,dualStackDnsSuffix:`api.aws`,implicitGlobalRegion:`us-east-1`,name:`aws`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$`,regions:{"af-south-1":{description:`Africa (Cape Town)`},"ap-east-1":{description:`Asia Pacific (Hong Kong)`},"ap-east-2":{description:`Asia Pacific (Taipei)`},"ap-northeast-1":{description:`Asia Pacific (Tokyo)`},"ap-northeast-2":{description:`Asia Pacific (Seoul)`},"ap-northeast-3":{description:`Asia Pacific (Osaka)`},"ap-south-1":{description:`Asia Pacific (Mumbai)`},"ap-south-2":{description:`Asia Pacific (Hyderabad)`},"ap-southeast-1":{description:`Asia Pacific (Singapore)`},"ap-southeast-2":{description:`Asia Pacific (Sydney)`},"ap-southeast-3":{description:`Asia Pacific (Jakarta)`},"ap-southeast-4":{description:`Asia Pacific (Melbourne)`},"ap-southeast-5":{description:`Asia Pacific (Malaysia)`},"ap-southeast-6":{description:`Asia Pacific (New Zealand)`},"ap-southeast-7":{description:`Asia Pacific (Thailand)`},"aws-global":{description:`aws global region`},"ca-central-1":{description:`Canada (Central)`},"ca-west-1":{description:`Canada West (Calgary)`},"eu-central-1":{description:`Europe (Frankfurt)`},"eu-central-2":{description:`Europe (Zurich)`},"eu-north-1":{description:`Europe (Stockholm)`},"eu-south-1":{description:`Europe (Milan)`},"eu-south-2":{description:`Europe (Spain)`},"eu-west-1":{description:`Europe (Ireland)`},"eu-west-2":{description:`Europe (London)`},"eu-west-3":{description:`Europe (Paris)`},"il-central-1":{description:`Israel (Tel Aviv)`},"me-central-1":{description:`Middle East (UAE)`},"me-south-1":{description:`Middle East (Bahrain)`},"mx-central-1":{description:`Mexico (Central)`},"sa-east-1":{description:`South America (Sao Paulo)`},"us-east-1":{description:`US East (N. Virginia)`},"us-east-2":{description:`US East (Ohio)`},"us-west-1":{description:`US West (N. California)`},"us-west-2":{description:`US West (Oregon)`}}},{id:`aws-cn`,outputs:{dnsSuffix:`amazonaws.com.cn`,dualStackDnsSuffix:`api.amazonwebservices.com.cn`,implicitGlobalRegion:`cn-northwest-1`,name:`aws-cn`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^cn\\-\\w+\\-\\d+$`,regions:{"aws-cn-global":{description:`aws-cn global region`},"cn-north-1":{description:`China (Beijing)`},"cn-northwest-1":{description:`China (Ningxia)`}}},{id:`aws-eusc`,outputs:{dnsSuffix:`amazonaws.eu`,dualStackDnsSuffix:`api.amazonwebservices.eu`,implicitGlobalRegion:`eusc-de-east-1`,name:`aws-eusc`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^eusc\\-(de)\\-\\w+\\-\\d+$`,regions:{"eusc-de-east-1":{description:`AWS European Sovereign Cloud (Germany)`}}},{id:`aws-iso`,outputs:{dnsSuffix:`c2s.ic.gov`,dualStackDnsSuffix:`api.aws.ic.gov`,implicitGlobalRegion:`us-iso-east-1`,name:`aws-iso`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-iso\\-\\w+\\-\\d+$`,regions:{"aws-iso-global":{description:`aws-iso global region`},"us-iso-east-1":{description:`US ISO East`},"us-iso-west-1":{description:`US ISO WEST`}}},{id:`aws-iso-b`,outputs:{dnsSuffix:`sc2s.sgov.gov`,dualStackDnsSuffix:`api.aws.scloud`,implicitGlobalRegion:`us-isob-east-1`,name:`aws-iso-b`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-isob\\-\\w+\\-\\d+$`,regions:{"aws-iso-b-global":{description:`aws-iso-b global region`},"us-isob-east-1":{description:`US ISOB East (Ohio)`},"us-isob-west-1":{description:`US ISOB West`}}},{id:`aws-iso-e`,outputs:{dnsSuffix:`cloud.adc-e.uk`,dualStackDnsSuffix:`api.cloud-aws.adc-e.uk`,implicitGlobalRegion:`eu-isoe-west-1`,name:`aws-iso-e`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^eu\\-isoe\\-\\w+\\-\\d+$`,regions:{"aws-iso-e-global":{description:`aws-iso-e global region`},"eu-isoe-west-1":{description:`EU ISOE West`}}},{id:`aws-iso-f`,outputs:{dnsSuffix:`csp.hci.ic.gov`,dualStackDnsSuffix:`api.aws.hci.ic.gov`,implicitGlobalRegion:`us-isof-south-1`,name:`aws-iso-f`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-isof\\-\\w+\\-\\d+$`,regions:{"aws-iso-f-global":{description:`aws-iso-f global region`},"us-isof-east-1":{description:`US ISOF EAST`},"us-isof-south-1":{description:`US ISOF SOUTH`}}},{id:`aws-us-gov`,outputs:{dnsSuffix:`amazonaws.com`,dualStackDnsSuffix:`api.aws`,implicitGlobalRegion:`us-gov-west-1`,name:`aws-us-gov`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-gov\\-\\w+\\-\\d+$`,regions:{"aws-us-gov-global":{description:`aws-us-gov global region`},"us-gov-east-1":{description:`AWS GovCloud (US-East)`},"us-gov-west-1":{description:`AWS GovCloud (US-West)`}}}],version:`1.1`};let o=a,s=``,c=e=>{let{partitions:t}=o;for(let n of t){let{regions:t,outputs:r}=n;for(let[n,i]of Object.entries(t))if(n===e)return{...r,...i}}for(let n of t){let{regionRegex:t,outputs:r}=n;if(new RegExp(t).test(e))return{...r}}let n=t.find(e=>e.id===`aws`);if(!n)throw Error(`Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.`);return{...n.outputs}},l=(e,t=``)=>{o=e,s=t},u=()=>{l(a,``)},d=()=>s,f={isVirtualHostableS3Bucket:r,parseArn:i,partition:c};t.customEndpointFunctions.aws=f;let p=e=>{if(typeof e.endpointProvider!=`function`)throw Error(`@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.`);let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>m(e.endpointProvider({Region:typeof e.region==`function`?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint==`function`?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint==`function`?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},m=e=>n.parseUrl(e.url);Object.defineProperty(e,`EndpointError`,{enumerable:!0,get:function(){return t.EndpointError}}),Object.defineProperty(e,`isIpAddress`,{enumerable:!0,get:function(){return t.isIpAddress}}),Object.defineProperty(e,`resolveEndpoint`,{enumerable:!0,get:function(){return t.resolveEndpoint}}),e.awsEndpointFunctions=f,e.getUserAgentPrefix=d,e.partition=c,e.resolveDefaultAwsRegionalEndpointsConfig=p,e.setPartitionInfo=l,e.toEndpointV1=m,e.useDefaultPartitionInfo=u})),za,Ba,Va=o((()=>{za={warningEmitted:!1},Ba=e=>{e&&!za.warningEmitted&&parseInt(e.substring(1,e.indexOf(`.`)))<20&&(za.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js ${e} in January 2026.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/c895JFp`))}}));function Ha(e,t,n){return e.$source||={},e.$source[t]=n,e}var Ua=o((()=>{}));function Wa(e,t,n){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=n}var Ga=o((()=>{}));function Ka(e,t,n){return e.$source||={},e.$source[t]=n,e}var qa=o((()=>{})),Ja=c({emitWarningIfUnsupportedVersion:()=>Ba,setCredentialFeature:()=>Ha,setFeature:()=>Wa,setTokenFeature:()=>Ka,state:()=>za}),Ya=o((()=>{Va(),Ua(),Ga(),qa()})),Xa,Za,Qa=o((()=>{Xa=p(),Za=e=>Xa.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0})),$a,eo=o((()=>{$a=e=>new Date(Date.now()+e)})),to,no=o((()=>{eo(),to=(e,t)=>Math.abs($a(t).getTime()-e)>=3e5})),ro,io=o((()=>{no(),ro=(e,t)=>{let n=Date.parse(e);return to(n,t)?n-Date.now():t}})),ao=o((()=>{Qa(),eo(),io()})),oo,so,co,lo,uo,fo=o((()=>{oo=p(),ao(),so=(e,t)=>{if(!t)throw Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},co=async e=>{let t=so(`context`,e.context),n=so(`config`,e.config),r=t.endpointV2?.properties?.authSchemes?.[0];return{config:n,signer:await so(`signer`,n.signer)(r),signingRegion:e?.signingRegion,signingRegionSet:e?.signingRegionSet,signingName:e?.signingName}},lo=class{async sign(e,t,n){if(!oo.HttpRequest.isInstance(e))throw Error("The request is not an instance of `HttpRequest` and cannot be signed");let r=await co(n),{config:i,signer:a}=r,{signingRegion:o,signingName:s}=r,c=n.context;if(c?.authSchemes?.length??!1){let[e,t]=c.authSchemes;e?.name===`sigv4a`&&t?.name===`sigv4`&&(o=t?.signingRegion??o,s=t?.signingName??s)}return await a.sign(e,{signingDate:$a(i.systemClockOffset),signingRegion:o,signingService:s})}errorHandler(e){return t=>{let n=t.ServerTime??Za(t.$response);if(n){let r=so(`config`,e.config),i=r.systemClockOffset;r.systemClockOffset=ro(n,r.systemClockOffset),r.systemClockOffset!==i&&t.$metadata&&(t.$metadata.clockSkewCorrected=!0)}throw t}}successHandler(e,t){let n=Za(e);if(n){let e=so(`config`,t.config);e.systemClockOffset=ro(n,e.systemClockOffset)}}},uo=lo})),po,mo,ho=o((()=>{po=p(),ao(),fo(),mo=class extends lo{async sign(e,t,n){if(!po.HttpRequest.isInstance(e))throw Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:r,signer:i,signingRegion:a,signingRegionSet:o,signingName:s}=await co(n),c=(await r.sigv4aSigningRegionSet?.()??o??[a]).join(`,`);return await i.sign(e,{signingDate:$a(r.systemClockOffset),signingRegion:c,signingService:s})}}})),go,_o=o((()=>{go=e=>typeof e==`string`&&e.length>0?e.split(`,`).map(e=>e.trim()):[]})),vo,yo=o((()=>{vo=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,`_`).toUpperCase()}`})),bo,xo,So,Co=o((()=>{_o(),yo(),bo=`AWS_AUTH_SCHEME_PREFERENCE`,xo=`auth_scheme_preference`,So={environmentVariableSelector:(e,t)=>{if(t?.signingName&&vo(t.signingName)in e)return[`httpBearerAuth`];if(bo in e)return go(e[bo])},configFileSelector:e=>{if(xo in e)return go(e[xo])},default:[]}})),wo=s((e=>{var t=class e extends Error{name=`ProviderError`;tryNextLink;constructor(t,n=!0){let r,i=!0;typeof n==`boolean`?(r=void 0,i=n):typeof n==`object`&&n&&(r=n.logger,i=n.tryNextLink??!0),super(t),this.tryNextLink=i,Object.setPrototypeOf(this,e.prototype),r?.debug?.(`@smithy/property-provider ${i?`->`:`(!)`} ${t}`)}static from(e,t=!0){return Object.assign(new this(e.message,t),e)}},n=class e extends t{name=`CredentialsProviderError`;constructor(t,n=!0){super(t,n),Object.setPrototypeOf(this,e.prototype)}},r=class e extends t{name=`TokenProviderError`;constructor(t,n=!0){super(t,n),Object.setPrototypeOf(this,e.prototype)}};e.CredentialsProviderError=n,e.ProviderError=t,e.TokenProviderError=r,e.chain=(...e)=>async()=>{if(e.length===0)throw new t(`No providers in chain`);let n;for(let t of e)try{return await t()}catch(e){if(n=e,e?.tryNextLink)continue;throw e}throw n},e.fromStatic=e=>()=>Promise.resolve(e),e.memoize=(e,t,n)=>{let r,i,a,o=!1,s=async()=>{i||=e();try{r=await i,a=!0,o=!1}finally{i=void 0}return r};return t===void 0?async e=>((!a||e?.forceRefresh)&&(r=await s()),r):async e=>((!a||e?.forceRefresh)&&(r=await s()),o?r:n&&!n(r)?(o=!0,r):(t(r)&&await s(),r))}})),To,Eo,Do,Oo=o((()=>{Pa(),To=wo(),Eo=e=>(e.sigv4aSigningRegionSet=Se(e.sigv4aSigningRegionSet),e),Do={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(`,`).map(e=>e.trim());throw new To.ProviderError(`AWS_SIGV4A_SIGNING_REGION_SET not set in env.`,{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??``).split(`,`).map(e=>e.trim());throw new To.ProviderError(`sigv4a_signing_region_set not set in profile.`,{tryNextLink:!0})},default:void 0}})),ko=s((e=>{var t=Ye(),n=N(),r=Oe(),i=p(),a=k(),o=Ge();let s=`authorization`,c=`x-amz-date`,l=[s,c,`date`],u=`x-amz-content-sha256`,d={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},f=/^proxy-/,m=/^sec-/,h=`AWS4-HMAC-SHA256`,g=`aws4_request`,_={},v=[],y=(e,t,n)=>`${e}/${t}/${n}/${g}`,b=async(e,n,r,i,a)=>{let o=await x(e,n.secretAccessKey,n.accessKeyId),s=`${r}:${i}:${a}:${t.toHex(o)}:${n.sessionToken}`;if(s in _)return _[s];for(v.push(s);v.length>50;)delete _[v.shift()];let c=`AWS4${n.secretAccessKey}`;for(let t of[r,i,a,g])c=await x(e,c,t);return _[s]=c},x=(e,t,r)=>{let i=new e(t);return i.update(n.toUint8Array(r)),i.digest()},S=({headers:e},t,n)=>{let r={};for(let i of Object.keys(e).sort()){if(e[i]==null)continue;let a=i.toLowerCase();(a in d||t?.has(a)||f.test(a)||m.test(a))&&(!n||n&&!n.has(a))||(r[a]=e[i].trim().replace(/\s+/g,` `))}return r},C=async({headers:e,body:i},a)=>{for(let t of Object.keys(e))if(t.toLowerCase()===u)return e[t];if(i==null)return`e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855`;if(typeof i==`string`||ArrayBuffer.isView(i)||r.isArrayBuffer(i)){let e=new a;return e.update(n.toUint8Array(i)),t.toHex(await e.digest())}return`UNSIGNED-PAYLOAD`};var w=class{format(e){let t=[];for(let r of Object.keys(e)){let i=n.fromUtf8(r);t.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(e[r]))}let r=new Uint8Array(t.reduce((e,t)=>e+t.byteLength,0)),i=0;for(let e of t)r.set(e,i),i+=e.byteLength;return r}formatHeaderValue(e){switch(e.type){case`boolean`:return Uint8Array.from([e.value?0:1]);case`byte`:return Uint8Array.from([2,e.value]);case`short`:let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case`integer`:let i=new DataView(new ArrayBuffer(5));return i.setUint8(0,4),i.setInt32(1,e.value,!1),new Uint8Array(i.buffer);case`long`:let a=new Uint8Array(9);return a[0]=5,a.set(e.value.bytes,1),a;case`binary`:let o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);let s=new Uint8Array(o.buffer);return s.set(e.value,3),s;case`string`:let c=n.fromUtf8(e.value),l=new DataView(new ArrayBuffer(3+c.byteLength));l.setUint8(0,7),l.setUint16(1,c.byteLength,!1);let u=new Uint8Array(l.buffer);return u.set(c,3),u;case`timestamp`:let d=new Uint8Array(9);return d[0]=8,d.set(E.fromNumber(e.value.valueOf()).bytes,1),d;case`uuid`:if(!T.test(e.value))throw Error(`Invalid UUID received: ${e.value}`);let f=new Uint8Array(17);return f[0]=9,f.set(t.fromHex(e.value.replace(/\-/g,``)),1),f}}};let T=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var E=class e{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw Error(`Int64 buffers must be exactly 8 bytes`)}static fromNumber(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let n=new Uint8Array(8);for(let e=7,r=Math.abs(Math.round(t));e>-1&&r>0;e--,r/=256)n[e]=r;return t<0&&D(n),new e(n)}valueOf(){let e=this.bytes.slice(0),n=e[0]&128;return n&&D(e),parseInt(t.toHex(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}};function D(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}let O=(e,t)=>{e=e.toLowerCase();for(let n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1},A=(e,t={})=>{let{headers:n,query:r={}}=i.HttpRequest.clone(e);for(let e of Object.keys(n)){let i=e.toLowerCase();(i.slice(0,6)===`x-amz-`&&!t.unhoistableHeaders?.has(i)||t.hoistableHeaders?.has(i))&&(r[e]=n[e],delete n[e])}return{...e,headers:n,query:r}},j=e=>{e=i.HttpRequest.clone(e);for(let t of Object.keys(e.headers))l.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},M=({query:e={}})=>{let t=[],n={};for(let r of Object.keys(e)){if(r.toLowerCase()===`x-amz-signature`)continue;let i=o.escapeUri(r);t.push(i);let a=e[r];typeof a==`string`?n[i]=`${i}=${o.escapeUri(a)}`:Array.isArray(a)&&(n[i]=a.slice(0).reduce((e,t)=>e.concat([`${i}=${o.escapeUri(t)}`]),[]).sort().join(`&`))}return t.sort().map(e=>n[e]).filter(e=>e).join(`&`)},ee=e=>te(e).toISOString().replace(/\.\d{3}Z$/,`Z`),te=e=>typeof e==`number`?new Date(e*1e3):typeof e==`string`?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var ne=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:t,region:n,service:r,sha256:i,uriEscapePath:o=!0}){this.service=r,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e==`boolean`?e:!0,this.regionProvider=a.normalizeProvider(n),this.credentialProvider=a.normalizeProvider(t)}createCanonicalRequest(e,t,n){let r=Object.keys(t).sort();return`${e.method}
${this.getCanonicalPath(e)}
${M(e)}
${r.map(e=>`${e}:${t[e]}`).join(`
`)}

${r.join(`;`)}
${n}`}async createStringToSign(e,r,i,a){let o=new this.sha256;o.update(n.toUint8Array(i));let s=await o.digest();return`${a}
${e}
${r}
${t.toHex(s)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let t=[];for(let n of e.split(`/`))n?.length!==0&&n!==`.`&&(n===`..`?t.pop():t.push(n));let n=`${e?.startsWith(`/`)?`/`:``}${t.join(`/`)}${t.length>0&&e?.endsWith(`/`)?`/`:``}`;return o.escapeUri(n).replace(/%2F/g,`/`)}return e}validateResolvedCredentials(e){if(typeof e!=`object`||typeof e.accessKeyId!=`string`||typeof e.secretAccessKey!=`string`)throw Error(`Resolved credential object is not valid`)}formatDate(e){let t=ee(e).replace(/[\-:]/g,``);return{longDate:t,shortDate:t.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(`;`)}};e.SignatureV4=class extends ne{headerFormatter=new w;constructor({applyChecksum:e,credentials:t,region:n,service:r,sha256:i,uriEscapePath:a=!0}){super({applyChecksum:e,credentials:t,region:n,service:r,sha256:i,uriEscapePath:a})}async presign(e,t={}){let{signingDate:n=new Date,expiresIn:r=3600,unsignableHeaders:i,unhoistableHeaders:a,signableHeaders:o,hoistableHeaders:s,signingRegion:c,signingService:l}=t,u=await this.credentialProvider();this.validateResolvedCredentials(u);let d=c??await this.regionProvider(),{longDate:f,shortDate:p}=this.formatDate(n);if(r>604800)return Promise.reject(`Signature version 4 presigned URLs must have an expiration date less than one week in the future`);let m=y(p,d,l??this.service),g=A(j(e),{unhoistableHeaders:a,hoistableHeaders:s});u.sessionToken&&(g.query[`X-Amz-Security-Token`]=u.sessionToken),g.query[`X-Amz-Algorithm`]=h,g.query[`X-Amz-Credential`]=`${u.accessKeyId}/${m}`,g.query[`X-Amz-Date`]=f,g.query[`X-Amz-Expires`]=r.toString(10);let _=S(g,i,o);return g.query[`X-Amz-SignedHeaders`]=this.getCanonicalHeaderList(_),g.query[`X-Amz-Signature`]=await this.getSignature(f,m,this.getSigningKey(u,d,p,l),this.createCanonicalRequest(g,_,await C(e,this.sha256))),g}async sign(e,t){return typeof e==`string`?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:n},{signingDate:r=new Date,priorSignature:i,signingRegion:a,signingService:o}){let s=a??await this.regionProvider(),{shortDate:c,longDate:l}=this.formatDate(r),u=y(c,s,o??this.service),d=await C({headers:{},body:n},this.sha256),f=new this.sha256;f.update(e);let p=[`AWS4-HMAC-SHA256-PAYLOAD`,l,u,i,t.toHex(await f.digest()),d].join(`
`);return this.signString(p,{signingDate:r,signingRegion:s,signingService:o})}async signMessage(e,{signingDate:t=new Date,signingRegion:n,signingService:r}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:n,signingService:r,priorSignature:e.priorSignature}).then(t=>({message:e.message,signature:t}))}async signString(e,{signingDate:r=new Date,signingRegion:i,signingService:a}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let s=i??await this.regionProvider(),{shortDate:c}=this.formatDate(r),l=new this.sha256(await this.getSigningKey(o,s,c,a));return l.update(n.toUint8Array(e)),t.toHex(await l.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:n,unsignableHeaders:r,signingRegion:i,signingService:a}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let l=i??await this.regionProvider(),d=j(e),{longDate:f,shortDate:p}=this.formatDate(t),m=y(p,l,a??this.service);d.headers[c]=f,o.sessionToken&&(d.headers[`x-amz-security-token`]=o.sessionToken);let g=await C(d,this.sha256);!O(u,d.headers)&&this.applyChecksum&&(d.headers[u]=g);let _=S(d,r,n),v=await this.getSignature(f,m,this.getSigningKey(o,l,p,a),this.createCanonicalRequest(d,_,g));return d.headers[s]=`${h} Credential=${o.accessKeyId}/${m}, SignedHeaders=${this.getCanonicalHeaderList(_)}, Signature=${v}`,d}async getSignature(e,r,i,a){let o=await this.createStringToSign(e,r,a,h),s=new this.sha256(await i);return s.update(n.toUint8Array(o)),t.toHex(await s.digest())}getSigningKey(e,t,n,r){return b(this.sha256,e,n,t,r||this.service)}}}));function Ao(e,{credentials:t,credentialDefaultProvider:n}){let r;return r=t?t?.memoized?t:Aa(t,Oa,ka):n?Se(n(Object.assign({},e,{parentClientConfig:e}))):async()=>{throw Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},r.memoized=!0,r}function jo(e,t){if(t.configBound)return t;let n=async n=>t({...n,callerClientConfig:e});return n.memoized=t.memoized,n.configBound=!0,n}var Mo,No,Po,Fo=o((()=>{Ya(),Pa(),Mo=ko(),No=e=>{let t=e.credentials,n=!!e.credentials,r;Object.defineProperty(e,`credentials`,{set(i){i&&i!==t&&i!==r&&(n=!0),t=i;let a=jo(e,Ao(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}));if(n&&!a.attributed){let e=typeof t==`object`&&!!t;r=async t=>{let n=await a(t);return e&&(!n.$source||Object.keys(n.$source).length===0)?Ha(n,`CREDENTIALS_CODE`,`e`):n},r.memoized=a.memoized,r.configBound=a.configBound,r.attributed=!0}else r=a},get(){return r},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:i=!0,systemClockOffset:a=e.systemClockOffset||0,sha256:o}=e,s;return s=e.signer?Se(e.signer):e.regionInfoProvider?()=>Se(e.region)().then(async t=>[await e.regionInfoProvider(t,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},t]).then(([t,n])=>{let{signingRegion:r,signingService:a}=t;e.signingRegion=e.signingRegion||r||n,e.signingName=e.signingName||a||e.serviceId;let s={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:i};return new(e.signerConstructor||Mo.SignatureV4)(s)}):async t=>{t=Object.assign({},{name:`sigv4`,signingName:e.signingName||e.defaultSigningName,signingRegion:await Se(e.region)(),properties:{}},t);let n=t.signingRegion,r=t.signingName;e.signingRegion=e.signingRegion||n,e.signingName=e.signingName||r||e.serviceId;let a={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:i};return new(e.signerConstructor||Mo.SignatureV4)(a)},Object.assign(e,{systemClockOffset:a,signingEscapePath:i,signer:s})},Po=No})),Io=o((()=>{fo(),ho(),Co(),Oo(),Fo()})),Lo=c({AWSSDKSigV4Signer:()=>uo,AwsSdkSigV4ASigner:()=>mo,AwsSdkSigV4Signer:()=>lo,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>So,NODE_SIGV4A_CONFIG_OPTIONS:()=>Do,getBearerTokenEnvKey:()=>vo,resolveAWSSDKSigV4Config:()=>Po,resolveAwsSdkSigV4AConfig:()=>Eo,resolveAwsSdkSigV4Config:()=>No,validateSigningProperties:()=>co}),Ro=o((()=>{Io(),yo()}));function zo(e){return typeof Buffer<`u`?Buffer.alloc(e):new Uint8Array(e)}function Bo(e){return e[is]=!0,e}var Vo,Ho,Uo,Wo,Go,Ko,qo,Jo,Yo,Xo,Zo,Qo,$o,es,ts,ns,rs,is,as=o((()=>{Vo=0,Ho=1,Uo=2,Wo=3,Go=4,Ko=5,qo=6,Jo=7,Yo=20,Xo=21,Zo=22,Qo=23,$o=24,es=25,ts=26,ns=27,rs=31,is=Symbol(`@smithy/core/cbor::tagSymbol`)}));function os(e){L=e,Ts=new DataView(L.buffer,L.byteOffset,L.byteLength)}function ss(e,t){if(e>=t)throw Error(`unexpected end of (decode) payload.`);let n=(L[e]&224)>>5,r=L[e]&31;switch(n){case Vo:case Ho:case qo:let i,a;if(r<24)i=r,a=1;else switch(r){case $o:case es:case ts:case ns:let n=Ds[r],o=n+1;if(a=o,t-e<o)throw Error(`countLength ${n} greater than remaining buf len.`);let s=e+1;i=n===1?L[s]:n===2?Ts.getUint16(s):n===4?Ts.getUint32(s):Ts.getBigUint64(s);break;default:throw Error(`unexpected minor value ${r}.`)}if(n===Vo)return R=a,xs(i);if(n===Ho){let e;return e=typeof i==`bigint`?BigInt(-1)-i:-1-i,R=a,xs(e)}else if(r===2||r===3){let n=ds(e+a,t),i=BigInt(0),o=e+a+R;for(let e=o;e<o+n;++e)i=i<<BigInt(8)|BigInt(L[e]);return R=a+R+n,r===3?-i-BigInt(1):i}else if(r===4){let[n,r]=ss(e+a,t),i=r<0?-1:1,o=`0`.repeat(Math.abs(n)+1)+String(BigInt(i)*BigInt(r)),s,c=r<0?`-`:``;return s=n===0?o:o.slice(0,o.length+n)+`.`+o.slice(n),s=s.replace(/^0+/g,``),s===``&&(s=`0`),s[0]===`.`&&(s=`0`+s),s=c+s,R=a+R,bi(s)}else{let n=ss(e+a,t);return R=a+R,Bo({tag:xs(i),value:n})}case Wo:case Ko:case Go:case Uo:if(r===rs)switch(n){case Wo:return ps(e,t);case Ko:return ys(e,t);case Go:return _s(e,t);case Uo:return hs(e,t)}else switch(n){case Wo:return fs(e,t);case Ko:return vs(e,t);case Go:return gs(e,t);case Uo:return ms(e,t)}default:return bs(e,t)}}function cs(e,t,n){return ws&&e.constructor?.name===`Buffer`?e.toString(`utf-8`,t,n):Es?Es.decode(e.subarray(t,n)):(0,Ss.toUtf8)(e.subarray(t,n))}function ls(e){let t=Number(e);return(t<-(2**53-1)||2**53-1<t)&&console.warn(Error(`@smithy/core/cbor - truncating BigInt(${e}) to ${t} with loss of precision.`)),t}function us(e,t){let n=e>>7,r=(e&124)>>2,i=(e&3)<<8|t,a=n===0?1:-1,o,s;if(r===0){if(i===0)return 0;o=2**-14,s=0}else if(r===31)return i===0?a*(1/0):NaN;else o=2**(r-15),s=1;return s+=i/1024,o*s*a}function ds(e,t){let n=L[e]&31;if(n<24)return R=1,n;if(n===$o||n===es||n===ts||n===ns){let r=Ds[n];if(R=r+1,t-e<R)throw Error(`countLength ${r} greater than remaining buf len.`);let i=e+1;return r===1?L[i]:r===2?Ts.getUint16(i):r===4?Ts.getUint32(i):ls(Ts.getBigUint64(i))}throw Error(`unexpected minor value ${n}.`)}function fs(e,t){let n=ds(e,t),r=R;if(e+=r,t-e<n)throw Error(`string len ${n} greater than remaining buf len.`);let i=cs(L,e,e+n);return R=r+n,i}function ps(e,t){e+=1;let n=[];for(let r=e;e<t;){if(L[e]===255){let t=zo(n.length);return t.set(n,0),R=e-r+2,cs(t,0,t.length)}let i=(L[e]&224)>>5,a=L[e]&31;if(i!==Wo)throw Error(`unexpected major type ${i} in indefinite string.`);if(a===rs)throw Error(`nested indefinite string.`);let o=ms(e,t);e+=R;for(let e=0;e<o.length;++e)n.push(o[e])}throw Error(`expected break marker.`)}function ms(e,t){let n=ds(e,t),r=R;if(e+=r,t-e<n)throw Error(`unstructured byte string len ${n} greater than remaining buf len.`);let i=L.subarray(e,e+n);return R=r+n,i}function hs(e,t){e+=1;let n=[];for(let r=e;e<t;){if(L[e]===255){let t=zo(n.length);return t.set(n,0),R=e-r+2,t}let i=(L[e]&224)>>5,a=L[e]&31;if(i!==Uo)throw Error(`unexpected major type ${i} in indefinite string.`);if(a===rs)throw Error(`nested indefinite string.`);let o=ms(e,t);e+=R;for(let e=0;e<o.length;++e)n.push(o[e])}throw Error(`expected break marker.`)}function gs(e,t){let n=ds(e,t),r=R;e+=r;let i=e,a=Array(n);for(let r=0;r<n;++r){let n=ss(e,t),i=R;a[r]=n,e+=i}return R=r+(e-i),a}function _s(e,t){e+=1;let n=[];for(let r=e;e<t;){if(L[e]===255)return R=e-r+2,n;let i=ss(e,t);e+=R,n.push(i)}throw Error(`expected break marker.`)}function vs(e,t){let n=ds(e,t),r=R;e+=r;let i=e,a={};for(let r=0;r<n;++r){if(e>=t)throw Error(`unexpected end of map payload.`);let n=(L[e]&224)>>5;if(n!==Wo)throw Error(`unexpected major type ${n} for map key at index ${e}.`);let r=ss(e,t);e+=R;let i=ss(e,t);e+=R,a[r]=i}return R=r+(e-i),a}function ys(e,t){e+=1;let n=e,r={};for(;e<t;){if(e>=t)throw Error(`unexpected end of map payload.`);if(L[e]===255)return R=e-n+2,r;let i=(L[e]&224)>>5;if(i!==Wo)throw Error(`unexpected major type ${i} for map key.`);let a=ss(e,t);e+=R;let o=ss(e,t);e+=R,r[a]=o}throw Error(`expected break marker.`)}function bs(e,t){let n=L[e]&31;switch(n){case Xo:case Yo:return R=1,n===Xo;case Zo:return R=1,null;case Qo:return R=1,null;case es:if(t-e<3)throw Error(`incomplete float16 at end of buf.`);return R=3,us(L[e+1],L[e+2]);case ts:if(t-e<5)throw Error(`incomplete float32 at end of buf.`);return R=5,Ts.getFloat32(e+1);case ns:if(t-e<9)throw Error(`incomplete float64 at end of buf.`);return R=9,Ts.getFloat64(e+1);default:throw Error(`unexpected minor value ${n}.`)}}function xs(e){if(typeof e==`number`)return e;let t=Number(e);return-(2**53-1)<=t&&t<=2**53-1?t:e}var Ss,Cs,ws,L,Ts,Es,R,Ds,Os=o((()=>{Ti(),Ss=N(),as(),Cs=typeof TextDecoder<`u`,ws=typeof Buffer<`u`,L=zo(0),Ts=new DataView(L.buffer,L.byteOffset,L.byteLength),Es=Cs?new TextDecoder:null,R=0,Ds={[$o]:1,[es]:2,[ts]:4,[ns]:8}}));function ks(e){z.byteLength-B<e&&js(B<16e6?Math.max(z.byteLength*4,z.byteLength+e):z.byteLength+e+16e6)}function As(){let e=zo(B);return e.set(z.subarray(0,B),0),B=0,e}function js(e){let t=z;z=zo(e),t&&(t.copy?t.copy(z,0,0,t.byteLength):z.set(t,0)),Is=new DataView(z.buffer,z.byteOffset,z.byteLength)}function Ms(e,t){t<24?z[B++]=e<<5|t:t<256?(z[B++]=e<<5|24,z[B++]=t):t<65536?(z[B++]=e<<5|es,Is.setUint16(B,t),B+=2):t<2**32?(z[B++]=e<<5|ts,Is.setUint32(B,t),B+=4):(z[B++]=e<<5|ns,Is.setBigUint64(B,typeof t==`bigint`?t:BigInt(t)),B+=8)}function Ns(e){let t=[e];for(;t.length;){let e=t.pop();if(ks(typeof e==`string`?e.length*4:64),typeof e==`string`){if(Fs)Ms(Wo,Buffer.byteLength(e)),B+=z.write(e,B);else{let t=(0,Ps.fromUtf8)(e);Ms(Wo,t.byteLength),z.set(t,B),B+=t.byteLength}continue}else if(typeof e==`number`){if(Number.isInteger(e)){let t=e>=0,n=t?Vo:Ho,r=t?e:-e-1;r<24?z[B++]=n<<5|r:r<256?(z[B++]=n<<5|24,z[B++]=r):r<65536?(z[B++]=n<<5|es,z[B++]=r>>8,z[B++]=r):r<4294967296?(z[B++]=n<<5|ts,Is.setUint32(B,r),B+=4):(z[B++]=n<<5|ns,Is.setBigUint64(B,BigInt(r)),B+=8);continue}z[B++]=Jo<<5|ns,Is.setFloat64(B,e),B+=8;continue}else if(typeof e==`bigint`){let t=e>=0,n=t?Vo:Ho,r=t?e:-e-BigInt(1),i=Number(r);if(i<24)z[B++]=n<<5|i;else if(i<256)z[B++]=n<<5|24,z[B++]=i;else if(i<65536)z[B++]=n<<5|es,z[B++]=i>>8,z[B++]=i&255;else if(i<4294967296)z[B++]=n<<5|ts,Is.setUint32(B,i),B+=4;else if(r<BigInt(`18446744073709551616`))z[B++]=n<<5|ns,Is.setBigUint64(B,r),B+=8;else{let e=r.toString(2),n=new Uint8Array(Math.ceil(e.length/8)),i=r,a=0;for(;n.byteLength-++a>=0;)n[n.byteLength-a]=Number(i&BigInt(255)),i>>=BigInt(8);ks(n.byteLength*2),z[B++]=t?194:195,Fs?Ms(Uo,Buffer.byteLength(n)):Ms(Uo,n.byteLength),z.set(n,B),B+=n.byteLength}continue}else if(e===null){z[B++]=Jo<<5|Zo;continue}else if(typeof e==`boolean`){z[B++]=Jo<<5|(e?Xo:Yo);continue}else if(e===void 0)throw Error(`@smithy/core/cbor: client may not serialize undefined value.`);else if(Array.isArray(e)){for(let n=e.length-1;n>=0;--n)t.push(e[n]);Ms(Go,e.length);continue}else if(typeof e.byteLength==`number`){ks(e.length*2),Ms(Uo,e.length),z.set(e,B),B+=e.byteLength;continue}else if(typeof e==`object`){if(e instanceof Si){let n=e.string.indexOf(`.`),r=n===-1?0:n-e.string.length+1,i=BigInt(e.string.replace(`.`,``));z[B++]=196,t.push(i),t.push(r),Ms(Go,2);continue}if(e[is])if(`tag`in e&&`value`in e){t.push(e.value),Ms(qo,e.tag);continue}else throw Error(`tag encountered with missing fields, need 'tag' and 'value', found: `+JSON.stringify(e));let n=Object.keys(e);for(let r=n.length-1;r>=0;--r){let i=n[r];t.push(e[i]),t.push(i)}Ms(Ko,n.length);continue}throw Error(`data type ${e?.constructor?.name??typeof e} not compatible for encoding.`)}}var Ps,Fs,z,Is,B,Ls=o((()=>{Ti(),Ps=N(),as(),Fs=typeof Buffer<`u`,z=zo(2048),Is=new DataView(z.buffer,z.byteOffset,z.byteLength),B=0})),Rs,zs=o((()=>{Os(),Ls(),Rs={deserialize(e){return os(e),ss(0,e.length)},serialize(e){try{return Ns(e),As()}catch(e){throw As(),e}},resizeEncodingBuffer(e){js(e)}}})),Bs,Vs,Hs=o((()=>{as(),Bs=e=>Bo({tag:1,value:e.getTime()/1e3}),Vs=(e,t)=>{let n=e=>{let t=e;return typeof t==`number`&&(t=t.toString()),t.indexOf(`,`)>=0&&(t=t.split(`,`)[0]),t.indexOf(`:`)>=0&&(t=t.split(`:`)[0]),t.indexOf(`#`)>=0&&(t=t.split(`#`)[1]),t};if(t.__type!==void 0)return n(t.__type);let r=Object.keys(t).find(e=>e.toLowerCase()===`code`);if(r&&t[r]!==void 0)return n(t[r])}})),Us,Ws,Gs,Ks,qs=o((()=>{ua(),I(),Ti(),Us=Me(),zs(),Hs(),Ws=class extends Ei{createSerializer(){let e=new Gs;return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new Ks;return e.setSerdeContext(this.serdeContext),e}},Gs=class extends Ei{value;write(e,t){this.value=this.serialize(e,t)}serialize(e,t){let n=P.of(e);if(t==null)return n.isIdempotencyToken()?(0,Yr.v4)():t;if(n.isBlobSchema())return typeof t==`string`?(this.serdeContext?.base64Decoder??Us.fromBase64)(t):t;if(n.isTimestampSchema())return Bs(typeof t==`number`||typeof t==`bigint`?new Date(Number(t)/1e3|0):t);if(typeof t==`function`||typeof t==`object`){let e=t;if(n.isListSchema()&&Array.isArray(e)){let t=!!n.getMergedTraits().sparse,r=[],i=0;for(let a of e){let e=this.serialize(n.getValueSchema(),a);(e!=null||t)&&(r[i++]=e)}return r}if(e instanceof Date)return Bs(e);let r={};if(n.isMapSchema()){let t=!!n.getMergedTraits().sparse;for(let i of Object.keys(e)){let a=this.serialize(n.getValueSchema(),e[i]);(a!=null||t)&&(r[i]=a)}}else if(n.isStructSchema()){for(let[t,i]of n.structIterator()){let n=this.serialize(i,e[t]);n!=null&&(r[t]=n)}if(n.isUnionSchema()&&Array.isArray(e.$unknown)){let[t,n]=e.$unknown;r[t]=n}else if(typeof e.__type==`string`)for(let[t,n]of Object.entries(e))t in r||(r[t]=this.serialize(15,n))}else if(n.isDocumentSchema())for(let t of Object.keys(e))r[t]=this.serialize(n.getValueSchema(),e[t]);else if(n.isBigDecimalSchema())return e;return r}return t}flush(){let e=Rs.serialize(this.value);return this.value=void 0,e}},Ks=class extends Ei{read(e,t){let n=Rs.deserialize(t);return this.readValue(e,n)}readValue(e,t){let n=P.of(e);if(n.isTimestampSchema()){if(typeof t==`number`)return fi(t);if(typeof t==`object`&&t.tag===1&&`value`in t)return fi(t.value)}if(n.isBlobSchema())return typeof t==`string`?(this.serdeContext?.base64Decoder??Us.fromBase64)(t):t;if(t===void 0||typeof t==`boolean`||typeof t==`number`||typeof t==`string`||typeof t==`bigint`||typeof t==`symbol`)return t;if(typeof t==`object`){if(t===null)return null;if(`byteLength`in t||t instanceof Date||n.isDocumentSchema())return t;if(n.isListSchema()){let e=[],r=n.getValueSchema(),i=!!n.getMergedTraits().sparse;for(let n of t){let t=this.readValue(r,n);(t!=null||i)&&e.push(t)}return e}let e={};if(n.isMapSchema()){let r=!!n.getMergedTraits().sparse,i=n.getValueSchema();for(let n of Object.keys(t)){let a=this.readValue(i,t[n]);(a!=null||r)&&(e[n]=a)}}else if(n.isStructSchema()){let r=n.isUnionSchema(),i;r&&(i=new Set(Object.keys(t).filter(e=>e!==`__type`)));for(let[a,o]of n.structIterator())r&&i.delete(a),t[a]!=null&&(e[a]=this.readValue(o,t[a]));if(r&&i?.size===1&&Object.keys(e).length===0){let n=i.values().next().value;e.$unknown=[n,t[n]]}else if(typeof t.__type==`string`)for(let[n,r]of Object.entries(t))n in e||(e[n]=r)}else if(t instanceof Si)return t;return e}else return t}}})),Js,Ys,Xs=o((()=>{ua(),I(),Js=k(),qs(),Hs(),Ys=class extends Vi{codec=new Ws;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:e,errorTypeRegistries:t}){super({defaultNamespace:e,errorTypeRegistries:t})}getShapeId(){return`smithy.protocols#rpcv2Cbor`}getPayloadCodec(){return this.codec}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n);if(Object.assign(r.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":`rpc-v2-cbor`,accept:this.getDefaultContentType()}),ot(e.input)===`unit`)delete r.body,delete r.headers[`content-type`];else{r.body||=(this.serializer.write(15,{}),this.serializer.flush());try{r.headers[`content-length`]=String(r.body.byteLength)}catch{}}let{service:i,operation:a}=(0,Js.getSmithyContext)(n),o=`/service/${i}/operation/${a}`;return r.path.endsWith(`/`)?r.path+=o.slice(1):r.path+=o,r}async deserializeResponse(e,t,n){return super.deserializeResponse(e,t,n)}async handleError(e,t,n,r,i){let a=Vs(n,r)??`Unknown`,o={$metadata:i,$fault:n.statusCode<=500?`client`:`server`},s=this.options.defaultNamespace;a.includes(`#`)&&([s]=a.split(`#`));let c=this.compositeErrorRegistry,l=F.for(s);c.copyFrom(l);let u;try{u=c.getSchema(a)}catch{r.Message&&(r.message=r.Message);let e=F.for(`smithy.ts.sdk.synthetic.`+s);c.copyFrom(e);let t=c.getBaseException();if(t){let e=c.getErrorCtor(t);throw Object.assign(new e({name:a}),o,r)}throw Object.assign(Error(a),o,r)}let d=P.of(u),f=c.getErrorCtor(u),p=r.message??r.Message??`Unknown`,m=new f(p),h={};for(let[e,t]of d.structIterator())h[e]=this.deserializer.readValue(t,r[e]);throw Object.assign(m,o,{$fault:d.getMergedTraits().error,message:p},h)}getDefaultContentType(){return`application/cbor`}}})),Zs=o((()=>{Hs(),Xs(),qs()})),Qs=s((e=>{let t=(e,t)=>{let n=[];if(e&&n.push(e),t)for(let e of t)n.push(e);return n},n=(e,t)=>`${e||`anonymous`}${t&&t.length>0?` (a.k.a. ${t.join(`,`)})`:``}`,r=()=>{let e=[],o=[],s=!1,c=new Set,l=e=>e.sort((e,t)=>i[t.step]-i[e.step]||a[t.priority||`normal`]-a[e.priority||`normal`]),u=n=>{let r=!1,i=e=>{let i=t(e.name,e.aliases);if(i.includes(n)){r=!0;for(let e of i)c.delete(e);return!1}return!0};return e=e.filter(i),o=o.filter(i),r},d=n=>{let r=!1,i=e=>{if(e.middleware===n){r=!0;for(let n of t(e.name,e.aliases))c.delete(n);return!1}return!0};return e=e.filter(i),o=o.filter(i),r},f=t=>(e.forEach(e=>{t.add(e.middleware,{...e})}),o.forEach(e=>{t.addRelativeTo(e.middleware,{...e})}),t.identifyOnResolve?.(h.identifyOnResolve()),t),p=e=>{let t=[];return e.before.forEach(e=>{e.before.length===0&&e.after.length===0?t.push(e):t.push(...p(e))}),t.push(e),e.after.reverse().forEach(e=>{e.before.length===0&&e.after.length===0?t.push(e):t.push(...p(e))}),t},m=(r=!1)=>{let i=[],a=[],s={};return e.forEach(e=>{let n={...e,before:[],after:[]};for(let e of t(n.name,n.aliases))s[e]=n;i.push(n)}),o.forEach(e=>{let n={...e,before:[],after:[]};for(let e of t(n.name,n.aliases))s[e]=n;a.push(n)}),a.forEach(e=>{if(e.toMiddleware){let t=s[e.toMiddleware];if(t===void 0){if(r)return;throw Error(`${e.toMiddleware} is not found when adding ${n(e.name,e.aliases)} middleware ${e.relation} ${e.toMiddleware}`)}e.relation===`after`&&t.after.push(e),e.relation===`before`&&t.before.push(e)}}),l(i).map(p).reduce((e,t)=>(e.push(...t),e),[])},h={add:(r,i={})=>{let{name:a,override:o,aliases:s}=i,l={step:`initialize`,priority:`normal`,middleware:r,...i},u=t(a,s);if(u.length>0){if(u.some(e=>c.has(e))){if(!o)throw Error(`Duplicate middleware name '${n(a,s)}'`);for(let t of u){let r=e.findIndex(e=>e.name===t||e.aliases?.some(e=>e===t));if(r===-1)continue;let i=e[r];if(i.step!==l.step||l.priority!==i.priority)throw Error(`"${n(i.name,i.aliases)}" middleware with ${i.priority} priority in ${i.step} step cannot be overridden by "${n(a,s)}" middleware with ${l.priority} priority in ${l.step} step.`);e.splice(r,1)}}for(let e of u)c.add(e)}e.push(l)},addRelativeTo:(e,r)=>{let{name:i,override:a,aliases:s}=r,l={middleware:e,...r},u=t(i,s);if(u.length>0){if(u.some(e=>c.has(e))){if(!a)throw Error(`Duplicate middleware name '${n(i,s)}'`);for(let e of u){let t=o.findIndex(t=>t.name===e||t.aliases?.some(t=>t===e));if(t===-1)continue;let r=o[t];if(r.toMiddleware!==l.toMiddleware||r.relation!==l.relation)throw Error(`"${n(r.name,r.aliases)}" middleware ${r.relation} "${r.toMiddleware}" middleware cannot be overridden by "${n(i,s)}" middleware ${l.relation} "${l.toMiddleware}" middleware.`);o.splice(t,1)}}for(let e of u)c.add(e)}o.push(l)},clone:()=>f(r()),use:e=>{e.applyToStack(h)},remove:e=>typeof e==`string`?u(e):d(e),removeByTag:n=>{let r=!1,i=e=>{let{tags:i,name:a,aliases:o}=e;if(i&&i.includes(n)){let e=t(a,o);for(let t of e)c.delete(t);return r=!0,!1}return!0};return e=e.filter(i),o=o.filter(i),r},concat:e=>{let t=f(r());return t.use(e),t.identifyOnResolve(s||t.identifyOnResolve()||(e.identifyOnResolve?.()??!1)),t},applyToStack:f,identify:()=>m(!0).map(e=>{let t=e.step??e.relation+` `+e.toMiddleware;return n(e.name,e.aliases)+` - `+t}),identifyOnResolve(e){return typeof e==`boolean`&&(s=e),s},resolve:(e,t)=>{for(let n of m().map(e=>e.middleware).reverse())e=n(e,t);return s&&console.log(h.identify()),e}};return h},i={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},a={high:3,normal:2,low:1};e.constructStack=r})),V=s((e=>{var t=Qs(),n=(ua(),d(la)),r=f(),i=(I(),d($t)),a=(Ti(),d(wi)),o=class{config;middlewareStack=t.constructStack();initConfig;handlers;constructor(e){this.config=e;let{protocol:t,protocolSettings:n}=e;n&&typeof t==`function`&&(e.protocol=new t(n))}send(e,t,n){let r=typeof t==`function`?void 0:t,i=typeof t==`function`?t:n,a=r===void 0&&this.config.cacheMiddleware===!0,o;if(a){this.handlers||=new WeakMap;let t=this.handlers;t.has(e.constructor)?o=t.get(e.constructor):(o=e.resolveMiddleware(this.middlewareStack,this.config,r),t.set(e.constructor,o))}else delete this.handlers,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(i)o(e).then(e=>i(null,e.output),e=>i(e)).catch(()=>{});else return o(e).then(e=>e.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}};let s=`***SensitiveInformation***`;function c(e,t){if(t==null)return t;let n=i.NormalizedSchema.of(e);if(n.getMergedTraits().sensitive)return s;if(n.isListSchema()){if(n.getValueSchema().getMergedTraits().sensitive)return s}else if(n.isMapSchema()){if(n.getKeySchema().getMergedTraits().sensitive||n.getValueSchema().getMergedTraits().sensitive)return s}else if(n.isStructSchema()&&typeof t==`object`){let e=t,r={};for(let[t,i]of n.structIterator())e[t]!=null&&(r[t]=c(i,e[t]));return r}return t}var l=class{middlewareStack=t.constructStack();schema;static classBuilder(){return new u}resolveMiddlewareWithContext(e,t,n,{middlewareFn:i,clientName:a,commandName:o,inputFilterSensitiveLog:s,outputFilterSensitiveLog:c,smithyContext:l,additionalContext:u,CommandCtor:d}){for(let r of i.bind(this)(d,e,t,n))this.middlewareStack.use(r);let f=e.concat(this.middlewareStack),{logger:p}=t,m={logger:p,clientName:a,commandName:o,inputFilterSensitiveLog:s,outputFilterSensitiveLog:c,[r.SMITHY_CONTEXT_KEY]:{commandInstance:this,...l},...u},{requestHandler:h}=t;return f.resolve(e=>h.handle(e.request,n||{}),m)}},u=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName=``;_clientName=``;_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,n={}){return this._smithyContext={service:e,operation:t,...n},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=e=>e,t=e=>e){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){let e=this,t;return t=class extends l{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[t]){super(),this.input=t??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(n,r,i){let a=e._operationSchema,o=a?.[4]??a?.input,s=a?.[5]??a?.output;return this.resolveMiddlewareWithContext(n,r,i,{CommandCtor:t,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(a?c.bind(null,o):e=>e),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(a?c.bind(null,s):e=>e),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}};let p=(e,t,n)=>{for(let[n,r]of Object.entries(e)){let e=async function(e,t,n){let i=new r(e);if(typeof t==`function`)this.send(i,t);else if(typeof n==`function`){if(typeof t!=`object`)throw Error(`Expected http options but got ${typeof t}`);this.send(i,t||{},n)}else return this.send(i,t)},i=(n[0].toLowerCase()+n.slice(1)).replace(/Command$/,``);t.prototype[i]=e}let{paginators:r={},waiters:i={}}=n??{};for(let[e,n]of Object.entries(r))t.prototype[e]===void 0&&(t.prototype[e]=function(e={},t,...r){return n({...t,client:this},e,...r)});for(let[e,n]of Object.entries(i))t.prototype[e]===void 0&&(t.prototype[e]=async function(e={},t,...r){let i=t;return typeof t==`number`&&(i={maxWaitTime:t}),n({...i,client:this},e,...r)})};var m=class e extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(t){if(!t)return!1;let n=t;return e.prototype.isPrototypeOf(n)||!!n.$fault&&!!n.$metadata&&(n.$fault===`client`||n.$fault===`server`)}static[Symbol.hasInstance](t){if(!t)return!1;let n=t;return this===e?e.isInstance(t):e.isInstance(t)?n.name&&this.name?this.prototype.isPrototypeOf(t)||n.name===this.name:this.prototype.isPrototypeOf(t):!1}};let h=(e,t={})=>(Object.entries(t).filter(([,e])=>e!==void 0).forEach(([t,n])=>{(e[t]==null||e[t]===``)&&(e[t]=n)}),e.message=e.message||e.Message||`UnknownError`,delete e.Message,e),g=({output:e,parsedBody:t,exceptionCtor:n,errorCode:r})=>{let i=v(e),a=i.httpStatusCode?i.httpStatusCode+``:void 0;throw h(new n({name:t?.code||t?.Code||r||a||`UnknownError`,$fault:`client`,$metadata:i}),t)},_=e=>({output:t,parsedBody:n,errorCode:r})=>{g({output:t,parsedBody:n,exceptionCtor:e,errorCode:r})},v=e=>({httpStatusCode:e.statusCode,requestId:e.headers[`x-amzn-requestid`]??e.headers[`x-amzn-request-id`]??e.headers[`x-amz-request-id`],extendedRequestId:e.headers[`x-amz-id-2`],cfId:e.headers[`x-amz-cf-id`]}),y=e=>{switch(e){case`standard`:return{retryMode:`standard`,connectionTimeout:3100};case`in-region`:return{retryMode:`standard`,connectionTimeout:1100};case`cross-region`:return{retryMode:`standard`,connectionTimeout:3100};case`mobile`:return{retryMode:`standard`,connectionTimeout:3e4};default:return{}}},b=!1,x=e=>{e&&!b&&parseInt(e.substring(1,e.indexOf(`.`)))<16&&(b=!0)},S=e=>{let t=[];for(let n in r.AlgorithmId){let i=r.AlgorithmId[n];e[i]!==void 0&&t.push({algorithmId:()=>i,checksumConstructor:()=>e[i]})}return{addChecksumAlgorithm(e){t.push(e)},checksumAlgorithms(){return t}}},C=e=>{let t={};return e.checksumAlgorithms().forEach(e=>{t[e.algorithmId()]=e.checksumConstructor()}),t},w=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),T=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},E=e=>Object.assign(S(e),w(e)),D=E,O=e=>Object.assign(C(e),T(e)),k=e=>Array.isArray(e)?e:[e],A=e=>{let t=`#text`;for(let n in e)e.hasOwnProperty(n)&&e[n][t]!==void 0?e[n]=e[n][t]:typeof e[n]==`object`&&e[n]!==null&&(e[n]=A(e[n]));return e},j=e=>e!=null;var M=class{trace(){}debug(){}info(){}warn(){}error(){}};function ee(e,t,n){let r,i,a;if(t===void 0&&n===void 0)r={},a=e;else{if(r=e,typeof t==`function`)return i=t,a=n,re(r,i,a);a=t}for(let e of Object.keys(a)){if(!Array.isArray(a[e])){r[e]=a[e];continue}ie(r,null,a,e)}return r}let te=e=>{let t={};for(let[n,r]of Object.entries(e||{}))t[n]=[,r];return t},ne=(e,t)=>{let n={};for(let r in t)ie(n,e,t,r);return n},re=(e,t,n)=>ee(e,Object.entries(n).reduce((e,[n,r])=>(Array.isArray(r)?e[n]=r:typeof r==`function`?e[n]=[t,r()]:e[n]=[t,r],e),{})),ie=(e,t,n,r)=>{if(t!==null){let i=n[r];typeof i==`function`&&(i=[,i]);let[a=ae,o=oe,s=r]=i;(typeof a==`function`&&a(t[s])||typeof a!=`function`&&a)&&(e[r]=o(t[s]));return}let[i,a]=n[r];if(typeof a==`function`){let t,n=i===void 0&&(t=a())!=null,o=typeof i==`function`&&!!i(void 0)||typeof i!=`function`&&!!i;n?e[r]=t:o&&(e[r]=a())}else{let t=i===void 0&&a!=null,n=typeof i==`function`&&!!i(a)||typeof i!=`function`&&!!i;(t||n)&&(e[r]=a)}},ae=e=>e!=null,oe=e=>e,se=e=>{if(e!==e)return`NaN`;switch(e){case 1/0:return`Infinity`;case-1/0:return`-Infinity`;default:return e}},ce=e=>e.toISOString().replace(`.000Z`,`Z`),le=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(e=>e!=null).map(le);if(typeof e==`object`){let t={};for(let n of Object.keys(e))e[n]!=null&&(t[n]=le(e[n]));return t}return e};Object.defineProperty(e,`collectBody`,{enumerable:!0,get:function(){return n.collectBody}}),Object.defineProperty(e,`extendedEncodeURIComponent`,{enumerable:!0,get:function(){return n.extendedEncodeURIComponent}}),Object.defineProperty(e,`resolvedPath`,{enumerable:!0,get:function(){return n.resolvedPath}}),e.Client=o,e.Command=l,e.NoOpLogger=M,e.SENSITIVE_STRING=`***SensitiveInformation***`,e.ServiceException=m,e._json=le,e.convertMap=te,e.createAggregatedClient=p,e.decorateServiceException=h,e.emitWarningIfUnsupportedVersion=x,e.getArrayIfSingleItem=k,e.getDefaultClientConfiguration=D,e.getDefaultExtensionConfiguration=E,e.getValueFromTextNode=A,e.isSerializableHeaderValue=j,e.loadConfigsForDefaultMode=y,e.map=ee,e.resolveDefaultRuntimeConfig=O,e.serializeDateTime=ce,e.serializeFloat=se,e.take=ne,e.throwDefaultError=g,e.withBaseException=_,Object.keys(a).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})})})),$s,ec,tc=o((()=>{I(),$s=V(),ec=class{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,t){let n=t.getMemberSchemas(),r=Object.values(n).find(e=>!!e.getMergedTraits().httpPayload);if(r)return r.getMergedTraits().mediaType||(r.isStringSchema()?`text/plain`:r.isBlobSchema()?`application/octet-stream`:e);if(!t.isUnitSchema()&&Object.values(n).find(e=>{let{httpQuery:t,httpQueryParams:n,httpHeader:r,httpLabel:i,httpPrefixHeaders:a}=e.getMergedTraits();return!t&&!n&&!r&&!i&&a===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,t,n,r,i,a){let o=t,s=e;e.includes(`#`)&&([o,s]=e.split(`#`));let c={$metadata:i,$fault:n.statusCode<500?`client`:`server`},l=F.for(o);try{return{errorSchema:a?.(l,s)??l.getSchema(e),errorMetadata:c}}catch{r.message=r.message??r.Message??`UnknownError`;let e=F.for(`smithy.ts.sdk.synthetic.`+o),t=e.getBaseException();if(t){let n=e.getErrorCtor(t)??Error;throw this.decorateServiceException(Object.assign(new n({name:s}),c),r)}throw this.decorateServiceException(Object.assign(Error(s),c),r)}}decorateServiceException(e,t={}){if(this.queryCompat){let n=e.Message??t.Message,r=(0,$s.decorateServiceException)(e,t);n&&(r.message=n),r.Error={...r.Error,Type:r.Error.Type,Code:r.Error.Code,Message:r.Error.message??r.Error.Message??n};let i=r.$metadata.requestId;return i&&(r.RequestId=i),r}return(0,$s.decorateServiceException)(e,t)}setQueryCompatError(e,t){let n=t.headers?.[`x-amzn-query-error`];if(e!==void 0&&n!=null){let[t,r]=n.split(`;`),i=Object.entries(e),a={Code:t,Type:r};Object.assign(e,a);for(let[e,t]of i)a[e===`message`?`Message`:e]=t;delete a.__type,e.Error=a}}queryCompatOutput(e,t){e.Error&&(t.Error=e.Error),e.Type&&(t.Type=e.Type),e.Code&&(t.Code=e.Code)}findQueryCompatibleError(e,t){try{return e.getSchema(t)}catch{return e.find(e=>P.of(e).getMergedTraits().awsQueryError?.[0]===t)}}}})),nc,rc=o((()=>{Zs(),I(),tc(),nc=class extends Ys{awsQueryCompatible;mixin;constructor({defaultNamespace:e,awsQueryCompatible:t}){super({defaultNamespace:e}),this.awsQueryCompatible=!!t,this.mixin=new ec(this.awsQueryCompatible)}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n);return this.awsQueryCompatible&&(r.headers[`x-amzn-query-mode`]=`true`),r}async handleError(e,t,n,r,i){this.awsQueryCompatible&&this.mixin.setQueryCompatError(r,n);let a=(()=>{let e=n.headers[`x-amzn-query-error`];return e&&this.awsQueryCompatible?e.split(`;`)[0]:Vs(n,r)??`Unknown`})(),{errorSchema:o,errorMetadata:s}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,r,i,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),c=P.of(o),l=r.message??r.Message??`Unknown`,u=new((F.for(o[1]).getErrorCtor(o))??Error)(l),d={};for(let[e,t]of c.structIterator())r[e]!=null&&(d[e]=this.deserializer.readValue(t,r[e]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(r,d),this.mixin.decorateServiceException(Object.assign(u,s,{$fault:c.getMergedTraits().error,message:l},d),r)}}})),ic,ac,oc,sc=o((()=>{ic=e=>{if(e==null)return e;if(typeof e==`number`||typeof e==`bigint`){let t=Error(`Received number ${e} where a string was expected.`);return t.name=`Warning`,console.warn(t),String(e)}if(typeof e==`boolean`){let t=Error(`Received boolean ${e} where a string was expected.`);return t.name=`Warning`,console.warn(t),String(e)}return e},ac=e=>{if(e==null)return e;if(typeof e==`string`){let t=e.toLowerCase();if(e!==``&&t!==`false`&&t!==`true`){let t=Error(`Received string "${e}" where a boolean was expected.`);t.name=`Warning`,console.warn(t)}return e!==``&&t!==`false`}return e},oc=e=>{if(e==null)return e;if(typeof e==`string`){let t=Number(e);if(t.toString()!==e){let t=Error(`Received string "${e}" where a number was expected.`);return t.name=`Warning`,console.warn(t),e}return t}return e}})),cc,lc=o((()=>{cc=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}})),uc,dc=o((()=>{uc=class{from;to;keys;constructor(e,t){this.from=e,this.to=t,this.keys=new Set(Object.keys(this.from).filter(e=>e!==`__type`))}mark(e){this.keys.delete(e)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){let e=this.keys.values().next().value,t=this.from[e];this.to.$unknown=[e,t]}}}}));function fc(e,t,n){if(n?.source){let e=n.source;if(typeof t==`number`&&(t>2**53-1||t<-(2**53-1)||e!==String(t)))return e.includes(`.`)?new Si(e,`bigDecimal`):BigInt(e)}return t}var pc=o((()=>{Ti()})),mc,hc,gc,_c=o((()=>{mc=V(),hc=N(),gc=(e,t)=>(0,mc.collectBody)(e,t).then(e=>(t?.utf8Encoder??hc.toUtf8)(e))})),vc,yc,bc,xc=o((()=>{_c(),vc=(e,t)=>gc(e,t).then(e=>{if(e.length)try{return JSON.parse(e)}catch(t){throw t?.name===`SyntaxError`&&Object.defineProperty(t,`$responseBodyText`,{value:e}),t}return{}}),yc=async(e,t)=>{let n=await vc(e,t);return n.message=n.message??n.Message,n},bc=(e,t)=>{let n=(e,t)=>Object.keys(e).find(e=>e.toLowerCase()===t.toLowerCase()),r=e=>{let t=e;return typeof t==`number`&&(t=t.toString()),t.indexOf(`,`)>=0&&(t=t.split(`,`)[0]),t.indexOf(`:`)>=0&&(t=t.split(`:`)[0]),t.indexOf(`#`)>=0&&(t=t.split(`#`)[1]),t},i=n(e.headers,`x-amzn-errortype`);if(i!==void 0)return r(e.headers[i]);if(t&&typeof t==`object`){let e=n(t,`code`);if(e&&t[e]!==void 0)return r(t[e]);if(t.__type!==void 0)return r(t.__type)}}})),Sc,Cc,wc=o((()=>{ua(),I(),Ti(),Sc=Me(),lc(),dc(),pc(),xc(),Cc=class extends cc{settings;constructor(e){super(),this.settings=e}async read(e,t){return this._read(e,typeof t==`string`?JSON.parse(t,fc):await vc(t,this.serdeContext))}readObject(e,t){return this._read(e,t)}_read(e,t){let n=typeof t==`object`&&!!t,r=P.of(e);if(n){if(r.isStructSchema()){let e=t,n=r.isUnionSchema(),i={},a,{jsonName:o}=this.settings;o&&(a={});let s;n&&(s=new uc(e,i));for(let[t,c]of r.structIterator()){let r=t;o&&(r=c.getMergedTraits().jsonName??r,a[r]=t),n&&s.mark(r),e[r]!=null&&(i[t]=this._read(c,e[r]))}if(n)s.writeUnknown();else if(typeof e.__type==`string`)for(let[t,n]of Object.entries(e)){let e=o?a[t]??t:t;e in i||(i[e]=n)}return i}if(Array.isArray(t)&&r.isListSchema()){let e=r.getValueSchema(),n=[],i=!!r.getMergedTraits().sparse;for(let r of t)(i||r!=null)&&n.push(this._read(e,r));return n}if(r.isMapSchema()){let e=r.getValueSchema(),n={},i=!!r.getMergedTraits().sparse;for(let[r,a]of Object.entries(t))(i||a!=null)&&(n[r]=this._read(e,a));return n}}if(r.isBlobSchema()&&typeof t==`string`)return(0,Sc.fromBase64)(t);let i=r.getMergedTraits().mediaType;if(r.isStringSchema()&&typeof t==`string`&&i)return i===`application/json`||i.endsWith(`+json`)?Zr.from(t):t;if(r.isTimestampSchema()&&t!=null)switch(Yi(r,this.settings)){case 5:return Un(t);case 6:return qn(t);case 7:return Jn(t);default:return console.warn(`Missing timestamp format, parsing value with Date constructor:`,t),new Date(t)}if(r.isBigIntegerSchema()&&(typeof t==`number`||typeof t==`string`))return BigInt(t);if(r.isBigDecimalSchema()&&t!=null){if(t instanceof Si)return t;let e=t;return e.type===`bigDecimal`&&`string`in e?new Si(e.string,e.type):new Si(String(t),`bigDecimal`)}if(r.isNumericSchema()&&typeof t==`string`){switch(t){case`Infinity`:return 1/0;case`-Infinity`:return-1/0;case`NaN`:return NaN}return t}if(r.isDocumentSchema())if(n){let e=Array.isArray(t)?[]:{};for(let[n,i]of Object.entries(t))i instanceof Si?e[n]=i:e[n]=this._read(r,i);return e}else return structuredClone(t);return t}}})),Tc,Ec,Dc=o((()=>{Ti(),Tc=``,Ec=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw Error(`@aws-sdk/core/protocols - JsonReplacer already created.`);if(this.stage===2)throw Error(`@aws-sdk/core/protocols - JsonReplacer exhausted.`);return this.stage=1,(e,t)=>{if(t instanceof Si){let e=`${Tc+`nv`+ this.counter++}_`+t.string;return this.values.set(`"${e}"`,t.string),e}if(typeof t==`bigint`){let e=t.toString(),n=`${Tc+`b`+ this.counter++}_`+e;return this.values.set(`"${n}"`,e),n}return t}}replaceInJson(e){if(this.stage===0)throw Error(`@aws-sdk/core/protocols - JsonReplacer not created yet.`);if(this.stage===2)throw Error(`@aws-sdk/core/protocols - JsonReplacer exhausted.`);if(this.stage=2,this.counter===0)return e;for(let[t,n]of this.values)e=e.replace(t,n);return e}}})),Oc,kc,Ac=o((()=>{ua(),I(),Ti(),Oc=Me(),lc(),Dc(),kc=class extends cc{settings;buffer;useReplacer=!1;rootSchema;constructor(e){super(),this.settings=e}write(e,t){this.rootSchema=P.of(e),this.buffer=this._write(this.rootSchema,t)}writeDiscriminatedDocument(e,t){this.write(e,t),typeof this.buffer==`object`&&(this.buffer.__type=P.of(e).getName(!0))}flush(){let{rootSchema:e,useReplacer:t}=this;if(this.rootSchema=void 0,this.useReplacer=!1,e?.isStructSchema()||e?.isDocumentSchema()){if(!t)return JSON.stringify(this.buffer);let e=new Ec;return e.replaceInJson(JSON.stringify(this.buffer,e.createReplacer(),0))}return this.buffer}_write(e,t,n){let r=typeof t==`object`&&!!t,i=P.of(e);if(r){if(i.isStructSchema()){let e=t,n={},{jsonName:r}=this.settings,a;r&&(a={});for(let[t,o]of i.structIterator()){let s=this._write(o,e[t],i);if(s!==void 0){let e=t;r&&(e=o.getMergedTraits().jsonName??t,a[t]=e),n[e]=s}}if(i.isUnionSchema()&&Object.keys(n).length===0){let{$unknown:t}=e;if(Array.isArray(t)){let[e,r]=t;n[e]=this._write(15,r)}}else if(typeof e.__type==`string`)for(let[t,i]of Object.entries(e)){let e=r?a[t]??t:t;e in n||(n[e]=this._write(15,i))}return n}if(Array.isArray(t)&&i.isListSchema()){let e=i.getValueSchema(),n=[],r=!!i.getMergedTraits().sparse;for(let i of t)(r||i!=null)&&n.push(this._write(e,i));return n}if(i.isMapSchema()){let e=i.getValueSchema(),n={},r=!!i.getMergedTraits().sparse;for(let[i,a]of Object.entries(t))(r||a!=null)&&(n[i]=this._write(e,a));return n}if(t instanceof Uint8Array&&(i.isBlobSchema()||i.isDocumentSchema()))return i===this.rootSchema?t:(this.serdeContext?.base64Encoder??Oc.toBase64)(t);if(t instanceof Date&&(i.isTimestampSchema()||i.isDocumentSchema()))switch(Yi(i,this.settings)){case 5:return t.toISOString().replace(`.000Z`,`Z`);case 6:return Ln(t);case 7:return t.getTime()/1e3;default:return console.warn(`Missing timestamp format, using epoch seconds`,t),t.getTime()/1e3}t instanceof Si&&(this.useReplacer=!0)}if(!(t===null&&n?.isStructSchema())){if(i.isStringSchema()){if(t===void 0&&i.isIdempotencyToken())return(0,Yr.v4)();let e=i.getMergedTraits().mediaType;return t!=null&&e&&(e===`application/json`||e.endsWith(`+json`))?Zr.from(t):t}if(typeof t==`number`&&i.isNumericSchema())return Math.abs(t)===1/0||isNaN(t)?String(t):t;if(typeof t==`string`&&i.isBlobSchema())return i===this.rootSchema?t:(this.serdeContext?.base64Encoder??Oc.toBase64)(t);if(typeof t==`bigint`&&(this.useReplacer=!0),i.isDocumentSchema())if(r){let e=Array.isArray(t)?[]:{};for(let[n,r]of Object.entries(t))r instanceof Si?(this.useReplacer=!0,e[n]=r):e[n]=this._write(i,r);return e}else return structuredClone(t);return t}}}})),jc,Mc=o((()=>{lc(),wc(),Ac(),jc=class extends cc{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new kc(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new Cc(this.settings);return e.setSerdeContext(this.serdeContext),e}}})),Nc,Pc=o((()=>{ua(),I(),tc(),Mc(),xc(),Nc=class extends Vi{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:e,serviceTarget:t,awsQueryCompatible:n,jsonCodec:r}){super({defaultNamespace:e}),this.serviceTarget=t,this.codec=r??new jc({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!n,this.mixin=new ec(this.awsQueryCompatible)}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n);return r.path.endsWith(`/`)||(r.path+=`/`),Object.assign(r.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${e.name}`}),this.awsQueryCompatible&&(r.headers[`x-amzn-query-mode`]=`true`),(ot(e.input)===`unit`||!r.body)&&(r.body=`{}`),r}getPayloadCodec(){return this.codec}async handleError(e,t,n,r,i){this.awsQueryCompatible&&this.mixin.setQueryCompatError(r,n);let a=bc(n,r)??`Unknown`,{errorSchema:o,errorMetadata:s}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,r,i,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),c=P.of(o),l=r.message??r.Message??`Unknown`,u=new((F.for(o[1]).getErrorCtor(o))??Error)(l),d={};for(let[e,t]of c.structIterator())r[e]!=null&&(d[e]=this.codec.createDeserializer().readObject(t,r[e]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(r,d),this.mixin.decorateServiceException(Object.assign(u,s,{$fault:c.getMergedTraits().error,message:l},d),r)}}})),Fc,Ic=o((()=>{Pc(),Fc=class extends Nc{constructor({defaultNamespace:e,serviceTarget:t,awsQueryCompatible:n,jsonCodec:r}){super({defaultNamespace:e,serviceTarget:t,awsQueryCompatible:n,jsonCodec:r})}getShapeId(){return`aws.protocols#awsJson1_0`}getJsonRpcVersion(){return`1.0`}getDefaultContentType(){return`application/x-amz-json-1.0`}}})),Lc,Rc=o((()=>{Pc(),Lc=class extends Nc{constructor({defaultNamespace:e,serviceTarget:t,awsQueryCompatible:n,jsonCodec:r}){super({defaultNamespace:e,serviceTarget:t,awsQueryCompatible:n,jsonCodec:r})}getShapeId(){return`aws.protocols#awsJson1_1`}getJsonRpcVersion(){return`1.1`}getDefaultContentType(){return`application/x-amz-json-1.1`}}})),zc,Bc=o((()=>{ua(),I(),tc(),Mc(),xc(),zc=class extends Ri{serializer;deserializer;codec;mixin=new ec;constructor({defaultNamespace:e}){super({defaultNamespace:e});let t={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new jc(t),this.serializer=new sa(this.codec.createSerializer(),t),this.deserializer=new na(this.codec.createDeserializer(),t)}getShapeId(){return`aws.protocols#restJson1`}getPayloadCodec(){return this.codec}setSerdeContext(e){this.codec.setSerdeContext(e),super.setSerdeContext(e)}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n),i=P.of(e.input);if(!r.headers[`content-type`]){let e=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);e&&(r.headers[`content-type`]=e)}return r.body==null&&r.headers[`content-type`]===this.getDefaultContentType()&&(r.body=`{}`),r}async deserializeResponse(e,t,n){let r=await super.deserializeResponse(e,t,n),i=P.of(e.output);for(let[e,t]of i.structIterator())t.getMemberTraits().httpPayload&&!(e in r)&&(r[e]=null);return r}async handleError(e,t,n,r,i){let a=bc(n,r)??`Unknown`,{errorSchema:o,errorMetadata:s}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,r,i),c=P.of(o),l=r.message??r.Message??`Unknown`,u=new((F.for(o[1]).getErrorCtor(o))??Error)(l);await this.deserializeHttpMessage(o,t,n,r);let d={};for(let[e,t]of c.structIterator()){let n=t.getMergedTraits().jsonName??e;d[e]=this.codec.createDeserializer().readObject(t,r[n])}throw this.mixin.decorateServiceException(Object.assign(u,s,{$fault:c.getMergedTraits().error,message:l},d),r)}getDefaultContentType(){return`application/json`}}})),Vc,Hc,Uc=o((()=>{Vc=V(),Hc=e=>{if(e!=null)return typeof e==`object`&&`__type`in e&&delete e.__type,(0,Vc.expectUnion)(e)}})),Wc=s(((e,t)=>{(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{typeof Symbol<`u`&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:`Module`}),Object.defineProperty(e,`__esModule`,{value:!0})}},n={};e.r(n),e.d(n,{XMLBuilder:()=>Oe,XMLParser:()=>be,XMLValidator:()=>je});let r=RegExp(`^[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`);function i(e,t){let n=[],r=t.exec(e);for(;r;){let i=[];i.startIndex=t.lastIndex-r[0].length;let a=r.length;for(let e=0;e<a;e++)i.push(r[e]);n.push(i),r=t.exec(e)}return n}let a=function(e){return r.exec(e)!=null},o={allowBooleanAttributes:!1,unpairedTags:[]};function s(e,t){t=Object.assign({},o,t);let n=[],r=!1,i=!1;e[0]===``&&(e=e.substr(1));for(let o=0;o<e.length;o++)if(e[o]===`<`&&e[o+1]===`?`){if(o+=2,o=l(e,o),o.err)return o}else{if(e[o]!==`<`){if(c(e[o]))continue;return h(`InvalidChar`,`char '`+e[o]+`' is not expected.`,_(e,o))}{let s=o;if(o++,e[o]===`!`){o=u(e,o);continue}{let f=!1;e[o]===`/`&&(f=!0,o++);let g=``;for(;o<e.length&&e[o]!==`>`&&e[o]!==` `&&e[o]!==`	`&&e[o]!==`
`&&e[o]!==`\r`;o++)g+=e[o];if(g=g.trim(),g[g.length-1]===`/`&&(g=g.substring(0,g.length-1),o--),!a(g)){let t;return t=g.trim().length===0?`Invalid space after '<'.`:`Tag '`+g+`' is an invalid name.`,h(`InvalidTag`,t,_(e,o))}let v=d(e,o);if(!1===v)return h(`InvalidAttr`,`Attributes for '`+g+`' have open quote.`,_(e,o));let y=v.value;if(o=v.index,y[y.length-1]===`/`){let n=o-y.length;y=y.substring(0,y.length-1);let i=p(y,t);if(!0!==i)return h(i.err.code,i.err.msg,_(e,n+i.err.line));r=!0}else if(f){if(!v.tagClosed)return h(`InvalidTag`,`Closing tag '`+g+`' doesn't have proper closing.`,_(e,o));if(y.trim().length>0)return h(`InvalidTag`,`Closing tag '`+g+`' can't have attributes or invalid starting.`,_(e,s));if(n.length===0)return h(`InvalidTag`,`Closing tag '`+g+`' has not been opened.`,_(e,s));{let t=n.pop();if(g!==t.tagName){let n=_(e,t.tagStartPos);return h(`InvalidTag`,`Expected closing tag '`+t.tagName+`' (opened in line `+n.line+`, col `+n.col+`) instead of closing tag '`+g+`'.`,_(e,s))}n.length==0&&(i=!0)}}else{let a=p(y,t);if(!0!==a)return h(a.err.code,a.err.msg,_(e,o-y.length+a.err.line));if(!0===i)return h(`InvalidXml`,`Multiple possible root nodes found.`,_(e,o));t.unpairedTags.indexOf(g)!==-1||n.push({tagName:g,tagStartPos:s}),r=!0}for(o++;o<e.length;o++)if(e[o]===`<`){if(e[o+1]===`!`){o++,o=u(e,o);continue}if(e[o+1]!==`?`)break;if(o=l(e,++o),o.err)return o}else if(e[o]===`&`){let t=m(e,o);if(t==-1)return h(`InvalidChar`,`char '&' is not expected.`,_(e,o));o=t}else if(!0===i&&!c(e[o]))return h(`InvalidXml`,`Extra text at the end`,_(e,o));e[o]===`<`&&o--}}}return r?n.length==1?h(`InvalidTag`,`Unclosed tag '`+n[0].tagName+`'.`,_(e,n[0].tagStartPos)):!(n.length>0)||h(`InvalidXml`,`Invalid '`+JSON.stringify(n.map((e=>e.tagName)),null,4).replace(/\r?\n/g,``)+`' found.`,{line:1,col:1}):h(`InvalidXml`,`Start tag expected.`,1)}function c(e){return e===` `||e===`	`||e===`
`||e===`\r`}function l(e,t){let n=t;for(;t<e.length;t++)if(!(e[t]!=`?`&&e[t]!=` `)){let r=e.substr(n,t-n);if(t>5&&r===`xml`)return h(`InvalidXml`,`XML declaration allowed only at the start of the document.`,_(e,t));if(e[t]==`?`&&e[t+1]==`>`){t++;break}}return t}function u(e,t){if(e.length>t+5&&e[t+1]===`-`&&e[t+2]===`-`){for(t+=3;t<e.length;t++)if(e[t]===`-`&&e[t+1]===`-`&&e[t+2]===`>`){t+=2;break}}else if(e.length>t+8&&e[t+1]===`D`&&e[t+2]===`O`&&e[t+3]===`C`&&e[t+4]===`T`&&e[t+5]===`Y`&&e[t+6]===`P`&&e[t+7]===`E`){let n=1;for(t+=8;t<e.length;t++)if(e[t]===`<`)n++;else if(e[t]===`>`&&(n--,n===0))break}else if(e.length>t+9&&e[t+1]===`[`&&e[t+2]===`C`&&e[t+3]===`D`&&e[t+4]===`A`&&e[t+5]===`T`&&e[t+6]===`A`&&e[t+7]===`[`){for(t+=8;t<e.length;t++)if(e[t]===`]`&&e[t+1]===`]`&&e[t+2]===`>`){t+=2;break}}return t}function d(e,t){let n=``,r=``,i=!1;for(;t<e.length;t++){if(e[t]===`"`||e[t]===`'`)r===``?r=e[t]:r!==e[t]||(r=``);else if(e[t]===`>`&&r===``){i=!0;break}n+=e[t]}return r===``&&{value:n,index:t,tagClosed:i}}let f=RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,`g`);function p(e,t){let n=i(e,f),r={};for(let e=0;e<n.length;e++){if(n[e][1].length===0)return h(`InvalidAttr`,`Attribute '`+n[e][2]+`' has no space in starting.`,v(n[e]));if(n[e][3]!==void 0&&n[e][4]===void 0)return h(`InvalidAttr`,`Attribute '`+n[e][2]+`' is without value.`,v(n[e]));if(n[e][3]===void 0&&!t.allowBooleanAttributes)return h(`InvalidAttr`,`boolean attribute '`+n[e][2]+`' is not allowed.`,v(n[e]));let i=n[e][2];if(!g(i))return h(`InvalidAttr`,`Attribute '`+i+`' is an invalid name.`,v(n[e]));if(r.hasOwnProperty(i))return h(`InvalidAttr`,`Attribute '`+i+`' is repeated.`,v(n[e]));r[i]=1}return!0}function m(e,t){if(e[++t]===`;`)return-1;if(e[t]===`#`)return function(e,t){let n=/\d/;for(e[t]===`x`&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(e[t]===`;`)return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(e[t]===`;`)break;return-1}return t}function h(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function g(e){return a(e)}function _(e,t){let n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function v(e){return e.startIndex+e[1].length}let y={preserveOrder:!1,attributeNamePrefix:`@_`,attributesGroupName:!1,textNodeName:`#text`,ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,n){return e},captureMetaData:!1},b;b=typeof Symbol==`function`?Symbol(`XML Node Metadata`):`@@xmlMetadata`;class x{constructor(e){this.tagname=e,this.child=[],this[`:@`]={}}add(e,t){e===`__proto__`&&(e=`#__proto__`),this.child.push({[e]:t})}addChild(e,t){e.tagname===`__proto__`&&(e.tagname=`#__proto__`),e[`:@`]&&Object.keys(e[`:@`]).length>0?this.child.push({[e.tagname]:e.child,":@":e[`:@`]}):this.child.push({[e.tagname]:e.child}),t!==void 0&&(this.child[this.child.length-1][b]={startIndex:t})}static getMetaDataSymbol(){return b}}class S{constructor(e){this.suppressValidationErr=!e}readDocType(e,t){let n={};if(e[t+3]!==`O`||e[t+4]!==`C`||e[t+5]!==`T`||e[t+6]!==`Y`||e[t+7]!==`P`||e[t+8]!==`E`)throw Error(`Invalid Tag instead of DOCTYPE`);{t+=9;let r=1,i=!1,a=!1,o=``;for(;t<e.length;t++)if(e[t]!==`<`||a)if(e[t]===`>`){if(a?e[t-1]===`-`&&e[t-2]===`-`&&(a=!1,r--):r--,r===0)break}else e[t]===`[`?i=!0:o+=e[t];else{if(i&&w(e,`!ENTITY`,t)){let r,i;t+=7,[r,i,t]=this.readEntityExp(e,t+1,this.suppressValidationErr),i.indexOf(`&`)===-1&&(n[r]={regx:RegExp(`&${r};`,`g`),val:i})}else if(i&&w(e,`!ELEMENT`,t)){t+=8;let{index:n}=this.readElementExp(e,t+1);t=n}else if(i&&w(e,`!ATTLIST`,t))t+=8;else if(i&&w(e,`!NOTATION`,t)){t+=9;let{index:n}=this.readNotationExp(e,t+1,this.suppressValidationErr);t=n}else{if(!w(e,`!--`,t))throw Error(`Invalid DOCTYPE`);a=!0}r++,o=``}if(r!==0)throw Error(`Unclosed DOCTYPE`)}return{entities:n,i:t}}readEntityExp(e,t){t=C(e,t);let n=``;for(;t<e.length&&!/\s/.test(e[t])&&e[t]!==`"`&&e[t]!==`'`;)n+=e[t],t++;if(T(n),t=C(e,t),!this.suppressValidationErr){if(e.substring(t,t+6).toUpperCase()===`SYSTEM`)throw Error(`External entities are not supported`);if(e[t]===`%`)throw Error(`Parameter entities are not supported`)}let r=``;return[t,r]=this.readIdentifierVal(e,t,`entity`),[n,r,--t]}readNotationExp(e,t){t=C(e,t);let n=``;for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;!this.suppressValidationErr&&T(n),t=C(e,t);let r=e.substring(t,t+6).toUpperCase();if(!this.suppressValidationErr&&r!==`SYSTEM`&&r!==`PUBLIC`)throw Error(`Expected SYSTEM or PUBLIC, found "${r}"`);t+=r.length,t=C(e,t);let i=null,a=null;if(r===`PUBLIC`)[t,i]=this.readIdentifierVal(e,t,`publicIdentifier`),e[t=C(e,t)]!==`"`&&e[t]!==`'`||([t,a]=this.readIdentifierVal(e,t,`systemIdentifier`));else if(r===`SYSTEM`&&([t,a]=this.readIdentifierVal(e,t,`systemIdentifier`),!this.suppressValidationErr&&!a))throw Error(`Missing mandatory system identifier for SYSTEM notation`);return{notationName:n,publicIdentifier:i,systemIdentifier:a,index:--t}}readIdentifierVal(e,t,n){let r=``,i=e[t];if(i!==`"`&&i!==`'`)throw Error(`Expected quoted string, found "${i}"`);for(t++;t<e.length&&e[t]!==i;)r+=e[t],t++;if(e[t]!==i)throw Error(`Unterminated ${n} value`);return[++t,r]}readElementExp(e,t){t=C(e,t);let n=``;for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;if(!this.suppressValidationErr&&!a(n))throw Error(`Invalid element name: "${n}"`);let r=``;if(e[t=C(e,t)]===`E`&&w(e,`MPTY`,t))t+=4;else if(e[t]===`A`&&w(e,`NY`,t))t+=2;else if(e[t]===`(`){for(t++;t<e.length&&e[t]!==`)`;)r+=e[t],t++;if(e[t]!==`)`)throw Error(`Unterminated content model`)}else if(!this.suppressValidationErr)throw Error(`Invalid Element Expression, found "${e[t]}"`);return{elementName:n,contentModel:r.trim(),index:t}}readAttlistExp(e,t){t=C(e,t);let n=``;for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;T(n),t=C(e,t);let r=``;for(;t<e.length&&!/\s/.test(e[t]);)r+=e[t],t++;if(!T(r))throw Error(`Invalid attribute name: "${r}"`);t=C(e,t);let i=``;if(e.substring(t,t+8).toUpperCase()===`NOTATION`){if(i=`NOTATION`,e[t=C(e,t+=8)]!==`(`)throw Error(`Expected '(', found "${e[t]}"`);t++;let n=[];for(;t<e.length&&e[t]!==`)`;){let r=``;for(;t<e.length&&e[t]!==`|`&&e[t]!==`)`;)r+=e[t],t++;if(r=r.trim(),!T(r))throw Error(`Invalid notation name: "${r}"`);n.push(r),e[t]===`|`&&(t++,t=C(e,t))}if(e[t]!==`)`)throw Error(`Unterminated list of notations`);t++,i+=` (`+n.join(`|`)+`)`}else{for(;t<e.length&&!/\s/.test(e[t]);)i+=e[t],t++;if(!this.suppressValidationErr&&![`CDATA`,`ID`,`IDREF`,`IDREFS`,`ENTITY`,`ENTITIES`,`NMTOKEN`,`NMTOKENS`].includes(i.toUpperCase()))throw Error(`Invalid attribute type: "${i}"`)}t=C(e,t);let a=``;return e.substring(t,t+8).toUpperCase()===`#REQUIRED`?(a=`#REQUIRED`,t+=8):e.substring(t,t+7).toUpperCase()===`#IMPLIED`?(a=`#IMPLIED`,t+=7):[t,a]=this.readIdentifierVal(e,t,`ATTLIST`),{elementName:n,attributeName:r,attributeType:i,defaultValue:a,index:t}}}let C=(e,t)=>{for(;t<e.length&&/\s/.test(e[t]);)t++;return t};function w(e,t,n){for(let r=0;r<t.length;r++)if(t[r]!==e[n+r+1])return!1;return!0}function T(e){if(a(e))return e;throw Error(`Invalid entity name ${e}`)}let E=/^[-+]?0x[a-fA-F0-9]+$/,D=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,O={hex:!0,leadingZeros:!0,decimalPoint:`.`,eNotation:!0},k=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function A(e){return typeof e==`function`?e:Array.isArray(e)?t=>{for(let n of e)if(typeof n==`string`&&t===n||n instanceof RegExp&&n.test(t))return!0}:()=>!1}class j{constructor(e){if(this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:`'`},gt:{regex:/&(gt|#62|#x3E);/g,val:`>`},lt:{regex:/&(lt|#60|#x3C);/g,val:`<`},quot:{regex:/&(quot|#34|#x22);/g,val:`"`}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:`&`},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:` `},cent:{regex:/&(cent|#162);/g,val:``},pound:{regex:/&(pound|#163);/g,val:``},yen:{regex:/&(yen|#165);/g,val:``},euro:{regex:/&(euro|#8364);/g,val:``},copyright:{regex:/&(copy|#169);/g,val:``},reg:{regex:/&(reg|#174);/g,val:``},inr:{regex:/&(inr|#8377);/g,val:``},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>pe(t,10,`&#`)},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>pe(t,16,`&#x`)}},this.addExternalEntities=M,this.parseXml=ie,this.parseTextData=ee,this.resolveNameSpace=te,this.buildAttributesMap=re,this.isItStopNode=ce,this.replaceEntitiesValue=oe,this.readStopNodeData=de,this.saveTextToParentTag=se,this.addChild=ae,this.ignoreAttributesFn=A(this.options.ignoreAttributes),this.options.stopNodes&&this.options.stopNodes.length>0){this.stopNodesExact=new Set,this.stopNodesWildcard=new Set;for(let e=0;e<this.options.stopNodes.length;e++){let t=this.options.stopNodes[e];typeof t==`string`&&(t.startsWith(`*.`)?this.stopNodesWildcard.add(t.substring(2)):this.stopNodesExact.add(t))}}}}function M(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let r=t[n];this.lastEntities[r]={regex:RegExp(`&`+r+`;`,`g`),val:e[r]}}}function ee(e,t,n,r,i,a,o){if(e!==void 0&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));let r=this.options.tagValueProcessor(t,e,n,i,a);return r==null?e:typeof r!=typeof e||r!==e?r:this.options.trimValues||e.trim()===e?fe(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function te(e){if(this.options.removeNSPrefix){let t=e.split(`:`),n=e.charAt(0)===`/`?`/`:``;if(t[0]===`xmlns`)return``;t.length===2&&(e=n+t[1])}return e}let ne=RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,`gm`);function re(e,t){if(!0!==this.options.ignoreAttributes&&typeof e==`string`){let n=i(e,ne),r=n.length,a={};for(let e=0;e<r;e++){let r=this.resolveNameSpace(n[e][1]);if(this.ignoreAttributesFn(r,t))continue;let i=n[e][4],o=this.options.attributeNamePrefix+r;if(r.length)if(this.options.transformAttributeName&&(o=this.options.transformAttributeName(o)),o===`__proto__`&&(o=`#__proto__`),i!==void 0){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);let e=this.options.attributeValueProcessor(r,i,t);a[o]=e==null?i:typeof e!=typeof i||e!==i?e:fe(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[o]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){let e={};return e[this.options.attributesGroupName]=a,e}return a}}let ie=function(e){e=e.replace(/\r\n?/g,`
`);let t=new x(`!xml`),n=t,r=``,i=``,a=new S(this.options.processEntities);for(let o=0;o<e.length;o++)if(e[o]===`<`)if(e[o+1]===`/`){let t=le(e,`>`,o,`Closing Tag is not closed.`),a=e.substring(o+2,t).trim();if(this.options.removeNSPrefix){let e=a.indexOf(`:`);e!==-1&&(a=a.substr(e+1))}this.options.transformTagName&&(a=this.options.transformTagName(a)),n&&(r=this.saveTextToParentTag(r,n,i));let s=i.substring(i.lastIndexOf(`.`)+1);if(a&&this.options.unpairedTags.indexOf(a)!==-1)throw Error(`Unpaired tag can not be used as closing tag: </${a}>`);let c=0;s&&this.options.unpairedTags.indexOf(s)!==-1?(c=i.lastIndexOf(`.`,i.lastIndexOf(`.`)-1),this.tagsNodeStack.pop()):c=i.lastIndexOf(`.`),i=i.substring(0,c),n=this.tagsNodeStack.pop(),r=``,o=t}else if(e[o+1]===`?`){let t=ue(e,o,!1,`?>`);if(!t)throw Error(`Pi Tag is not closed.`);if(r=this.saveTextToParentTag(r,n,i),!(this.options.ignoreDeclaration&&t.tagName===`?xml`||this.options.ignorePiTags)){let e=new x(t.tagName);e.add(this.options.textNodeName,``),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[`:@`]=this.buildAttributesMap(t.tagExp,i)),this.addChild(n,e,i,o)}o=t.closeIndex+1}else if(e.substr(o+1,3)===`!--`){let t=le(e,`-->`,o+4,`Comment is not closed.`);if(this.options.commentPropName){let a=e.substring(o+4,t-2);r=this.saveTextToParentTag(r,n,i),n.add(this.options.commentPropName,[{[this.options.textNodeName]:a}])}o=t}else if(e.substr(o+1,2)===`!D`){let t=a.readDocType(e,o);this.docTypeEntities=t.entities,o=t.i}else if(e.substr(o+1,2)===`![`){let t=le(e,`]]>`,o,`CDATA is not closed.`)-2,a=e.substring(o+9,t);r=this.saveTextToParentTag(r,n,i);let s=this.parseTextData(a,n.tagname,i,!0,!1,!0,!0);s??=``,this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:a}]):n.add(this.options.textNodeName,s),o=t+2}else{let a=ue(e,o,this.options.removeNSPrefix),s=a.tagName,c=a.rawTagName,l=a.tagExp,u=a.attrExpPresent,d=a.closeIndex;if(this.options.transformTagName){let e=this.options.transformTagName(s);l===s&&(l=e),s=e}n&&r&&n.tagname!==`!xml`&&(r=this.saveTextToParentTag(r,n,i,!1));let f=n;f&&this.options.unpairedTags.indexOf(f.tagname)!==-1&&(n=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf(`.`))),s!==t.tagname&&(i+=i?`.`+s:s);let p=o;if(this.isItStopNode(this.stopNodesExact,this.stopNodesWildcard,i,s)){let t=``;if(l.length>0&&l.lastIndexOf(`/`)===l.length-1)s[s.length-1]===`/`?(s=s.substr(0,s.length-1),i=i.substr(0,i.length-1),l=s):l=l.substr(0,l.length-1),o=a.closeIndex;else if(this.options.unpairedTags.indexOf(s)!==-1)o=a.closeIndex;else{let n=this.readStopNodeData(e,c,d+1);if(!n)throw Error(`Unexpected end of ${c}`);o=n.i,t=n.tagContent}let r=new x(s);s!==l&&u&&(r[`:@`]=this.buildAttributesMap(l,i)),t&&=this.parseTextData(t,s,i,!0,u,!0,!0),i=i.substr(0,i.lastIndexOf(`.`)),r.add(this.options.textNodeName,t),this.addChild(n,r,i,p)}else{if(l.length>0&&l.lastIndexOf(`/`)===l.length-1){if(s[s.length-1]===`/`?(s=s.substr(0,s.length-1),i=i.substr(0,i.length-1),l=s):l=l.substr(0,l.length-1),this.options.transformTagName){let e=this.options.transformTagName(s);l===s&&(l=e),s=e}let e=new x(s);s!==l&&u&&(e[`:@`]=this.buildAttributesMap(l,i)),this.addChild(n,e,i,p),i=i.substr(0,i.lastIndexOf(`.`))}else{let e=new x(s);this.tagsNodeStack.push(n),s!==l&&u&&(e[`:@`]=this.buildAttributesMap(l,i)),this.addChild(n,e,i,p),n=e}r=``,o=d}}else r+=e[o];return t.child};function ae(e,t,n,r){this.options.captureMetaData||(r=void 0);let i=this.options.updateTag(t.tagname,n,t[`:@`]);!1===i||(typeof i==`string`&&(t.tagname=i),e.addChild(t,r))}let oe=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){let n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function se(e,t,n,r){return e&&=(r===void 0&&(r=t.child.length===0),(e=this.parseTextData(e,t.tagname,n,!1,!!t[`:@`]&&Object.keys(t[`:@`]).length!==0,r))!==void 0&&e!==``&&t.add(this.options.textNodeName,e),``),e}function ce(e,t,n,r){return!(!t||!t.has(r))||!(!e||!e.has(n))}function le(e,t,n,r){let i=e.indexOf(t,n);if(i===-1)throw Error(r);return i+t.length-1}function ue(e,t,n,r=`>`){let i=function(e,t,n=`>`){let r,i=``;for(let a=t;a<e.length;a++){let t=e[a];if(r)t===r&&(r=``);else if(t===`"`||t===`'`)r=t;else if(t===n[0]){if(!n[1]||e[a+1]===n[1])return{data:i,index:a}}else t===`	`&&(t=` `);i+=t}}(e,t+1,r);if(!i)return;let a=i.data,o=i.index,s=a.search(/\s/),c=a,l=!0;s!==-1&&(c=a.substring(0,s),a=a.substring(s+1).trimStart());let u=c;if(n){let e=c.indexOf(`:`);e!==-1&&(c=c.substr(e+1),l=c!==i.data.substr(e+1))}return{tagName:c,tagExp:a,closeIndex:o,attrExpPresent:l,rawTagName:u}}function de(e,t,n){let r=n,i=1;for(;n<e.length;n++)if(e[n]===`<`)if(e[n+1]===`/`){let a=le(e,`>`,n,`${t} is not closed`);if(e.substring(n+2,a).trim()===t&&(i--,i===0))return{tagContent:e.substring(r,n),i:a};n=a}else if(e[n+1]===`?`)n=le(e,`?>`,n+1,`StopNode is not closed.`);else if(e.substr(n+1,3)===`!--`)n=le(e,`-->`,n+3,`StopNode is not closed.`);else if(e.substr(n+1,2)===`![`)n=le(e,`]]>`,n,`StopNode is not closed.`)-2;else{let r=ue(e,n,`>`);r&&((r&&r.tagName)===t&&r.tagExp[r.tagExp.length-1]!==`/`&&i++,n=r.closeIndex)}}function fe(e,t,n){if(t&&typeof e==`string`){let t=e.trim();return t===`true`||t!==`false`&&function(e,t={}){if(t=Object.assign({},O,t),!e||typeof e!=`string`)return e;let n=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(n))return e;if(e===`0`)return 0;if(t.hex&&E.test(n))return function(e){if(parseInt)return parseInt(e,16);if(Number.parseInt)return Number.parseInt(e,16);if(window&&window.parseInt)return window.parseInt(e,16);throw Error(`parseInt, Number.parseInt, window.parseInt are not supported`)}(n);if(n.search(/.+[eE].+/)!==-1)return function(e,t,n){if(!n.eNotation)return e;let r=t.match(k);if(r){let i=r[1]||``,a=r[3].indexOf(`e`)===-1?`E`:`e`,o=r[2],s=i?e[o.length+1]===a:e[o.length]===a;return o.length>1&&s?e:o.length!==1||!r[3].startsWith(`.${a}`)&&r[3][0]!==a?n.leadingZeros&&!s?(t=(r[1]||``)+r[3],Number(t)):e:Number(t)}return e}(e,n,t);{let i=D.exec(n);if(i){let a=i[1]||``,o=i[2],s=((r=i[3])&&r.indexOf(`.`)!==-1&&((r=r.replace(/0+$/,``))===`.`?r=`0`:r[0]===`.`?r=`0`+r:r[r.length-1]===`.`&&(r=r.substring(0,r.length-1))),r),c=a?e[o.length+1]===`.`:e[o.length]===`.`;if(!t.leadingZeros&&(o.length>1||o.length===1&&!c))return e;{let r=Number(n),i=String(r);if(r===0||r===-0)return r;if(i.search(/[eE]/)!==-1)return t.eNotation?r:e;if(n.indexOf(`.`)!==-1)return i===`0`||i===s||i===`${a}${s}`?r:e;let c=o?s:n;return o?c===i||a+c===i?r:e:c===i||c===a+i?r:e}}return e}var r}(e,n)}return e===void 0?``:e}function pe(e,t,n){let r=Number.parseInt(e,t);return r>=0&&r<=1114111?String.fromCodePoint(r):n+e+`;`}let me=x.getMetaDataSymbol();function he(e,t){return ge(e,t)}function ge(e,t,n){let r,i={};for(let a=0;a<e.length;a++){let o=e[a],s=_e(o),c=``;if(c=n===void 0?s:n+`.`+s,s===t.textNodeName)r===void 0?r=o[s]:r+=``+o[s];else{if(s===void 0)continue;if(o[s]){let e=ge(o[s],t,c),n=ye(e,t);o[me]!==void 0&&(e[me]=o[me]),o[`:@`]?ve(e,o[`:@`],c,t):Object.keys(e).length!==1||e[t.textNodeName]===void 0||t.alwaysCreateTextNode?Object.keys(e).length===0&&(t.alwaysCreateTextNode?e[t.textNodeName]=``:e=``):e=e[t.textNodeName],i[s]!==void 0&&i.hasOwnProperty(s)?(Array.isArray(i[s])||(i[s]=[i[s]]),i[s].push(e)):t.isArray(s,c,n)?i[s]=[e]:i[s]=e}}}return typeof r==`string`?r.length>0&&(i[t.textNodeName]=r):r!==void 0&&(i[t.textNodeName]=r),i}function _e(e){let t=Object.keys(e);for(let e=0;e<t.length;e++){let n=t[e];if(n!==`:@`)return n}}function ve(e,t,n,r){if(t){let i=Object.keys(t),a=i.length;for(let o=0;o<a;o++){let a=i[o];r.isArray(a,n+`.`+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function ye(e,t){let{textNodeName:n}=t,r=Object.keys(e).length;return r===0||!(r!==1||!e[n]&&typeof e[n]!=`boolean`&&e[n]!==0)}class be{constructor(e){this.externalEntities={},this.options=function(e){return Object.assign({},y,e)}(e)}parse(e,t){if(typeof e!=`string`&&e.toString)e=e.toString();else if(typeof e!=`string`)throw Error(`XML data is accepted in String or Bytes[] form.`);if(t){!0===t&&(t={});let n=s(e,t);if(!0!==n)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}let n=new j(this.options);n.addExternalEntities(this.externalEntities);let r=n.parseXml(e);return this.options.preserveOrder||r===void 0?r:he(r,this.options)}addEntity(e,t){if(t.indexOf(`&`)!==-1)throw Error(`Entity value can't have '&'`);if(e.indexOf(`&`)!==-1||e.indexOf(`;`)!==-1)throw Error(`An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'`);if(t===`&`)throw Error(`An entity with value '&' is not permitted`);this.externalEntities[e]=t}static getMetaDataSymbol(){return x.getMetaDataSymbol()}}function xe(e,t){let n=``;return t.format&&t.indentBy.length>0&&(n=`
`),Se(e,t,``,n)}function Se(e,t,n,r){let i=``,a=!1;for(let o=0;o<e.length;o++){let s=e[o],c=Ce(s);if(c===void 0)continue;let l=``;if(l=n.length===0?c:`${n}.${c}`,c===t.textNodeName){let e=s[c];Te(l,t)||(e=t.tagValueProcessor(c,e),e=Ee(e,t)),a&&(i+=r),i+=e,a=!1;continue}if(c===t.cdataPropName){a&&(i+=r),i+=`<![CDATA[${s[c][0][t.textNodeName]}]]>`,a=!1;continue}if(c===t.commentPropName){i+=r+`\x3c!--${s[c][0][t.textNodeName]}--\x3e`,a=!0;continue}if(c[0]===`?`){let e=we(s[`:@`],t),n=c===`?xml`?``:r,o=s[c][0][t.textNodeName];o=o.length===0?``:` `+o,i+=n+`<${c}${o}${e}?>`,a=!0;continue}let u=r;u!==``&&(u+=t.indentBy);let d=r+`<${c}${we(s[`:@`],t)}`,f=Se(s[c],t,l,u);t.unpairedTags.indexOf(c)===-1?f&&f.length!==0||!t.suppressEmptyNode?f&&f.endsWith(`>`)?i+=d+`>${f}${r}</${c}>`:(i+=d+`>`,f&&r!==``&&(f.includes(`/>`)||f.includes(`</`))?i+=r+t.indentBy+f+r:i+=f,i+=`</${c}>`):i+=d+`/>`:t.suppressUnpairedNode?i+=d+`>`:i+=d+`/>`,a=!0}return i}function Ce(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let r=t[n];if(e.hasOwnProperty(r)&&r!==`:@`)return r}}function we(e,t){let n=``;if(e&&!t.ignoreAttributes)for(let r in e){if(!e.hasOwnProperty(r))continue;let i=t.attributeValueProcessor(r,e[r]);i=Ee(i,t),!0===i&&t.suppressBooleanAttributes?n+=` ${r.substr(t.attributeNamePrefix.length)}`:n+=` ${r.substr(t.attributeNamePrefix.length)}="${i}"`}return n}function Te(e,t){let n=(e=e.substr(0,e.length-t.textNodeName.length-1)).substr(e.lastIndexOf(`.`)+1);for(let r in t.stopNodes)if(t.stopNodes[r]===e||t.stopNodes[r]===`*.`+n)return!0;return!1}function Ee(e,t){if(e&&e.length>0&&t.processEntities)for(let n=0;n<t.entities.length;n++){let r=t.entities[n];e=e.replace(r.regex,r.val)}return e}let De={attributeNamePrefix:`@_`,attributesGroupName:!1,textNodeName:`#text`,ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:`  `,suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:RegExp(`&`,`g`),val:`&amp;`},{regex:RegExp(`>`,`g`),val:`&gt;`},{regex:RegExp(`<`,`g`),val:`&lt;`},{regex:RegExp(`'`,`g`),val:`&apos;`},{regex:RegExp(`"`,`g`),val:`&quot;`}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Oe(e){this.options=Object.assign({},De,e),!0===this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=A(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=N),this.processTextOrObjNode=ke,this.options.format?(this.indentate=Ae,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return``},this.tagEndChar=`>`,this.newLine=``)}function ke(e,t,n,r){let i=this.j2x(e,n+1,r.concat(t));return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,i.attrStr,n):this.buildObjectNode(i.val,t,i.attrStr,n)}function Ae(e){return this.options.indentBy.repeat(e)}function N(e){return!(!e.startsWith(this.options.attributeNamePrefix)||e===this.options.textNodeName)&&e.substr(this.attrPrefixLen)}Oe.prototype.build=function(e){return this.options.preserveOrder?xe(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0,[]).val)},Oe.prototype.j2x=function(e,t,n){let r=``,i=``,a=n.join(`.`);for(let o in e)if(Object.prototype.hasOwnProperty.call(e,o))if(e[o]===void 0)this.isAttribute(o)&&(i+=``);else if(e[o]===null)this.isAttribute(o)||o===this.options.cdataPropName?i+=``:o[0]===`?`?i+=this.indentate(t)+`<`+o+`?`+this.tagEndChar:i+=this.indentate(t)+`<`+o+`/`+this.tagEndChar;else if(e[o]instanceof Date)i+=this.buildTextValNode(e[o],o,``,t);else if(typeof e[o]!=`object`){let n=this.isAttribute(o);if(n&&!this.ignoreAttributesFn(n,a))r+=this.buildAttrPairStr(n,``+e[o]);else if(!n)if(o===this.options.textNodeName){let t=this.options.tagValueProcessor(o,``+e[o]);i+=this.replaceEntitiesValue(t)}else i+=this.buildTextValNode(e[o],o,``,t)}else if(Array.isArray(e[o])){let r=e[o].length,a=``,s=``;for(let c=0;c<r;c++){let r=e[o][c];if(r!==void 0)if(r===null)o[0]===`?`?i+=this.indentate(t)+`<`+o+`?`+this.tagEndChar:i+=this.indentate(t)+`<`+o+`/`+this.tagEndChar;else if(typeof r==`object`)if(this.options.oneListGroup){let e=this.j2x(r,t+1,n.concat(o));a+=e.val,this.options.attributesGroupName&&r.hasOwnProperty(this.options.attributesGroupName)&&(s+=e.attrStr)}else a+=this.processTextOrObjNode(r,o,t,n);else if(this.options.oneListGroup){let e=this.options.tagValueProcessor(o,r);e=this.replaceEntitiesValue(e),a+=e}else a+=this.buildTextValNode(r,o,``,t)}this.options.oneListGroup&&(a=this.buildObjectNode(a,o,s,t)),i+=a}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let t=Object.keys(e[o]),n=t.length;for(let i=0;i<n;i++)r+=this.buildAttrPairStr(t[i],``+e[o][t[i]])}else i+=this.processTextOrObjNode(e[o],o,t,n);return{attrStr:r,val:i}},Oe.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,``+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t===`true`?` `+e:` `+e+`="`+t+`"`},Oe.prototype.buildObjectNode=function(e,t,n,r){if(e===``)return t[0]===`?`?this.indentate(r)+`<`+t+n+`?`+this.tagEndChar:this.indentate(r)+`<`+t+n+this.closeTag(t)+this.tagEndChar;{let i=`</`+t+this.tagEndChar,a=``;return t[0]===`?`&&(a=`?`,i=``),!n&&n!==``||e.indexOf(`<`)!==-1?!1!==this.options.commentPropName&&t===this.options.commentPropName&&a.length===0?this.indentate(r)+`\x3c!--${e}--\x3e`+this.newLine:this.indentate(r)+`<`+t+n+a+this.tagEndChar+e+this.indentate(r)+i:this.indentate(r)+`<`+t+n+a+`>`+e+i}},Oe.prototype.closeTag=function(e){let t=``;return this.options.unpairedTags.indexOf(e)===-1?t=this.options.suppressEmptyNode?`/`:`></${e}`:this.options.suppressUnpairedNode||(t=`/`),t},Oe.prototype.buildTextValNode=function(e,t,n,r){if(!1!==this.options.cdataPropName&&t===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${e}]]>`+this.newLine;if(!1!==this.options.commentPropName&&t===this.options.commentPropName)return this.indentate(r)+`\x3c!--${e}--\x3e`+this.newLine;if(t[0]===`?`)return this.indentate(r)+`<`+t+n+`?`+this.tagEndChar;{let i=this.options.tagValueProcessor(t,e);return i=this.replaceEntitiesValue(i),i===``?this.indentate(r)+`<`+t+n+this.closeTag(t)+this.tagEndChar:this.indentate(r)+`<`+t+n+`>`+i+`</`+t+this.tagEndChar}},Oe.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let n=this.options.entities[t];e=e.replace(n.regex,n.val)}return e};let je={validate:s};t.exports=n})()})),Gc=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.parseXML=n;let t=new(Wc()).XMLParser({attributeNamePrefix:``,htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===``&&t.includes(`
`)?``:void 0});t.addEntity(`#xD`,`\r`),t.addEntity(`#10`,`
`);function n(e){return t.parse(e,!0)}})),Kc=s((e=>{var t=Gc();function n(e){return e.replace(/&/g,`&amp;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`).replace(/"/g,`&quot;`)}function r(e){return e.replace(/&/g,`&amp;`).replace(/"/g,`&quot;`).replace(/'/g,`&apos;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`).replace(/\r/g,`&#x0D;`).replace(/\n/g,`&#x0A;`).replace(/\u0085/g,`&#x85;`).replace(/\u2028/,`&#x2028;`)}var i=class{value;constructor(e){this.value=e}toString(){return r(``+this.value)}},a=class e{name;children;attributes={};static of(t,n,r){let a=new e(t);return n!==void 0&&a.addChildNode(new i(n)),r!==void 0&&a.withName(r),a}constructor(e,t=[]){this.name=e,this.children=t}withName(e){return this.name=e,this}addAttribute(e,t){return this.attributes[e]=t,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,t){return t!=null&&(this.attributes[e]=t),this}cc(t,n,r=n){if(t[n]!=null){let i=e.of(n,t[n]).withName(r);this.c(i)}}l(e,t,n,r){e[t]!=null&&r().map(e=>{e.withName(n),this.c(e)})}lc(t,n,r,i){if(t[n]!=null){let t=i(),n=new e(r);t.map(e=>{n.c(e)}),this.c(n)}}toString(){let e=!!this.children.length,t=`<${this.name}`,r=this.attributes;for(let e of Object.keys(r)){let i=r[e];i!=null&&(t+=` ${e}="${n(``+i)}"`)}return t+=e?`>${this.children.map(e=>e.toString()).join(``)}</${this.name}>`:`/>`}};Object.defineProperty(e,`parseXML`,{enumerable:!0,get:function(){return t.parseXML}}),e.XmlNode=a,e.XmlText=i})),qc,Jc,Yc,Xc,Zc=o((()=>{qc=Kc(),ua(),I(),Jc=V(),Yc=N(),lc(),dc(),Xc=class extends cc{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new $i(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,t,n){let r=P.of(e),i=r.getMemberSchemas();if(r.isStructSchema()&&r.isMemberSchema()&&Object.values(i).find(e=>!!e.getMemberTraits().eventPayload)){let e={},n=Object.keys(i)[0];return i[n].isBlobSchema()?e[n]=t:e[n]=this.read(i[n],t),e}let a=(this.serdeContext?.utf8Encoder??Yc.toUtf8)(t),o=this.parseXml(a);return this.readSchema(e,n?o[n]:o)}readSchema(e,t){let n=P.of(e);if(n.isUnitSchema())return;let r=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(t))return this.readSchema(n,[t]);if(t==null)return t;if(typeof t==`object`){let e=!!r.sparse,i=!!r.xmlFlattened;if(n.isListSchema()){let r=n.getValueSchema(),a=[],o=r.getMergedTraits().xmlName??`member`,s=i?t:(t[0]??t)[o],c=Array.isArray(s)?s:[s];for(let t of c)(t!=null||e)&&a.push(this.readSchema(r,t));return a}let a={};if(n.isMapSchema()){let r=n.getKeySchema(),o=n.getValueSchema(),s;s=i?Array.isArray(t)?t:[t]:Array.isArray(t.entry)?t.entry:[t.entry];let c=r.getMergedTraits().xmlName??`key`,l=o.getMergedTraits().xmlName??`value`;for(let t of s){let n=t[c],r=t[l];(r!=null||e)&&(a[n]=this.readSchema(o,r))}return a}if(n.isStructSchema()){let e=n.isUnionSchema(),r;e&&(r=new uc(t,a));for(let[i,o]of n.structIterator()){let n=o.getMergedTraits(),s=n.httpPayload?n.xmlName??o.getName():o.getMemberTraits().xmlName??i;e&&r.mark(s),t[s]!=null&&(a[i]=this.readSchema(o,t[s]))}return e&&r.writeUnknown(),a}if(n.isDocumentSchema())return t;throw Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,t)}parseXml(e){if(e.length){let t;try{t=(0,qc.parseXML)(e)}catch(t){throw t&&typeof t==`object`&&Object.defineProperty(t,`$responseBodyText`,{value:e}),t}let n=`#text`,r=Object.keys(t)[0],i=t[r];return i[n]&&(i[r]=i[n],delete i[n]),(0,Jc.getValueFromTextNode)(i)}return{}}}})),Qc,$c,el,tl=o((()=>{ua(),I(),Ti(),Qc=V(),$c=Me(),lc(),el=class extends cc{settings;buffer;constructor(e){super(),this.settings=e}write(e,t,n=``){this.buffer===void 0&&(this.buffer=``);let r=P.of(e);if(n&&!n.endsWith(`.`)&&(n+=`.`),r.isBlobSchema())(typeof t==`string`||t instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??$c.toBase64)(t)));else if(r.isBooleanSchema()||r.isNumericSchema()||r.isStringSchema())t==null?r.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,Yr.v4)())):(this.writeKey(n),this.writeValue(String(t)));else if(r.isBigIntegerSchema())t!=null&&(this.writeKey(n),this.writeValue(String(t)));else if(r.isBigDecimalSchema())t!=null&&(this.writeKey(n),this.writeValue(t instanceof Si?t.string:String(t)));else if(r.isTimestampSchema()){if(t instanceof Date)switch(this.writeKey(n),Yi(r,this.settings)){case 5:this.writeValue(t.toISOString().replace(`.000Z`,`Z`));break;case 6:this.writeValue((0,Qc.dateToUtcString)(t));break;case 7:this.writeValue(String(t.getTime()/1e3));break}}else if(r.isDocumentSchema())Array.isArray(t)?this.write(79,t,n):t instanceof Date?this.write(4,t,n):t instanceof Uint8Array?this.write(21,t,n):t&&typeof t==`object`?this.write(143,t,n):(this.writeKey(n),this.writeValue(String(t)));else if(r.isListSchema()){if(Array.isArray(t))if(t.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(``));else{let e=r.getValueSchema(),i=this.settings.flattenLists||r.getMergedTraits().xmlFlattened,a=1;for(let r of t){if(r==null)continue;let t=e.getMergedTraits(),o=this.getKey(`member`,t.xmlName,t.ec2QueryName),s=i?`${n}${a}`:`${n}${o}.${a}`;this.write(e,r,s),++a}}}else if(r.isMapSchema()){if(t&&typeof t==`object`){let e=r.getKeySchema(),i=r.getValueSchema(),a=r.getMergedTraits().xmlFlattened,o=1;for(let[r,s]of Object.entries(t)){if(s==null)continue;let t=e.getMergedTraits(),c=this.getKey(`key`,t.xmlName,t.ec2QueryName),l=a?`${n}${o}.${c}`:`${n}entry.${o}.${c}`,u=i.getMergedTraits(),d=this.getKey(`value`,u.xmlName,u.ec2QueryName),f=a?`${n}${o}.${d}`:`${n}entry.${o}.${d}`;this.write(e,r,l),this.write(i,s,f),++o}}}else if(r.isStructSchema()){if(t&&typeof t==`object`){let e=!1;for(let[i,a]of r.structIterator()){if(t[i]==null&&!a.isIdempotencyToken())continue;let r=a.getMergedTraits(),o=this.getKey(i,r.xmlName,r.ec2QueryName,`struct`),s=`${n}${o}`;this.write(a,t[i],s),e=!0}if(!e&&r.isUnionSchema()){let{$unknown:e}=t;if(Array.isArray(e)){let[t,r]=e,i=`${n}${t}`;this.write(15,r,i)}}}}else if(!r.isUnitSchema())throw Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${r.getName(!0)}`)}flush(){if(this.buffer===void 0)throw Error(`@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.`);let e=this.buffer;return delete this.buffer,e}getKey(e,t,n,r){let{ec2:i,capitalizeKeys:a}=this.settings;if(i&&n)return n;let o=t??e;return a&&r===`struct`?o[0].toUpperCase()+o.slice(1):o}writeKey(e){e.endsWith(`.`)&&(e=e.slice(0,e.length-1)),this.buffer+=`&${it(e)}=`}writeValue(e){this.buffer+=it(e)}}})),nl,rl=o((()=>{ua(),I(),tc(),Zc(),tl(),nl=class extends Vi{options;serializer;deserializer;mixin=new ec;constructor(e){super({defaultNamespace:e.defaultNamespace}),this.options=e;let t={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace,serializeEmptyLists:!0};this.serializer=new el(t),this.deserializer=new Xc(t)}getShapeId(){return`aws.protocols#awsQuery`}setSerdeContext(e){this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e)}getPayloadCodec(){throw Error(`AWSQuery protocol has no payload codec.`)}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n);return r.path.endsWith(`/`)||(r.path+=`/`),Object.assign(r.headers,{"content-type":`application/x-www-form-urlencoded`}),(ot(e.input)===`unit`||!r.body)&&(r.body=``),r.body=`Action=${e.name.split(`#`)[1]??e.name}&Version=${this.options.version}`+r.body,r.body.endsWith(`&`)&&(r.body=r.body.slice(-1)),r}async deserializeResponse(e,t,n){let r=this.deserializer,i=P.of(e.output),a={};if(n.statusCode>=300){let i=await nt(n.body,t);i.byteLength>0&&Object.assign(a,await r.read(15,i)),await this.handleError(e,t,n,a,this.deserializeMetadata(n))}for(let e in n.headers){let t=n.headers[e];delete n.headers[e],n.headers[e.toLowerCase()]=t}let o=e.name.split(`#`)[1]??e.name,s=i.isStructSchema()&&this.useNestedResult()?o+`Result`:void 0,c=await nt(n.body,t);return c.byteLength>0&&Object.assign(a,await r.read(i,c,s)),{$metadata:this.deserializeMetadata(n),...a}}useNestedResult(){return!0}async handleError(e,t,n,r,i){let a=this.loadQueryErrorCode(n,r)??`Unknown`,o=this.loadQueryError(r),s=this.loadQueryErrorMessage(r);o.message=s,o.Error={Type:o.Type,Code:o.Code,Message:s};let{errorSchema:c,errorMetadata:l}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,o,i,this.mixin.findQueryCompatibleError),u=P.of(c),d=new((F.for(c[1]).getErrorCtor(c))??Error)(s),f={Type:o.Error.Type,Code:o.Error.Code,Error:o.Error};for(let[e,t]of u.structIterator()){let n=t.getMergedTraits().xmlName??e,i=o[n]??r[n];f[e]=this.deserializer.readSchema(t,i)}throw this.mixin.decorateServiceException(Object.assign(d,l,{$fault:u.getMergedTraits().error,message:s},f),r)}loadQueryErrorCode(e,t){let n=(t.Errors?.[0]?.Error??t.Errors?.Error??t.Error)?.Code;if(n!==void 0)return n;if(e.statusCode==404)return`NotFound`}loadQueryError(e){return e.Errors?.[0]?.Error??e.Errors?.Error??e.Error}loadQueryErrorMessage(e){let t=this.loadQueryError(e);return t?.message??t?.Message??e.message??e.Message??`Unknown`}getDefaultContentType(){return`application/x-www-form-urlencoded`}}})),il,al=o((()=>{rl(),il=class extends nl{options;constructor(e){super(e),this.options=e,Object.assign(this.serializer.settings,{capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1,ec2:!0})}useNestedResult(){return!1}}})),ol,sl,cl,ll,ul,dl=o((()=>{ol=Kc(),sl=V(),_c(),cl=(e,t)=>gc(e,t).then(e=>{if(e.length){let t;try{t=(0,ol.parseXML)(e)}catch(t){throw t&&typeof t==`object`&&Object.defineProperty(t,`$responseBodyText`,{value:e}),t}let n=`#text`,r=Object.keys(t)[0],i=t[r];return i[n]&&(i[r]=i[n],delete i[n]),(0,sl.getValueFromTextNode)(i)}return{}}),ll=async(e,t)=>{let n=await cl(e,t);return n.Error&&(n.Error.message=n.Error.message??n.Error.Message),n},ul=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return`NotFound`}})),fl,pl,ml,hl,gl=o((()=>{fl=Kc(),ua(),I(),Ti(),pl=V(),ml=Me(),lc(),hl=class extends cc{settings;stringBuffer;byteBuffer;buffer;constructor(e){super(),this.settings=e}write(e,t){let n=P.of(e);if(n.isStringSchema()&&typeof t==`string`)this.stringBuffer=t;else if(n.isBlobSchema())this.byteBuffer=`byteLength`in t?t:(this.serdeContext?.base64Decoder??ml.fromBase64)(t);else{this.buffer=this.writeStruct(n,t,void 0);let e=n.getMergedTraits();e.httpPayload&&!e.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let e=this.byteBuffer;return delete this.byteBuffer,e}if(this.stringBuffer!==void 0){let e=this.stringBuffer;return delete this.stringBuffer,e}let e=this.buffer;return this.settings.xmlNamespace&&(e?.attributes?.xmlns||e.addAttribute(`xmlns`,this.settings.xmlNamespace)),delete this.buffer,e.toString()}writeStruct(e,t,n){let r=e.getMergedTraits(),i=e.isMemberSchema()&&!r.httpPayload?e.getMemberTraits().xmlName??e.getMemberName():r.xmlName??e.getName();if(!i||!e.isStructSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${e.getName(!0)}.`);let a=fl.XmlNode.of(i),[o,s]=this.getXmlnsAttribute(e,n);for(let[n,r]of e.structIterator()){let e=t[n];if(e!=null||r.isIdempotencyToken()){if(r.getMergedTraits().xmlAttribute){a.addAttribute(r.getMergedTraits().xmlName??n,this.writeSimple(r,e));continue}if(r.isListSchema())this.writeList(r,e,a,s);else if(r.isMapSchema())this.writeMap(r,e,a,s);else if(r.isStructSchema())a.addChildNode(this.writeStruct(r,e,s));else{let t=fl.XmlNode.of(r.getMergedTraits().xmlName??r.getMemberName());this.writeSimpleInto(r,e,t,s),a.addChildNode(t)}}}let{$unknown:c}=t;if(c&&e.isUnionSchema()&&Array.isArray(c)&&Object.keys(t).length===1){let[e,n]=c,r=fl.XmlNode.of(e);if(typeof n!=`string`)if(t instanceof fl.XmlNode||t instanceof fl.XmlText)a.addChildNode(t);else throw Error(`@aws-sdk - $unknown union member in XML requires value of type string, @aws-sdk/xml-builder::XmlNode or XmlText.`);this.writeSimpleInto(0,n,r,s),a.addChildNode(r)}return s&&a.addAttribute(o,s),a}writeList(e,t,n,r){if(!e.isMemberSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${e.getName(!0)}`);let i=e.getMergedTraits(),a=e.getValueSchema(),o=a.getMergedTraits(),s=!!o.sparse,c=!!i.xmlFlattened,[l,u]=this.getXmlnsAttribute(e,r),d=(t,n)=>{if(a.isListSchema())this.writeList(a,Array.isArray(n)?n:[n],t,u);else if(a.isMapSchema())this.writeMap(a,n,t,u);else if(a.isStructSchema()){let r=this.writeStruct(a,n,u);t.addChildNode(r.withName(c?i.xmlName??e.getMemberName():o.xmlName??`member`))}else{let r=fl.XmlNode.of(c?i.xmlName??e.getMemberName():o.xmlName??`member`);this.writeSimpleInto(a,n,r,u),t.addChildNode(r)}};if(c)for(let e of t)(s||e!=null)&&d(n,e);else{let r=fl.XmlNode.of(i.xmlName??e.getMemberName());u&&r.addAttribute(l,u);for(let e of t)(s||e!=null)&&d(r,e);n.addChildNode(r)}}writeMap(e,t,n,r,i=!1){if(!e.isMemberSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${e.getName(!0)}`);let a=e.getMergedTraits(),o=e.getKeySchema(),s=o.getMergedTraits().xmlName??`key`,c=e.getValueSchema(),l=c.getMergedTraits(),u=l.xmlName??`value`,d=!!l.sparse,f=!!a.xmlFlattened,[p,m]=this.getXmlnsAttribute(e,r),h=(e,t,n)=>{let r=fl.XmlNode.of(s,t),[i,a]=this.getXmlnsAttribute(o,m);a&&r.addAttribute(i,a),e.addChildNode(r);let l=fl.XmlNode.of(u);c.isListSchema()?this.writeList(c,n,l,m):c.isMapSchema()?this.writeMap(c,n,l,m,!0):c.isStructSchema()?l=this.writeStruct(c,n,m):this.writeSimpleInto(c,n,l,m),e.addChildNode(l)};if(f){for(let[r,i]of Object.entries(t))if(d||i!=null){let t=fl.XmlNode.of(a.xmlName??e.getMemberName());h(t,r,i),n.addChildNode(t)}}else{let r;i||(r=fl.XmlNode.of(a.xmlName??e.getMemberName()),m&&r.addAttribute(p,m),n.addChildNode(r));for(let[e,a]of Object.entries(t))if(d||a!=null){let t=fl.XmlNode.of(`entry`);h(t,e,a),(i?n:r).addChildNode(t)}}}writeSimple(e,t){if(t===null)throw Error(`@aws-sdk/core/protocols - (XML serializer) cannot write null value.`);let n=P.of(e),r=null;if(t&&typeof t==`object`)if(n.isBlobSchema())r=(this.serdeContext?.base64Encoder??ml.toBase64)(t);else if(n.isTimestampSchema()&&t instanceof Date)switch(Yi(n,this.settings)){case 5:r=t.toISOString().replace(`.000Z`,`Z`);break;case 6:r=(0,pl.dateToUtcString)(t);break;case 7:r=String(t.getTime()/1e3);break;default:console.warn(`Missing timestamp format, using http date`,t),r=(0,pl.dateToUtcString)(t);break}else if(n.isBigDecimalSchema()&&t)return t instanceof Si?t.string:String(t);else if(n.isMapSchema()||n.isListSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead.`);else throw Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`);if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(r=String(t)),n.isStringSchema()&&(r=t===void 0&&n.isIdempotencyToken()?(0,Yr.v4)():String(t)),r===null)throw Error(`Unhandled schema-value pair ${n.getName(!0)}=${t}`);return r}writeSimpleInto(e,t,n,r){let i=this.writeSimple(e,t),a=P.of(e),o=new fl.XmlText(i),[s,c]=this.getXmlnsAttribute(a,r);c&&n.addAttribute(s,c),n.addChildNode(o)}getXmlnsAttribute(e,t){let[n,r]=e.getMergedTraits().xmlNamespace??[];return r&&r!==t?[n?`xmlns:${n}`:`xmlns`,r]:[void 0,void 0]}}})),_l,vl=o((()=>{lc(),Zc(),gl(),_l=class extends cc{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new hl(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new Xc(this.settings);return e.setSerdeContext(this.serdeContext),e}}})),yl,bl=o((()=>{ua(),I(),tc(),dl(),vl(),yl=class extends Ri{codec;serializer;deserializer;mixin=new ec;constructor(e){super(e);let t={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace};this.codec=new _l(t),this.serializer=new sa(this.codec.createSerializer(),t),this.deserializer=new na(this.codec.createDeserializer(),t)}getPayloadCodec(){return this.codec}getShapeId(){return`aws.protocols#restXml`}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n),i=P.of(e.input);if(!r.headers[`content-type`]){let e=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);e&&(r.headers[`content-type`]=e)}return typeof r.body==`string`&&r.headers[`content-type`]===this.getDefaultContentType()&&!r.body.startsWith(`<?xml `)&&!this.hasUnstructuredPayloadBinding(i)&&(r.body=`<?xml version="1.0" encoding="UTF-8"?>`+r.body),r}async deserializeResponse(e,t,n){return super.deserializeResponse(e,t,n)}async handleError(e,t,n,r,i){let a=ul(n,r)??`Unknown`;if(r.Error&&typeof r.Error==`object`)for(let e of Object.keys(r.Error))r[e]=r.Error[e],e.toLowerCase()===`message`&&(r.message=r.Error[e]);r.RequestId&&!i.requestId&&(i.requestId=r.RequestId);let{errorSchema:o,errorMetadata:s}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,r,i),c=P.of(o),l=r.Error?.message??r.Error?.Message??r.message??r.Message??`Unknown`,u=new((F.for(o[1]).getErrorCtor(o))??Error)(l);await this.deserializeHttpMessage(o,t,n,r);let d={};for(let[e,t]of c.structIterator()){let n=t.getMergedTraits().xmlName??e,i=r.Error?.[n]??r[n];d[e]=this.codec.createDeserializer().readSchema(t,i)}throw this.mixin.decorateServiceException(Object.assign(u,s,{$fault:c.getMergedTraits().error,message:l},d),r)}getDefaultContentType(){return`application/xml`}hasUnstructuredPayloadBinding(e){for(let[,t]of e.structIterator())if(t.getMergedTraits().httpPayload)return!(t.isStructSchema()||t.isMapSchema()||t.isListSchema());return!1}}})),xl=c({AwsEc2QueryProtocol:()=>il,AwsJson1_0Protocol:()=>Fc,AwsJson1_1Protocol:()=>Lc,AwsJsonRpcProtocol:()=>Nc,AwsQueryProtocol:()=>nl,AwsRestJsonProtocol:()=>zc,AwsRestXmlProtocol:()=>yl,AwsSmithyRpcV2CborProtocol:()=>nc,JsonCodec:()=>jc,JsonShapeDeserializer:()=>Cc,JsonShapeSerializer:()=>kc,XmlCodec:()=>_l,XmlShapeDeserializer:()=>Xc,XmlShapeSerializer:()=>hl,_toBool:()=>ac,_toNum:()=>oc,_toStr:()=>ic,awsExpectUnion:()=>Hc,loadRestJsonErrorCode:()=>bc,loadRestXmlErrorCode:()=>ul,parseJsonBody:()=>vc,parseJsonErrorBody:()=>yc,parseXmlBody:()=>cl,parseXmlErrorBody:()=>ll}),Sl=o((()=>{rc(),sc(),Ic(),Rc(),Pc(),Bc(),Mc(),wc(),Ac(),Uc(),xc(),al(),rl(),bl(),vl(),Zc(),gl(),dl()})),Cl=c({AWSSDKSigV4Signer:()=>uo,AwsEc2QueryProtocol:()=>il,AwsJson1_0Protocol:()=>Fc,AwsJson1_1Protocol:()=>Lc,AwsJsonRpcProtocol:()=>Nc,AwsQueryProtocol:()=>nl,AwsRestJsonProtocol:()=>zc,AwsRestXmlProtocol:()=>yl,AwsSdkSigV4ASigner:()=>mo,AwsSdkSigV4Signer:()=>lo,AwsSmithyRpcV2CborProtocol:()=>nc,JsonCodec:()=>jc,JsonShapeDeserializer:()=>Cc,JsonShapeSerializer:()=>kc,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>So,NODE_SIGV4A_CONFIG_OPTIONS:()=>Do,XmlCodec:()=>_l,XmlShapeDeserializer:()=>Xc,XmlShapeSerializer:()=>hl,_toBool:()=>ac,_toNum:()=>oc,_toStr:()=>ic,awsExpectUnion:()=>Hc,emitWarningIfUnsupportedVersion:()=>Ba,getBearerTokenEnvKey:()=>vo,loadRestJsonErrorCode:()=>bc,loadRestXmlErrorCode:()=>ul,parseJsonBody:()=>vc,parseJsonErrorBody:()=>yc,parseXmlBody:()=>cl,parseXmlErrorBody:()=>ll,resolveAWSSDKSigV4Config:()=>Po,resolveAwsSdkSigV4AConfig:()=>Eo,resolveAwsSdkSigV4Config:()=>No,setCredentialFeature:()=>Ha,setFeature:()=>Wa,setTokenFeature:()=>Ka,state:()=>za,validateSigningProperties:()=>co}),wl=o((()=>{Ya(),Ro(),Sl()})),Tl=s((e=>{var t=(Pa(),d(Na)),n=Ra(),r=p(),i=(wl(),d(Cl));function a(e){return e===void 0?!0:typeof e==`string`&&e.length<=50}function o(e){let n=t.normalizeProvider(e.userAgentAppId??void 0),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r==`string`?[[r]]:r,userAgentAppId:async()=>{let t=await n();if(!a(t)){let n=e.logger?.constructor?.name===`NoOpLogger`||!e.logger?console:e.logger;typeof t==`string`?t.length>50&&n?.warn(`The provided userAgentAppId exceeds the maximum length of 50 characters.`):n?.warn(`userAgentAppId must be a string or undefined.`)}return t}})}let s=/\d{12}\.ddb/;async function c(e,t,n){if(n.request?.headers?.[`smithy-protocol`]===`rpc-v2-cbor`&&i.setFeature(e,`PROTOCOL_RPC_V2_CBOR`,`M`),typeof t.retryStrategy==`function`){let n=await t.retryStrategy();typeof n.acquireInitialRetryToken==`function`?n.constructor?.name?.includes(`Adaptive`)?i.setFeature(e,`RETRY_MODE_ADAPTIVE`,`F`):i.setFeature(e,`RETRY_MODE_STANDARD`,`E`):i.setFeature(e,`RETRY_MODE_LEGACY`,`D`)}if(typeof t.accountIdEndpointMode==`function`){let n=e.endpointV2;switch(String(n?.url?.hostname).match(s)&&i.setFeature(e,`ACCOUNT_ID_ENDPOINT`,`O`),await t.accountIdEndpointMode?.()){case`disabled`:i.setFeature(e,`ACCOUNT_ID_MODE_DISABLED`,`Q`);break;case`preferred`:i.setFeature(e,`ACCOUNT_ID_MODE_PREFERRED`,`P`);break;case`required`:i.setFeature(e,`ACCOUNT_ID_MODE_REQUIRED`,`R`);break}}let r=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(r?.$source){let t=r;t.accountId&&i.setFeature(e,`RESOLVED_ACCOUNT_ID`,`T`);for(let[n,r]of Object.entries(t.$source??{}))i.setFeature(e,n,r)}}let l=`user-agent`,u=`x-amz-user-agent`,f=/[^!$%&'*+\-.^_`|~\w]/g,m=/[^!$%&'*+\-.^_`|~\w#]/g;function h(e){let t=``;for(let n in e){let r=e[n];if(t.length+r.length+1<=1024){t.length?t+=`,`+r:t+=r;continue}break}return t}let g=e=>(t,i)=>async a=>{let{request:o}=a;if(!r.HttpRequest.isInstance(o))return t(a);let{headers:s}=o,d=i?.userAgent?.map(_)||[],f=(await e.defaultUserAgentProvider()).map(_);await c(i,e,a);let p=i;f.push(`m/${h(Object.assign({},i.__smithy_context?.features,p.__aws_sdk_context?.features))}`);let m=e?.customUserAgent?.map(_)||[],g=await e.userAgentAppId();g&&f.push(_([`app`,`${g}`]));let v=n.getUserAgentPrefix(),y=(v?[v]:[]).concat([...f,...d,...m]).join(` `),b=[...f.filter(e=>e.startsWith(`aws-sdk-`)),...m].join(` `);return e.runtime===`browser`?s[u]=y:(b&&(s[u]=s[u]?`${s[l]} ${b}`:b),s[l]=y),t({...a,request:o})},_=e=>{let t=e[0].split(`/`).map(e=>e.replace(f,`-`)).join(`/`),n=e[1]?.replace(m,`-`),r=t.indexOf(`/`),i=t.substring(0,r),a=t.substring(r+1);return i===`api`&&(a=a.toLowerCase()),[i,a,n].filter(e=>e&&e.length>0).reduce((e,t,n)=>{switch(n){case 0:return t;case 1:return`${e}/${t}`;default:return`${e}#${t}`}},``)},v={name:`getUserAgentMiddleware`,step:`build`,priority:`low`,tags:[`SET_USER_AGENT`,`USER_AGENT`],override:!0};e.DEFAULT_UA_APP_ID=void 0,e.getUserAgentMiddlewareOptions=v,e.getUserAgentPlugin=e=>({applyToStack:t=>{t.add(g(e),v)}}),e.resolveUserAgentConfig=o,e.userAgentMiddleware=g})),El=s((e=>{e.SelectorType=void 0,(function(e){e.ENV=`env`,e.CONFIG=`shared config entry`})(e.SelectorType||={}),e.booleanSelector=(e,t,n)=>{if(t in e){if(e[t]===`true`)return!0;if(e[t]===`false`)return!1;throw Error(`Cannot load ${n} "${t}". Expected "true" or "false", got ${e[t]}.`)}},e.numberSelector=(e,t,n)=>{if(!(t in e))return;let r=parseInt(e[t],10);if(Number.isNaN(r))throw TypeError(`Cannot load ${n} '${t}'. Expected number, got '${e[t]}'.`);return r}})),Dl=s((e=>{var t=El(),n=k(),r=Fa();let i=`AWS_USE_DUALSTACK_ENDPOINT`,a=`use_dualstack_endpoint`,o={environmentVariableSelector:e=>t.booleanSelector(e,i,t.SelectorType.ENV),configFileSelector:e=>t.booleanSelector(e,a,t.SelectorType.CONFIG),default:!1},s=`AWS_USE_FIPS_ENDPOINT`,c=`use_fips_endpoint`,l={environmentVariableSelector:e=>t.booleanSelector(e,s,t.SelectorType.ENV),configFileSelector:e=>t.booleanSelector(e,c,t.SelectorType.CONFIG),default:!1},u=e=>{let{tls:t,endpoint:r,urlParser:i,useDualstackEndpoint:a}=e;return Object.assign(e,{tls:t??!0,endpoint:n.normalizeProvider(typeof r==`string`?i(r):r),isCustomEndpoint:!0,useDualstackEndpoint:n.normalizeProvider(a??!1)})},d=async e=>{let{tls:t=!0}=e,n=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw Error(`Invalid region in client config`);let r=await e.useDualstackEndpoint(),i=await e.useFipsEndpoint(),{hostname:a}=await e.regionInfoProvider(n,{useDualstackEndpoint:r,useFipsEndpoint:i})??{};if(!a)throw Error(`Cannot resolve hostname from client config`);return e.urlParser(`${t?`https:`:`http:`}//${a}`)},f=e=>{let t=n.normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:i,urlParser:a,tls:o}=e;return Object.assign(e,{tls:o??!0,endpoint:r?n.normalizeProvider(typeof r==`string`?a(r):r):()=>d({...e,useDualstackEndpoint:t,useFipsEndpoint:i}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},p=`AWS_REGION`,m=`region`,h={environmentVariableSelector:e=>e[p],configFileSelector:e=>e[m],default:()=>{throw Error(`Region is missing`)}},g={preferredFile:`credentials`},_=new Set,v=(e,t=r.isValidHostLabel)=>{if(!_.has(e)&&!t(e))if(e===`*`)console.warn(`@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.`);else throw Error(`Region not accepted: region="${e}" is not a valid hostname component.`);else _.add(e)},y=e=>typeof e==`string`&&(e.startsWith(`fips-`)||e.endsWith(`-fips`)),b=e=>y(e)?[`fips-aws-global`,`aws-fips`].includes(e)?`us-east-1`:e.replace(/fips-(dkr-|prod-)?|-fips/,``):e,x=e=>{let{region:t,useFipsEndpoint:n}=e;if(!t)throw Error(`Region is missing`);return Object.assign(e,{region:async()=>{let e=b(typeof t==`function`?await t():t);return v(e),e},useFipsEndpoint:async()=>y(typeof t==`string`?t:await t())?!0:typeof n==`function`?n():Promise.resolve(!!n)})},S=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:n})=>e.find(({tags:e})=>t===e.includes(`fips`)&&n===e.includes(`dualstack`))?.hostname,C=(e,{regionHostname:t,partitionHostname:n})=>t||(n?n.replace(`{region}`,e):void 0),w=(e,{partitionHash:t})=>Object.keys(t||{}).find(n=>t[n].regions.includes(e))??`aws`,T=(e,{signingRegion:t,regionRegex:n,useFipsEndpoint:r})=>{if(t)return t;if(r){let t=n.replace(`\\\\`,`\\`).replace(/^\^/g,`\\.`).replace(/\$$/g,`\\.`),r=e.match(t);if(r)return r[0].slice(1,-1)}};e.CONFIG_USE_DUALSTACK_ENDPOINT=a,e.CONFIG_USE_FIPS_ENDPOINT=c,e.DEFAULT_USE_DUALSTACK_ENDPOINT=!1,e.DEFAULT_USE_FIPS_ENDPOINT=!1,e.ENV_USE_DUALSTACK_ENDPOINT=i,e.ENV_USE_FIPS_ENDPOINT=s,e.NODE_REGION_CONFIG_FILE_OPTIONS=g,e.NODE_REGION_CONFIG_OPTIONS=h,e.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=o,e.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=l,e.REGION_ENV_NAME=p,e.REGION_INI_NAME=m,e.getRegionInfo=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:n=!1,signingService:r,regionHash:i,partitionHash:a})=>{let o=w(e,{partitionHash:a}),s=e in i?e:a[o]?.endpoint??e,c={useFipsEndpoint:t,useDualstackEndpoint:n},l=C(s,{regionHostname:S(i[s]?.variants,c),partitionHostname:S(a[o]?.variants,c)});if(l===void 0)throw Error(`Endpoint resolution failed for: [object Object]`);let u=T(l,{signingRegion:i[s]?.signingRegion,regionRegex:a[o].regionRegex,useFipsEndpoint:t});return{partition:o,signingService:r,hostname:l,...u&&{signingRegion:u},...i[s]?.signingService&&{signingService:i[s].signingService}}},e.resolveCustomEndpointsConfig=u,e.resolveEndpointsConfig=f,e.resolveRegionConfig=x})),Ol=s((e=>{var t=p();let n=`content-length`;function r(e){return r=>async i=>{let a=i.request;if(t.HttpRequest.isInstance(a)){let{body:t,headers:r}=a;if(t&&Object.keys(r).map(e=>e.toLowerCase()).indexOf(n)===-1)try{let r=e(t);a.headers={...a.headers,[n]:String(r)}}catch{}}return r({...i,request:a})}}let i={step:`build`,tags:[`SET_CONTENT_LENGTH`,`CONTENT_LENGTH`],name:`contentLengthMiddleware`,override:!0};e.contentLengthMiddleware=r,e.contentLengthMiddlewareOptions=i,e.getContentLengthPlugin=e=>({applyToStack:t=>{t.add(r(e.bodyLengthChecker),i)}})})),kl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getHomeDir=void 0;let t=require(`os`),n=require(`path`),r={},i=()=>process&&process.geteuid?`${process.geteuid()}`:`DEFAULT`;e.getHomeDir=()=>{let{HOME:e,USERPROFILE:a,HOMEPATH:o,HOMEDRIVE:s=`C:${n.sep}`}=process.env;if(e)return e;if(a)return a;if(o)return`${s}${o}`;let c=i();return r[c]||(r[c]=(0,t.homedir)()),r[c]}})),Al=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getSSOTokenFilepath=void 0;let t=require(`crypto`),n=require(`path`),r=kl();e.getSSOTokenFilepath=e=>{let i=(0,t.createHash)(`sha1`).update(e).digest(`hex`);return(0,n.join)((0,r.getHomeDir)(),`.aws`,`sso`,`cache`,`${i}.json`)}})),jl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getSSOTokenFromFile=e.tokenIntercept=void 0;let t=require(`fs/promises`),n=Al();e.tokenIntercept={},e.getSSOTokenFromFile=async r=>{if(e.tokenIntercept[r])return e.tokenIntercept[r];let i=(0,n.getSSOTokenFilepath)(r),a=await(0,t.readFile)(i,`utf8`);return JSON.parse(a)}})),Ml=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.readFile=e.fileIntercept=e.filePromises=void 0;let t=require(`node:fs/promises`);e.filePromises={},e.fileIntercept={},e.readFile=(n,r)=>e.fileIntercept[n]===void 0?((!e.filePromises[n]||r?.ignoreCache)&&(e.filePromises[n]=(0,t.readFile)(n,`utf8`)),e.filePromises[n]):e.fileIntercept[n]})),Nl=s((e=>{var t=kl(),n=Al(),r=jl(),i=require(`path`),a=f(),o=Ml();let s=`AWS_PROFILE`,c=`default`,l=e=>e.profile||process.env[s]||c,u=e=>Object.entries(e).filter(([e])=>{let t=e.indexOf(`.`);return t===-1?!1:Object.values(a.IniSectionType).includes(e.substring(0,t))}).reduce((e,[t,n])=>{let r=t.indexOf(`.`),i=t.substring(0,r)===a.IniSectionType.PROFILE?t.substring(r+1):t;return e[i]=n,e},{...e.default&&{default:e.default}}),d=()=>process.env.AWS_CONFIG_FILE||i.join(t.getHomeDir(),`.aws`,`config`),p=()=>process.env.AWS_SHARED_CREDENTIALS_FILE||i.join(t.getHomeDir(),`.aws`,`credentials`),m=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,h=[`__proto__`,`profile __proto__`],g=e=>{let t={},n,r;for(let i of e.split(/\r?\n/)){let e=i.split(/(^|\s)[;#]/)[0].trim();if(e[0]===`[`&&e[e.length-1]===`]`){n=void 0,r=void 0;let t=e.substring(1,e.length-1),i=m.exec(t);if(i){let[,e,,t]=i;Object.values(a.IniSectionType).includes(e)&&(n=[e,t].join(`.`))}else n=t;if(h.includes(t))throw Error(`Found invalid profile name "${t}"`)}else if(n){let a=e.indexOf(`=`);if(![0,-1].includes(a)){let[o,s]=[e.substring(0,a).trim(),e.substring(a+1).trim()];if(s===``)r=o;else{r&&i.trimStart()===i&&(r=void 0),t[n]=t[n]||{};let e=r?[r,o].join(`.`):o;t[n][e]=s}}}}return t},_=()=>({}),v=async(e={})=>{let{filepath:n=p(),configFilepath:r=d()}=e,a=t.getHomeDir(),s=n;n.startsWith(`~/`)&&(s=i.join(a,n.slice(2)));let c=r;r.startsWith(`~/`)&&(c=i.join(a,r.slice(2)));let l=await Promise.all([o.readFile(c,{ignoreCache:e.ignoreCache}).then(g).then(u).catch(_),o.readFile(s,{ignoreCache:e.ignoreCache}).then(g).catch(_)]);return{configFile:l[0],credentialsFile:l[1]}},y=e=>Object.entries(e).filter(([e])=>e.startsWith(a.IniSectionType.SSO_SESSION+`.`)).reduce((e,[t,n])=>({...e,[t.substring(t.indexOf(`.`)+1)]:n}),{}),b=()=>({}),x=async(e={})=>o.readFile(e.configFilepath??d()).then(g).then(y).catch(b),S=(...e)=>{let t={};for(let n of e)for(let[e,r]of Object.entries(n))t[e]===void 0?t[e]=r:Object.assign(t[e],r);return t};Object.defineProperty(e,`getSSOTokenFromFile`,{enumerable:!0,get:function(){return r.getSSOTokenFromFile}}),Object.defineProperty(e,`readFile`,{enumerable:!0,get:function(){return o.readFile}}),e.CONFIG_PREFIX_SEPARATOR=`.`,e.DEFAULT_PROFILE=c,e.ENV_PROFILE=s,e.externalDataInterceptor={getFileRecord(){return o.fileIntercept},interceptFile(e,t){o.fileIntercept[e]=Promise.resolve(t)},getTokenRecord(){return r.tokenIntercept},interceptToken(e,t){r.tokenIntercept[e]=t}},e.getProfileName=l,e.loadSharedConfigFiles=v,e.loadSsoSessionData=x,e.parseKnownFiles=async e=>{let t=await v(e);return S(t.configFile,t.credentialsFile)},Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),Object.keys(n).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})})),Pl=s((e=>{var t=wo(),n=Nl();function r(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete(`CONFIG`),t.delete(`CONFIG_PREFIX_SEPARATOR`),t.delete(`ENV`),[...t].join(`, `)}catch{return e}}let i=(e,n)=>async()=>{try{let t=e(process.env,n);if(t===void 0)throw Error();return t}catch(i){throw new t.CredentialsProviderError(i.message||`Not found in ENV: ${r(e.toString())}`,{logger:n?.logger})}},a=(e,{preferredFile:i=`config`,...a}={})=>async()=>{let o=n.getProfileName(a),{configFile:s,credentialsFile:c}=await n.loadSharedConfigFiles(a),l=c[o]||{},u=s[o]||{},d=i===`config`?{...l,...u}:{...u,...l};try{let t=e(d,i===`config`?s:c);if(t===void 0)throw Error();return t}catch(n){throw new t.CredentialsProviderError(n.message||`Not found in config files w/ profile [${o}]: ${r(e.toString())}`,{logger:a.logger})}},o=e=>typeof e==`function`,s=e=>o(e)?async()=>await e():t.fromStatic(e);e.loadConfig=({environmentVariableSelector:e,configFileSelector:n,default:r},o={})=>{let{signingName:c,logger:l}=o,u={signingName:c,logger:l};return t.memoize(t.chain(i(e,u),a(n,o),s(r)))}})),Fl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getEndpointUrlConfig=void 0;let t=Nl(),n=`AWS_ENDPOINT_URL`,r=`endpoint_url`;e.getEndpointUrlConfig=e=>({environmentVariableSelector:t=>{let r=t[[n,...e.split(` `).map(e=>e.toUpperCase())].join(`_`)];if(r)return r;let i=t[n];if(i)return i},configFileSelector:(n,i)=>{if(i&&n.services){let a=i[[`services`,n.services].join(t.CONFIG_PREFIX_SEPARATOR)];if(a){let n=a[[e.split(` `).map(e=>e.toLowerCase()).join(`_`),r].join(t.CONFIG_PREFIX_SEPARATOR)];if(n)return n}}let a=n[r];if(a)return a},default:void 0})})),Il=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getEndpointFromConfig=void 0;let t=Pl(),n=Fl();e.getEndpointFromConfig=async e=>(0,t.loadConfig)((0,n.getEndpointUrlConfig)(e??``))()})),Ll=s((e=>{var t=Il(),n=La(),r=(Pa(),d(Na)),i=k(),a=oe();let o=async e=>{let t=e?.Bucket||``;if(typeof e.Bucket==`string`&&(e.Bucket=t.replace(/#/g,`%23`).replace(/\?/g,`%3F`)),f(t)){if(e.ForcePathStyle===!0)throw Error(`Path-style addressing cannot be used with ARN buckets`)}else (!u(t)||t.indexOf(`.`)!==-1&&!String(e.Endpoint).startsWith(`http:`)||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},s=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,c=/(\d+\.){3}\d+/,l=/\.\./,u=e=>s.test(e)&&!c.test(e)&&!l.test(e),f=e=>{let[t,n,r,,,i]=e.split(`:`),a=t===`arn`&&e.split(`:`).length>=6,o=!!(a&&n&&r&&i);if(a&&!o)throw Error(`Invalid ARN: ${e} was an invalid ARN.`);return o},p=(e,t,n,r=!1)=>{let i=async()=>{let i;return i=r?n.clientContextParams?.[e]??n[e]??n[t]:n[e]??n[t],typeof i==`function`?i():i};return e===`credentialScope`||t===`CredentialScope`?async()=>{let e=typeof n.credentials==`function`?await n.credentials():n.credentials;return e?.credentialScope??e?.CredentialScope}:e===`accountId`||t===`AccountId`?async()=>{let e=typeof n.credentials==`function`?await n.credentials():n.credentials;return e?.accountId??e?.AccountId}:e===`endpoint`||t===`endpoint`?async()=>{if(n.isCustomEndpoint===!1)return;let e=await i();if(e&&typeof e==`object`){if(`url`in e)return e.url.href;if(`hostname`in e){let{protocol:t,hostname:n,port:r,path:i}=e;return`${t}//${n}${r?`:`+r:``}${i}`}}return e}:i},m=e=>typeof e==`object`?`url`in e?n.parseUrl(e.url):e:n.parseUrl(e),h=async(e,n,r,i)=>{if(!r.isCustomEndpoint){let e;e=r.serviceConfiguredEndpoint?await r.serviceConfiguredEndpoint():await t.getEndpointFromConfig(r.serviceId),e&&(r.endpoint=()=>Promise.resolve(m(e)),r.isCustomEndpoint=!0)}let a=await g(e,n,r);if(typeof r.endpointProvider!=`function`)throw Error(`config.endpointProvider is not set.`);return r.endpointProvider(a,i)},g=async(e,t,n)=>{let r={},i=t?.getEndpointParameterInstructions?.()||{};for(let[t,a]of Object.entries(i))switch(a.type){case`staticContextParams`:r[t]=a.value;break;case`contextParams`:r[t]=e[a.name];break;case`clientContextParams`:case`builtInParams`:r[t]=await p(a.name,t,n,a.type!==`builtInParams`)();break;case`operationContextParams`:r[t]=a.get(e);break;default:throw Error(`Unrecognized endpoint parameter instruction: `+JSON.stringify(a))}return Object.keys(i).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()===`s3`&&await o(r),r},_=({config:e,instructions:t})=>(n,a)=>async o=>{e.isCustomEndpoint&&r.setFeature(a,`ENDPOINT_OVERRIDE`,`N`);let s=await h(o.input,{getEndpointParameterInstructions(){return t}},{...e},a);a.endpointV2=s,a.authSchemes=s.properties?.authSchemes;let c=a.authSchemes?.[0];if(c){a.signing_region=c.signingRegion,a.signing_service=c.signingName;let e=i.getSmithyContext(a)?.selectedHttpAuthScheme?.httpAuthOption;e&&(e.signingProperties=Object.assign(e.signingProperties||{},{signing_region:c.signingRegion,signingRegion:c.signingRegion,signing_service:c.signingName,signingName:c.signingName,signingRegionSet:c.signingRegionSet},c.properties))}return n({...o})},v={step:`serialize`,tags:[`ENDPOINT_PARAMETERS`,`ENDPOINT_V2`,`ENDPOINT`],name:`endpointV2Middleware`,override:!0,relation:`before`,toMiddleware:a.serializerMiddlewareOption.name};e.endpointMiddleware=_,e.endpointMiddlewareOptions=v,e.getEndpointFromInstructions=h,e.getEndpointPlugin=(e,t)=>({applyToStack:n=>{n.addRelativeTo(_({config:e,instructions:t}),v)}}),e.resolveEndpointConfig=e=>{let n=e.tls??!0,{endpoint:r,useDualstackEndpoint:a,useFipsEndpoint:o}=e,s=r==null?void 0:async()=>m(await i.normalizeProvider(r)()),c=!!r,l=Object.assign(e,{endpoint:s,tls:n,isCustomEndpoint:c,useDualstackEndpoint:i.normalizeProvider(a??!1),useFipsEndpoint:i.normalizeProvider(o??!1)}),u;return l.serviceConfiguredEndpoint=async()=>(e.serviceId&&!u&&(u=t.getEndpointFromConfig(e.serviceId)),u),l},e.resolveEndpointRequiredConfig=e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw Error(`@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.`)}),e},e.resolveParams=g,e.toEndpointV1=m})),Rl=s((e=>{let t=[`AuthFailure`,`InvalidSignatureException`,`RequestExpired`,`RequestInTheFuture`,`RequestTimeTooSkewed`,`SignatureDoesNotMatch`],n=[`BandwidthLimitExceeded`,`EC2ThrottledException`,`LimitExceededException`,`PriorRequestNotComplete`,`ProvisionedThroughputExceededException`,`RequestLimitExceeded`,`RequestThrottled`,`RequestThrottledException`,`SlowDown`,`ThrottledException`,`Throttling`,`ThrottlingException`,`TooManyRequestsException`,`TransactionInProgressException`],r=[`TimeoutError`,`RequestTimeout`,`RequestTimeoutException`],i=[500,502,503,504],a=[`ECONNRESET`,`ECONNREFUSED`,`EPIPE`,`ETIMEDOUT`],o=[`EHOSTUNREACH`,`ENETUNREACH`,`ENOTFOUND`],s=e=>e?.$retryable!==void 0,c=e=>t.includes(e.name),l=e=>e.$metadata?.clockSkewCorrected,u=e=>{let t=new Set([`Failed to fetch`,`NetworkError when attempting to fetch resource`,`The Internet connection appears to be offline`,`Load failed`,`Network request failed`]);return e&&e instanceof TypeError?t.has(e.message):!1},d=e=>e.$metadata?.httpStatusCode===429||n.includes(e.name)||e.$retryable?.throttling==1,f=(e,t=0)=>s(e)||l(e)||r.includes(e.name)||a.includes(e?.code||``)||o.includes(e?.code||``)||i.includes(e.$metadata?.httpStatusCode||0)||u(e)||e.cause!==void 0&&t<=10&&f(e.cause,t+1);e.isBrowserNetworkError=u,e.isClockSkewCorrectedError=l,e.isClockSkewError=c,e.isRetryableByTrait=s,e.isServerError=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!f(e)}return!1},e.isThrottlingError=d,e.isTransientError=f})),zl=s((e=>{var t=Rl();e.RETRY_MODES=void 0,(function(e){e.STANDARD=`standard`,e.ADAPTIVE=`adaptive`})(e.RETRY_MODES||={});let n=e.RETRY_MODES.STANDARD;var r=class e{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8,this.lastThrottleTime=this.getCurrentTimeInSeconds(),this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let n=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(t=>e.setTimeoutFn(t,n))}this.currentCapacity-=t}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let n;if(this.updateMeasuredRate(),t.isThrottlingError(e)){let e=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=e,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(e),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());let r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise((this.lastMaxRate*(1-this.beta)/this.scaleConstant)**(1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*(e-this.lastThrottleTime-this.timeWindow)**3+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),t=Math.floor(e*2)/2;if(this.requestCount++,t>this.lastTxRateBucket){let e=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(e*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}}getPrecise(e){return parseFloat(e.toFixed(8))}};let i=20*1e3,a=()=>{let e=100;return{computeNextBackoffDelay:t=>Math.floor(Math.min(i,Math.random()*2**t*e)),setDelayBase:t=>{e=t}}},o=({retryDelay:e,retryCount:t,retryCost:n})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(i,e),getRetryCost:()=>n});var s=class{maxAttempts;mode=e.RETRY_MODES.STANDARD;capacity=500;retryBackoffStrategy=a();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e==`function`?e:async()=>e}async acquireInitialRetryToken(e){return o({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(e,t){let n=await this.getMaxAttempts();if(this.shouldRetry(e,t,n)){let n=t.errorType;this.retryBackoffStrategy.setDelayBase(n===`THROTTLING`?500:100);let r=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),i=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,r):r,a=this.getCapacityCost(n);return this.capacity-=a,o({retryDelay:i,retryCount:e.getRetryCount()+1,retryCost:a})}throw Error(`No retry token available`)}recordSuccess(e){this.capacity=Math.max(500,this.capacity+(e.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of 3`),3}}shouldRetry(e,t,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return e===`TRANSIENT`?10:5}isRetryableError(e){return e===`THROTTLING`||e===`TRANSIENT`}},c=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=e.RETRY_MODES.ADAPTIVE;constructor(e,t){this.maxAttemptsProvider=e;let{rateLimiter:n}=t??{};this.rateLimiter=n??new r,this.standardRetryStrategy=new s(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}},l=class extends s{computeNextBackoffDelay;constructor(e,t=100){super(typeof e==`function`?e:async()=>e),typeof t==`number`?this.computeNextBackoffDelay=()=>t:this.computeNextBackoffDelay=t}async refreshRetryTokenForRetry(e,t){let n=await super.refreshRetryTokenForRetry(e,t);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};e.AdaptiveRetryStrategy=c,e.ConfiguredRetryStrategy=l,e.DEFAULT_MAX_ATTEMPTS=3,e.DEFAULT_RETRY_DELAY_BASE=100,e.DEFAULT_RETRY_MODE=n,e.DefaultRateLimiter=r,e.INITIAL_RETRY_TOKENS=500,e.INVOCATION_ID_HEADER=`amz-sdk-invocation-id`,e.MAXIMUM_RETRY_DELAY=i,e.NO_RETRY_INCREMENT=1,e.REQUEST_HEADER=`amz-sdk-request`,e.RETRY_COST=5,e.StandardRetryStrategy=s,e.THROTTLING_RETRY_DELAY_BASE=500,e.TIMEOUT_RETRY_COST=10})),Bl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.isStreamingPayload=void 0;let t=require(`stream`);e.isStreamingPayload=e=>e?.body instanceof t.Readable||typeof ReadableStream<`u`&&e?.body instanceof ReadableStream})),Vl=s((e=>{var t=zl(),n=p(),r=Rl(),i=Jr(),a=k(),o=V(),s=Bl();let c=(e,n)=>{let r=e,i=t.NO_RETRY_INCREMENT,a=t.RETRY_COST,o=t.TIMEOUT_RETRY_COST,s=e,c=e=>e.name===`TimeoutError`?o:a,l=e=>c(e)<=s;return Object.freeze({hasRetryTokens:l,retrieveRetryTokens:e=>{if(!l(e))throw Error(`No retry token available`);let t=c(e);return s-=t,t},releaseRetryTokens:e=>{s+=e??i,s=Math.min(s,r)}})},l=(e,n)=>Math.floor(Math.min(t.MAXIMUM_RETRY_DELAY,Math.random()*2**n*e)),u=e=>e?r.isRetryableByTrait(e)||r.isClockSkewError(e)||r.isThrottlingError(e)||r.isTransientError(e):!1,d=e=>e instanceof Error?e:e instanceof Object?Object.assign(Error(),e):typeof e==`string`?Error(e):Error(`AWS SDK error wrapper for ${e}`);var f=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=t.RETRY_MODES.STANDARD;constructor(e,n){this.maxAttemptsProvider=e,this.retryDecider=n?.retryDecider??u,this.delayDecider=n?.delayDecider??l,this.retryQuota=n?.retryQuota??c(t.INITIAL_RETRY_TOKENS)}shouldRetry(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=t.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,a,o){let s,c=0,l=0,u=await this.getMaxAttempts(),{request:f}=a;for(n.HttpRequest.isInstance(f)&&(f.headers[t.INVOCATION_ID_HEADER]=i.v4());;)try{n.HttpRequest.isInstance(f)&&(f.headers[t.REQUEST_HEADER]=`attempt=${c+1}; max=${u}`),o?.beforeRequest&&await o.beforeRequest();let{response:r,output:i}=await e(a);return o?.afterRequest&&o.afterRequest(r),this.retryQuota.releaseRetryTokens(s),i.$metadata.attempts=c+1,i.$metadata.totalRetryDelay=l,{response:r,output:i}}catch(e){let n=d(e);if(c++,this.shouldRetry(n,c,u)){s=this.retryQuota.retrieveRetryTokens(n);let e=this.delayDecider(r.isThrottlingError(n)?t.THROTTLING_RETRY_DELAY_BASE:t.DEFAULT_RETRY_DELAY_BASE,c),i=m(n.$response),a=Math.max(i||0,e);l+=a,await new Promise(e=>setTimeout(e,a));continue}throw n.$metadata||={},n.$metadata.attempts=c,n.$metadata.totalRetryDelay=l,n}}};let m=e=>{if(!n.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(e=>e.toLowerCase()===`retry-after`);if(!t)return;let r=e.headers[t],i=Number(r);return Number.isNaN(i)?new Date(r).getTime()-Date.now():i*1e3};var h=class extends f{rateLimiter;constructor(e,n){let{rateLimiter:r,...i}=n??{};super(e,i),this.rateLimiter=r??new t.DefaultRateLimiter,this.mode=t.RETRY_MODES.ADAPTIVE}async retry(e,t){return super.retry(e,t,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:e=>{this.rateLimiter.updateClientSendingRate(e)}})}};let g=`AWS_MAX_ATTEMPTS`,_=`max_attempts`,v={environmentVariableSelector:e=>{let t=e[g];if(!t)return;let n=parseInt(t);if(Number.isNaN(n))throw Error(`Environment variable ${g} mast be a number, got "${t}"`);return n},configFileSelector:e=>{let t=e[_];if(!t)return;let n=parseInt(t);if(Number.isNaN(n))throw Error(`Shared config file entry ${_} mast be a number, got "${t}"`);return n},default:t.DEFAULT_MAX_ATTEMPTS},y=e=>{let{retryStrategy:n,retryMode:r,maxAttempts:i}=e,o=a.normalizeProvider(i??t.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:o,retryStrategy:async()=>n||(await a.normalizeProvider(r)()===t.RETRY_MODES.ADAPTIVE?new t.AdaptiveRetryStrategy(o):new t.StandardRetryStrategy(o))})},b=`AWS_RETRY_MODE`,x=`retry_mode`,S={environmentVariableSelector:e=>e[b],configFileSelector:e=>e[x],default:t.DEFAULT_RETRY_MODE},C=()=>e=>async r=>{let{request:i}=r;return n.HttpRequest.isInstance(i)&&(delete i.headers[t.INVOCATION_ID_HEADER],delete i.headers[t.REQUEST_HEADER]),e(r)},w={name:`omitRetryHeadersMiddleware`,tags:[`RETRY`,`HEADERS`,`OMIT_RETRY_HEADERS`],relation:`before`,toMiddleware:`awsAuthMiddleware`,override:!0},T=e=>({applyToStack:e=>{e.addRelativeTo(C(),w)}}),E=e=>(r,a)=>async c=>{let l=await e.retryStrategy(),u=await e.maxAttempts();if(D(l)){l=l;let e=await l.acquireInitialRetryToken(a.partition_id),f=Error(),p=0,m=0,{request:h}=c,g=n.HttpRequest.isInstance(h);for(g&&(h.headers[t.INVOCATION_ID_HEADER]=i.v4());;)try{g&&(h.headers[t.REQUEST_HEADER]=`attempt=${p+1}; max=${u}`);let{response:n,output:i}=await r(c);return l.recordSuccess(e),i.$metadata.attempts=p+1,i.$metadata.totalRetryDelay=m,{response:n,output:i}}catch(t){let n=O(t);if(f=d(t),g&&s.isStreamingPayload(h))throw(a.logger instanceof o.NoOpLogger?console:a.logger)?.warn(`An error was encountered in a non-retryable streaming request.`),f;try{e=await l.refreshRetryTokenForRetry(e,n)}catch{throw f.$metadata||={},f.$metadata.attempts=p+1,f.$metadata.totalRetryDelay=m,f}p=e.getRetryCount();let r=e.getRetryDelay();m+=r,await new Promise(e=>setTimeout(e,r))}}else return l=l,l?.mode&&(a.userAgent=[...a.userAgent||[],[`cfg/retry-mode`,l.mode]]),l.retry(r,c)},D=e=>e.acquireInitialRetryToken!==void 0&&e.refreshRetryTokenForRetry!==void 0&&e.recordSuccess!==void 0,O=e=>{let t={error:e,errorType:A(e)},n=ee(e.$response);return n&&(t.retryAfterHint=n),t},A=e=>r.isThrottlingError(e)?`THROTTLING`:r.isTransientError(e)?`TRANSIENT`:r.isServerError(e)?`SERVER_ERROR`:`CLIENT_ERROR`,j={name:`retryMiddleware`,tags:[`RETRY`],step:`finalizeRequest`,priority:`high`,override:!0},M=e=>({applyToStack:t=>{t.add(E(e),j)}}),ee=e=>{if(!n.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(e=>e.toLowerCase()===`retry-after`);if(!t)return;let r=e.headers[t],i=Number(r);return Number.isNaN(i)?new Date(r):new Date(i*1e3)};e.AdaptiveRetryStrategy=h,e.CONFIG_MAX_ATTEMPTS=_,e.CONFIG_RETRY_MODE=x,e.ENV_MAX_ATTEMPTS=g,e.ENV_RETRY_MODE=b,e.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=v,e.NODE_RETRY_MODE_CONFIG_OPTIONS=S,e.StandardRetryStrategy=f,e.defaultDelayDecider=l,e.defaultRetryDecider=u,e.getOmitRetryHeadersPlugin=T,e.getRetryAfterHint=ee,e.getRetryPlugin=M,e.omitRetryHeadersMiddleware=C,e.omitRetryHeadersMiddlewareOptions=w,e.resolveRetryConfig=y,e.retryMiddleware=E,e.retryMiddlewareOptions=j})),Hl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.resolveHttpAuthSchemeConfig=e.resolveStsAuthConfig=e.defaultSTSHttpAuthSchemeProvider=e.defaultSTSHttpAuthSchemeParametersProvider=void 0;let t=(wl(),d(Cl)),n=k(),r=Ob();e.defaultSTSHttpAuthSchemeParametersProvider=async(e,t,r)=>({operation:(0,n.getSmithyContext)(t).operation,region:await(0,n.normalizeProvider)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function i(e){return{schemeId:`aws.auth#sigv4`,signingProperties:{name:`sts`,region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function a(e){return{schemeId:`smithy.api#noAuth`}}e.defaultSTSHttpAuthSchemeProvider=e=>{let t=[];switch(e.operation){case`AssumeRoleWithSAML`:t.push(a(e));break;case`AssumeRoleWithWebIdentity`:t.push(a(e));break;default:t.push(i(e))}return t},e.resolveStsAuthConfig=e=>Object.assign(e,{stsClientCtor:r.STSClient}),e.resolveHttpAuthSchemeConfig=r=>{let i=(0,e.resolveStsAuthConfig)(r),a=(0,t.resolveAwsSdkSigV4Config)(i);return Object.assign(a,{authSchemePreference:(0,n.normalizeProvider)(r.authSchemePreference??[])})}})),Ul=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.commonParams=e.resolveClientEndpointParameters=void 0,e.resolveClientEndpointParameters=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:`sts`}),e.commonParams={UseGlobalEndpoint:{type:`builtInParams`,name:`useGlobalEndpoint`},UseFIPS:{type:`builtInParams`,name:`useFipsEndpoint`},Endpoint:{type:`builtInParams`,name:`endpoint`},Region:{type:`builtInParams`,name:`region`},UseDualStack:{type:`builtInParams`,name:`useDualstackEndpoint`}}})),Wl=s(((e,t)=>{t.exports={name:`@aws-sdk/client-sts`,description:`AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native`,version:`3.992.0`,scripts:{build:`concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs`,"build:cjs":`node ../../scripts/compilation/inline client-sts`,"build:es":`tsc -p tsconfig.es.json`,"build:include:deps":`yarn g:turbo run build -F="$npm_package_name"`,"build:types":`premove ./dist-types tsconfig.types.tsbuildinfo && tsc -p tsconfig.types.json`,"build:types:downlevel":`downlevel-dts dist-types dist-types/ts3.4`,clean:`premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo`,"extract:docs":`api-extractor run --local`,"generate:client":`node ../../scripts/generate-clients/single-service --solo sts`,test:`yarn g:vitest run`,"test:e2e":`yarn g:vitest run -c vitest.config.e2e.mts --mode development`,"test:e2e:watch":`yarn g:vitest watch -c vitest.config.e2e.mts`,"test:index":`tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs`,"test:watch":`yarn g:vitest watch`},main:`./dist-cjs/index.js`,types:`./dist-types/index.d.ts`,module:`./dist-es/index.js`,sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":`5.2.0`,"@aws-crypto/sha256-js":`5.2.0`,"@aws-sdk/core":`^3.973.10`,"@aws-sdk/credential-provider-node":`^3.972.9`,"@aws-sdk/middleware-host-header":`^3.972.3`,"@aws-sdk/middleware-logger":`^3.972.3`,"@aws-sdk/middleware-recursion-detection":`^3.972.3`,"@aws-sdk/middleware-user-agent":`^3.972.10`,"@aws-sdk/region-config-resolver":`^3.972.3`,"@aws-sdk/types":`^3.973.1`,"@aws-sdk/util-endpoints":`3.992.0`,"@aws-sdk/util-user-agent-browser":`^3.972.3`,"@aws-sdk/util-user-agent-node":`^3.972.8`,"@smithy/config-resolver":`^4.4.6`,"@smithy/core":`^3.23.0`,"@smithy/fetch-http-handler":`^5.3.9`,"@smithy/hash-node":`^4.2.8`,"@smithy/invalid-dependency":`^4.2.8`,"@smithy/middleware-content-length":`^4.2.8`,"@smithy/middleware-endpoint":`^4.4.14`,"@smithy/middleware-retry":`^4.4.31`,"@smithy/middleware-serde":`^4.2.9`,"@smithy/middleware-stack":`^4.2.8`,"@smithy/node-config-provider":`^4.3.8`,"@smithy/node-http-handler":`^4.4.10`,"@smithy/protocol-http":`^5.3.8`,"@smithy/smithy-client":`^4.11.3`,"@smithy/types":`^4.12.0`,"@smithy/url-parser":`^4.2.8`,"@smithy/util-base64":`^4.3.0`,"@smithy/util-body-length-browser":`^4.2.0`,"@smithy/util-body-length-node":`^4.2.1`,"@smithy/util-defaults-mode-browser":`^4.3.30`,"@smithy/util-defaults-mode-node":`^4.2.33`,"@smithy/util-endpoints":`^3.2.8`,"@smithy/util-middleware":`^4.2.8`,"@smithy/util-retry":`^4.2.8`,"@smithy/util-utf8":`^4.2.0`,tslib:`^2.6.2`},devDependencies:{"@tsconfig/node20":`20.1.8`,"@types/node":`^20.14.8`,concurrently:`7.0.0`,"downlevel-dts":`0.10.1`,premove:`4.0.0`,typescript:`~5.8.3`},engines:{node:`>=20.0.0`},typesVersions:{"<4.0":{"dist-types/*":[`dist-types/ts3.4/*`]}},files:[`dist-*/**`],author:{name:`AWS SDK for JavaScript Team`,url:`https://aws.amazon.com/javascript/`},license:`Apache-2.0`,browser:{"./dist-es/runtimeConfig":`./dist-es/runtimeConfig.browser`},"react-native":{"./dist-es/runtimeConfig":`./dist-es/runtimeConfig.native`},homepage:`https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts`,repository:{type:`git`,url:`https://github.com/aws/aws-sdk-js-v3.git`,directory:`clients/client-sts`}}})),Gl=s((e=>{var t=(Ya(),d(Ja)),n=wo();let r=`AWS_ACCESS_KEY_ID`,i=`AWS_SECRET_ACCESS_KEY`,a=`AWS_SESSION_TOKEN`,o=`AWS_CREDENTIAL_EXPIRATION`,s=`AWS_CREDENTIAL_SCOPE`,c=`AWS_ACCOUNT_ID`;e.ENV_ACCOUNT_ID=c,e.ENV_CREDENTIAL_SCOPE=s,e.ENV_EXPIRATION=o,e.ENV_KEY=r,e.ENV_SECRET=i,e.ENV_SESSION=a,e.fromEnv=e=>async()=>{e?.logger?.debug(`@aws-sdk/credential-provider-env - fromEnv`);let l=process.env[r],u=process.env[i],d=process.env[a],f=process.env[o],p=process.env[s],m=process.env[c];if(l&&u){let e={accessKeyId:l,secretAccessKey:u,...d&&{sessionToken:d},...f&&{expiration:new Date(f)},...p&&{credentialScope:p},...m&&{accountId:m}};return t.setCredentialFeature(e,`CREDENTIALS_ENV_VARS`,`g`),e}throw new n.CredentialsProviderError(`Unable to find environment variable credentials.`,{logger:e?.logger})}})),Kl=s((e=>{var t=wo(),n=require(`url`),r=require(`buffer`),i=require(`http`),a=Pl(),o=La();function s(e){return new Promise((n,a)=>{let o=i.request({method:`GET`,...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,`$1`)});o.on(`error`,e=>{a(Object.assign(new t.ProviderError(`Unable to connect to instance metadata service`),e)),o.destroy()}),o.on(`timeout`,()=>{a(new t.ProviderError(`TimeoutError from instance metadata service`)),o.destroy()}),o.on(`response`,e=>{let{statusCode:i=400}=e;(i<200||300<=i)&&(a(Object.assign(new t.ProviderError(`Error response received from instance metadata service`),{statusCode:i})),o.destroy());let s=[];e.on(`data`,e=>{s.push(e)}),e.on(`end`,()=>{n(r.Buffer.concat(s)),o.destroy()})}),o.end()})}let c=e=>!!e&&typeof e==`object`&&typeof e.AccessKeyId==`string`&&typeof e.SecretAccessKey==`string`&&typeof e.Token==`string`&&typeof e.Expiration==`string`,l=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),u=1e3,d=({maxRetries:e=0,timeout:t=u})=>({maxRetries:e,timeout:t}),f=(e,t)=>{let n=e();for(let r=0;r<t;r++)n=n.catch(e);return n},p=`AWS_CONTAINER_CREDENTIALS_FULL_URI`,m=`AWS_CONTAINER_CREDENTIALS_RELATIVE_URI`,h=`AWS_CONTAINER_AUTHORIZATION_TOKEN`,g=(e={})=>{let{timeout:n,maxRetries:r}=d(e);return()=>f(async()=>{let r=await b({logger:e.logger}),i=JSON.parse(await _(n,r));if(!c(i))throw new t.CredentialsProviderError(`Invalid response received from instance metadata service.`,{logger:e.logger});return l(i)},r)},_=async(e,t)=>(process.env[h]&&(t.headers={...t.headers,Authorization:process.env[h]}),(await s({...t,timeout:e})).toString()),v={localhost:!0,"127.0.0.1":!0},y={"http:":!0,"https:":!0},b=async({logger:e})=>{if(process.env[m])return{hostname:`169.254.170.2`,path:process.env[m]};if(process.env[p]){let r=n.parse(process.env[p]);if(!r.hostname||!(r.hostname in v))throw new t.CredentialsProviderError(`${r.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!r.protocol||!(r.protocol in y))throw new t.CredentialsProviderError(`${r.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...r,port:r.port?parseInt(r.port,10):void 0}}throw new t.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${m} or ${p} environment variable is set`,{tryNextLink:!1,logger:e})};var x=class e extends t.CredentialsProviderError{tryNextLink;name=`InstanceMetadataV1FallbackError`;constructor(t,n=!0){super(t,n),this.tryNextLink=n,Object.setPrototypeOf(this,e.prototype)}};e.Endpoint=void 0,(function(e){e.IPv4=`http://169.254.169.254`,e.IPv6=`http://[fd00:ec2::254]`})(e.Endpoint||={});let S={environmentVariableSelector:e=>e.AWS_EC2_METADATA_SERVICE_ENDPOINT,configFileSelector:e=>e.ec2_metadata_service_endpoint,default:void 0};var C;(function(e){e.IPv4=`IPv4`,e.IPv6=`IPv6`})(C||={});let w={environmentVariableSelector:e=>e.AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE,configFileSelector:e=>e.ec2_metadata_service_endpoint_mode,default:C.IPv4},T=async()=>o.parseUrl(await E()||await D()),E=async()=>a.loadConfig(S)(),D=async()=>{let t=await a.loadConfig(w)();switch(t){case C.IPv4:return e.Endpoint.IPv4;case C.IPv6:return e.Endpoint.IPv6;default:throw Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(C)}`)}},O=(e,t)=>{let n=300+Math.floor(Math.random()*300),r=new Date(Date.now()+n*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(r)}.\nFor more information, please visit: https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html`);let i=e.originalExpiration??e.expiration;return{...e,...i?{originalExpiration:i}:{},expiration:r}},k=(e,t={})=>{let n=t?.logger||console,r;return async()=>{let t;try{t=await e(),t.expiration&&t.expiration.getTime()<Date.now()&&(t=O(t,n))}catch(e){if(r)n.warn(`Credential renew failed: `,e),t=O(r,n);else throw e}return r=t,t}},A=`/latest/meta-data/iam/security-credentials/`,j=`AWS_EC2_METADATA_V1_DISABLED`,M=`ec2_metadata_v1_disabled`,ee=`x-aws-ec2-metadata-token`,te=(e={})=>k(ne(e),{logger:e.logger}),ne=(e={})=>{let n=!1,{logger:r,profile:i}=e,{timeout:o,maxRetries:s}=d(e),c=async(r,o)=>{if(n||o.headers?.[ee]==null){let n=!1,r=!1,o=await a.loadConfig({environmentVariableSelector:n=>{let i=n[j];if(r=!!i&&i!==`false`,i===void 0)throw new t.CredentialsProviderError(`${j} not set in env, checking config file next.`,{logger:e.logger});return r},configFileSelector:e=>{let t=e[M];return n=!!t&&t!==`false`,n},default:!1},{profile:i})();if(e.ec2MetadataV1Disabled||o){let t=[];throw e.ec2MetadataV1Disabled&&t.push(`credential provider initialization (runtime option ec2MetadataV1Disabled)`),n&&t.push(`config file profile (${M})`),r&&t.push(`process environment variable (${j})`),new x(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${t.join(`, `)}].`)}}let s=(await f(async()=>{let e;try{e=await ie(o)}catch(e){throw e.statusCode===401&&(n=!1),e}return e},r)).trim();return f(async()=>{let t;try{t=await ae(s,o,e)}catch(e){throw e.statusCode===401&&(n=!1),e}return t},r)};return async()=>{let e=await T();if(n)return r?.debug(`AWS SDK Instance Metadata`,`using v1 fallback (no token fetch)`),c(s,{...e,timeout:o});{let t;try{t=(await re({...e,timeout:o})).toString()}catch(t){if(t?.statusCode===400)throw Object.assign(t,{message:`EC2 Metadata token request returned error`});return(t.message===`TimeoutError`||[403,404,405].includes(t.statusCode))&&(n=!0),r?.debug(`AWS SDK Instance Metadata`,`using v1 fallback (initial)`),c(s,{...e,timeout:o})}return c(s,{...e,headers:{[ee]:t},timeout:o})}}},re=async e=>s({...e,path:`/latest/api/token`,method:`PUT`,headers:{"x-aws-ec2-metadata-token-ttl-seconds":`21600`}}),ie=async e=>(await s({...e,path:A})).toString(),ae=async(e,n,r)=>{let i=JSON.parse((await s({...n,path:A+e})).toString());if(!c(i))throw new t.CredentialsProviderError(`Invalid response received from instance metadata service.`,{logger:r.logger});return l(i)};e.DEFAULT_MAX_RETRIES=0,e.DEFAULT_TIMEOUT=u,e.ENV_CMDS_AUTH_TOKEN=h,e.ENV_CMDS_FULL_URI=p,e.ENV_CMDS_RELATIVE_URI=m,e.fromContainerMetadata=g,e.fromInstanceMetadata=te,e.getInstanceMetadataEndpoint=T,e.httpRequest=s,e.providerConfigFromInit=d})),ql=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.checkUrl=void 0;let t=wo();e.checkUrl=(e,n)=>{if(e.protocol!==`https:`&&!(e.hostname===`169.254.170.2`||e.hostname===`169.254.170.23`||e.hostname===`[fd00:ec2::23]`)){if(e.hostname.includes(`[`)){if(e.hostname===`[::1]`||e.hostname===`[0000:0000:0000:0000:0000:0000:0000:0001]`)return}else{if(e.hostname===`localhost`)return;let t=e.hostname.split(`.`),n=e=>{let t=parseInt(e,10);return 0<=t&&t<=255};if(t[0]===`127`&&n(t[1])&&n(t[2])&&n(t[3])&&t.length===4)return}throw new t.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:n})}}})),Jl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createGetRequest=a,e.getCredentials=o;let t=wo(),n=p(),r=V(),i=et();function a(e){return new n.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((e,[t,n])=>(e[t]=n,e),{}),fragment:e.hash})}async function o(e,n){let a=await(0,i.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let e=JSON.parse(a);if(typeof e.AccessKeyId!=`string`||typeof e.SecretAccessKey!=`string`||typeof e.Token!=`string`||typeof e.Expiration!=`string`)throw new t.CredentialsProviderError(`HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }`,{logger:n});return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:(0,r.parseRfc3339DateTime)(e.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let r={};try{r=JSON.parse(a)}catch{}throw Object.assign(new t.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:n}),{Code:r.Code,Message:r.Message})}throw new t.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:n})}})),Yl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.retryWrapper=void 0,e.retryWrapper=(e,t,n)=>async()=>{for(let r=0;r<t;++r)try{return await e()}catch{await new Promise(e=>setTimeout(e,n))}return await e()}})),Xl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.fromHttp=void 0;let t=(Kr(),d(cr)),n=(Ya(),d(Ja)),r=qe(),i=wo(),a=t.__importDefault(require(`fs/promises`)),o=ql(),s=Jl(),c=Yl();e.fromHttp=(e={})=>{e.logger?.debug(`@aws-sdk/credential-provider-http - fromHttp`);let t,l=e.awsContainerCredentialsRelativeUri??process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI,u=e.awsContainerCredentialsFullUri??process.env.AWS_CONTAINER_CREDENTIALS_FULL_URI,d=e.awsContainerAuthorizationToken??process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN,f=e.awsContainerAuthorizationTokenFile??process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE,p=e.logger?.constructor?.name===`NoOpLogger`||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(l&&u&&(p(`@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri.`),p(`awsContainerCredentialsFullUri will take precedence.`)),d&&f&&(p(`@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile.`),p(`awsContainerAuthorizationToken will take precedence.`)),u)t=u;else if(l)t=`http://169.254.170.2${l}`;else throw new i.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let m=new URL(t);(0,o.checkUrl)(m,e.logger);let h=r.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,c.retryWrapper)(async()=>{let t=(0,s.createGetRequest)(m);d?t.headers.Authorization=d:f&&(t.headers.Authorization=(await a.default.readFile(f)).toString());try{let e=await h.handle(t);return(0,s.getCredentials)(e.response).then(e=>(0,n.setCredentialFeature)(e,`CREDENTIALS_HTTP`,`z`))}catch(t){throw new i.CredentialsProviderError(String(t),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)}})),Zl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.fromHttp=void 0;var t=Xl();Object.defineProperty(e,`fromHttp`,{enumerable:!0,get:function(){return t.fromHttp}})}));function Ql(e){return{schemeId:`aws.auth#sigv4`,signingProperties:{name:`sso-oauth`,region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function $l(e){return{schemeId:`smithy.api#noAuth`}}var eu,tu,nu,ru,iu=o((()=>{wl(),eu=k(),tu=async(e,t,n)=>({operation:(0,eu.getSmithyContext)(t).operation,region:await(0,eu.normalizeProvider)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),nu=e=>{let t=[];switch(e.operation){case`CreateToken`:t.push($l(e));break;default:t.push(Ql(e))}return t},ru=e=>{let t=No(e);return Object.assign(t,{authSchemePreference:(0,eu.normalizeProvider)(e.authSchemePreference??[])})}})),au,ou,su=o((()=>{au=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:`sso-oauth`}),ou={UseFIPS:{type:`builtInParams`,name:`useFipsEndpoint`},Endpoint:{type:`builtInParams`,name:`endpoint`},Region:{type:`builtInParams`,name:`region`},UseDualStack:{type:`builtInParams`,name:`useDualstackEndpoint`}}})),cu=`3.990.0`,lu=s((e=>{var t=require(`os`),n=require(`process`),r=Tl();let i={isCrtAvailable:!1},a=()=>i.isCrtAvailable?[`md/crt-avail`]:null,o=({serviceId:e,clientVersion:r})=>async i=>{let o=[[`aws-sdk-js`,r],[`ua`,`2.1`],[`os/${t.platform()}`,t.release()],[`lang/js`],[`md/nodejs`,`${n.versions.node}`]],s=a();s&&o.push(s),e&&o.push([`api/${e}`,r]),n.env.AWS_EXECUTION_ENV&&o.push([`exec-env/${n.env.AWS_EXECUTION_ENV}`]);let c=await i?.userAgentAppId?.();return c?[...o,[`app/${c}`]]:[...o]},s=o,c=`AWS_SDK_UA_APP_ID`,l=`sdk_ua_app_id`;e.NODE_APP_ID_CONFIG_OPTIONS={environmentVariableSelector:e=>e[c],configFileSelector:e=>e[l]??e[`sdk-ua-app-id`],default:r.DEFAULT_UA_APP_ID},e.UA_APP_ID_ENV_NAME=c,e.UA_APP_ID_INI_NAME=l,e.createDefaultUserAgentProvider=o,e.crtAvailability=i,e.defaultUserAgent=s})),uu=s((e=>{var t=ke(),n=N(),r=require(`buffer`),i=require(`crypto`),a=class{algorithmIdentifier;secret;hash;constructor(e,t){this.algorithmIdentifier=e,this.secret=t,this.reset()}update(e,t){this.hash.update(n.toUint8Array(o(e,t)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?i.createHmac(this.algorithmIdentifier,o(this.secret)):i.createHash(this.algorithmIdentifier)}};function o(e,n){return r.Buffer.isBuffer(e)?e:typeof e==`string`?t.fromString(e,n):ArrayBuffer.isView(e)?t.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength):t.fromArrayBuffer(e)}e.Hash=a})),du=s((e=>{var t=require(`node:fs`);e.calculateBodyLength=e=>{if(!e)return 0;if(typeof e==`string`)return Buffer.byteLength(e);if(typeof e.byteLength==`number`)return e.byteLength;if(typeof e.size==`number`)return e.size;if(typeof e.start==`number`&&typeof e.end==`number`)return e.end+1-e.start;if(e instanceof t.ReadStream){if(e.path!=null)return t.lstatSync(e.path).size;if(typeof e.fd==`number`)return t.fstatSync(e.fd).size}throw Error(`Body Length computation failed for ${e}`)}})),fu=s((e=>{var t=Dl(),n=Pl(),r=wo();let i=`AWS_REGION`,a=`AWS_DEFAULT_REGION`,o=[`in-region`,`cross-region`,`mobile`,`standard`,`legacy`],s={environmentVariableSelector:e=>e.AWS_DEFAULTS_MODE,configFileSelector:e=>e.defaults_mode,default:`legacy`},c=({region:e=n.loadConfig(t.NODE_REGION_CONFIG_OPTIONS),defaultsMode:i=n.loadConfig(s)}={})=>r.memoize(async()=>{let t=typeof i==`function`?await i():i;switch(t?.toLowerCase()){case`auto`:return l(e);case`in-region`:case`cross-region`:case`mobile`:case`standard`:case`legacy`:return Promise.resolve(t?.toLocaleLowerCase());case void 0:return Promise.resolve(`legacy`);default:throw Error(`Invalid parameter for "defaultsMode", expect ${o.join(`, `)}, got ${t}`)}}),l=async e=>{if(e){let t=typeof e==`function`?await e():e,n=await d();return n?t===n?`in-region`:`cross-region`:`standard`}return`standard`},d=async()=>{if(process.env.AWS_EXECUTION_ENV&&(process.env[i]||process.env[a]))return process.env[i]??process.env[a];if(!process.env.AWS_EC2_METADATA_DISABLED)try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>u(Kl()));return(await t({...await e(),path:`/latest/meta-data/placement/region`})).toString()}catch{}};e.resolveDefaultsModeConfig=c})),pu,mu,hu,gu,_u,vu,yu,bu,xu,Su,Cu,wu,Tu,Eu,Du,Ou,ku,Au,ju,Mu,Nu,Pu,Fu,Iu,Lu,Ru,zu=o((()=>{pu=`required`,mu=`fn`,hu=`argv`,gu=`ref`,_u=!0,vu=`isSet`,yu=`booleanEquals`,bu=`error`,xu=`endpoint`,Su=`tree`,Cu=`PartitionResult`,wu=`getAttr`,Tu={[pu]:!1,type:`string`},Eu={[pu]:!0,default:!1,type:`boolean`},Du={[gu]:`Endpoint`},Ou={[mu]:yu,[hu]:[{[gu]:`UseFIPS`},!0]},ku={[mu]:yu,[hu]:[{[gu]:`UseDualStack`},!0]},Au={},ju={[mu]:wu,[hu]:[{[gu]:Cu},`supportsFIPS`]},Mu={[gu]:Cu},Nu={[mu]:yu,[hu]:[!0,{[mu]:wu,[hu]:[Mu,`supportsDualStack`]}]},Pu=[Ou],Fu=[ku],Iu=[{[gu]:`Region`}],Lu={version:`1.0`,parameters:{Region:Tu,UseDualStack:Eu,UseFIPS:Eu,Endpoint:Tu},rules:[{conditions:[{[mu]:vu,[hu]:[Du]}],rules:[{conditions:Pu,error:`Invalid Configuration: FIPS and custom endpoint are not supported`,type:bu},{conditions:Fu,error:`Invalid Configuration: Dualstack and custom endpoint are not supported`,type:bu},{endpoint:{url:Du,properties:Au,headers:Au},type:xu}],type:Su},{conditions:[{[mu]:vu,[hu]:Iu}],rules:[{conditions:[{[mu]:`aws.partition`,[hu]:Iu,assign:Cu}],rules:[{conditions:[Ou,ku],rules:[{conditions:[{[mu]:yu,[hu]:[_u,ju]},Nu],rules:[{endpoint:{url:`https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:Au,headers:Au},type:xu}],type:Su},{error:`FIPS and DualStack are enabled, but this partition does not support one or both`,type:bu}],type:Su},{conditions:Pu,rules:[{conditions:[{[mu]:yu,[hu]:[ju,_u]}],rules:[{conditions:[{[mu]:`stringEquals`,[hu]:[{[mu]:wu,[hu]:[Mu,`name`]},`aws-us-gov`]}],endpoint:{url:`https://oidc.{Region}.amazonaws.com`,properties:Au,headers:Au},type:xu},{endpoint:{url:`https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}`,properties:Au,headers:Au},type:xu}],type:Su},{error:`FIPS is enabled but this partition does not support FIPS`,type:bu}],type:Su},{conditions:Fu,rules:[{conditions:[Nu],rules:[{endpoint:{url:`https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:Au,headers:Au},type:xu}],type:Su},{error:`DualStack is enabled but this partition does not support DualStack`,type:bu}],type:Su},{endpoint:{url:`https://oidc.{Region}.{PartitionResult#dnsSuffix}`,properties:Au,headers:Au},type:xu}],type:Su}],type:Su},{error:`Invalid Configuration: Missing Region`,type:bu}]},Ru=Lu})),Bu,Vu,Hu,Uu,Wu=o((()=>{Bu=Ra(),Vu=Fa(),zu(),Hu=new Vu.EndpointCache({size:50,params:[`Endpoint`,`Region`,`UseDualStack`,`UseFIPS`]}),Uu=(e,t={})=>Hu.get(e,()=>(0,Vu.resolveEndpoint)(Ru,{endpointParams:e,logger:t.logger})),Vu.customEndpointFunctions.aws=Bu.awsEndpointFunctions})),Gu,Ku,qu=o((()=>{Gu=V(),Ku=class e extends Gu.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}})),Ju,Yu,Xu,Zu,Qu,$u,ed,td,nd,rd,id,ad=o((()=>{qu(),Ju=class e extends Ku{name=`AccessDeniedException`;$fault=`client`;error;reason;error_description;constructor(t){super({name:`AccessDeniedException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Yu=class e extends Ku{name=`AuthorizationPendingException`;$fault=`client`;error;error_description;constructor(t){super({name:`AuthorizationPendingException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Xu=class e extends Ku{name=`ExpiredTokenException`;$fault=`client`;error;error_description;constructor(t){super({name:`ExpiredTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Zu=class e extends Ku{name=`InternalServerException`;$fault=`server`;error;error_description;constructor(t){super({name:`InternalServerException`,$fault:`server`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Qu=class e extends Ku{name=`InvalidClientException`;$fault=`client`;error;error_description;constructor(t){super({name:`InvalidClientException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},$u=class e extends Ku{name=`InvalidGrantException`;$fault=`client`;error;error_description;constructor(t){super({name:`InvalidGrantException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ed=class e extends Ku{name=`InvalidRequestException`;$fault=`client`;error;reason;error_description;constructor(t){super({name:`InvalidRequestException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},td=class e extends Ku{name=`InvalidScopeException`;$fault=`client`;error;error_description;constructor(t){super({name:`InvalidScopeException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},nd=class e extends Ku{name=`SlowDownException`;$fault=`client`;error;error_description;constructor(t){super({name:`SlowDownException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},rd=class e extends Ku{name=`UnauthorizedClientException`;$fault=`client`;error;error_description;constructor(t){super({name:`UnauthorizedClientException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},id=class e extends Ku{name=`UnsupportedGrantTypeException`;$fault=`client`;error;error_description;constructor(t){super({name:`UnsupportedGrantTypeException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}})),od,sd,cd,ld,ud,dd,fd,pd,md,hd,gd,_d,vd,yd,bd,xd,Sd,Cd,wd,Td,Ed,Dd,Od,kd,Ad,jd,H,Md,Nd,Pd,Fd,Id,Ld,Rd,zd,Bd,Vd,Hd,Ud,Wd,U,Gd,Kd,qd,Jd,Yd,Xd,Zd,Qd,$d,ef,tf,nf,rf,af,of,sf,cf,lf,uf,df,ff,pf,mf,hf=o((()=>{I(),ad(),qu(),od=`AccessDeniedException`,sd=`AuthorizationPendingException`,cd=`AccessToken`,ld=`ClientSecret`,ud=`CreateToken`,dd=`CreateTokenRequest`,fd=`CreateTokenResponse`,pd=`CodeVerifier`,md=`ExpiredTokenException`,hd=`InvalidClientException`,gd=`InvalidGrantException`,_d=`InvalidRequestException`,vd=`InternalServerException`,yd=`InvalidScopeException`,bd=`IdToken`,xd=`RefreshToken`,Sd=`SlowDownException`,Cd=`UnauthorizedClientException`,wd=`UnsupportedGrantTypeException`,Td=`accessToken`,Ed=`client`,Dd=`clientId`,Od=`clientSecret`,kd=`codeVerifier`,Ad=`code`,jd=`deviceCode`,H=`error`,Md=`expiresIn`,Nd=`error_description`,Pd=`grantType`,Fd=`http`,Id=`httpError`,Ld=`idToken`,Rd=`reason`,zd=`refreshToken`,Bd=`redirectUri`,Vd=`smithy.ts.sdk.synthetic.com.amazonaws.ssooidc`,Hd=`scope`,Ud=`server`,Wd=`tokenType`,U=`com.amazonaws.ssooidc`,Gd=F.for(Vd),Kd=[-3,Vd,`SSOOIDCServiceException`,0,[],[]],Gd.registerError(Kd,Ku),qd=F.for(U),Jd=[-3,U,od,{[H]:Ed,[Id]:400},[H,Rd,Nd],[0,0,0]],qd.registerError(Jd,Ju),Yd=[-3,U,sd,{[H]:Ed,[Id]:400},[H,Nd],[0,0]],qd.registerError(Yd,Yu),Xd=[-3,U,md,{[H]:Ed,[Id]:400},[H,Nd],[0,0]],qd.registerError(Xd,Xu),Zd=[-3,U,vd,{[H]:Ud,[Id]:500},[H,Nd],[0,0]],qd.registerError(Zd,Zu),Qd=[-3,U,hd,{[H]:Ed,[Id]:401},[H,Nd],[0,0]],qd.registerError(Qd,Qu),$d=[-3,U,gd,{[H]:Ed,[Id]:400},[H,Nd],[0,0]],qd.registerError($d,$u),ef=[-3,U,_d,{[H]:Ed,[Id]:400},[H,Rd,Nd],[0,0,0]],qd.registerError(ef,ed),tf=[-3,U,yd,{[H]:Ed,[Id]:400},[H,Nd],[0,0]],qd.registerError(tf,td),nf=[-3,U,Sd,{[H]:Ed,[Id]:400},[H,Nd],[0,0]],qd.registerError(nf,nd),rf=[-3,U,Cd,{[H]:Ed,[Id]:400},[H,Nd],[0,0]],qd.registerError(rf,rd),af=[-3,U,wd,{[H]:Ed,[Id]:400},[H,Nd],[0,0]],qd.registerError(af,id),of=[Gd,qd],sf=[0,U,cd,8,0],cf=[0,U,ld,8,0],lf=[0,U,pd,8,0],uf=[0,U,bd,8,0],df=[0,U,xd,8,0],ff=[3,U,dd,0,[Dd,Od,Pd,jd,Ad,zd,Hd,Bd,kd],[0,[()=>cf,0],0,0,0,[()=>df,0],64,0,[()=>lf,0]],3],pf=[3,U,fd,0,[Td,Wd,Md,zd,Ld],[[()=>sf,0],0,1,[()=>df,0],[()=>uf,0]]],mf=[9,U,ud,{[Fd]:[`POST`,`/token`,200]},()=>ff,()=>pf]})),gf,_f,vf,yf,bf,xf=o((()=>{wl(),Sl(),Pa(),gf=V(),_f=La(),vf=Me(),yf=N(),iu(),Wu(),hf(),bf=e=>({apiVersion:`2019-06-10`,base64Decoder:e?.base64Decoder??vf.fromBase64,base64Encoder:e?.base64Encoder??vf.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Uu,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??nu,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`),signer:new lo},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new Ca}],logger:e?.logger??new gf.NoOpLogger,protocol:e?.protocol??zc,protocolSettings:e?.protocolSettings??{defaultNamespace:`com.amazonaws.ssooidc`,errorTypeRegistries:of,version:`2019-06-10`,serviceTarget:`AWSSSOOIDCService`},serviceId:e?.serviceId??`SSO OIDC`,urlParser:e?.urlParser??_f.parseUrl,utf8Decoder:e?.utf8Decoder??yf.fromUtf8,utf8Encoder:e?.utf8Encoder??yf.toUtf8})})),Sf,Cf,wf,Tf,Ef,Df,Of,kf,Af,jf,Mf,Nf=o((()=>{wl(),Sf=lu(),Cf=Dl(),wf=uu(),Tf=Vl(),Ef=Pl(),Df=qe(),Of=V(),kf=du(),Af=fu(),jf=zl(),xf(),Mf=e=>{(0,Of.emitWarningIfUnsupportedVersion)(process.version);let t=(0,Af.resolveDefaultsModeConfig)(e),n=()=>t().then(Of.loadConfigsForDefaultMode),r=bf(e);Ba(process.version);let i={profile:e?.profile,logger:r.logger};return{...r,...e,runtime:`node`,defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Ef.loadConfig)(So,i),bodyLengthChecker:e?.bodyLengthChecker??kf.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Sf.createDefaultUserAgentProvider)({serviceId:r.serviceId,clientVersion:cu}),maxAttempts:e?.maxAttempts??(0,Ef.loadConfig)(Tf.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Ef.loadConfig)(Cf.NODE_REGION_CONFIG_OPTIONS,{...Cf.NODE_REGION_CONFIG_FILE_OPTIONS,...i}),requestHandler:Df.NodeHttpHandler.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,Ef.loadConfig)({...Tf.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await n()).retryMode||jf.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??wf.Hash.bind(null,`sha256`),streamCollector:e?.streamCollector??Df.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Ef.loadConfig)(Cf.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,i),useFipsEndpoint:e?.useFipsEndpoint??(0,Ef.loadConfig)(Cf.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,i),userAgentAppId:e?.userAgentAppId??(0,Ef.loadConfig)(Sf.NODE_APP_ID_CONFIG_OPTIONS,i)}}})),Pf=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.warning=void 0,e.stsRegionDefaultResolver=r;let t=Dl(),n=Pl();function r(r={}){return(0,n.loadConfig)({...t.NODE_REGION_CONFIG_OPTIONS,async default(){return e.warning.silence||console.warn(`@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly.`),`us-east-1`}},{...t.NODE_REGION_CONFIG_FILE_OPTIONS,...r})}e.warning={silence:!1}})),Ff=s((e=>{var t=Pf(),n=Dl();Object.defineProperty(e,`NODE_REGION_CONFIG_FILE_OPTIONS`,{enumerable:!0,get:function(){return n.NODE_REGION_CONFIG_FILE_OPTIONS}}),Object.defineProperty(e,`NODE_REGION_CONFIG_OPTIONS`,{enumerable:!0,get:function(){return n.NODE_REGION_CONFIG_OPTIONS}}),Object.defineProperty(e,`REGION_ENV_NAME`,{enumerable:!0,get:function(){return n.REGION_ENV_NAME}}),Object.defineProperty(e,`REGION_INI_NAME`,{enumerable:!0,get:function(){return n.REGION_INI_NAME}}),Object.defineProperty(e,`resolveRegionConfig`,{enumerable:!0,get:function(){return n.resolveRegionConfig}}),e.getAwsRegionExtensionConfiguration=e=>({setRegion(t){e.region=t},region(){return e.region}}),e.resolveAwsRegionExtensionConfiguration=e=>({region:e.region()}),Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})})),If,Lf,Rf=o((()=>{If=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);n===-1?t.push(e):t.splice(n,1,e)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider(){return n},setCredentials(e){r=e},credentials(){return r}}},Lf=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})})),zf,Bf,Vf,Hf,Uf=o((()=>{zf=Ff(),Bf=p(),Vf=V(),Rf(),Hf=(e,t)=>{let n=Object.assign((0,zf.getAwsRegionExtensionConfiguration)(e),(0,Vf.getDefaultExtensionConfiguration)(e),(0,Bf.getHttpHandlerExtensionConfiguration)(e),If(e));return t.forEach(e=>e.configure(n)),Object.assign(e,(0,zf.resolveAwsRegionExtensionConfiguration)(n),(0,Vf.resolveDefaultRuntimeConfig)(n),(0,Bf.resolveHttpHandlerRuntimeConfig)(n),Lf(n))}})),Wf,Gf,Kf,qf,Jf,Yf,Xf,Zf,Qf,$f,ep=o((()=>{Wf=m(),Gf=h(),Kf=T(),qf=Tl(),Jf=Dl(),Pa(),I(),Yf=Ol(),Xf=Ll(),Zf=Vl(),Qf=V(),iu(),su(),Nf(),Uf(),$f=class extends Qf.Client{config;constructor(...[e]){let t=Mf(e||{});super(t),this.initConfig=t,this.config=Hf(ru((0,Xf.resolveEndpointConfig)((0,Wf.resolveHostHeaderConfig)((0,Jf.resolveRegionConfig)((0,Zf.resolveRetryConfig)((0,qf.resolveUserAgentConfig)(au(t))))))),e?.extensions||[]),this.middlewareStack.use(vt(this.config)),this.middlewareStack.use((0,qf.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Zf.getRetryPlugin)(this.config)),this.middlewareStack.use((0,Yf.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Wf.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,Gf.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,Kf.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(ie(this.config,{httpAuthSchemeParametersProvider:tu,identityProviderConfigProvider:async e=>new ma({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use(ye(this.config))}destroy(){super.destroy()}}})),tp,np,rp,ip=o((()=>{tp=Ll(),np=V(),su(),hf(),rp=class extends np.Command.classBuilder().ep(ou).m(function(e,t,n,r){return[(0,tp.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s(`AWSSSOOIDCService`,`CreateToken`,{}).n(`SSOOIDCClient`,`CreateTokenCommand`).sc(mf).build(){}})),ap,op,sp,cp=o((()=>{ap=V(),ip(),ep(),op={CreateTokenCommand:rp},sp=class extends $f{},(0,ap.createAggregatedClient)(op,sp)})),lp=o((()=>{ip()})),up,dp,fp=o((()=>{up={KMS_ACCESS_DENIED:`KMS_AccessDeniedException`},dp={KMS_DISABLED_KEY:`KMS_DisabledException`,KMS_INVALID_KEY_USAGE:`KMS_InvalidKeyUsageException`,KMS_INVALID_STATE:`KMS_InvalidStateException`,KMS_KEY_NOT_FOUND:`KMS_NotFoundException`}})),pp=o((()=>{})),mp=c({$Command:()=>np.Command,AccessDeniedException:()=>Ju,AccessDeniedException$:()=>Jd,AccessDeniedExceptionReason:()=>up,AuthorizationPendingException:()=>Yu,AuthorizationPendingException$:()=>Yd,CreateToken$:()=>mf,CreateTokenCommand:()=>rp,CreateTokenRequest$:()=>ff,CreateTokenResponse$:()=>pf,ExpiredTokenException:()=>Xu,ExpiredTokenException$:()=>Xd,InternalServerException:()=>Zu,InternalServerException$:()=>Zd,InvalidClientException:()=>Qu,InvalidClientException$:()=>Qd,InvalidGrantException:()=>$u,InvalidGrantException$:()=>$d,InvalidRequestException:()=>ed,InvalidRequestException$:()=>ef,InvalidRequestExceptionReason:()=>dp,InvalidScopeException:()=>td,InvalidScopeException$:()=>tf,SSOOIDC:()=>sp,SSOOIDCClient:()=>$f,SSOOIDCServiceException:()=>Ku,SSOOIDCServiceException$:()=>Kd,SlowDownException:()=>nd,SlowDownException$:()=>nf,UnauthorizedClientException:()=>rd,UnauthorizedClientException$:()=>rf,UnsupportedGrantTypeException:()=>id,UnsupportedGrantTypeException$:()=>af,__Client:()=>Qf.Client,errorTypeRegistries:()=>of}),hp=o((()=>{ep(),cp(),lp(),hf(),fp(),ad(),pp(),qu()})),gp=s((e=>{var t=(Ya(),d(Ja)),n=(Ro(),d(Lo)),r=wo(),i=Nl(),a=require(`fs`);let o=({logger:e,signingName:i}={})=>async()=>{if(e?.debug?.(`@aws-sdk/token-providers - fromEnvSigningName`),!i)throw new r.TokenProviderError(`Please pass 'signingName' to compute environment variable key`,{logger:e});let a=n.getBearerTokenEnvKey(i);if(!(a in process.env))throw new r.TokenProviderError(`Token not present in '${a}' environment variable`,{logger:e});let o={token:process.env[a]};return t.setTokenFeature(o,`BEARER_SERVICE_ENV_VARS`,`3`),o},s=`To refresh this SSO session run 'aws sso login' with the corresponding profile.`,c=async(e,t={},n)=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(hp(),mp)),i=e=>t.clientConfig?.[e]??t.parentClientConfig?.[e]??n?.[e];return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:i(`logger`),userAgentAppId:i(`userAgentAppId`)}))},l=async(e,t,n={},r)=>{let{CreateTokenCommand:i}=await Promise.resolve().then(()=>(hp(),mp));return(await c(t,n,r)).send(new i({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:`refresh_token`}))},u=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new r.TokenProviderError(`Token is expired. ${s}`,!1)},f=(e,t,n=!1)=>{if(t===void 0)throw new r.TokenProviderError(`Value not present for '${e}' in SSO Token${n?`. Cannot refresh`:``}. ${s}`,!1)},{writeFile:p}=a.promises,m=(e,t)=>p(i.getSSOTokenFilepath(e),JSON.stringify(t,null,2)),h=new Date(0),g=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug(`@aws-sdk/token-providers - fromSso`);let n=await i.parseKnownFiles(e),a=i.getProfileName({profile:e.profile??t?.profile}),o=n[a];if(!o)throw new r.TokenProviderError(`Profile '${a}' could not be found in shared credentials file.`,!1);if(!o.sso_session)throw new r.TokenProviderError(`Profile '${a}' is missing required property 'sso_session'.`);let c=o.sso_session,d=(await i.loadSsoSessionData(e))[c];if(!d)throw new r.TokenProviderError(`Sso session '${c}' could not be found in shared credentials file.`,!1);for(let e of[`sso_start_url`,`sso_region`])if(!d[e])throw new r.TokenProviderError(`Sso session '${c}' is missing required property '${e}'.`,!1);d.sso_start_url;let p=d.sso_region,g;try{g=await i.getSSOTokenFromFile(c)}catch{throw new r.TokenProviderError(`The SSO session token associated with profile=${a} was not found or is invalid. ${s}`,!1)}f(`accessToken`,g.accessToken),f(`expiresAt`,g.expiresAt);let{accessToken:_,expiresAt:v}=g,y={token:_,expiration:new Date(v)};if(y.expiration.getTime()-Date.now()>3e5)return y;if(Date.now()-h.getTime()<30*1e3)return u(y),y;f(`clientId`,g.clientId,!0),f(`clientSecret`,g.clientSecret,!0),f(`refreshToken`,g.refreshToken,!0);try{h.setTime(Date.now());let n=await l(g,p,e,t);f(`accessToken`,n.accessToken),f(`expiresIn`,n.expiresIn);let r=new Date(Date.now()+n.expiresIn*1e3);try{await m(c,{...g,accessToken:n.accessToken,expiresAt:r.toISOString(),refreshToken:n.refreshToken})}catch{}return{token:n.accessToken,expiration:r}}catch{return u(y),y}};e.fromEnvSigningName=o,e.fromSso=g,e.fromStatic=({token:e,logger:t})=>async()=>{if(t?.debug(`@aws-sdk/token-providers - fromStatic`),!e||!e.token)throw new r.TokenProviderError(`Please pass a valid token to fromStatic`,!1);return e},e.nodeProvider=(e={})=>r.memoize(r.chain(g(e),async()=>{throw new r.TokenProviderError(`Could not load token from any providers`,!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0)})),_p=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.resolveHttpAuthSchemeConfig=e.defaultSSOHttpAuthSchemeProvider=e.defaultSSOHttpAuthSchemeParametersProvider=void 0;let t=(wl(),d(Cl)),n=k();e.defaultSSOHttpAuthSchemeParametersProvider=async(e,t,r)=>({operation:(0,n.getSmithyContext)(t).operation,region:await(0,n.normalizeProvider)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function r(e){return{schemeId:`aws.auth#sigv4`,signingProperties:{name:`awsssoportal`,region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function i(e){return{schemeId:`smithy.api#noAuth`}}e.defaultSSOHttpAuthSchemeProvider=e=>{let t=[];switch(e.operation){case`GetRoleCredentials`:t.push(i(e));break;case`ListAccountRoles`:t.push(i(e));break;case`ListAccounts`:t.push(i(e));break;case`Logout`:t.push(i(e));break;default:t.push(r(e))}return t},e.resolveHttpAuthSchemeConfig=e=>{let r=(0,t.resolveAwsSdkSigV4Config)(e);return Object.assign(r,{authSchemePreference:(0,n.normalizeProvider)(e.authSchemePreference??[])})}})),vp=s(((e,t)=>{t.exports={name:`@aws-sdk/client-sso`,description:`AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native`,version:`3.990.0`,scripts:{build:`concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs`,"build:cjs":`node ../../scripts/compilation/inline client-sso`,"build:es":`tsc -p tsconfig.es.json`,"build:include:deps":`yarn g:turbo run build -F="$npm_package_name"`,"build:types":`tsc -p tsconfig.types.json`,"build:types:downlevel":`downlevel-dts dist-types dist-types/ts3.4`,clean:`premove dist-cjs dist-es dist-types tsconfig.cjs.tsbuildinfo tsconfig.es.tsbuildinfo tsconfig.types.tsbuildinfo`,"extract:docs":`api-extractor run --local`,"generate:client":`node ../../scripts/generate-clients/single-service --solo sso`,"test:index":`tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs`},main:`./dist-cjs/index.js`,types:`./dist-types/index.d.ts`,module:`./dist-es/index.js`,sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":`5.2.0`,"@aws-crypto/sha256-js":`5.2.0`,"@aws-sdk/core":`^3.973.10`,"@aws-sdk/middleware-host-header":`^3.972.3`,"@aws-sdk/middleware-logger":`^3.972.3`,"@aws-sdk/middleware-recursion-detection":`^3.972.3`,"@aws-sdk/middleware-user-agent":`^3.972.10`,"@aws-sdk/region-config-resolver":`^3.972.3`,"@aws-sdk/types":`^3.973.1`,"@aws-sdk/util-endpoints":`3.990.0`,"@aws-sdk/util-user-agent-browser":`^3.972.3`,"@aws-sdk/util-user-agent-node":`^3.972.8`,"@smithy/config-resolver":`^4.4.6`,"@smithy/core":`^3.23.0`,"@smithy/fetch-http-handler":`^5.3.9`,"@smithy/hash-node":`^4.2.8`,"@smithy/invalid-dependency":`^4.2.8`,"@smithy/middleware-content-length":`^4.2.8`,"@smithy/middleware-endpoint":`^4.4.14`,"@smithy/middleware-retry":`^4.4.31`,"@smithy/middleware-serde":`^4.2.9`,"@smithy/middleware-stack":`^4.2.8`,"@smithy/node-config-provider":`^4.3.8`,"@smithy/node-http-handler":`^4.4.10`,"@smithy/protocol-http":`^5.3.8`,"@smithy/smithy-client":`^4.11.3`,"@smithy/types":`^4.12.0`,"@smithy/url-parser":`^4.2.8`,"@smithy/util-base64":`^4.3.0`,"@smithy/util-body-length-browser":`^4.2.0`,"@smithy/util-body-length-node":`^4.2.1`,"@smithy/util-defaults-mode-browser":`^4.3.30`,"@smithy/util-defaults-mode-node":`^4.2.33`,"@smithy/util-endpoints":`^3.2.8`,"@smithy/util-middleware":`^4.2.8`,"@smithy/util-retry":`^4.2.8`,"@smithy/util-utf8":`^4.2.0`,tslib:`^2.6.2`},devDependencies:{"@tsconfig/node20":`20.1.8`,"@types/node":`^20.14.8`,concurrently:`7.0.0`,"downlevel-dts":`0.10.1`,premove:`4.0.0`,typescript:`~5.8.3`},engines:{node:`>=20.0.0`},typesVersions:{"<4.0":{"dist-types/*":[`dist-types/ts3.4/*`]}},files:[`dist-*/**`],author:{name:`AWS SDK for JavaScript Team`,url:`https://aws.amazon.com/javascript/`},license:`Apache-2.0`,browser:{"./dist-es/runtimeConfig":`./dist-es/runtimeConfig.browser`},"react-native":{"./dist-es/runtimeConfig":`./dist-es/runtimeConfig.native`},homepage:`https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso`,repository:{type:`git`,url:`https://github.com/aws/aws-sdk-js-v3.git`,directory:`clients/client-sso`}}})),yp=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ruleSet=void 0;let t=`required`,n=`argv`,r=`isSet`,i=`booleanEquals`,a=`error`,o=`endpoint`,s=`tree`,c=`PartitionResult`,l=`getAttr`,u={[t]:!1,type:`string`},d={[t]:!0,default:!1,type:`boolean`},f={ref:`Endpoint`},p={fn:i,[n]:[{ref:`UseFIPS`},!0]},m={fn:i,[n]:[{ref:`UseDualStack`},!0]},h={},g={fn:l,[n]:[{ref:c},`supportsFIPS`]},_={ref:c},v={fn:i,[n]:[!0,{fn:l,[n]:[_,`supportsDualStack`]}]},y=[p],b=[m],x=[{ref:`Region`}];e.ruleSet={version:`1.0`,parameters:{Region:u,UseDualStack:d,UseFIPS:d,Endpoint:u},rules:[{conditions:[{fn:r,[n]:[f]}],rules:[{conditions:y,error:`Invalid Configuration: FIPS and custom endpoint are not supported`,type:a},{conditions:b,error:`Invalid Configuration: Dualstack and custom endpoint are not supported`,type:a},{endpoint:{url:f,properties:h,headers:h},type:o}],type:s},{conditions:[{fn:r,[n]:x}],rules:[{conditions:[{fn:`aws.partition`,[n]:x,assign:c}],rules:[{conditions:[p,m],rules:[{conditions:[{fn:i,[n]:[!0,g]},v],rules:[{endpoint:{url:`https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:h,headers:h},type:o}],type:s},{error:`FIPS and DualStack are enabled, but this partition does not support one or both`,type:a}],type:s},{conditions:y,rules:[{conditions:[{fn:i,[n]:[g,!0]}],rules:[{conditions:[{fn:`stringEquals`,[n]:[{fn:l,[n]:[_,`name`]},`aws-us-gov`]}],endpoint:{url:`https://portal.sso.{Region}.amazonaws.com`,properties:h,headers:h},type:o},{endpoint:{url:`https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}`,properties:h,headers:h},type:o}],type:s},{error:`FIPS is enabled but this partition does not support FIPS`,type:a}],type:s},{conditions:b,rules:[{conditions:[v],rules:[{endpoint:{url:`https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:h,headers:h},type:o}],type:s},{error:`DualStack is enabled but this partition does not support DualStack`,type:a}],type:s},{endpoint:{url:`https://portal.sso.{Region}.{PartitionResult#dnsSuffix}`,properties:h,headers:h},type:o}],type:s}],type:s},{error:`Invalid Configuration: Missing Region`,type:a}]}})),bp=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.defaultEndpointResolver=void 0;let t=Ra(),n=Fa(),r=yp(),i=new n.EndpointCache({size:50,params:[`Endpoint`,`Region`,`UseDualStack`,`UseFIPS`]});e.defaultEndpointResolver=(e,t={})=>i.get(e,()=>(0,n.resolveEndpoint)(r.ruleSet,{endpointParams:e,logger:t.logger})),n.customEndpointFunctions.aws=t.awsEndpointFunctions})),xp=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.SSOServiceException=e.__ServiceException=void 0;let t=V();Object.defineProperty(e,`__ServiceException`,{enumerable:!0,get:function(){return t.ServiceException}}),e.SSOServiceException=class e extends t.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}})),Sp=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.UnauthorizedException=e.TooManyRequestsException=e.ResourceNotFoundException=e.InvalidRequestException=void 0;let t=xp();e.InvalidRequestException=class e extends t.SSOServiceException{name=`InvalidRequestException`;$fault=`client`;constructor(t){super({name:`InvalidRequestException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},e.ResourceNotFoundException=class e extends t.SSOServiceException{name=`ResourceNotFoundException`;$fault=`client`;constructor(t){super({name:`ResourceNotFoundException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},e.TooManyRequestsException=class e extends t.SSOServiceException{name=`TooManyRequestsException`;$fault=`client`;constructor(t){super({name:`TooManyRequestsException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},e.UnauthorizedException=class e extends t.SSOServiceException{name=`UnauthorizedException`;$fault=`client`;constructor(t){super({name:`UnauthorizedException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}}})),Cp=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.Logout$=e.ListAccounts$=e.ListAccountRoles$=e.GetRoleCredentials$=e.RoleInfo$=e.RoleCredentials$=e.LogoutRequest$=e.ListAccountsResponse$=e.ListAccountsRequest$=e.ListAccountRolesResponse$=e.ListAccountRolesRequest$=e.GetRoleCredentialsResponse$=e.GetRoleCredentialsRequest$=e.AccountInfo$=e.errorTypeRegistries=e.UnauthorizedException$=e.TooManyRequestsException$=e.ResourceNotFoundException$=e.InvalidRequestException$=e.SSOServiceException$=void 0;let t=`accountId`,n=`accessToken`,r=`account_id`,i=`client`,a=`error`,o=`http`,s=`httpError`,c=`httpHeader`,l=`httpQuery`,u=`message`,f=`maxResults`,p=`max_result`,m=`nextToken`,h=`next_token`,g=`roleName`,_=`smithy.ts.sdk.synthetic.com.amazonaws.sso`,v=`x-amz-sso_bearer_token`,y=`com.amazonaws.sso`,b=(I(),d($t)),x=Sp(),S=xp(),C=b.TypeRegistry.for(_);e.SSOServiceException$=[-3,_,`SSOServiceException`,0,[],[]],C.registerError(e.SSOServiceException$,S.SSOServiceException);let w=b.TypeRegistry.for(y);e.InvalidRequestException$=[-3,y,`InvalidRequestException`,{[a]:i,[s]:400},[u],[0]],w.registerError(e.InvalidRequestException$,x.InvalidRequestException),e.ResourceNotFoundException$=[-3,y,`ResourceNotFoundException`,{[a]:i,[s]:404},[u],[0]],w.registerError(e.ResourceNotFoundException$,x.ResourceNotFoundException),e.TooManyRequestsException$=[-3,y,`TooManyRequestsException`,{[a]:i,[s]:429},[u],[0]],w.registerError(e.TooManyRequestsException$,x.TooManyRequestsException),e.UnauthorizedException$=[-3,y,`UnauthorizedException`,{[a]:i,[s]:401},[u],[0]],w.registerError(e.UnauthorizedException$,x.UnauthorizedException),e.errorTypeRegistries=[C,w];var T=[0,y,`AccessTokenType`,8,0],E=[0,y,`SecretAccessKeyType`,8,0],D=[0,y,`SessionTokenType`,8,0];e.AccountInfo$=[3,y,`AccountInfo`,0,[t,`accountName`,`emailAddress`],[0,0,0]],e.GetRoleCredentialsRequest$=[3,y,`GetRoleCredentialsRequest`,0,[g,t,n],[[0,{[l]:`role_name`}],[0,{[l]:r}],[()=>T,{[c]:v}]],3],e.GetRoleCredentialsResponse$=[3,y,`GetRoleCredentialsResponse`,0,[`roleCredentials`],[[()=>e.RoleCredentials$,0]]],e.ListAccountRolesRequest$=[3,y,`ListAccountRolesRequest`,0,[n,t,m,f],[[()=>T,{[c]:v}],[0,{[l]:r}],[0,{[l]:h}],[1,{[l]:p}]],2],e.ListAccountRolesResponse$=[3,y,`ListAccountRolesResponse`,0,[m,`roleList`],[0,()=>A]],e.ListAccountsRequest$=[3,y,`ListAccountsRequest`,0,[n,m,f],[[()=>T,{[c]:v}],[0,{[l]:h}],[1,{[l]:p}]],1],e.ListAccountsResponse$=[3,y,`ListAccountsResponse`,0,[m,`accountList`],[0,()=>k]],e.LogoutRequest$=[3,y,`LogoutRequest`,0,[n],[[()=>T,{[c]:v}]],1],e.RoleCredentials$=[3,y,`RoleCredentials`,0,[`accessKeyId`,`secretAccessKey`,`sessionToken`,`expiration`],[0,[()=>E,0],[()=>D,0],1]],e.RoleInfo$=[3,y,`RoleInfo`,0,[g,t],[0,0]];var O=`unit`,k=[1,y,`AccountListType`,0,()=>e.AccountInfo$],A=[1,y,`RoleListType`,0,()=>e.RoleInfo$];e.GetRoleCredentials$=[9,y,`GetRoleCredentials`,{[o]:[`GET`,`/federation/credentials`,200]},()=>e.GetRoleCredentialsRequest$,()=>e.GetRoleCredentialsResponse$],e.ListAccountRoles$=[9,y,`ListAccountRoles`,{[o]:[`GET`,`/assignment/roles`,200]},()=>e.ListAccountRolesRequest$,()=>e.ListAccountRolesResponse$],e.ListAccounts$=[9,y,`ListAccounts`,{[o]:[`GET`,`/assignment/accounts`,200]},()=>e.ListAccountsRequest$,()=>e.ListAccountsResponse$],e.Logout$=[9,y,`Logout`,{[o]:[`POST`,`/logout`,200]},()=>e.LogoutRequest$,()=>O]})),wp=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getRuntimeConfig=void 0;let t=(wl(),d(Cl)),n=(Sl(),d(xl)),r=(Pa(),d(Na)),i=V(),a=La(),o=Me(),s=N(),c=_p(),l=bp(),u=Cp();e.getRuntimeConfig=e=>({apiVersion:`2019-06-10`,base64Decoder:e?.base64Decoder??o.fromBase64,base64Encoder:e?.base64Encoder??o.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??l.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??c.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`),signer:new t.AwsSdkSigV4Signer},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new r.NoAuthSigner}],logger:e?.logger??new i.NoOpLogger,protocol:e?.protocol??n.AwsRestJsonProtocol,protocolSettings:e?.protocolSettings??{defaultNamespace:`com.amazonaws.sso`,errorTypeRegistries:u.errorTypeRegistries,version:`2019-06-10`,serviceTarget:`SWBPortalService`},serviceId:e?.serviceId??`SSO`,urlParser:e?.urlParser??a.parseUrl,utf8Decoder:e?.utf8Decoder??s.fromUtf8,utf8Encoder:e?.utf8Encoder??s.toUtf8})})),Tp=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getRuntimeConfig=void 0;let t=(Kr(),d(cr)).__importDefault(vp()),n=(wl(),d(Cl)),r=lu(),i=Dl(),a=uu(),o=Vl(),s=Pl(),c=qe(),l=V(),u=du(),f=fu(),p=zl(),m=wp();e.getRuntimeConfig=e=>{(0,l.emitWarningIfUnsupportedVersion)(process.version);let d=(0,f.resolveDefaultsModeConfig)(e),h=()=>d().then(l.loadConfigsForDefaultMode),g=(0,m.getRuntimeConfig)(e);(0,n.emitWarningIfUnsupportedVersion)(process.version);let _={profile:e?.profile,logger:g.logger};return{...g,...e,runtime:`node`,defaultsMode:d,authSchemePreference:e?.authSchemePreference??(0,s.loadConfig)(n.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,_),bodyLengthChecker:e?.bodyLengthChecker??u.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,r.createDefaultUserAgentProvider)({serviceId:g.serviceId,clientVersion:t.default.version}),maxAttempts:e?.maxAttempts??(0,s.loadConfig)(o.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,s.loadConfig)(i.NODE_REGION_CONFIG_OPTIONS,{...i.NODE_REGION_CONFIG_FILE_OPTIONS,..._}),requestHandler:c.NodeHttpHandler.create(e?.requestHandler??h),retryMode:e?.retryMode??(0,s.loadConfig)({...o.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await h()).retryMode||p.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??a.Hash.bind(null,`sha256`),streamCollector:e?.streamCollector??c.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,s.loadConfig)(i.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,_),useFipsEndpoint:e?.useFipsEndpoint??(0,s.loadConfig)(i.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,_),userAgentAppId:e?.userAgentAppId??(0,s.loadConfig)(r.NODE_APP_ID_CONFIG_OPTIONS,_)}}})),Ep=s((e=>{var t=m(),n=h(),r=T(),i=Tl(),a=Dl(),o=(Pa(),d(Na)),s=(I(),d($t)),c=Ol(),l=Ll(),u=Vl(),f=V(),g=_p(),_=Tp(),v=Ff(),y=p(),b=Cp(),x=Sp(),S=xp();let C=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:`awsssoportal`}),w={UseFIPS:{type:`builtInParams`,name:`useFipsEndpoint`},Endpoint:{type:`builtInParams`,name:`endpoint`},Region:{type:`builtInParams`,name:`region`},UseDualStack:{type:`builtInParams`,name:`useDualstackEndpoint`}},E=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);n===-1?t.push(e):t.splice(n,1,e)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider(){return n},setCredentials(e){r=e},credentials(){return r}}},D=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),O=(e,t)=>{let n=Object.assign(v.getAwsRegionExtensionConfiguration(e),f.getDefaultExtensionConfiguration(e),y.getHttpHandlerExtensionConfiguration(e),E(e));return t.forEach(e=>e.configure(n)),Object.assign(e,v.resolveAwsRegionExtensionConfiguration(n),f.resolveDefaultRuntimeConfig(n),y.resolveHttpHandlerRuntimeConfig(n),D(n))};var k=class extends f.Client{config;constructor(...[e]){let d=_.getRuntimeConfig(e||{});super(d),this.initConfig=d;let f=C(d),p=i.resolveUserAgentConfig(f),m=u.resolveRetryConfig(p),h=a.resolveRegionConfig(m),v=t.resolveHostHeaderConfig(h),y=l.resolveEndpointConfig(v);this.config=O(g.resolveHttpAuthSchemeConfig(y),e?.extensions||[]),this.middlewareStack.use(s.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(i.getUserAgentPlugin(this.config)),this.middlewareStack.use(u.getRetryPlugin(this.config)),this.middlewareStack.use(c.getContentLengthPlugin(this.config)),this.middlewareStack.use(t.getHostHeaderPlugin(this.config)),this.middlewareStack.use(n.getLoggerPlugin(this.config)),this.middlewareStack.use(r.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(o.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:g.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async e=>new o.DefaultIdentityProviderConfig({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use(o.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},A=class extends f.Command.classBuilder().ep(w).m(function(e,t,n,r){return[l.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`SWBPortalService`,`GetRoleCredentials`,{}).n(`SSOClient`,`GetRoleCredentialsCommand`).sc(b.GetRoleCredentials$).build(){},j=class extends f.Command.classBuilder().ep(w).m(function(e,t,n,r){return[l.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`SWBPortalService`,`ListAccountRoles`,{}).n(`SSOClient`,`ListAccountRolesCommand`).sc(b.ListAccountRoles$).build(){},M=class extends f.Command.classBuilder().ep(w).m(function(e,t,n,r){return[l.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`SWBPortalService`,`ListAccounts`,{}).n(`SSOClient`,`ListAccountsCommand`).sc(b.ListAccounts$).build(){},ee=class extends f.Command.classBuilder().ep(w).m(function(e,t,n,r){return[l.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`SWBPortalService`,`Logout`,{}).n(`SSOClient`,`LogoutCommand`).sc(b.Logout$).build(){};let te=o.createPaginator(k,j,`nextToken`,`nextToken`,`maxResults`),ne=o.createPaginator(k,M,`nextToken`,`nextToken`,`maxResults`),re={GetRoleCredentialsCommand:A,ListAccountRolesCommand:j,ListAccountsCommand:M,LogoutCommand:ee},ie={paginateListAccountRoles:te,paginateListAccounts:ne};var ae=class extends k{};f.createAggregatedClient(re,ae,{paginators:ie}),Object.defineProperty(e,`$Command`,{enumerable:!0,get:function(){return f.Command}}),Object.defineProperty(e,`__Client`,{enumerable:!0,get:function(){return f.Client}}),Object.defineProperty(e,`SSOServiceException`,{enumerable:!0,get:function(){return S.SSOServiceException}}),e.GetRoleCredentialsCommand=A,e.ListAccountRolesCommand=j,e.ListAccountsCommand=M,e.LogoutCommand=ee,e.SSO=ae,e.SSOClient=k,e.paginateListAccountRoles=te,e.paginateListAccounts=ne,Object.keys(b).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return b[t]}})}),Object.keys(x).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return x[t]}})})})),Dp=s((e=>{var t=Ep();Object.defineProperty(e,`GetRoleCredentialsCommand`,{enumerable:!0,get:function(){return t.GetRoleCredentialsCommand}}),Object.defineProperty(e,`SSOClient`,{enumerable:!0,get:function(){return t.SSOClient}})})),Op=s((e=>{var t=wo(),n=Nl(),r=(Ya(),d(Ja)),i=gp();let a=e=>e&&(typeof e.sso_start_url==`string`||typeof e.sso_account_id==`string`||typeof e.sso_session==`string`||typeof e.sso_region==`string`||typeof e.sso_role_name==`string`),o=async({ssoStartUrl:e,ssoSession:a,ssoAccountId:o,ssoRegion:s,ssoRoleName:c,ssoClient:l,clientConfig:u,parentClientConfig:d,callerClientConfig:f,profile:p,filepath:m,configFilepath:h,ignoreCache:g,logger:_})=>{let v,y=`To refresh this SSO session run aws sso login with the corresponding profile.`;if(a)try{let e=await i.fromSso({profile:p,filepath:m,configFilepath:h,ignoreCache:g})();v={accessToken:e.token,expiresAt:new Date(e.expiration).toISOString()}}catch(e){throw new t.CredentialsProviderError(e.message,{tryNextLink:!1,logger:_})}else try{v=await n.getSSOTokenFromFile(e)}catch{throw new t.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${y}`,{tryNextLink:!1,logger:_})}if(new Date(v.expiresAt).getTime()-Date.now()<=0)throw new t.CredentialsProviderError(`The SSO session associated with this profile has expired. ${y}`,{tryNextLink:!1,logger:_});let{accessToken:b}=v,{SSOClient:x,GetRoleCredentialsCommand:S}=await Promise.resolve().then(function(){return Dp()}),C=l||new x(Object.assign({},u??{},{logger:u?.logger??f?.logger??d?.logger,region:u?.region??s,userAgentAppId:u?.userAgentAppId??f?.userAgentAppId??d?.userAgentAppId})),w;try{w=await C.send(new S({accountId:o,roleName:c,accessToken:b}))}catch(e){throw new t.CredentialsProviderError(e,{tryNextLink:!1,logger:_})}let{roleCredentials:{accessKeyId:T,secretAccessKey:E,sessionToken:D,expiration:O,credentialScope:k,accountId:A}={}}=w;if(!T||!E||!D||!O)throw new t.CredentialsProviderError(`SSO returns an invalid temporary credential.`,{tryNextLink:!1,logger:_});let j={accessKeyId:T,secretAccessKey:E,sessionToken:D,expiration:new Date(O),...k&&{credentialScope:k},...A&&{accountId:A}};return a?r.setCredentialFeature(j,`CREDENTIALS_SSO`,`s`):r.setCredentialFeature(j,`CREDENTIALS_SSO_LEGACY`,`u`),j},s=(e,n)=>{let{sso_start_url:r,sso_account_id:i,sso_region:a,sso_role_name:o}=e;if(!r||!i||!a||!o)throw new t.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(`, `)}\nReference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:n});return e};e.fromSSO=(e={})=>async({callerClientConfig:r}={})=>{e.logger?.debug(`@aws-sdk/credential-provider-sso - fromSSO`);let{ssoStartUrl:i,ssoAccountId:c,ssoRegion:l,ssoRoleName:u,ssoSession:d}=e,{ssoClient:f}=e,p=n.getProfileName({profile:e.profile??r?.profile});if(!i&&!c&&!l&&!u&&!d){let r=(await n.parseKnownFiles(e))[p];if(!r)throw new t.CredentialsProviderError(`Profile ${p} was not found.`,{logger:e.logger});if(!a(r))throw new t.CredentialsProviderError(`Profile ${p} is not configured with SSO credentials.`,{logger:e.logger});if(r?.sso_session){let a=(await n.loadSsoSessionData(e))[r.sso_session],o=` configurations in profile ${p} and sso-session ${r.sso_session}`;if(l&&l!==a.sso_region)throw new t.CredentialsProviderError(`Conflicting SSO region`+o,{tryNextLink:!1,logger:e.logger});if(i&&i!==a.sso_start_url)throw new t.CredentialsProviderError(`Conflicting SSO start_url`+o,{tryNextLink:!1,logger:e.logger});r.sso_region=a.sso_region,r.sso_start_url=a.sso_start_url}let{sso_start_url:c,sso_account_id:u,sso_region:d,sso_role_name:m,sso_session:h}=s(r,e.logger);return o({ssoStartUrl:c,ssoSession:h,ssoAccountId:u,ssoRegion:d,ssoRoleName:m,ssoClient:f,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,callerClientConfig:e.callerClientConfig,profile:p,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else if(!i||!c||!l||!u)throw new t.CredentialsProviderError(`Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"`,{tryNextLink:!1,logger:e.logger});else return o({ssoStartUrl:i,ssoSession:d,ssoAccountId:c,ssoRegion:l,ssoRoleName:u,ssoClient:f,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,callerClientConfig:e.callerClientConfig,profile:p,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})},e.isSsoProfile=a,e.validateSsoProfile=s}));function kp(e){return{schemeId:`aws.auth#sigv4`,signingProperties:{name:`signin`,region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function Ap(e){return{schemeId:`smithy.api#noAuth`}}var jp,Mp,Np,Pp,Fp=o((()=>{wl(),jp=k(),Mp=async(e,t,n)=>({operation:(0,jp.getSmithyContext)(t).operation,region:await(0,jp.normalizeProvider)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),Np=e=>{let t=[];switch(e.operation){case`CreateOAuth2Token`:t.push(Ap(e));break;default:t.push(kp(e))}return t},Pp=e=>{let t=No(e);return Object.assign(t,{authSchemePreference:(0,jp.normalizeProvider)(e.authSchemePreference??[])})}})),Ip,Lp,Rp=o((()=>{Ip=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:`signin`}),Lp={UseFIPS:{type:`builtInParams`,name:`useFipsEndpoint`},Endpoint:{type:`builtInParams`,name:`endpoint`},Region:{type:`builtInParams`,name:`region`},UseDualStack:{type:`builtInParams`,name:`useDualstackEndpoint`}}})),zp,W,G,Bp,Vp,Hp,Up,Wp,Gp,Kp,qp,Jp,Yp,Xp,Zp,Qp,$p,K,em,tm,nm,rm,im,am,om,sm,cm=o((()=>{zp=`required`,W=`fn`,G=`argv`,Bp=`ref`,Vp=!0,Hp=`isSet`,Up=`booleanEquals`,Wp=`error`,Gp=`endpoint`,Kp=`tree`,qp=`PartitionResult`,Jp=`stringEquals`,Yp={[zp]:!0,default:!1,type:`boolean`},Xp={[zp]:!1,type:`string`},Zp={[Bp]:`Endpoint`},Qp={[W]:Up,[G]:[{[Bp]:`UseFIPS`},!0]},$p={[W]:Up,[G]:[{[Bp]:`UseDualStack`},!0]},K={},em={[W]:`getAttr`,[G]:[{[Bp]:qp},`name`]},tm={[W]:Up,[G]:[{[Bp]:`UseFIPS`},!1]},nm={[W]:Up,[G]:[{[Bp]:`UseDualStack`},!1]},rm={[W]:`getAttr`,[G]:[{[Bp]:qp},`supportsFIPS`]},im={[W]:Up,[G]:[!0,{[W]:`getAttr`,[G]:[{[Bp]:qp},`supportsDualStack`]}]},am=[{[Bp]:`Region`}],om={version:`1.0`,parameters:{UseDualStack:Yp,UseFIPS:Yp,Endpoint:Xp,Region:Xp},rules:[{conditions:[{[W]:Hp,[G]:[Zp]}],rules:[{conditions:[Qp],error:`Invalid Configuration: FIPS and custom endpoint are not supported`,type:Wp},{rules:[{conditions:[$p],error:`Invalid Configuration: Dualstack and custom endpoint are not supported`,type:Wp},{endpoint:{url:Zp,properties:K,headers:K},type:Gp}],type:Kp}],type:Kp},{rules:[{conditions:[{[W]:Hp,[G]:am}],rules:[{conditions:[{[W]:`aws.partition`,[G]:am,assign:qp}],rules:[{conditions:[{[W]:Jp,[G]:[em,`aws`]},tm,nm],endpoint:{url:`https://{Region}.signin.aws.amazon.com`,properties:K,headers:K},type:Gp},{conditions:[{[W]:Jp,[G]:[em,`aws-cn`]},tm,nm],endpoint:{url:`https://{Region}.signin.amazonaws.cn`,properties:K,headers:K},type:Gp},{conditions:[{[W]:Jp,[G]:[em,`aws-us-gov`]},tm,nm],endpoint:{url:`https://{Region}.signin.amazonaws-us-gov.com`,properties:K,headers:K},type:Gp},{conditions:[Qp,$p],rules:[{conditions:[{[W]:Up,[G]:[Vp,rm]},im],rules:[{endpoint:{url:`https://signin-fips.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:K,headers:K},type:Gp}],type:Kp},{error:`FIPS and DualStack are enabled, but this partition does not support one or both`,type:Wp}],type:Kp},{conditions:[Qp,nm],rules:[{conditions:[{[W]:Up,[G]:[rm,Vp]}],rules:[{endpoint:{url:`https://signin-fips.{Region}.{PartitionResult#dnsSuffix}`,properties:K,headers:K},type:Gp}],type:Kp},{error:`FIPS is enabled but this partition does not support FIPS`,type:Wp}],type:Kp},{conditions:[tm,$p],rules:[{conditions:[im],rules:[{endpoint:{url:`https://signin.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:K,headers:K},type:Gp}],type:Kp},{error:`DualStack is enabled but this partition does not support DualStack`,type:Wp}],type:Kp},{endpoint:{url:`https://signin.{Region}.{PartitionResult#dnsSuffix}`,properties:K,headers:K},type:Gp}],type:Kp}],type:Kp},{error:`Invalid Configuration: Missing Region`,type:Wp}],type:Kp}]},sm=om})),lm,um,dm,fm,pm=o((()=>{lm=Ra(),um=Fa(),cm(),dm=new um.EndpointCache({size:50,params:[`Endpoint`,`Region`,`UseDualStack`,`UseFIPS`]}),fm=(e,t={})=>dm.get(e,()=>(0,um.resolveEndpoint)(sm,{endpointParams:e,logger:t.logger})),um.customEndpointFunctions.aws=lm.awsEndpointFunctions})),mm,hm,gm=o((()=>{mm=V(),hm=class e extends mm.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}})),_m,vm,ym,bm,xm=o((()=>{gm(),_m=class e extends hm{name=`AccessDeniedException`;$fault=`client`;error;constructor(t){super({name:`AccessDeniedException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},vm=class e extends hm{name=`InternalServerException`;$fault=`server`;error;constructor(t){super({name:`InternalServerException`,$fault:`server`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},ym=class e extends hm{name=`TooManyRequestsError`;$fault=`client`;error;constructor(t){super({name:`TooManyRequestsError`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},bm=class e extends hm{name=`ValidationException`;$fault=`client`;error;constructor(t){super({name:`ValidationException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}}})),Sm,Cm,wm,Tm,Em,Dm,Om,km,Am,jm,Mm,Nm,Pm,Fm,Im,Lm,Rm,zm,Bm,Vm,Hm,Um,Wm,Gm,Km,qm,Jm,Ym,Xm,Zm,Qm,$m,eh,th,nh,rh,ih,ah,oh,sh,ch,lh,uh,dh,fh,ph,mh,hh,gh,_h,vh=o((()=>{I(),xm(),gm(),Sm=`AccessDeniedException`,Cm=`AccessToken`,wm=`CreateOAuth2Token`,Tm=`CreateOAuth2TokenRequest`,Em=`CreateOAuth2TokenRequestBody`,Dm=`CreateOAuth2TokenResponseBody`,Om=`CreateOAuth2TokenResponse`,km=`InternalServerException`,Am=`RefreshToken`,jm=`TooManyRequestsError`,Mm=`ValidationException`,Nm=`accessKeyId`,Pm=`accessToken`,Fm=`client`,Im=`clientId`,Lm=`codeVerifier`,Rm=`code`,zm=`error`,Bm=`expiresIn`,Vm=`grantType`,Hm=`http`,Um=`httpError`,Wm=`idToken`,Gm=`jsonName`,Km=`message`,qm=`refreshToken`,Jm=`redirectUri`,Ym=`smithy.ts.sdk.synthetic.com.amazonaws.signin`,Xm=`secretAccessKey`,Zm=`sessionToken`,Qm=`server`,$m=`tokenInput`,eh=`tokenOutput`,th=`tokenType`,nh=`com.amazonaws.signin`,rh=F.for(Ym),ih=[-3,Ym,`SigninServiceException`,0,[],[]],rh.registerError(ih,hm),ah=F.for(nh),oh=[-3,nh,Sm,{[zm]:Fm},[zm,Km],[0,0],2],ah.registerError(oh,_m),sh=[-3,nh,km,{[zm]:Qm,[Um]:500},[zm,Km],[0,0],2],ah.registerError(sh,vm),ch=[-3,nh,jm,{[zm]:Fm,[Um]:429},[zm,Km],[0,0],2],ah.registerError(ch,ym),lh=[-3,nh,Mm,{[zm]:Fm,[Um]:400},[zm,Km],[0,0],2],ah.registerError(lh,bm),uh=[rh,ah],dh=[0,nh,Am,8,0],fh=[3,nh,Cm,8,[Nm,Xm,Zm],[[0,{[Gm]:Nm}],[0,{[Gm]:Xm}],[0,{[Gm]:Zm}]],3],ph=[3,nh,Tm,0,[$m],[[()=>mh,16]],1],mh=[3,nh,Em,0,[Im,Vm,Rm,Jm,Lm,qm],[[0,{[Gm]:Im}],[0,{[Gm]:Vm}],0,[0,{[Gm]:Jm}],[0,{[Gm]:Lm}],[()=>dh,{[Gm]:qm}]],2],hh=[3,nh,Om,0,[eh],[[()=>gh,16]],1],gh=[3,nh,Dm,0,[Pm,th,Bm,qm,Wm],[[()=>fh,{[Gm]:Pm}],[0,{[Gm]:th}],[1,{[Gm]:Bm}],[()=>dh,{[Gm]:qm}],[0,{[Gm]:Wm}]],4],_h=[9,nh,wm,{[Hm]:[`POST`,`/v1/token`,200]},()=>ph,()=>hh]})),yh,bh,xh,Sh,Ch,wh=o((()=>{wl(),Sl(),Pa(),yh=V(),bh=La(),xh=Me(),Sh=N(),Fp(),pm(),vh(),Ch=e=>({apiVersion:`2023-01-01`,base64Decoder:e?.base64Decoder??xh.fromBase64,base64Encoder:e?.base64Encoder??xh.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??fm,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Np,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`),signer:new lo},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new Ca}],logger:e?.logger??new yh.NoOpLogger,protocol:e?.protocol??zc,protocolSettings:e?.protocolSettings??{defaultNamespace:`com.amazonaws.signin`,errorTypeRegistries:uh,version:`2023-01-01`,serviceTarget:`Signin`},serviceId:e?.serviceId??`Signin`,urlParser:e?.urlParser??bh.parseUrl,utf8Decoder:e?.utf8Decoder??Sh.fromUtf8,utf8Encoder:e?.utf8Encoder??Sh.toUtf8})})),Th,Eh,Dh,Oh,kh,Ah,jh,Mh,Nh,Ph,Fh,Ih=o((()=>{wl(),Th=lu(),Eh=Dl(),Dh=uu(),Oh=Vl(),kh=Pl(),Ah=qe(),jh=V(),Mh=du(),Nh=fu(),Ph=zl(),wh(),Fh=e=>{(0,jh.emitWarningIfUnsupportedVersion)(process.version);let t=(0,Nh.resolveDefaultsModeConfig)(e),n=()=>t().then(jh.loadConfigsForDefaultMode),r=Ch(e);Ba(process.version);let i={profile:e?.profile,logger:r.logger};return{...r,...e,runtime:`node`,defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,kh.loadConfig)(So,i),bodyLengthChecker:e?.bodyLengthChecker??Mh.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Th.createDefaultUserAgentProvider)({serviceId:r.serviceId,clientVersion:cu}),maxAttempts:e?.maxAttempts??(0,kh.loadConfig)(Oh.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,kh.loadConfig)(Eh.NODE_REGION_CONFIG_OPTIONS,{...Eh.NODE_REGION_CONFIG_FILE_OPTIONS,...i}),requestHandler:Ah.NodeHttpHandler.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,kh.loadConfig)({...Oh.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await n()).retryMode||Ph.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??Dh.Hash.bind(null,`sha256`),streamCollector:e?.streamCollector??Ah.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,kh.loadConfig)(Eh.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,i),useFipsEndpoint:e?.useFipsEndpoint??(0,kh.loadConfig)(Eh.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,i),userAgentAppId:e?.userAgentAppId??(0,kh.loadConfig)(Th.NODE_APP_ID_CONFIG_OPTIONS,i)}}})),Lh,Rh,zh=o((()=>{Lh=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);n===-1?t.push(e):t.splice(n,1,e)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider(){return n},setCredentials(e){r=e},credentials(){return r}}},Rh=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})})),Bh,Vh,Hh,Uh,Wh=o((()=>{Bh=Ff(),Vh=p(),Hh=V(),zh(),Uh=(e,t)=>{let n=Object.assign((0,Bh.getAwsRegionExtensionConfiguration)(e),(0,Hh.getDefaultExtensionConfiguration)(e),(0,Vh.getHttpHandlerExtensionConfiguration)(e),Lh(e));return t.forEach(e=>e.configure(n)),Object.assign(e,(0,Bh.resolveAwsRegionExtensionConfiguration)(n),(0,Hh.resolveDefaultRuntimeConfig)(n),(0,Vh.resolveHttpHandlerRuntimeConfig)(n),Rh(n))}})),Gh,Kh,qh,Jh,Yh,Xh,Zh,Qh,$h,eg,tg=o((()=>{Gh=m(),Kh=h(),qh=T(),Jh=Tl(),Yh=Dl(),Pa(),I(),Xh=Ol(),Zh=Ll(),Qh=Vl(),$h=V(),Fp(),Rp(),Ih(),Wh(),eg=class extends $h.Client{config;constructor(...[e]){let t=Fh(e||{});super(t),this.initConfig=t,this.config=Uh(Pp((0,Zh.resolveEndpointConfig)((0,Gh.resolveHostHeaderConfig)((0,Yh.resolveRegionConfig)((0,Qh.resolveRetryConfig)((0,Jh.resolveUserAgentConfig)(Ip(t))))))),e?.extensions||[]),this.middlewareStack.use(vt(this.config)),this.middlewareStack.use((0,Jh.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Qh.getRetryPlugin)(this.config)),this.middlewareStack.use((0,Xh.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Gh.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,Kh.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,qh.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(ie(this.config,{httpAuthSchemeParametersProvider:Mp,identityProviderConfigProvider:async e=>new ma({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use(ye(this.config))}destroy(){super.destroy()}}})),ng,rg,ig,ag=o((()=>{ng=Ll(),rg=V(),Rp(),vh(),ig=class extends rg.Command.classBuilder().ep(Lp).m(function(e,t,n,r){return[(0,ng.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s(`Signin`,`CreateOAuth2Token`,{}).n(`SigninClient`,`CreateOAuth2TokenCommand`).sc(_h).build(){}})),og,sg,cg,lg=o((()=>{og=V(),ag(),tg(),sg={CreateOAuth2TokenCommand:ig},cg=class extends eg{},(0,og.createAggregatedClient)(sg,cg)})),ug=o((()=>{ag()})),dg,fg=o((()=>{dg={AUTHCODE_EXPIRED:`AUTHCODE_EXPIRED`,INSUFFICIENT_PERMISSIONS:`INSUFFICIENT_PERMISSIONS`,INVALID_REQUEST:`INVALID_REQUEST`,SERVER_ERROR:`server_error`,TOKEN_EXPIRED:`TOKEN_EXPIRED`,USER_CREDENTIALS_CHANGED:`USER_CREDENTIALS_CHANGED`}})),pg=o((()=>{})),mg=c({$Command:()=>rg.Command,AccessDeniedException:()=>_m,AccessDeniedException$:()=>oh,AccessToken$:()=>fh,CreateOAuth2Token$:()=>_h,CreateOAuth2TokenCommand:()=>ig,CreateOAuth2TokenRequest$:()=>ph,CreateOAuth2TokenRequestBody$:()=>mh,CreateOAuth2TokenResponse$:()=>hh,CreateOAuth2TokenResponseBody$:()=>gh,InternalServerException:()=>vm,InternalServerException$:()=>sh,OAuth2ErrorCode:()=>dg,Signin:()=>cg,SigninClient:()=>eg,SigninServiceException:()=>hm,SigninServiceException$:()=>ih,TooManyRequestsError:()=>ym,TooManyRequestsError$:()=>ch,ValidationException:()=>bm,ValidationException$:()=>lh,__Client:()=>$h.Client,errorTypeRegistries:()=>uh}),hg=o((()=>{tg(),lg(),ug(),vh(),fg(),xm(),pg(),gm()})),gg=s((e=>{var t=(Ya(),d(Ja)),n=wo(),r=Nl(),i=p(),a=require(`node:crypto`),o=require(`node:fs`),s=require(`node:os`),c=require(`node:path`),l=class e{profileData;init;callerClientConfig;static REFRESH_THRESHOLD=300*1e3;constructor(e,t,n){this.profileData=e,this.init=t,this.callerClientConfig=n}async loadCredentials(){let t=await this.loadToken();if(!t)throw new n.CredentialsProviderError(`Failed to load a token for session ${this.loginSession}, please re-authenticate using aws login`,{tryNextLink:!1,logger:this.logger});let r=t.accessToken,i=Date.now();return new Date(r.expiresAt).getTime()-i<=e.REFRESH_THRESHOLD?this.refresh(t):{accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken,accountId:r.accountId,expiration:new Date(r.expiresAt)}}get logger(){return this.init?.logger}get loginSession(){return this.profileData.login_session}async refresh(e){let{SigninClient:t,CreateOAuth2TokenCommand:r}=await Promise.resolve().then(()=>(hg(),mg)),{logger:i,userAgentAppId:a}=this.callerClientConfig??{},o=(e=>e?.metadata?.handlerProtocol===`h2`)(this.callerClientConfig?.requestHandler)?void 0:this.callerClientConfig?.requestHandler,s=new t({credentials:{accessKeyId:``,secretAccessKey:``},region:this.profileData.region??await this.callerClientConfig?.region?.()??process.env.AWS_REGION,requestHandler:o,logger:i,userAgentAppId:a,...this.init?.clientConfig});this.createDPoPInterceptor(s.middlewareStack);let c={tokenInput:{clientId:e.clientId,refreshToken:e.refreshToken,grantType:`refresh_token`}};try{let t=await s.send(new r(c)),{accessKeyId:i,secretAccessKey:a,sessionToken:o}=t.tokenOutput?.accessToken??{},{refreshToken:l,expiresIn:u}=t.tokenOutput??{};if(!i||!a||!o||!l)throw new n.CredentialsProviderError(`Token refresh response missing required fields`,{logger:this.logger,tryNextLink:!1});let d=(u??900)*1e3,f=new Date(Date.now()+d),p={...e,accessToken:{...e.accessToken,accessKeyId:i,secretAccessKey:a,sessionToken:o,expiresAt:f.toISOString()},refreshToken:l};await this.saveToken(p);let m=p.accessToken;return{accessKeyId:m.accessKeyId,secretAccessKey:m.secretAccessKey,sessionToken:m.sessionToken,accountId:m.accountId,expiration:f}}catch(e){if(e.name===`AccessDeniedException`){let t=e.error,r;switch(t){case`TOKEN_EXPIRED`:r=`Your session has expired. Please reauthenticate.`;break;case`USER_CREDENTIALS_CHANGED`:r=`Unable to refresh credentials because of a change in your password. Please reauthenticate with your new password.`;break;case`INSUFFICIENT_PERMISSIONS`:r=`Unable to refresh credentials due to insufficient permissions. You may be missing permission for the 'CreateOAuth2Token' action.`;break;default:r=`Failed to refresh token: ${String(e)}. Please re-authenticate using \`aws login\``}throw new n.CredentialsProviderError(r,{logger:this.logger,tryNextLink:!1})}throw new n.CredentialsProviderError(`Failed to refresh token: ${String(e)}. Please re-authenticate using aws login`,{logger:this.logger})}}async loadToken(){let e=this.getTokenFilePath();try{let t;try{t=await r.readFile(e,{ignoreCache:this.init?.ignoreCache})}catch{t=await o.promises.readFile(e,`utf8`)}let i=JSON.parse(t),a=[`accessToken`,`clientId`,`refreshToken`,`dpopKey`].filter(e=>!i[e]);if(i.accessToken?.accountId||a.push(`accountId`),a.length>0)throw new n.CredentialsProviderError(`Token validation failed, missing fields: ${a.join(`, `)}`,{logger:this.logger,tryNextLink:!1});return i}catch(t){throw new n.CredentialsProviderError(`Failed to load token from ${e}: ${String(t)}`,{logger:this.logger,tryNextLink:!1})}}async saveToken(e){let t=this.getTokenFilePath(),n=c.dirname(t);try{await o.promises.mkdir(n,{recursive:!0})}catch{}await o.promises.writeFile(t,JSON.stringify(e,null,2),`utf8`)}getTokenFilePath(){let e=process.env.AWS_LOGIN_CACHE_DIRECTORY??c.join(s.homedir(),`.aws`,`login`,`cache`),t=Buffer.from(this.loginSession,`utf8`),n=a.createHash(`sha256`).update(t).digest(`hex`);return c.join(e,`${n}.json`)}derToRawSignature(e){let t=2;if(e[t]!==2)throw Error(`Invalid DER signature`);t++;let n=e[t++],r=e.subarray(t,t+n);if(t+=n,e[t]!==2)throw Error(`Invalid DER signature`);t++;let i=e[t++],a=e.subarray(t,t+i);r=r[0]===0?r.subarray(1):r,a=a[0]===0?a.subarray(1):a;let o=Buffer.concat([Buffer.alloc(32-r.length),r]),s=Buffer.concat([Buffer.alloc(32-a.length),a]);return Buffer.concat([o,s])}createDPoPInterceptor(e){e.add(e=>async t=>{if(i.HttpRequest.isInstance(t.request)){let e=t.request,n=`${e.protocol}//${e.hostname}${e.port?`:${e.port}`:``}${e.path}`,r=await this.generateDpop(e.method,n);e.headers={...e.headers,DPoP:r}}return e(t)},{step:`finalizeRequest`,name:`dpopInterceptor`,override:!0})}async generateDpop(e=`POST`,t){let r=await this.loadToken();try{let n=a.createPrivateKey({key:r.dpopKey,format:`pem`,type:`sec1`}),i=a.createPublicKey(n).export({format:`der`,type:`spki`}),o=-1;for(let e=0;e<i.length;e++)if(i[e]===4){o=e;break}let s=i.slice(o+1,o+33),c=i.slice(o+33,o+65),l={alg:`ES256`,typ:`dpop+jwt`,jwk:{kty:`EC`,crv:`P-256`,x:s.toString(`base64url`),y:c.toString(`base64url`)}},u={jti:crypto.randomUUID(),htm:e,htu:t,iat:Math.floor(Date.now()/1e3)},d=`${Buffer.from(JSON.stringify(l)).toString(`base64url`)}.${Buffer.from(JSON.stringify(u)).toString(`base64url`)}`,f=a.sign(`sha256`,Buffer.from(d),n);return`${d}.${this.derToRawSignature(f).toString(`base64url`)}`}catch(e){throw new n.CredentialsProviderError(`Failed to generate Dpop proof: ${e instanceof Error?e.message:String(e)}`,{logger:this.logger,tryNextLink:!1})}}};e.fromLoginCredentials=e=>async({callerClientConfig:i}={})=>{e?.logger?.debug?.(`@aws-sdk/credential-providers - fromLoginCredentials`);let a=await r.parseKnownFiles(e||{}),o=r.getProfileName({profile:e?.profile??i?.profile}),s=a[o];if(!s?.login_session)throw new n.CredentialsProviderError(`Profile ${o} does not contain login_session.`,{tryNextLink:!0,logger:e?.logger});let c=await new l(s,e,i).loadCredentials();return t.setCredentialFeature(c,`CREDENTIALS_LOGIN`,`AD`)}}));function _g(e){return{schemeId:`aws.auth#sigv4`,signingProperties:{name:`sts`,region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function vg(e){return{schemeId:`smithy.api#noAuth`}}var yg,bg,xg,Sg,Cg,wg=o((()=>{wl(),yg=k(),Ly(),bg=async(e,t,n)=>({operation:(0,yg.getSmithyContext)(t).operation,region:await(0,yg.normalizeProvider)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),xg=e=>{let t=[];switch(e.operation){case`AssumeRoleWithWebIdentity`:t.push(vg(e));break;default:t.push(_g(e))}return t},Sg=e=>Object.assign(e,{stsClientCtor:Iy}),Cg=e=>{let t=No(Sg(e));return Object.assign(t,{authSchemePreference:(0,yg.normalizeProvider)(e.authSchemePreference??[])})}})),Tg,Eg,Dg=o((()=>{Tg=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:`sts`}),Eg={UseGlobalEndpoint:{type:`builtInParams`,name:`useGlobalEndpoint`},UseFIPS:{type:`builtInParams`,name:`useFipsEndpoint`},Endpoint:{type:`builtInParams`,name:`endpoint`},Region:{type:`builtInParams`,name:`region`},UseDualStack:{type:`builtInParams`,name:`useDualstackEndpoint`}}})),Og,q,J,Y,kg,Ag,jg,Mg,X,Ng,Pg,Fg,Z,Ig,Lg,Rg,zg,Bg,Vg,Hg,Ug,Q,Wg,Gg,Kg,qg,Jg,Yg,Xg,Zg,Qg,$g,e_,t_,n_,r_,i_,a_,o_=o((()=>{Og=`required`,q=`type`,J=`fn`,Y=`argv`,kg=`ref`,Ag=!1,jg=!0,Mg=`booleanEquals`,X=`stringEquals`,Ng=`sigv4`,Pg=`sts`,Fg=`us-east-1`,Z=`endpoint`,Ig=`https://sts.{Region}.{PartitionResult#dnsSuffix}`,Lg=`tree`,Rg=`error`,zg=`getAttr`,Bg={[Og]:!1,[q]:`string`},Vg={[Og]:!0,default:!1,[q]:`boolean`},Hg={[kg]:`Endpoint`},Ug={[J]:`isSet`,[Y]:[{[kg]:`Region`}]},Q={[kg]:`Region`},Wg={[J]:`aws.partition`,[Y]:[Q],assign:`PartitionResult`},Gg={[kg]:`UseFIPS`},Kg={[kg]:`UseDualStack`},qg={url:`https://sts.amazonaws.com`,properties:{authSchemes:[{name:Ng,signingName:Pg,signingRegion:Fg}]},headers:{}},Jg={},Yg={conditions:[{[J]:X,[Y]:[Q,`aws-global`]}],[Z]:qg,[q]:Z},Xg={[J]:Mg,[Y]:[Gg,!0]},Zg={[J]:Mg,[Y]:[Kg,!0]},Qg={[J]:zg,[Y]:[{[kg]:`PartitionResult`},`supportsFIPS`]},$g={[kg]:`PartitionResult`},e_={[J]:Mg,[Y]:[!0,{[J]:zg,[Y]:[$g,`supportsDualStack`]}]},t_=[{[J]:`isSet`,[Y]:[Hg]}],n_=[Xg],r_=[Zg],i_={version:`1.0`,parameters:{Region:Bg,UseDualStack:Vg,UseFIPS:Vg,Endpoint:Bg,UseGlobalEndpoint:Vg},rules:[{conditions:[{[J]:Mg,[Y]:[{[kg]:`UseGlobalEndpoint`},jg]},{[J]:`not`,[Y]:t_},Ug,Wg,{[J]:Mg,[Y]:[Gg,Ag]},{[J]:Mg,[Y]:[Kg,Ag]}],rules:[{conditions:[{[J]:X,[Y]:[Q,`ap-northeast-1`]}],endpoint:qg,[q]:Z},{conditions:[{[J]:X,[Y]:[Q,`ap-south-1`]}],endpoint:qg,[q]:Z},{conditions:[{[J]:X,[Y]:[Q,`ap-southeast-1`]}],endpoint:qg,[q]:Z},{conditions:[{[J]:X,[Y]:[Q,`ap-southeast-2`]}],endpoint:qg,[q]:Z},Yg,{conditions:[{[J]:X,[Y]:[Q,`ca-central-1`]}],endpoint:qg,[q]:Z},{conditions:[{[J]:X,[Y]:[Q,`eu-central-1`]}],endpoint:qg,[q]:Z},{conditions:[{[J]:X,[Y]:[Q,`eu-north-1`]}],endpoint:qg,[q]:Z},{conditions:[{[J]:X,[Y]:[Q,`eu-west-1`]}],endpoint:qg,[q]:Z},{conditions:[{[J]:X,[Y]:[Q,`eu-west-2`]}],endpoint:qg,[q]:Z},{conditions:[{[J]:X,[Y]:[Q,`eu-west-3`]}],endpoint:qg,[q]:Z},{conditions:[{[J]:X,[Y]:[Q,`sa-east-1`]}],endpoint:qg,[q]:Z},{conditions:[{[J]:X,[Y]:[Q,Fg]}],endpoint:qg,[q]:Z},{conditions:[{[J]:X,[Y]:[Q,`us-east-2`]}],endpoint:qg,[q]:Z},{conditions:[{[J]:X,[Y]:[Q,`us-west-1`]}],endpoint:qg,[q]:Z},{conditions:[{[J]:X,[Y]:[Q,`us-west-2`]}],endpoint:qg,[q]:Z},{endpoint:{url:Ig,properties:{authSchemes:[{name:Ng,signingName:Pg,signingRegion:`{Region}`}]},headers:Jg},[q]:Z}],[q]:Lg},{conditions:t_,rules:[{conditions:n_,error:`Invalid Configuration: FIPS and custom endpoint are not supported`,[q]:Rg},{conditions:r_,error:`Invalid Configuration: Dualstack and custom endpoint are not supported`,[q]:Rg},{endpoint:{url:Hg,properties:Jg,headers:Jg},[q]:Z}],[q]:Lg},{conditions:[Ug],rules:[{conditions:[Wg],rules:[{conditions:[Xg,Zg],rules:[{conditions:[{[J]:Mg,[Y]:[jg,Qg]},e_],rules:[{endpoint:{url:`https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:Jg,headers:Jg},[q]:Z}],[q]:Lg},{error:`FIPS and DualStack are enabled, but this partition does not support one or both`,[q]:Rg}],[q]:Lg},{conditions:n_,rules:[{conditions:[{[J]:Mg,[Y]:[Qg,jg]}],rules:[{conditions:[{[J]:X,[Y]:[{[J]:zg,[Y]:[$g,`name`]},`aws-us-gov`]}],endpoint:{url:`https://sts.{Region}.amazonaws.com`,properties:Jg,headers:Jg},[q]:Z},{endpoint:{url:`https://sts-fips.{Region}.{PartitionResult#dnsSuffix}`,properties:Jg,headers:Jg},[q]:Z}],[q]:Lg},{error:`FIPS is enabled but this partition does not support FIPS`,[q]:Rg}],[q]:Lg},{conditions:r_,rules:[{conditions:[e_],rules:[{endpoint:{url:`https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:Jg,headers:Jg},[q]:Z}],[q]:Lg},{error:`DualStack is enabled but this partition does not support DualStack`,[q]:Rg}],[q]:Lg},Yg,{endpoint:{url:Ig,properties:Jg,headers:Jg},[q]:Z}],[q]:Lg}],[q]:Lg},{error:`Invalid Configuration: Missing Region`,[q]:Rg}]},a_=i_})),s_,c_,l_,u_,d_=o((()=>{s_=Ra(),c_=Fa(),o_(),l_=new c_.EndpointCache({size:50,params:[`Endpoint`,`Region`,`UseDualStack`,`UseFIPS`,`UseGlobalEndpoint`]}),u_=(e,t={})=>l_.get(e,()=>(0,c_.resolveEndpoint)(a_,{endpointParams:e,logger:t.logger})),c_.customEndpointFunctions.aws=s_.awsEndpointFunctions})),f_,p_,m_=o((()=>{f_=V(),p_=class e extends f_.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}})),h_,g_,__,v_,y_,b_,x_,S_=o((()=>{m_(),h_=class e extends p_{name=`ExpiredTokenException`;$fault=`client`;constructor(t){super({name:`ExpiredTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},g_=class e extends p_{name=`MalformedPolicyDocumentException`;$fault=`client`;constructor(t){super({name:`MalformedPolicyDocumentException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},__=class e extends p_{name=`PackedPolicyTooLargeException`;$fault=`client`;constructor(t){super({name:`PackedPolicyTooLargeException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},v_=class e extends p_{name=`RegionDisabledException`;$fault=`client`;constructor(t){super({name:`RegionDisabledException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},y_=class e extends p_{name=`IDPRejectedClaimException`;$fault=`client`;constructor(t){super({name:`IDPRejectedClaimException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},b_=class e extends p_{name=`InvalidIdentityTokenException`;$fault=`client`;constructor(t){super({name:`InvalidIdentityTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},x_=class e extends p_{name=`IDPCommunicationErrorException`;$fault=`client`;constructor(t){super({name:`IDPCommunicationErrorException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}}})),C_,w_,T_,E_,D_,O_,k_,A_,j_,M_,N_,P_,F_,I_,L_,R_,z_,B_,V_,H_,U_,W_,G_,K_,q_,J_,Y_,X_,Z_,Q_,$_,ev,tv,nv,rv,iv,av,ov,sv,cv,lv,uv,dv,fv,pv,mv,hv,gv,_v,vv,yv,bv,xv,Sv,Cv,wv,Tv,Ev,$,Dv,Ov,kv,Av,jv,Mv,Nv,Pv,Fv,Iv,Lv,Rv,zv,Bv,Vv,Hv,Uv,Wv,Gv,Kv,qv,Jv,Yv,Xv,Zv,Qv,$v,ey=o((()=>{I(),S_(),m_(),C_=`Arn`,w_=`AccessKeyId`,T_=`AssumeRole`,E_=`AssumedRoleId`,D_=`AssumeRoleRequest`,O_=`AssumeRoleResponse`,k_=`AssumedRoleUser`,A_=`AssumeRoleWithWebIdentity`,j_=`AssumeRoleWithWebIdentityRequest`,M_=`AssumeRoleWithWebIdentityResponse`,N_=`Audience`,P_=`Credentials`,F_=`ContextAssertion`,I_=`DurationSeconds`,L_=`Expiration`,R_=`ExternalId`,z_=`ExpiredTokenException`,B_=`IDPCommunicationErrorException`,V_=`IDPRejectedClaimException`,H_=`InvalidIdentityTokenException`,U_=`Key`,W_=`MalformedPolicyDocumentException`,G_=`Policy`,K_=`PolicyArns`,q_=`ProviderArn`,J_=`ProvidedContexts`,Y_=`ProvidedContextsListType`,X_=`ProvidedContext`,Z_=`PolicyDescriptorType`,Q_=`ProviderId`,$_=`PackedPolicySize`,ev=`PackedPolicyTooLargeException`,tv=`Provider`,nv=`RoleArn`,rv=`RegionDisabledException`,iv=`RoleSessionName`,av=`SecretAccessKey`,ov=`SubjectFromWebIdentityToken`,sv=`SourceIdentity`,cv=`SerialNumber`,lv=`SessionToken`,uv=`Tags`,dv=`TokenCode`,fv=`TransitiveTagKeys`,pv=`Tag`,mv=`Value`,hv=`WebIdentityToken`,gv=`arn`,_v=`accessKeySecretType`,vv=`awsQueryError`,yv=`client`,bv=`clientTokenType`,xv=`error`,Sv=`httpError`,Cv=`message`,wv=`policyDescriptorListType`,Tv=`smithy.ts.sdk.synthetic.com.amazonaws.sts`,Ev=`tagListType`,$=`com.amazonaws.sts`,Dv=F.for(Tv),Ov=[-3,Tv,`STSServiceException`,0,[],[]],Dv.registerError(Ov,p_),kv=F.for($),Av=[-3,$,z_,{[vv]:[`ExpiredTokenException`,400],[xv]:yv,[Sv]:400},[Cv],[0]],kv.registerError(Av,h_),jv=[-3,$,B_,{[vv]:[`IDPCommunicationError`,400],[xv]:yv,[Sv]:400},[Cv],[0]],kv.registerError(jv,x_),Mv=[-3,$,V_,{[vv]:[`IDPRejectedClaim`,403],[xv]:yv,[Sv]:403},[Cv],[0]],kv.registerError(Mv,y_),Nv=[-3,$,H_,{[vv]:[`InvalidIdentityToken`,400],[xv]:yv,[Sv]:400},[Cv],[0]],kv.registerError(Nv,b_),Pv=[-3,$,W_,{[vv]:[`MalformedPolicyDocument`,400],[xv]:yv,[Sv]:400},[Cv],[0]],kv.registerError(Pv,g_),Fv=[-3,$,ev,{[vv]:[`PackedPolicyTooLarge`,400],[xv]:yv,[Sv]:400},[Cv],[0]],kv.registerError(Fv,__),Iv=[-3,$,rv,{[vv]:[`RegionDisabledException`,403],[xv]:yv,[Sv]:403},[Cv],[0]],kv.registerError(Iv,v_),Lv=[Dv,kv],Rv=[0,$,_v,8,0],zv=[0,$,bv,8,0],Bv=[3,$,k_,0,[E_,C_],[0,0],2],Vv=[3,$,D_,0,[nv,iv,K_,G_,I_,uv,fv,R_,cv,dv,sv,J_],[0,0,()=>Yv,0,1,()=>Zv,64,0,0,0,0,()=>Xv],2],Hv=[3,$,O_,0,[P_,k_,$_,sv],[[()=>Gv,0],()=>Bv,1,0]],Uv=[3,$,j_,0,[nv,iv,hv,Q_,K_,G_,I_],[0,0,[()=>zv,0],0,()=>Yv,0,1],3],Wv=[3,$,M_,0,[P_,ov,k_,$_,tv,N_,sv],[[()=>Gv,0],0,()=>Bv,1,0,0,0]],Gv=[3,$,P_,0,[w_,av,lv,L_],[0,[()=>Rv,0],0,4],4],Kv=[3,$,Z_,0,[gv],[0]],qv=[3,$,X_,0,[q_,F_],[0,0]],Jv=[3,$,pv,0,[U_,mv],[0,0],2],Yv=[1,$,wv,0,()=>Kv],Xv=[1,$,Y_,0,()=>qv],Zv=[1,$,Ev,0,()=>Jv],Qv=[9,$,T_,0,()=>Vv,()=>Hv],$v=[9,$,A_,0,()=>Uv,()=>Wv]})),ty,ny,ry,iy,ay,oy=o((()=>{wl(),Sl(),Pa(),ty=V(),ny=La(),ry=Me(),iy=N(),wg(),d_(),ey(),ay=e=>({apiVersion:`2011-06-15`,base64Decoder:e?.base64Decoder??ry.fromBase64,base64Encoder:e?.base64Encoder??ry.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??u_,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??xg,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`),signer:new lo},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new Ca}],logger:e?.logger??new ty.NoOpLogger,protocol:e?.protocol??nl,protocolSettings:e?.protocolSettings??{defaultNamespace:`com.amazonaws.sts`,errorTypeRegistries:Lv,xmlNamespace:`https://sts.amazonaws.com/doc/2011-06-15/`,version:`2011-06-15`,serviceTarget:`AWSSecurityTokenServiceV20110615`},serviceId:e?.serviceId??`STS`,urlParser:e?.urlParser??ny.parseUrl,utf8Decoder:e?.utf8Decoder??iy.fromUtf8,utf8Encoder:e?.utf8Encoder??iy.toUtf8})})),sy,cy,ly,uy,dy,fy,py,my,hy,gy,_y,vy=o((()=>{wl(),sy=lu(),cy=Dl(),Pa(),ly=uu(),uy=Vl(),dy=Pl(),fy=qe(),py=V(),my=du(),hy=fu(),gy=zl(),oy(),_y=e=>{(0,py.emitWarningIfUnsupportedVersion)(process.version);let t=(0,hy.resolveDefaultsModeConfig)(e),n=()=>t().then(py.loadConfigsForDefaultMode),r=ay(e);Ba(process.version);let i={profile:e?.profile,logger:r.logger};return{...r,...e,runtime:`node`,defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,dy.loadConfig)(So,i),bodyLengthChecker:e?.bodyLengthChecker??my.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,sy.createDefaultUserAgentProvider)({serviceId:r.serviceId,clientVersion:cu}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:t=>t.getIdentityProvider(`aws.auth#sigv4`)||(async t=>await e.credentialDefaultProvider(t?.__config||{})()),signer:new lo},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new Ca}],maxAttempts:e?.maxAttempts??(0,dy.loadConfig)(uy.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,dy.loadConfig)(cy.NODE_REGION_CONFIG_OPTIONS,{...cy.NODE_REGION_CONFIG_FILE_OPTIONS,...i}),requestHandler:fy.NodeHttpHandler.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,dy.loadConfig)({...uy.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await n()).retryMode||gy.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??ly.Hash.bind(null,`sha256`),streamCollector:e?.streamCollector??fy.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,dy.loadConfig)(cy.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,i),useFipsEndpoint:e?.useFipsEndpoint??(0,dy.loadConfig)(cy.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,i),userAgentAppId:e?.userAgentAppId??(0,dy.loadConfig)(sy.NODE_APP_ID_CONFIG_OPTIONS,i)}}})),yy,by,xy=o((()=>{yy=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);n===-1?t.push(e):t.splice(n,1,e)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider(){return n},setCredentials(e){r=e},credentials(){return r}}},by=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})})),Sy,Cy,wy,Ty,Ey=o((()=>{Sy=Ff(),Cy=p(),wy=V(),xy(),Ty=(e,t)=>{let n=Object.assign((0,Sy.getAwsRegionExtensionConfiguration)(e),(0,wy.getDefaultExtensionConfiguration)(e),(0,Cy.getHttpHandlerExtensionConfiguration)(e),yy(e));return t.forEach(e=>e.configure(n)),Object.assign(e,(0,Sy.resolveAwsRegionExtensionConfiguration)(n),(0,wy.resolveDefaultRuntimeConfig)(n),(0,Cy.resolveHttpHandlerRuntimeConfig)(n),by(n))}})),Dy,Oy,ky,Ay,jy,My,Ny,Py,Fy,Iy,Ly=o((()=>{Dy=m(),Oy=h(),ky=T(),Ay=Tl(),jy=Dl(),Pa(),I(),My=Ol(),Ny=Ll(),Py=Vl(),Fy=V(),wg(),Dg(),vy(),Ey(),Iy=class extends Fy.Client{config;constructor(...[e]){let t=_y(e||{});super(t),this.initConfig=t,this.config=Ty(Cg((0,Ny.resolveEndpointConfig)((0,Dy.resolveHostHeaderConfig)((0,jy.resolveRegionConfig)((0,Py.resolveRetryConfig)((0,Ay.resolveUserAgentConfig)(Tg(t))))))),e?.extensions||[]),this.middlewareStack.use(vt(this.config)),this.middlewareStack.use((0,Ay.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Py.getRetryPlugin)(this.config)),this.middlewareStack.use((0,My.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Dy.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,Oy.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,ky.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(ie(this.config,{httpAuthSchemeParametersProvider:bg,identityProviderConfigProvider:async e=>new ma({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use(ye(this.config))}destroy(){super.destroy()}}})),Ry,zy,By,Vy=o((()=>{Ry=Ll(),zy=V(),Dg(),ey(),By=class extends zy.Command.classBuilder().ep(Eg).m(function(e,t,n,r){return[(0,Ry.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRole`,{}).n(`STSClient`,`AssumeRoleCommand`).sc(Qv).build(){}})),Hy,Uy,Wy,Gy=o((()=>{Hy=Ll(),Uy=V(),Dg(),ey(),Wy=class extends Uy.Command.classBuilder().ep(Eg).m(function(e,t,n,r){return[(0,Hy.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRoleWithWebIdentity`,{}).n(`STSClient`,`AssumeRoleWithWebIdentityCommand`).sc($v).build(){}})),Ky,qy,Jy,Yy=o((()=>{Ky=V(),Vy(),Gy(),Ly(),qy={AssumeRoleCommand:By,AssumeRoleWithWebIdentityCommand:Wy},Jy=class extends Iy{},(0,Ky.createAggregatedClient)(qy,Jy)})),Xy=o((()=>{Vy(),Gy()})),Zy=o((()=>{})),Qy,$y,eb,tb,nb,rb,ib=o((()=>{Ya(),Qy=Ff(),Vy(),Gy(),$y=e=>{if(typeof e?.Arn==`string`){let t=e.Arn.split(`:`);if(t.length>4&&t[4]!==``)return t[4]}},eb=async(e,t,n,r={})=>{let i=typeof e==`function`?await e():e,a=typeof t==`function`?await t():t,o=``,s=i??a??(o=await(0,Qy.stsRegionDefaultResolver)(r)());return n?.debug?.(`@aws-sdk/client-sts::resolveRegion`,`accepting first of:`,`${i} (credential provider clientConfig)`,`${a} (contextual client)`,`${o} (STS default: AWS_REGION, profile region, or us-east-1)`),s},tb=(e,t)=>{let n,r;return async(i,a)=>{if(r=i,!n){let{logger:i=e?.parentClientConfig?.logger,profile:a=e?.parentClientConfig?.profile,region:o,requestHandler:s=e?.parentClientConfig?.requestHandler,credentialProviderLogger:c,userAgentAppId:l=e?.parentClientConfig?.userAgentAppId}=e,u=await eb(o,e?.parentClientConfig?.region,c,{logger:i,profile:a}),d=!rb(s);n=new t({...e,userAgentAppId:l,profile:a,credentialDefaultProvider:()=>async()=>r,region:u,requestHandler:d?s:void 0,logger:i})}let{Credentials:o,AssumedRoleUser:s}=await n.send(new By(a));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw Error(`Invalid response from STS.assumeRole call with role ${a.RoleArn}`);let c=$y(s),l={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...c&&{accountId:c}};return Ha(l,`CREDENTIALS_STS_ASSUME_ROLE`,`i`),l}},nb=(e,t)=>{let n;return async r=>{if(!n){let{logger:r=e?.parentClientConfig?.logger,profile:i=e?.parentClientConfig?.profile,region:a,requestHandler:o=e?.parentClientConfig?.requestHandler,credentialProviderLogger:s,userAgentAppId:c=e?.parentClientConfig?.userAgentAppId}=e,l=await eb(a,e?.parentClientConfig?.region,s,{logger:r,profile:i}),u=!rb(o);n=new t({...e,userAgentAppId:c,profile:i,region:l,requestHandler:u?o:void 0,logger:r})}let{Credentials:i,AssumedRoleUser:a}=await n.send(new Wy(r));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${r.RoleArn}`);let o=$y(a),s={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...o&&{accountId:o}};return o&&Ha(s,`RESOLVED_ACCOUNT_ID`,`T`),Ha(s,`CREDENTIALS_STS_ASSUME_ROLE_WEB_ID`,`k`),s}},rb=e=>e?.metadata?.handlerProtocol===`h2`})),ab,ob,sb,cb,lb=o((()=>{ib(),Ly(),ab=(e,t)=>t?class extends e{constructor(e){super(e);for(let e of t)this.middlewareStack.use(e)}}:e,ob=(e={},t)=>tb(e,ab(Iy,t)),sb=(e={},t)=>nb(e,ab(Iy,t)),cb=e=>t=>e({roleAssumer:ob(t),roleAssumerWithWebIdentity:sb(t),...t})})),ub=c({AssumeRole$:()=>Qv,AssumeRoleCommand:()=>By,AssumeRoleRequest$:()=>Vv,AssumeRoleResponse$:()=>Hv,AssumeRoleWithWebIdentity$:()=>$v,AssumeRoleWithWebIdentityCommand:()=>Wy,AssumeRoleWithWebIdentityRequest$:()=>Uv,AssumeRoleWithWebIdentityResponse$:()=>Wv,AssumedRoleUser$:()=>Bv,Credentials$:()=>Gv,ExpiredTokenException:()=>h_,ExpiredTokenException$:()=>Av,IDPCommunicationErrorException:()=>x_,IDPCommunicationErrorException$:()=>jv,IDPRejectedClaimException:()=>y_,IDPRejectedClaimException$:()=>Mv,InvalidIdentityTokenException:()=>b_,InvalidIdentityTokenException$:()=>Nv,MalformedPolicyDocumentException:()=>g_,MalformedPolicyDocumentException$:()=>Pv,PackedPolicyTooLargeException:()=>__,PackedPolicyTooLargeException$:()=>Fv,PolicyDescriptorType$:()=>Kv,ProvidedContext$:()=>qv,RegionDisabledException:()=>v_,RegionDisabledException$:()=>Iv,STS:()=>Jy,STSClient:()=>Iy,STSServiceException:()=>p_,STSServiceException$:()=>Ov,Tag$:()=>Jv,__Client:()=>Fy.Client,decorateDefaultCredentialProvider:()=>cb,errorTypeRegistries:()=>Lv,getDefaultRoleAssumer:()=>ob,getDefaultRoleAssumerWithWebIdentity:()=>sb}),db=o((()=>{Ly(),Yy(),Xy(),ey(),S_(),Zy(),lb(),m_()})),fb=s((e=>{var t=Nl(),n=wo(),r=require(`child_process`),i=require(`util`),a=(Ya(),d(Ja));let o=(e,t,n)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let n=new Date;if(new Date(t.Expiration)<n)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let r=t.AccountId;!r&&n?.[e]?.aws_account_id&&(r=n[e].aws_account_id);let i={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...r&&{accountId:r}};return a.setCredentialFeature(i,`CREDENTIALS_PROCESS`,`w`),i},s=async(e,a,s)=>{let c=a[e];if(a[e]){let l=c.credential_process;if(l!==void 0){let c=i.promisify(t.externalDataInterceptor?.getTokenRecord?.().exec??r.exec);try{let{stdout:t}=await c(l),n;try{n=JSON.parse(t.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return o(e,n,a)}catch(e){throw new n.CredentialsProviderError(e.message,{logger:s})}}else throw new n.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:s})}else throw new n.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:s})};e.fromProcess=(e={})=>async({callerClientConfig:n}={})=>{e.logger?.debug(`@aws-sdk/credential-provider-process - fromProcess`);let r=await t.parseKnownFiles(e);return s(t.getProfileName({profile:e.profile??n?.profile}),r,e.logger)}})),pb=s((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})();Object.defineProperty(e,`__esModule`,{value:!0}),e.fromWebToken=void 0,e.fromWebToken=e=>async t=>{e.logger?.debug(`@aws-sdk/credential-provider-web-identity - fromWebToken`);let{roleArn:n,roleSessionName:i,webIdentityToken:a,providerId:o,policyArns:s,policy:c,durationSeconds:l}=e,{roleAssumerWithWebIdentity:u}=e;if(!u){let{getDefaultRoleAssumerWithWebIdentity:n}=await Promise.resolve().then(()=>r((db(),d(ub))));u=n({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return u({RoleArn:n,RoleSessionName:i??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:a,ProviderId:o,PolicyArns:s,Policy:c,DurationSeconds:l})}})),mb=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.fromTokenFile=void 0;let t=(Ya(),d(Ja)),n=wo(),r=Nl(),i=require(`fs`),a=pb(),o=`AWS_WEB_IDENTITY_TOKEN_FILE`;e.fromTokenFile=(e={})=>async s=>{e.logger?.debug(`@aws-sdk/credential-provider-web-identity - fromTokenFile`);let c=e?.webIdentityTokenFile??process.env[o],l=e?.roleArn??process.env.AWS_ROLE_ARN,u=e?.roleSessionName??process.env.AWS_ROLE_SESSION_NAME;if(!c||!l)throw new n.CredentialsProviderError(`Web identity configuration not specified`,{logger:e.logger});let d=await(0,a.fromWebToken)({...e,webIdentityToken:r.externalDataInterceptor?.getTokenRecord?.()[c]??(0,i.readFileSync)(c,{encoding:`ascii`}),roleArn:l,roleSessionName:u})(s);return c===process.env[o]&&(0,t.setCredentialFeature)(d,`CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN`,`h`),d}})),hb=s((e=>{var t=mb(),n=pb();Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),Object.keys(n).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})})),gb=s((e=>{var t=Nl(),n=wo(),r=(Ya(),d(Ja)),i=gg();let a=(e,t,r)=>{let i={EcsContainer:async e=>{let{fromHttp:t}=await Promise.resolve().then(()=>u(Zl())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>u(Kl()));return r?.debug(`@aws-sdk/credential-provider-ini - credential_source is EcsContainer`),async()=>n.chain(t(e??{}),i(e))().then(o)},Ec2InstanceMetadata:async e=>{r?.debug(`@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata`);let{fromInstanceMetadata:t}=await Promise.resolve().then(()=>u(Kl()));return async()=>t(e)().then(o)},Environment:async e=>{r?.debug(`@aws-sdk/credential-provider-ini - credential_source is Environment`);let{fromEnv:t}=await Promise.resolve().then(()=>u(Gl()));return async()=>t(e)().then(o)}};if(e in i)return i[e];throw new n.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},o=e=>r.setCredentialFeature(e,`CREDENTIALS_PROFILE_NAMED_PROVIDER`,`p`),s=(e,{profile:t=`default`,logger:n}={})=>!!e&&typeof e==`object`&&typeof e.role_arn==`string`&&[`undefined`,`string`].indexOf(typeof e.role_session_name)>-1&&[`undefined`,`string`].indexOf(typeof e.external_id)>-1&&[`undefined`,`string`].indexOf(typeof e.mfa_serial)>-1&&(c(e,{profile:t,logger:n})||l(e,{profile:t,logger:n})),c=(e,{profile:t,logger:n})=>{let r=typeof e.source_profile==`string`&&e.credential_source===void 0;return r&&n?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),r},l=(e,{profile:t,logger:n})=>{let r=typeof e.credential_source==`string`&&e.source_profile===void 0;return r&&n?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),r},f=async(e,i,o,s,c={},l)=>{o.logger?.debug(`@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)`);let u=i[e],{source_profile:d,region:f}=u;if(!o.roleAssumer){let{getDefaultRoleAssumer:e}=await Promise.resolve().then(()=>(db(),ub));o.roleAssumer=e({...o.clientConfig,credentialProviderLogger:o.logger,parentClientConfig:{...s,...o?.parentClientConfig,region:f??o?.parentClientConfig?.region??s?.region}},o.clientPlugins)}if(d&&d in c)throw new n.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${t.getProfileName(o)}. Profiles visited: `+Object.keys(c).join(`, `),{logger:o.logger});o.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${d?`source_profile=[${d}]`:`profile=[${e}]`}`);let m=d?l(d,i,o,s,{...c,[d]:!0},p(i[d]??{})):(await a(u.credential_source,e,o.logger)(o))();if(p(u))return m.then(e=>r.setCredentialFeature(e,`CREDENTIALS_PROFILE_SOURCE_PROFILE`,`o`));{let t={RoleArn:u.role_arn,RoleSessionName:u.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:u.external_id,DurationSeconds:parseInt(u.duration_seconds||`3600`,10)},{mfa_serial:i}=u;if(i){if(!o.mfaCodeProvider)throw new n.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:o.logger,tryNextLink:!1});t.SerialNumber=i,t.TokenCode=await o.mfaCodeProvider(i)}let a=await m;return o.roleAssumer(a,t).then(e=>r.setCredentialFeature(e,`CREDENTIALS_PROFILE_SOURCE_PROFILE`,`o`))}},p=e=>!e.role_arn&&!!e.credential_source,m=e=>!!(e&&e.login_session),h=async(e,t,n)=>{let a=await i.fromLoginCredentials({...t,profile:e})({callerClientConfig:n});return r.setCredentialFeature(a,`CREDENTIALS_PROFILE_LOGIN`,`AC`)},g=e=>!!e&&typeof e==`object`&&typeof e.credential_process==`string`,_=async(e,t)=>Promise.resolve().then(()=>u(fb())).then(({fromProcess:n})=>n({...e,profile:t})().then(e=>r.setCredentialFeature(e,`CREDENTIALS_PROFILE_PROCESS`,`v`))),v=async(e,t,n={},i)=>{let{fromSSO:a}=await Promise.resolve().then(()=>u(Op()));return a({profile:e,logger:n.logger,parentClientConfig:n.parentClientConfig,clientConfig:n.clientConfig})({callerClientConfig:i}).then(e=>t.sso_session?r.setCredentialFeature(e,`CREDENTIALS_PROFILE_SSO`,`r`):r.setCredentialFeature(e,`CREDENTIALS_PROFILE_SSO_LEGACY`,`t`))},y=e=>e&&(typeof e.sso_start_url==`string`||typeof e.sso_account_id==`string`||typeof e.sso_session==`string`||typeof e.sso_region==`string`||typeof e.sso_role_name==`string`),b=e=>!!e&&typeof e==`object`&&typeof e.aws_access_key_id==`string`&&typeof e.aws_secret_access_key==`string`&&[`undefined`,`string`].indexOf(typeof e.aws_session_token)>-1&&[`undefined`,`string`].indexOf(typeof e.aws_account_id)>-1,x=async(e,t)=>{t?.logger?.debug(`@aws-sdk/credential-provider-ini - resolveStaticCredentials`);let n={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return r.setCredentialFeature(n,`CREDENTIALS_PROFILE`,`n`)},S=e=>!!e&&typeof e==`object`&&typeof e.web_identity_token_file==`string`&&typeof e.role_arn==`string`&&[`undefined`,`string`].indexOf(typeof e.role_session_name)>-1,C=async(e,t,n)=>Promise.resolve().then(()=>u(hb())).then(({fromTokenFile:i})=>i({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})({callerClientConfig:n}).then(e=>r.setCredentialFeature(e,`CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN`,`q`))),w=async(e,t,r,i,a={},o=!1)=>{let c=t[e];if(Object.keys(a).length>0&&b(c))return x(c,r);if(o||s(c,{profile:e,logger:r.logger}))return f(e,t,r,i,a,w);if(b(c))return x(c,r);if(S(c))return C(c,r,i);if(g(c))return _(r,e);if(y(c))return await v(e,c,r,i);if(m(c))return h(e,r,i);throw new n.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})};e.fromIni=(e={})=>async({callerClientConfig:n}={})=>{e.logger?.debug(`@aws-sdk/credential-provider-ini - fromIni`);let r=await t.parseKnownFiles(e);return w(t.getProfileName({profile:e.profile??n?.profile}),r,e,n)}})),_b=s((e=>{var t=Gl(),n=wo(),r=Nl();let i=`AWS_EC2_METADATA_DISABLED`,a=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:a,fromInstanceMetadata:o}=await Promise.resolve().then(()=>u(Kl()));if(process.env[r]||process.env[t]){e.logger?.debug(`@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata`);let{fromHttp:t}=await Promise.resolve().then(()=>u(Zl()));return n.chain(t(e),a(e))}return process.env[i]&&process.env[i]!==`false`?async()=>{throw new n.CredentialsProviderError(`EC2 Instance Metadata Service access disabled`,{logger:e.logger})}:(e.logger?.debug(`@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata`),o(e))};function o(e,t){let n=s(e),r,i,a,o=async e=>{if(e?.forceRefresh)return await n(e);if(a?.expiration&&a?.expiration?.getTime()<Date.now()&&(a=void 0),r)await r;else if(!a||t?.(a))if(a)i||=n(e).then(e=>{a=e}).finally(()=>{i=void 0});else return r=n(e).then(e=>{a=e}).finally(()=>{r=void 0}),o(e);return a};return o}let s=e=>async t=>{let n;for(let r of e)try{return await r(t)}catch(e){if(n=e,e?.tryNextLink)continue;throw e}throw n},c=!1,l=(e={})=>o([async()=>{if(e.profile??process.env[r.ENV_PROFILE])throw process.env[t.ENV_KEY]&&process.env[t.ENV_SECRET]&&(c||=((e.logger?.warn&&e.logger?.constructor?.name!==`NoOpLogger`?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),!0)),new n.CredentialsProviderError(`AWS_PROFILE is set, skipping fromEnv provider.`,{logger:e.logger,tryNextLink:!0});return e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv`),t.fromEnv(e)()},async t=>{e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::fromSSO`);let{ssoStartUrl:r,ssoAccountId:i,ssoRegion:a,ssoRoleName:o,ssoSession:s}=e;if(!r&&!i&&!a&&!o&&!s)throw new n.CredentialsProviderError(`Skipping SSO provider in default chain (inputs do not include SSO fields).`,{logger:e.logger});let{fromSSO:c}=await Promise.resolve().then(()=>u(Op()));return c(e)(t)},async t=>{e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::fromIni`);let{fromIni:n}=await Promise.resolve().then(()=>u(gb()));return n(e)(t)},async t=>{e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::fromProcess`);let{fromProcess:n}=await Promise.resolve().then(()=>u(fb()));return n(e)(t)},async t=>{e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile`);let{fromTokenFile:n}=await Promise.resolve().then(()=>u(hb()));return n(e)(t)},async()=>(e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::remoteProvider`),(await a(e))()),async()=>{throw new n.CredentialsProviderError(`Could not load credentials from any providers`,{tryNextLink:!1,logger:e.logger})}],f),d=e=>e?.expiration!==void 0,f=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;e.credentialsTreatedAsExpired=f,e.credentialsWillNeedRefresh=d,e.defaultProvider=l})),vb=s((e=>{var t=Fa(),n=La();let r=(e,n=!1)=>{if(n){for(let t of e.split(`.`))if(!r(t))return!1;return!0}return!(!t.isValidHostLabel(e)||e.length<3||e.length>63||e!==e.toLowerCase()||t.isIpAddress(e))},i=e=>{let t=e.split(`:`);if(t.length<6)return null;let[n,r,i,a,o,...s]=t;return n!==`arn`||r===``||i===``||s.join(`:`)===``?null:{partition:r,service:i,region:a,accountId:o,resourceId:s.map(e=>e.split(`/`)).flat()}};var a={partitions:[{id:`aws`,outputs:{dnsSuffix:`amazonaws.com`,dualStackDnsSuffix:`api.aws`,implicitGlobalRegion:`us-east-1`,name:`aws`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$`,regions:{"af-south-1":{description:`Africa (Cape Town)`},"ap-east-1":{description:`Asia Pacific (Hong Kong)`},"ap-east-2":{description:`Asia Pacific (Taipei)`},"ap-northeast-1":{description:`Asia Pacific (Tokyo)`},"ap-northeast-2":{description:`Asia Pacific (Seoul)`},"ap-northeast-3":{description:`Asia Pacific (Osaka)`},"ap-south-1":{description:`Asia Pacific (Mumbai)`},"ap-south-2":{description:`Asia Pacific (Hyderabad)`},"ap-southeast-1":{description:`Asia Pacific (Singapore)`},"ap-southeast-2":{description:`Asia Pacific (Sydney)`},"ap-southeast-3":{description:`Asia Pacific (Jakarta)`},"ap-southeast-4":{description:`Asia Pacific (Melbourne)`},"ap-southeast-5":{description:`Asia Pacific (Malaysia)`},"ap-southeast-6":{description:`Asia Pacific (New Zealand)`},"ap-southeast-7":{description:`Asia Pacific (Thailand)`},"aws-global":{description:`aws global region`},"ca-central-1":{description:`Canada (Central)`},"ca-west-1":{description:`Canada West (Calgary)`},"eu-central-1":{description:`Europe (Frankfurt)`},"eu-central-2":{description:`Europe (Zurich)`},"eu-north-1":{description:`Europe (Stockholm)`},"eu-south-1":{description:`Europe (Milan)`},"eu-south-2":{description:`Europe (Spain)`},"eu-west-1":{description:`Europe (Ireland)`},"eu-west-2":{description:`Europe (London)`},"eu-west-3":{description:`Europe (Paris)`},"il-central-1":{description:`Israel (Tel Aviv)`},"me-central-1":{description:`Middle East (UAE)`},"me-south-1":{description:`Middle East (Bahrain)`},"mx-central-1":{description:`Mexico (Central)`},"sa-east-1":{description:`South America (Sao Paulo)`},"us-east-1":{description:`US East (N. Virginia)`},"us-east-2":{description:`US East (Ohio)`},"us-west-1":{description:`US West (N. California)`},"us-west-2":{description:`US West (Oregon)`}}},{id:`aws-cn`,outputs:{dnsSuffix:`amazonaws.com.cn`,dualStackDnsSuffix:`api.amazonwebservices.com.cn`,implicitGlobalRegion:`cn-northwest-1`,name:`aws-cn`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^cn\\-\\w+\\-\\d+$`,regions:{"aws-cn-global":{description:`aws-cn global region`},"cn-north-1":{description:`China (Beijing)`},"cn-northwest-1":{description:`China (Ningxia)`}}},{id:`aws-eusc`,outputs:{dnsSuffix:`amazonaws.eu`,dualStackDnsSuffix:`api.amazonwebservices.eu`,implicitGlobalRegion:`eusc-de-east-1`,name:`aws-eusc`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^eusc\\-(de)\\-\\w+\\-\\d+$`,regions:{"eusc-de-east-1":{description:`AWS European Sovereign Cloud (Germany)`}}},{id:`aws-iso`,outputs:{dnsSuffix:`c2s.ic.gov`,dualStackDnsSuffix:`api.aws.ic.gov`,implicitGlobalRegion:`us-iso-east-1`,name:`aws-iso`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-iso\\-\\w+\\-\\d+$`,regions:{"aws-iso-global":{description:`aws-iso global region`},"us-iso-east-1":{description:`US ISO East`},"us-iso-west-1":{description:`US ISO WEST`}}},{id:`aws-iso-b`,outputs:{dnsSuffix:`sc2s.sgov.gov`,dualStackDnsSuffix:`api.aws.scloud`,implicitGlobalRegion:`us-isob-east-1`,name:`aws-iso-b`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-isob\\-\\w+\\-\\d+$`,regions:{"aws-iso-b-global":{description:`aws-iso-b global region`},"us-isob-east-1":{description:`US ISOB East (Ohio)`},"us-isob-west-1":{description:`US ISOB West`}}},{id:`aws-iso-e`,outputs:{dnsSuffix:`cloud.adc-e.uk`,dualStackDnsSuffix:`api.cloud-aws.adc-e.uk`,implicitGlobalRegion:`eu-isoe-west-1`,name:`aws-iso-e`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^eu\\-isoe\\-\\w+\\-\\d+$`,regions:{"aws-iso-e-global":{description:`aws-iso-e global region`},"eu-isoe-west-1":{description:`EU ISOE West`}}},{id:`aws-iso-f`,outputs:{dnsSuffix:`csp.hci.ic.gov`,dualStackDnsSuffix:`api.aws.hci.ic.gov`,implicitGlobalRegion:`us-isof-south-1`,name:`aws-iso-f`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-isof\\-\\w+\\-\\d+$`,regions:{"aws-iso-f-global":{description:`aws-iso-f global region`},"us-isof-east-1":{description:`US ISOF EAST`},"us-isof-south-1":{description:`US ISOF SOUTH`}}},{id:`aws-us-gov`,outputs:{dnsSuffix:`amazonaws.com`,dualStackDnsSuffix:`api.aws`,implicitGlobalRegion:`us-gov-west-1`,name:`aws-us-gov`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-gov\\-\\w+\\-\\d+$`,regions:{"aws-us-gov-global":{description:`aws-us-gov global region`},"us-gov-east-1":{description:`AWS GovCloud (US-East)`},"us-gov-west-1":{description:`AWS GovCloud (US-West)`}}}],version:`1.1`};let o=a,s=``,c=e=>{let{partitions:t}=o;for(let n of t){let{regions:t,outputs:r}=n;for(let[n,i]of Object.entries(t))if(n===e)return{...r,...i}}for(let n of t){let{regionRegex:t,outputs:r}=n;if(new RegExp(t).test(e))return{...r}}let n=t.find(e=>e.id===`aws`);if(!n)throw Error(`Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.`);return{...n.outputs}},l=(e,t=``)=>{o=e,s=t},u=()=>{l(a,``)},d=()=>s,f={isVirtualHostableS3Bucket:r,parseArn:i,partition:c};t.customEndpointFunctions.aws=f;let p=e=>{if(typeof e.endpointProvider!=`function`)throw Error(`@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.`);let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>m(e.endpointProvider({Region:typeof e.region==`function`?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint==`function`?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint==`function`?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},m=e=>n.parseUrl(e.url);Object.defineProperty(e,`EndpointError`,{enumerable:!0,get:function(){return t.EndpointError}}),Object.defineProperty(e,`isIpAddress`,{enumerable:!0,get:function(){return t.isIpAddress}}),Object.defineProperty(e,`resolveEndpoint`,{enumerable:!0,get:function(){return t.resolveEndpoint}}),e.awsEndpointFunctions=f,e.getUserAgentPrefix=d,e.partition=c,e.resolveDefaultAwsRegionalEndpointsConfig=p,e.setPartitionInfo=l,e.toEndpointV1=m,e.useDefaultPartitionInfo=u})),yb=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ruleSet=void 0;let t=`required`,n=`type`,r=`argv`,i=`booleanEquals`,a=`stringEquals`,o=`sigv4`,s=`us-east-1`,c=`endpoint`,l=`https://sts.{Region}.{PartitionResult#dnsSuffix}`,u=`tree`,d=`error`,f=`getAttr`,p={[t]:!1,[n]:`string`},m={[t]:!0,default:!1,[n]:`boolean`},h={ref:`Endpoint`},g={fn:`isSet`,[r]:[{ref:`Region`}]},_={ref:`Region`},v={fn:`aws.partition`,[r]:[_],assign:`PartitionResult`},y={ref:`UseFIPS`},b={ref:`UseDualStack`},x={url:`https://sts.amazonaws.com`,properties:{authSchemes:[{name:o,signingName:`sts`,signingRegion:s}]},headers:{}},S={},C={conditions:[{fn:a,[r]:[_,`aws-global`]}],[c]:x,[n]:c},w={fn:i,[r]:[y,!0]},T={fn:i,[r]:[b,!0]},E={fn:f,[r]:[{ref:`PartitionResult`},`supportsFIPS`]},D={ref:`PartitionResult`},O={fn:i,[r]:[!0,{fn:f,[r]:[D,`supportsDualStack`]}]},k=[{fn:`isSet`,[r]:[h]}],A=[w],j=[T];e.ruleSet={version:`1.0`,parameters:{Region:p,UseDualStack:m,UseFIPS:m,Endpoint:p,UseGlobalEndpoint:m},rules:[{conditions:[{fn:i,[r]:[{ref:`UseGlobalEndpoint`},!0]},{fn:`not`,[r]:k},g,v,{fn:i,[r]:[y,!1]},{fn:i,[r]:[b,!1]}],rules:[{conditions:[{fn:a,[r]:[_,`ap-northeast-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`ap-south-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`ap-southeast-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`ap-southeast-2`]}],endpoint:x,[n]:c},C,{conditions:[{fn:a,[r]:[_,`ca-central-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`eu-central-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`eu-north-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`eu-west-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`eu-west-2`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`eu-west-3`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`sa-east-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,s]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`us-east-2`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`us-west-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`us-west-2`]}],endpoint:x,[n]:c},{endpoint:{url:l,properties:{authSchemes:[{name:o,signingName:`sts`,signingRegion:`{Region}`}]},headers:S},[n]:c}],[n]:u},{conditions:k,rules:[{conditions:A,error:`Invalid Configuration: FIPS and custom endpoint are not supported`,[n]:d},{conditions:j,error:`Invalid Configuration: Dualstack and custom endpoint are not supported`,[n]:d},{endpoint:{url:h,properties:S,headers:S},[n]:c}],[n]:u},{conditions:[g],rules:[{conditions:[v],rules:[{conditions:[w,T],rules:[{conditions:[{fn:i,[r]:[!0,E]},O],rules:[{endpoint:{url:`https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:S,headers:S},[n]:c}],[n]:u},{error:`FIPS and DualStack are enabled, but this partition does not support one or both`,[n]:d}],[n]:u},{conditions:A,rules:[{conditions:[{fn:i,[r]:[E,!0]}],rules:[{conditions:[{fn:a,[r]:[{fn:f,[r]:[D,`name`]},`aws-us-gov`]}],endpoint:{url:`https://sts.{Region}.amazonaws.com`,properties:S,headers:S},[n]:c},{endpoint:{url:`https://sts-fips.{Region}.{PartitionResult#dnsSuffix}`,properties:S,headers:S},[n]:c}],[n]:u},{error:`FIPS is enabled but this partition does not support FIPS`,[n]:d}],[n]:u},{conditions:j,rules:[{conditions:[O],rules:[{endpoint:{url:`https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:S,headers:S},[n]:c}],[n]:u},{error:`DualStack is enabled but this partition does not support DualStack`,[n]:d}],[n]:u},C,{endpoint:{url:l,properties:S,headers:S},[n]:c}],[n]:u}],[n]:u},{error:`Invalid Configuration: Missing Region`,[n]:d}]}})),bb=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.defaultEndpointResolver=void 0;let t=vb(),n=Fa(),r=yb(),i=new n.EndpointCache({size:50,params:[`Endpoint`,`Region`,`UseDualStack`,`UseFIPS`,`UseGlobalEndpoint`]});e.defaultEndpointResolver=(e,t={})=>i.get(e,()=>(0,n.resolveEndpoint)(r.ruleSet,{endpointParams:e,logger:t.logger})),n.customEndpointFunctions.aws=t.awsEndpointFunctions})),xb=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.STSServiceException=e.__ServiceException=void 0;let t=V();Object.defineProperty(e,`__ServiceException`,{enumerable:!0,get:function(){return t.ServiceException}}),e.STSServiceException=class e extends t.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}})),Sb=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.SessionDurationEscalationException=e.OutboundWebIdentityFederationDisabledException=e.JWTPayloadSizeExceededException=e.ExpiredTradeInTokenException=e.InvalidAuthorizationMessageException=e.IDPCommunicationErrorException=e.InvalidIdentityTokenException=e.IDPRejectedClaimException=e.RegionDisabledException=e.PackedPolicyTooLargeException=e.MalformedPolicyDocumentException=e.ExpiredTokenException=void 0;let t=xb();e.ExpiredTokenException=class e extends t.STSServiceException{name=`ExpiredTokenException`;$fault=`client`;constructor(t){super({name:`ExpiredTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},e.MalformedPolicyDocumentException=class e extends t.STSServiceException{name=`MalformedPolicyDocumentException`;$fault=`client`;constructor(t){super({name:`MalformedPolicyDocumentException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},e.PackedPolicyTooLargeException=class e extends t.STSServiceException{name=`PackedPolicyTooLargeException`;$fault=`client`;constructor(t){super({name:`PackedPolicyTooLargeException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},e.RegionDisabledException=class e extends t.STSServiceException{name=`RegionDisabledException`;$fault=`client`;constructor(t){super({name:`RegionDisabledException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},e.IDPRejectedClaimException=class e extends t.STSServiceException{name=`IDPRejectedClaimException`;$fault=`client`;constructor(t){super({name:`IDPRejectedClaimException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},e.InvalidIdentityTokenException=class e extends t.STSServiceException{name=`InvalidIdentityTokenException`;$fault=`client`;constructor(t){super({name:`InvalidIdentityTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},e.IDPCommunicationErrorException=class e extends t.STSServiceException{name=`IDPCommunicationErrorException`;$fault=`client`;constructor(t){super({name:`IDPCommunicationErrorException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},e.InvalidAuthorizationMessageException=class e extends t.STSServiceException{name=`InvalidAuthorizationMessageException`;$fault=`client`;constructor(t){super({name:`InvalidAuthorizationMessageException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},e.ExpiredTradeInTokenException=class e extends t.STSServiceException{name=`ExpiredTradeInTokenException`;$fault=`client`;constructor(t){super({name:`ExpiredTradeInTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},e.JWTPayloadSizeExceededException=class e extends t.STSServiceException{name=`JWTPayloadSizeExceededException`;$fault=`client`;constructor(t){super({name:`JWTPayloadSizeExceededException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},e.OutboundWebIdentityFederationDisabledException=class e extends t.STSServiceException{name=`OutboundWebIdentityFederationDisabledException`;$fault=`client`;constructor(t){super({name:`OutboundWebIdentityFederationDisabledException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},e.SessionDurationEscalationException=class e extends t.STSServiceException{name=`SessionDurationEscalationException`;$fault=`client`;constructor(t){super({name:`SessionDurationEscalationException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}}})),Cb=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.GetDelegatedAccessToken$=e.GetCallerIdentity$=e.GetAccessKeyInfo$=e.DecodeAuthorizationMessage$=e.AssumeRoot$=e.AssumeRoleWithWebIdentity$=e.AssumeRoleWithSAML$=e.AssumeRole$=e.Tag$=e.ProvidedContext$=e.PolicyDescriptorType$=e.GetWebIdentityTokenResponse$=e.GetWebIdentityTokenRequest$=e.GetSessionTokenResponse$=e.GetSessionTokenRequest$=e.GetFederationTokenResponse$=e.GetFederationTokenRequest$=e.GetDelegatedAccessTokenResponse$=e.GetDelegatedAccessTokenRequest$=e.GetCallerIdentityResponse$=e.GetCallerIdentityRequest$=e.GetAccessKeyInfoResponse$=e.GetAccessKeyInfoRequest$=e.FederatedUser$=e.DecodeAuthorizationMessageResponse$=e.DecodeAuthorizationMessageRequest$=e.Credentials$=e.AssumeRootResponse$=e.AssumeRootRequest$=e.AssumeRoleWithWebIdentityResponse$=e.AssumeRoleWithWebIdentityRequest$=e.AssumeRoleWithSAMLResponse$=e.AssumeRoleWithSAMLRequest$=e.AssumeRoleResponse$=e.AssumeRoleRequest$=e.AssumedRoleUser$=e.errorTypeRegistries=e.SessionDurationEscalationException$=e.RegionDisabledException$=e.PackedPolicyTooLargeException$=e.OutboundWebIdentityFederationDisabledException$=e.MalformedPolicyDocumentException$=e.JWTPayloadSizeExceededException$=e.InvalidIdentityTokenException$=e.InvalidAuthorizationMessageException$=e.IDPRejectedClaimException$=e.IDPCommunicationErrorException$=e.ExpiredTradeInTokenException$=e.ExpiredTokenException$=e.STSServiceException$=void 0,e.GetWebIdentityToken$=e.GetSessionToken$=e.GetFederationToken$=void 0;let t=`AccessKeyId`,n=`AssumedRoleUser`,r=`Account`,i=`Audience`,a=`Credentials`,o=`DurationSeconds`,s=`Expiration`,c=`FederatedUser`,l=`Policy`,u=`PolicyArns`,f=`PackedPolicySize`,p=`RoleArn`,m=`RoleSessionName`,h=`SourceIdentity`,g=`SerialNumber`,_=`Tags`,v=`TokenCode`,y=`WebIdentityToken`,b=`awsQueryError`,x=`client`,S=`error`,C=`httpError`,w=`message`,T=`smithy.ts.sdk.synthetic.com.amazonaws.sts`,E=`com.amazonaws.sts`,D=(I(),d($t)),O=Sb(),k=xb(),A=D.TypeRegistry.for(T);e.STSServiceException$=[-3,T,`STSServiceException`,0,[],[]],A.registerError(e.STSServiceException$,k.STSServiceException);let j=D.TypeRegistry.for(E);e.ExpiredTokenException$=[-3,E,`ExpiredTokenException`,{[b]:[`ExpiredTokenException`,400],[S]:x,[C]:400},[w],[0]],j.registerError(e.ExpiredTokenException$,O.ExpiredTokenException),e.ExpiredTradeInTokenException$=[-3,E,`ExpiredTradeInTokenException`,{[b]:[`ExpiredTradeInTokenException`,400],[S]:x,[C]:400},[w],[0]],j.registerError(e.ExpiredTradeInTokenException$,O.ExpiredTradeInTokenException),e.IDPCommunicationErrorException$=[-3,E,`IDPCommunicationErrorException`,{[b]:[`IDPCommunicationError`,400],[S]:x,[C]:400},[w],[0]],j.registerError(e.IDPCommunicationErrorException$,O.IDPCommunicationErrorException),e.IDPRejectedClaimException$=[-3,E,`IDPRejectedClaimException`,{[b]:[`IDPRejectedClaim`,403],[S]:x,[C]:403},[w],[0]],j.registerError(e.IDPRejectedClaimException$,O.IDPRejectedClaimException),e.InvalidAuthorizationMessageException$=[-3,E,`InvalidAuthorizationMessageException`,{[b]:[`InvalidAuthorizationMessageException`,400],[S]:x,[C]:400},[w],[0]],j.registerError(e.InvalidAuthorizationMessageException$,O.InvalidAuthorizationMessageException),e.InvalidIdentityTokenException$=[-3,E,`InvalidIdentityTokenException`,{[b]:[`InvalidIdentityToken`,400],[S]:x,[C]:400},[w],[0]],j.registerError(e.InvalidIdentityTokenException$,O.InvalidIdentityTokenException),e.JWTPayloadSizeExceededException$=[-3,E,`JWTPayloadSizeExceededException`,{[b]:[`JWTPayloadSizeExceededException`,400],[S]:x,[C]:400},[w],[0]],j.registerError(e.JWTPayloadSizeExceededException$,O.JWTPayloadSizeExceededException),e.MalformedPolicyDocumentException$=[-3,E,`MalformedPolicyDocumentException`,{[b]:[`MalformedPolicyDocument`,400],[S]:x,[C]:400},[w],[0]],j.registerError(e.MalformedPolicyDocumentException$,O.MalformedPolicyDocumentException),e.OutboundWebIdentityFederationDisabledException$=[-3,E,`OutboundWebIdentityFederationDisabledException`,{[b]:[`OutboundWebIdentityFederationDisabledException`,403],[S]:x,[C]:403},[w],[0]],j.registerError(e.OutboundWebIdentityFederationDisabledException$,O.OutboundWebIdentityFederationDisabledException),e.PackedPolicyTooLargeException$=[-3,E,`PackedPolicyTooLargeException`,{[b]:[`PackedPolicyTooLarge`,400],[S]:x,[C]:400},[w],[0]],j.registerError(e.PackedPolicyTooLargeException$,O.PackedPolicyTooLargeException),e.RegionDisabledException$=[-3,E,`RegionDisabledException`,{[b]:[`RegionDisabledException`,403],[S]:x,[C]:403},[w],[0]],j.registerError(e.RegionDisabledException$,O.RegionDisabledException),e.SessionDurationEscalationException$=[-3,E,`SessionDurationEscalationException`,{[b]:[`SessionDurationEscalationException`,403],[S]:x,[C]:403},[w],[0]],j.registerError(e.SessionDurationEscalationException$,O.SessionDurationEscalationException),e.errorTypeRegistries=[A,j];var M=[0,E,`accessKeySecretType`,8,0],ee=[0,E,`clientTokenType`,8,0],te=[0,E,`SAMLAssertionType`,8,0],ne=[0,E,`tradeInTokenType`,8,0],re=[0,E,`webIdentityTokenType`,8,0];e.AssumedRoleUser$=[3,E,n,0,[`AssumedRoleId`,`Arn`],[0,0],2],e.AssumeRoleRequest$=[3,E,`AssumeRoleRequest`,0,[p,m,u,l,o,_,`TransitiveTagKeys`,`ExternalId`,g,v,h,`ProvidedContexts`],[0,0,()=>ie,0,1,()=>oe,64,0,0,0,0,()=>ae],2],e.AssumeRoleResponse$=[3,E,`AssumeRoleResponse`,0,[a,n,f,h],[[()=>e.Credentials$,0],()=>e.AssumedRoleUser$,1,0]],e.AssumeRoleWithSAMLRequest$=[3,E,`AssumeRoleWithSAMLRequest`,0,[p,`PrincipalArn`,`SAMLAssertion`,u,l,o],[0,0,[()=>te,0],()=>ie,0,1],3],e.AssumeRoleWithSAMLResponse$=[3,E,`AssumeRoleWithSAMLResponse`,0,[a,n,f,`Subject`,`SubjectType`,`Issuer`,i,`NameQualifier`,h],[[()=>e.Credentials$,0],()=>e.AssumedRoleUser$,1,0,0,0,0,0,0]],e.AssumeRoleWithWebIdentityRequest$=[3,E,`AssumeRoleWithWebIdentityRequest`,0,[p,m,y,`ProviderId`,u,l,o],[0,0,[()=>ee,0],0,()=>ie,0,1],3],e.AssumeRoleWithWebIdentityResponse$=[3,E,`AssumeRoleWithWebIdentityResponse`,0,[a,`SubjectFromWebIdentityToken`,n,f,`Provider`,i,h],[[()=>e.Credentials$,0],0,()=>e.AssumedRoleUser$,1,0,0,0]],e.AssumeRootRequest$=[3,E,`AssumeRootRequest`,0,[`TargetPrincipal`,`TaskPolicyArn`,o],[0,()=>e.PolicyDescriptorType$,1],2],e.AssumeRootResponse$=[3,E,`AssumeRootResponse`,0,[a,h],[[()=>e.Credentials$,0],0]],e.Credentials$=[3,E,a,0,[t,`SecretAccessKey`,`SessionToken`,s],[0,[()=>M,0],0,4],4],e.DecodeAuthorizationMessageRequest$=[3,E,`DecodeAuthorizationMessageRequest`,0,[`EncodedMessage`],[0],1],e.DecodeAuthorizationMessageResponse$=[3,E,`DecodeAuthorizationMessageResponse`,0,[`DecodedMessage`],[0]],e.FederatedUser$=[3,E,c,0,[`FederatedUserId`,`Arn`],[0,0],2],e.GetAccessKeyInfoRequest$=[3,E,`GetAccessKeyInfoRequest`,0,[t],[0],1],e.GetAccessKeyInfoResponse$=[3,E,`GetAccessKeyInfoResponse`,0,[r],[0]],e.GetCallerIdentityRequest$=[3,E,`GetCallerIdentityRequest`,0,[],[]],e.GetCallerIdentityResponse$=[3,E,`GetCallerIdentityResponse`,0,[`UserId`,r,`Arn`],[0,0,0]],e.GetDelegatedAccessTokenRequest$=[3,E,`GetDelegatedAccessTokenRequest`,0,[`TradeInToken`],[[()=>ne,0]],1],e.GetDelegatedAccessTokenResponse$=[3,E,`GetDelegatedAccessTokenResponse`,0,[a,f,`AssumedPrincipal`],[[()=>e.Credentials$,0],1,0]],e.GetFederationTokenRequest$=[3,E,`GetFederationTokenRequest`,0,[`Name`,l,u,o,_],[0,0,()=>ie,1,()=>oe],1],e.GetFederationTokenResponse$=[3,E,`GetFederationTokenResponse`,0,[a,c,f],[[()=>e.Credentials$,0],()=>e.FederatedUser$,1]],e.GetSessionTokenRequest$=[3,E,`GetSessionTokenRequest`,0,[o,g,v],[1,0,0]],e.GetSessionTokenResponse$=[3,E,`GetSessionTokenResponse`,0,[a],[[()=>e.Credentials$,0]]],e.GetWebIdentityTokenRequest$=[3,E,`GetWebIdentityTokenRequest`,0,[i,`SigningAlgorithm`,o,_],[64,0,1,()=>oe],2],e.GetWebIdentityTokenResponse$=[3,E,`GetWebIdentityTokenResponse`,0,[y,s],[[()=>re,0],4]],e.PolicyDescriptorType$=[3,E,`PolicyDescriptorType`,0,[`arn`],[0]],e.ProvidedContext$=[3,E,`ProvidedContext`,0,[`ProviderArn`,`ContextAssertion`],[0,0]],e.Tag$=[3,E,`Tag`,0,[`Key`,`Value`],[0,0],2];var ie=[1,E,`policyDescriptorListType`,0,()=>e.PolicyDescriptorType$],ae=[1,E,`ProvidedContextsListType`,0,()=>e.ProvidedContext$],oe=[1,E,`tagListType`,0,()=>e.Tag$];e.AssumeRole$=[9,E,`AssumeRole`,0,()=>e.AssumeRoleRequest$,()=>e.AssumeRoleResponse$],e.AssumeRoleWithSAML$=[9,E,`AssumeRoleWithSAML`,0,()=>e.AssumeRoleWithSAMLRequest$,()=>e.AssumeRoleWithSAMLResponse$],e.AssumeRoleWithWebIdentity$=[9,E,`AssumeRoleWithWebIdentity`,0,()=>e.AssumeRoleWithWebIdentityRequest$,()=>e.AssumeRoleWithWebIdentityResponse$],e.AssumeRoot$=[9,E,`AssumeRoot`,0,()=>e.AssumeRootRequest$,()=>e.AssumeRootResponse$],e.DecodeAuthorizationMessage$=[9,E,`DecodeAuthorizationMessage`,0,()=>e.DecodeAuthorizationMessageRequest$,()=>e.DecodeAuthorizationMessageResponse$],e.GetAccessKeyInfo$=[9,E,`GetAccessKeyInfo`,0,()=>e.GetAccessKeyInfoRequest$,()=>e.GetAccessKeyInfoResponse$],e.GetCallerIdentity$=[9,E,`GetCallerIdentity`,0,()=>e.GetCallerIdentityRequest$,()=>e.GetCallerIdentityResponse$],e.GetDelegatedAccessToken$=[9,E,`GetDelegatedAccessToken`,0,()=>e.GetDelegatedAccessTokenRequest$,()=>e.GetDelegatedAccessTokenResponse$],e.GetFederationToken$=[9,E,`GetFederationToken`,0,()=>e.GetFederationTokenRequest$,()=>e.GetFederationTokenResponse$],e.GetSessionToken$=[9,E,`GetSessionToken`,0,()=>e.GetSessionTokenRequest$,()=>e.GetSessionTokenResponse$],e.GetWebIdentityToken$=[9,E,`GetWebIdentityToken`,0,()=>e.GetWebIdentityTokenRequest$,()=>e.GetWebIdentityTokenResponse$]})),wb=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getRuntimeConfig=void 0;let t=(wl(),d(Cl)),n=(Sl(),d(xl)),r=(Pa(),d(Na)),i=V(),a=La(),o=Me(),s=N(),c=Hl(),l=bb(),u=Cb();e.getRuntimeConfig=e=>({apiVersion:`2011-06-15`,base64Decoder:e?.base64Decoder??o.fromBase64,base64Encoder:e?.base64Encoder??o.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??l.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??c.defaultSTSHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`),signer:new t.AwsSdkSigV4Signer},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new r.NoAuthSigner}],logger:e?.logger??new i.NoOpLogger,protocol:e?.protocol??n.AwsQueryProtocol,protocolSettings:e?.protocolSettings??{defaultNamespace:`com.amazonaws.sts`,errorTypeRegistries:u.errorTypeRegistries,xmlNamespace:`https://sts.amazonaws.com/doc/2011-06-15/`,version:`2011-06-15`,serviceTarget:`AWSSecurityTokenServiceV20110615`},serviceId:e?.serviceId??`STS`,urlParser:e?.urlParser??a.parseUrl,utf8Decoder:e?.utf8Decoder??s.fromUtf8,utf8Encoder:e?.utf8Encoder??s.toUtf8})})),Tb=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getRuntimeConfig=void 0;let t=(Kr(),d(cr)).__importDefault(Wl()),n=(wl(),d(Cl)),r=_b(),i=lu(),a=Dl(),o=(Pa(),d(Na)),s=uu(),c=Vl(),l=Pl(),u=qe(),f=V(),p=du(),m=fu(),h=zl(),g=wb();e.getRuntimeConfig=e=>{(0,f.emitWarningIfUnsupportedVersion)(process.version);let d=(0,m.resolveDefaultsModeConfig)(e),_=()=>d().then(f.loadConfigsForDefaultMode),v=(0,g.getRuntimeConfig)(e);(0,n.emitWarningIfUnsupportedVersion)(process.version);let y={profile:e?.profile,logger:v.logger};return{...v,...e,runtime:`node`,defaultsMode:d,authSchemePreference:e?.authSchemePreference??(0,l.loadConfig)(n.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,y),bodyLengthChecker:e?.bodyLengthChecker??p.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??r.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,i.createDefaultUserAgentProvider)({serviceId:v.serviceId,clientVersion:t.default.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`)||(async e=>await(0,r.defaultProvider)(e?.__config||{})()),signer:new n.AwsSdkSigV4Signer},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new o.NoAuthSigner}],maxAttempts:e?.maxAttempts??(0,l.loadConfig)(c.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,l.loadConfig)(a.NODE_REGION_CONFIG_OPTIONS,{...a.NODE_REGION_CONFIG_FILE_OPTIONS,...y}),requestHandler:u.NodeHttpHandler.create(e?.requestHandler??_),retryMode:e?.retryMode??(0,l.loadConfig)({...c.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await _()).retryMode||h.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??s.Hash.bind(null,`sha256`),streamCollector:e?.streamCollector??u.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,l.loadConfig)(a.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,y),useFipsEndpoint:e?.useFipsEndpoint??(0,l.loadConfig)(a.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,y),userAgentAppId:e?.userAgentAppId??(0,l.loadConfig)(i.NODE_APP_ID_CONFIG_OPTIONS,y)}}})),Eb=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.resolveHttpAuthRuntimeConfig=e.getHttpAuthExtensionConfiguration=void 0,e.getHttpAuthExtensionConfiguration=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);n===-1?t.push(e):t.splice(n,1,e)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider(){return n},setCredentials(e){r=e},credentials(){return r}}},e.resolveHttpAuthRuntimeConfig=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})})),Db=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.resolveRuntimeExtensions=void 0;let t=Ff(),n=p(),r=V(),i=Eb();e.resolveRuntimeExtensions=(e,a)=>{let o=Object.assign((0,t.getAwsRegionExtensionConfiguration)(e),(0,r.getDefaultExtensionConfiguration)(e),(0,n.getHttpHandlerExtensionConfiguration)(e),(0,i.getHttpAuthExtensionConfiguration)(e));return a.forEach(e=>e.configure(o)),Object.assign(e,(0,t.resolveAwsRegionExtensionConfiguration)(o),(0,r.resolveDefaultRuntimeConfig)(o),(0,n.resolveHttpHandlerRuntimeConfig)(o),(0,i.resolveHttpAuthRuntimeConfig)(o))}})),Ob=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.STSClient=e.__Client=void 0;let t=m(),n=h(),r=T(),i=Tl(),a=Dl(),o=(Pa(),d(Na)),s=(I(),d($t)),c=Ol(),l=Ll(),u=Vl(),f=V();Object.defineProperty(e,`__Client`,{enumerable:!0,get:function(){return f.Client}});let p=Hl(),g=Ul(),_=Tb(),v=Db();e.STSClient=class extends f.Client{config;constructor(...[e]){let d=(0,_.getRuntimeConfig)(e||{});super(d),this.initConfig=d;let f=(0,g.resolveClientEndpointParameters)(d),m=(0,i.resolveUserAgentConfig)(f),h=(0,u.resolveRetryConfig)(m),y=(0,a.resolveRegionConfig)(h),b=(0,t.resolveHostHeaderConfig)(y),x=(0,l.resolveEndpointConfig)(b),S=(0,p.resolveHttpAuthSchemeConfig)(x);this.config=(0,v.resolveRuntimeExtensions)(S,e?.extensions||[]),this.middlewareStack.use((0,s.getSchemaSerdePlugin)(this.config)),this.middlewareStack.use((0,i.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,u.getRetryPlugin)(this.config)),this.middlewareStack.use((0,c.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,t.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,n.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,r.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,o.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:p.defaultSTSHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async e=>new o.DefaultIdentityProviderConfig({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use((0,o.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}}})),kb=s((e=>{var t=Ob(),n=V(),r=Ll(),i=Ul(),a=Cb(),o=Sb(),s=(Ya(),d(Ja)),c=Ff(),l=xb(),u=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRole`,{}).n(`STSClient`,`AssumeRoleCommand`).sc(a.AssumeRole$).build(){},f=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRoleWithSAML`,{}).n(`STSClient`,`AssumeRoleWithSAMLCommand`).sc(a.AssumeRoleWithSAML$).build(){},p=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRoleWithWebIdentity`,{}).n(`STSClient`,`AssumeRoleWithWebIdentityCommand`).sc(a.AssumeRoleWithWebIdentity$).build(){},m=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRoot`,{}).n(`STSClient`,`AssumeRootCommand`).sc(a.AssumeRoot$).build(){},h=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`DecodeAuthorizationMessage`,{}).n(`STSClient`,`DecodeAuthorizationMessageCommand`).sc(a.DecodeAuthorizationMessage$).build(){},g=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetAccessKeyInfo`,{}).n(`STSClient`,`GetAccessKeyInfoCommand`).sc(a.GetAccessKeyInfo$).build(){},_=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetCallerIdentity`,{}).n(`STSClient`,`GetCallerIdentityCommand`).sc(a.GetCallerIdentity$).build(){},v=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetDelegatedAccessToken`,{}).n(`STSClient`,`GetDelegatedAccessTokenCommand`).sc(a.GetDelegatedAccessToken$).build(){},y=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetFederationToken`,{}).n(`STSClient`,`GetFederationTokenCommand`).sc(a.GetFederationToken$).build(){},b=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetSessionToken`,{}).n(`STSClient`,`GetSessionTokenCommand`).sc(a.GetSessionToken$).build(){},x=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetWebIdentityToken`,{}).n(`STSClient`,`GetWebIdentityTokenCommand`).sc(a.GetWebIdentityToken$).build(){};let S={AssumeRoleCommand:u,AssumeRoleWithSAMLCommand:f,AssumeRoleWithWebIdentityCommand:p,AssumeRootCommand:m,DecodeAuthorizationMessageCommand:h,GetAccessKeyInfoCommand:g,GetCallerIdentityCommand:_,GetDelegatedAccessTokenCommand:v,GetFederationTokenCommand:y,GetSessionTokenCommand:b,GetWebIdentityTokenCommand:x};var C=class extends t.STSClient{};n.createAggregatedClient(S,C);let w=e=>{if(typeof e?.Arn==`string`){let t=e.Arn.split(`:`);if(t.length>4&&t[4]!==``)return t[4]}},T=async(e,t,n,r={})=>{let i=typeof e==`function`?await e():e,a=typeof t==`function`?await t():t,o=``,s=i??a??(o=await c.stsRegionDefaultResolver(r)());return n?.debug?.(`@aws-sdk/client-sts::resolveRegion`,`accepting first of:`,`${i} (credential provider clientConfig)`,`${a} (contextual client)`,`${o} (STS default: AWS_REGION, profile region, or us-east-1)`),s},E=(e,t)=>{let n,r;return async(i,a)=>{if(r=i,!n){let{logger:i=e?.parentClientConfig?.logger,profile:a=e?.parentClientConfig?.profile,region:o,requestHandler:s=e?.parentClientConfig?.requestHandler,credentialProviderLogger:c,userAgentAppId:l=e?.parentClientConfig?.userAgentAppId}=e,u=await T(o,e?.parentClientConfig?.region,c,{logger:i,profile:a}),d=!O(s);n=new t({...e,userAgentAppId:l,profile:a,credentialDefaultProvider:()=>async()=>r,region:u,requestHandler:d?s:void 0,logger:i})}let{Credentials:o,AssumedRoleUser:c}=await n.send(new u(a));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw Error(`Invalid response from STS.assumeRole call with role ${a.RoleArn}`);let l=w(c),d={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...l&&{accountId:l}};return s.setCredentialFeature(d,`CREDENTIALS_STS_ASSUME_ROLE`,`i`),d}},D=(e,t)=>{let n;return async r=>{if(!n){let{logger:r=e?.parentClientConfig?.logger,profile:i=e?.parentClientConfig?.profile,region:a,requestHandler:o=e?.parentClientConfig?.requestHandler,credentialProviderLogger:s,userAgentAppId:c=e?.parentClientConfig?.userAgentAppId}=e,l=await T(a,e?.parentClientConfig?.region,s,{logger:r,profile:i}),u=!O(o);n=new t({...e,userAgentAppId:c,profile:i,region:l,requestHandler:u?o:void 0,logger:r})}let{Credentials:i,AssumedRoleUser:a}=await n.send(new p(r));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${r.RoleArn}`);let o=w(a),c={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...o&&{accountId:o}};return o&&s.setCredentialFeature(c,`RESOLVED_ACCOUNT_ID`,`T`),s.setCredentialFeature(c,`CREDENTIALS_STS_ASSUME_ROLE_WEB_ID`,`k`),c}},O=e=>e?.metadata?.handlerProtocol===`h2`,k=(e,t)=>t?class extends e{constructor(e){super(e);for(let e of t)this.middlewareStack.use(e)}}:e,A=(e={},n)=>E(e,k(t.STSClient,n)),j=(e={},n)=>D(e,k(t.STSClient,n));Object.defineProperty(e,`$Command`,{enumerable:!0,get:function(){return n.Command}}),Object.defineProperty(e,`STSServiceException`,{enumerable:!0,get:function(){return l.STSServiceException}}),e.AssumeRoleCommand=u,e.AssumeRoleWithSAMLCommand=f,e.AssumeRoleWithWebIdentityCommand=p,e.AssumeRootCommand=m,e.DecodeAuthorizationMessageCommand=h,e.GetAccessKeyInfoCommand=g,e.GetCallerIdentityCommand=_,e.GetDelegatedAccessTokenCommand=v,e.GetFederationTokenCommand=y,e.GetSessionTokenCommand=b,e.GetWebIdentityTokenCommand=x,e.STS=C,e.decorateDefaultCredentialProvider=e=>t=>e({roleAssumer:A(t),roleAssumerWithWebIdentity:j(t),...t}),e.getDefaultRoleAssumer=A,e.getDefaultRoleAssumerWithWebIdentity=j,Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),Object.keys(a).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})}),Object.keys(o).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})})}))();const Ab=new kb.STSClient,jb=async()=>Ab.send(new kb.GetCallerIdentityCommand);exports.handler=jb;