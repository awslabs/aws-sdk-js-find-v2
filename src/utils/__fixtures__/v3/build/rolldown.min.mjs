import{createRequire as e}from"node:module";var t=Object.create,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,s=(e,t)=>()=>(e&&(t=e(e=0)),t),c=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),l=(e,t)=>{let r={};for(var i in e)n(r,i,{get:e[i],enumerable:!0});return t&&n(r,Symbol.toStringTag,{value:`Module`}),r},u=(e,t,a,s)=>{if(t&&typeof t==`object`||typeof t==`function`)for(var c=i(t),l=0,u=c.length,d;l<u;l++)d=c[l],!o.call(e,d)&&d!==a&&n(e,d,{get:(e=>t[e]).bind(null,d),enumerable:!(s=r(t,d))||s.enumerable});return e},d=(e,r,i)=>(i=e==null?{}:t(a(e)),u(r||!e||!e.__esModule?n(i,`default`,{value:e,enumerable:!0}):i,e)),f=e=>o.call(e,`module.exports`)?e[`module.exports`]:u(n({},`__esModule`,{value:!0}),e),p=e(import.meta.url),m=c((e=>{e.HttpAuthLocation=void 0,(function(e){e.HEADER=`header`,e.QUERY=`query`})(e.HttpAuthLocation||={}),e.HttpApiKeyAuthLocation=void 0,(function(e){e.HEADER=`header`,e.QUERY=`query`})(e.HttpApiKeyAuthLocation||={}),e.EndpointURLScheme=void 0,(function(e){e.HTTP=`http`,e.HTTPS=`https`})(e.EndpointURLScheme||={}),e.AlgorithmId=void 0,(function(e){e.MD5=`md5`,e.CRC32=`crc32`,e.CRC32C=`crc32c`,e.SHA1=`sha1`,e.SHA256=`sha256`})(e.AlgorithmId||={});let t=t=>{let n=[];return t.sha256!==void 0&&n.push({algorithmId:()=>e.AlgorithmId.SHA256,checksumConstructor:()=>t.sha256}),t.md5!=null&&n.push({algorithmId:()=>e.AlgorithmId.MD5,checksumConstructor:()=>t.md5}),{addChecksumAlgorithm(e){n.push(e)},checksumAlgorithms(){return n}}},n=e=>{let t={};return e.checksumAlgorithms().forEach(e=>{t[e.algorithmId()]=e.checksumConstructor()}),t};e.FieldPosition=void 0,(function(e){e[e.HEADER=0]=`HEADER`,e[e.TRAILER=1]=`TRAILER`})(e.FieldPosition||={}),e.IniSectionType=void 0,(function(e){e.PROFILE=`profile`,e.SSO_SESSION=`sso-session`,e.SERVICES=`services`})(e.IniSectionType||={}),e.RequestHandlerProtocol=void 0,(function(e){e.HTTP_0_9=`http/0.9`,e.HTTP_1_0=`http/1.0`,e.TDS_8_0=`tds/8.0`})(e.RequestHandlerProtocol||={}),e.SMITHY_CONTEXT_KEY=`__smithy_context`,e.getDefaultClientConfiguration=e=>t(e),e.resolveDefaultRuntimeConfig=e=>n(e)})),h=c((e=>{var t=m();let n=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,n){e.httpHandler?.updateHttpClientConfig(t,n)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),r=e=>({httpHandler:e.httpHandler()});var i=class{name;kind;values;constructor({name:e,kind:n=t.FieldPosition.HEADER,values:r=[]}){this.name=e,this.kind=n,this.values=r}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(t=>t!==e)}toString(){return this.values.map(e=>e.includes(`,`)||e.includes(` `)?`"${e}"`:e).join(`, `)}get(){return this.values}},a=class{entries={};encoding;constructor({fields:e=[],encoding:t=`utf-8`}){e.forEach(this.setField.bind(this)),this.encoding=t}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(t=>t.kind===e)}},o=class e{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||`GET`,this.hostname=e.hostname||`localhost`,this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)===`:`?e.protocol:`${e.protocol}:`:`https:`,this.path=e.path?e.path.charAt(0)===`/`?e.path:`/${e.path}`:`/`,this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(t){let n=new e({...t,headers:{...t.headers}});return n.query&&=s(n.query),n}static isInstance(e){if(!e)return!1;let t=e;return`method`in t&&`protocol`in t&&`hostname`in t&&`path`in t&&typeof t.query==`object`&&typeof t.headers==`object`}clone(){return e.clone(this)}};function s(e){return Object.keys(e).reduce((t,n)=>{let r=e[n];return{...t,[n]:Array.isArray(r)?[...r]:r}},{})}var c=class{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let t=e;return typeof t.statusCode==`number`&&typeof t.headers==`object`}};function l(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}e.Field=i,e.Fields=a,e.HttpRequest=o,e.HttpResponse=c,e.getHttpHandlerExtensionConfiguration=n,e.isValidHostname=l,e.resolveHttpHandlerRuntimeConfig=r})),g=c((e=>{var t=h();function n(e){return e}let r=e=>n=>async r=>{if(!t.HttpRequest.isInstance(r.request))return n(r);let{request:i}=r,{handlerProtocol:a=``}=e.requestHandler.metadata||{};if(a.indexOf(`h2`)>=0&&!i.headers[`:authority`])delete i.headers.host,i.headers[`:authority`]=i.hostname+(i.port?`:`+i.port:``);else if(!i.headers.host){let e=i.hostname;i.port!=null&&(e+=`:${i.port}`),i.headers.host=e}return n(r)},i={name:`hostHeaderMiddleware`,step:`build`,priority:`low`,tags:[`HOST`],override:!0};e.getHostHeaderPlugin=e=>({applyToStack:t=>{t.add(r(e),i)}}),e.hostHeaderMiddleware=r,e.hostHeaderMiddlewareOptions=i,e.resolveHostHeaderConfig=n})),_=c((e=>{let t=()=>(e,t)=>async n=>{try{let r=await e(n),{clientName:i,commandName:a,logger:o,dynamoDbDocumentClientOptions:s={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:l}=s,u=c??t.inputFilterSensitiveLog,d=l??t.outputFilterSensitiveLog,{$metadata:f,...p}=r.output;return o?.info?.({clientName:i,commandName:a,input:u(n.input),output:d(p),metadata:f}),r}catch(e){let{clientName:r,commandName:i,logger:a,dynamoDbDocumentClientOptions:o={}}=t,{overrideInputFilterSensitiveLog:s}=o,c=s??t.inputFilterSensitiveLog;throw a?.error?.({clientName:r,commandName:i,input:c(n.input),error:e,metadata:e.$metadata}),e}},n={name:`loggerMiddleware`,tags:[`LOGGER`],step:`initialize`,override:!0};e.getLoggerPlugin=e=>({applyToStack:e=>{e.add(t(),n)}}),e.loggerMiddleware=t,e.loggerMiddlewareOptions=n})),v=l({InvokeStore:()=>w,InvokeStoreBase:()=>x}),y,b,x,S,C,w,T=s((()=>{y={REQUEST_ID:Symbol.for(`_AWS_LAMBDA_REQUEST_ID`),X_RAY_TRACE_ID:Symbol.for(`_AWS_LAMBDA_X_RAY_TRACE_ID`),TENANT_ID:Symbol.for(`_AWS_LAMBDA_TENANT_ID`)},b=[`true`,`1`].includes(process.env?.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA??``),b||(globalThis.awslambda=globalThis.awslambda||{}),x=class{static PROTECTED_KEYS=y;isProtectedKey(e){return Object.values(y).includes(e)}getRequestId(){return this.get(y.REQUEST_ID)??`-`}getXRayTraceId(){return this.get(y.X_RAY_TRACE_ID)}getTenantId(){return this.get(y.TENANT_ID)}},S=class extends x{currentContext;getContext(){return this.currentContext}hasContext(){return this.currentContext!==void 0}get(e){return this.currentContext?.[e]}set(e,t){if(this.isProtectedKey(e))throw Error(`Cannot modify protected Lambda context field: ${String(e)}`);this.currentContext=this.currentContext||{},this.currentContext[e]=t}run(e,t){return this.currentContext=e,t()}},C=class e extends x{als;static async create(){let t=new e;return t.als=new(await(import(`node:async_hooks`))).AsyncLocalStorage,t}getContext(){return this.als.getStore()}hasContext(){return this.als.getStore()!==void 0}get(e){return this.als.getStore()?.[e]}set(e,t){if(this.isProtectedKey(e))throw Error(`Cannot modify protected Lambda context field: ${String(e)}`);let n=this.als.getStore();if(!n)throw Error(`No context available`);n[e]=t}run(e,t){return this.als.run(e,t)}},(function(e){let t=null;async function n(){return t||=(async()=>{let e=`AWS_LAMBDA_MAX_CONCURRENCY`in process.env?await C.create():new S;return!b&&globalThis.awslambda?.InvokeStore?globalThis.awslambda.InvokeStore:(!b&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=e),e)})(),t}e.getInstanceAsync=n,e._testing=process.env.AWS_LAMBDA_BENCHMARK_MODE===`1`?{reset:()=>{t=null,globalThis.awslambda?.InvokeStore&&delete globalThis.awslambda.InvokeStore,globalThis.awslambda={}}}:void 0})(w||={})})),E=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.recursionDetectionMiddleware=void 0;let t=(T(),f(v)),n=h(),r=`X-Amzn-Trace-Id`;e.recursionDetectionMiddleware=()=>e=>async i=>{let{request:a}=i;if(!n.HttpRequest.isInstance(a))return e(i);let o=Object.keys(a.headers??{}).find(e=>e.toLowerCase()===`x-amzn-trace-id`)??r;if(a.headers.hasOwnProperty(o))return e(i);let s=process.env.AWS_LAMBDA_FUNCTION_NAME,c=process.env._X_AMZN_TRACE_ID,l=(await t.InvokeStore.getInstanceAsync())?.getXRayTraceId()??c,u=e=>typeof e==`string`&&e.length>0;return u(s)&&u(l)&&(a.headers[r]=l),e({...i,request:a})}})),D=c((e=>{var t=E();let n={step:`build`,tags:[`RECURSION_DETECTION`],name:`recursionDetectionMiddleware`,override:!0,priority:`low`};e.getRecursionDetectionPlugin=e=>({applyToStack:e=>{e.add(t.recursionDetectionMiddleware(),n)}}),Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})})),O,k,A=s((()=>{O=m(),k=e=>e[O.SMITHY_CONTEXT_KEY]||(e[O.SMITHY_CONTEXT_KEY]={})})),j=c((e=>{var t=m();e.getSmithyContext=e=>e[t.SMITHY_CONTEXT_KEY]||(e[t.SMITHY_CONTEXT_KEY]={}),e.normalizeProvider=e=>{if(typeof e==`function`)return e;let t=Promise.resolve(e);return()=>t}})),M,ee=s((()=>{M=(e,t)=>{if(!t||t.length===0)return e;let n=[];for(let r of t)for(let t of e)t.schemeId.split(`#`)[1]===r&&n.push(t);for(let t of e)n.find(({schemeId:e})=>e===t.schemeId)||n.push(t);return n}}));function te(e){let t=new Map;for(let n of e)t.set(n.schemeId,n);return t}var ne,re,ie=s((()=>{ne=j(),ee(),re=(e,t)=>(n,r)=>async i=>{let a=M(e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,r,i.input)),e.authSchemePreference?await e.authSchemePreference():[]),o=te(e.httpAuthSchemes),s=(0,ne.getSmithyContext)(r),c=[];for(let n of a){let i=o.get(n.schemeId);if(!i){c.push(`HttpAuthScheme \`${n.schemeId}\` was not enabled for this service.`);continue}let a=i.identityProvider(await t.identityProviderConfigProvider(e));if(!a){c.push(`HttpAuthScheme \`${n.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:l={},signingProperties:u={}}=n.propertiesExtractor?.(e,r)||{};n.identityProperties=Object.assign(n.identityProperties||{},l),n.signingProperties=Object.assign(n.signingProperties||{},u),s.selectedHttpAuthScheme={httpAuthOption:n,identity:await a(n.identityProperties),signer:i.signer};break}if(!s.selectedHttpAuthScheme)throw Error(c.join(`
`));return n(i)}})),ae,oe,N=s((()=>{ie(),ae={step:`serialize`,tags:[`HTTP_AUTH_SCHEME`],name:`httpAuthSchemeMiddleware`,override:!0,relation:`before`,toMiddleware:`endpointV2Middleware`},oe=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(re(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),ae)}})})),se=c((e=>{var t=h();let n=(e,n)=>(i,a)=>async o=>{let{response:s}=await i(o);try{return{response:s,output:await n(s,e)}}catch(e){if(Object.defineProperty(e,`$response`,{value:s,enumerable:!1,writable:!1,configurable:!1}),!(`$metadata`in e)){let n=`Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.`;try{e.message+=`
  `+n}catch{!a.logger||a.logger?.constructor?.name===`NoOpLogger`?console.warn(n):a.logger?.warn?.(n)}e.$responseBodyText!==void 0&&e.$response&&(e.$response.body=e.$responseBodyText);try{if(t.HttpResponse.isInstance(s)){let{headers:t={}}=s,n=Object.entries(t);e.$metadata={httpStatusCode:s.statusCode,requestId:r(/^x-[\w-]+-request-?id$/,n),extendedRequestId:r(/^x-[\w-]+-id-2$/,n),cfId:r(/^x-[\w-]+-cf-id$/,n)}}}catch{}}throw e}},r=(e,t)=>(t.find(([t])=>t.match(e))||[void 0,void 0])[1],i=(e,t)=>(n,r)=>async i=>{let a=e,o=r.endpointV2?.url&&a.urlParser?async()=>a.urlParser(r.endpointV2.url):a.endpoint;if(!o)throw Error(`No valid endpoint provider available.`);let s=await t(i.input,{...e,endpoint:o});return n({...i,request:s})},a={name:`deserializerMiddleware`,step:`deserialize`,tags:[`DESERIALIZER`],override:!0},o={name:`serializerMiddleware`,step:`serialize`,tags:[`SERIALIZER`],override:!0};function s(e,t,r){return{applyToStack:s=>{s.add(n(e,r),a),s.add(i(e,t),o)}}}e.deserializerMiddleware=n,e.deserializerMiddlewareOption=a,e.getSerdePlugin=s,e.serializerMiddleware=i,e.serializerMiddlewareOption=o})),P,ce,le,ue=s((()=>{P=se(),ie(),ce={step:`serialize`,tags:[`HTTP_AUTH_SCHEME`],name:`httpAuthSchemeMiddleware`,override:!0,relation:`before`,toMiddleware:P.serializerMiddlewareOption.name},le=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(re(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),ce)}})})),F=s((()=>{ie(),N(),ue()})),de,fe,I,pe,me,he=s((()=>{de=h(),fe=j(),I=e=>e=>{throw e},pe=(e,t)=>{},me=e=>(e,t)=>async n=>{if(!de.HttpRequest.isInstance(n.request))return e(n);let r=(0,fe.getSmithyContext)(t).selectedHttpAuthScheme;if(!r)throw Error(`No HttpAuthScheme was selected: unable to sign request`);let{httpAuthOption:{signingProperties:i={}},identity:a,signer:o}=r,s=await e({...n,request:await o.sign(n.request,a,i)}).catch((o.errorHandler||I)(i));return(o.successHandler||pe)(s.response,i),s}})),ge,_e,ve=s((()=>{he(),ge={step:`finalizeRequest`,tags:[`HTTP_SIGNING`],name:`httpSigningMiddleware`,aliases:[`apiKeyMiddleware`,`tokenMiddleware`,`awsAuthMiddleware`],override:!0,relation:`after`,toMiddleware:`retryMiddleware`},_e=e=>({applyToStack:t=>{t.addRelativeTo(me(e),ge)}})})),ye=s((()=>{he(),ve()})),be,xe=s((()=>{be=e=>{if(typeof e==`function`)return e;let t=Promise.resolve(e);return()=>t}}));function Se(e,t,n,r,i){return async function*(a,o,...s){let c=o,l=a.startingToken??c[n],u=!0,d;for(;u;){if(c[n]=l,i&&(c[i]=c[i]??a.pageSize),a.client instanceof e)d=await Ce(t,a.client,o,a.withCommand,...s);else throw Error(`Invalid client, expected instance of ${e.name}`);yield d;let f=l;l=we(d,r),u=!!(l&&(!a.stopOnSameToken||l!==f))}return void 0}}var Ce,we,Te=s((()=>{Ce=async(e,t,n,r=e=>e,...i)=>{let a=new e(n);return a=r(a)??a,await t.send(a,...i)},we=(e,t)=>{let n=e,r=t.split(`.`);for(let e of r){if(!n||typeof n!=`object`)return;n=n[e]}return n}})),Ee=c((e=>{e.isArrayBuffer=e=>typeof ArrayBuffer==`function`&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)===`[object ArrayBuffer]`})),De=c((e=>{var t=Ee(),n=p(`buffer`);e.fromArrayBuffer=(e,r=0,i=e.byteLength-r)=>{if(!t.isArrayBuffer(e))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return n.Buffer.from(e,r,i)},e.fromString=(e,t)=>{if(typeof e!=`string`)throw TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?n.Buffer.from(e,t):n.Buffer.from(e)}})),Oe=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.fromBase64=void 0;let t=De(),n=/^[A-Za-z0-9+/]*={0,2}$/;e.fromBase64=e=>{if(e.length*3%4!=0)throw TypeError(`Incorrect padding on base64 string.`);if(!n.exec(e))throw TypeError(`Invalid base64 string.`);let r=(0,t.fromString)(e,`base64`);return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}})),L=c((e=>{var t=De();let n=e=>{let n=t.fromString(e,`utf8`);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT)};e.fromUtf8=n,e.toUint8Array=e=>typeof e==`string`?n(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),e.toUtf8=e=>{if(typeof e==`string`)return e;if(typeof e!=`object`||typeof e.byteOffset!=`number`||typeof e.byteLength!=`number`)throw Error(`@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.`);return t.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength).toString(`utf8`)}})),ke=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.toBase64=void 0;let t=De(),n=L();e.toBase64=e=>{let r;if(r=typeof e==`string`?(0,n.fromUtf8)(e):e,typeof r!=`object`||typeof r.byteOffset!=`number`||typeof r.byteLength!=`number`)throw Error(`@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.`);return(0,t.fromArrayBuffer)(r.buffer,r.byteOffset,r.byteLength).toString(`base64`)}})),R=c((e=>{var t=Oe(),n=ke();Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),Object.keys(n).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})})),Ae=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ChecksumStream=void 0;let t=R(),n=p(`stream`);e.ChecksumStream=class extends n.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:e,checksum:n,source:r,checksumSourceLocation:i,base64Encoder:a}){if(super(),typeof r.pipe==`function`)this.source=r;else throw Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);this.base64Encoder=a??t.toBase64,this.expectedChecksum=e,this.checksum=n,this.checksumSourceLocation=i,this.source.pipe(this)}_read(e){}_write(e,t,n){try{this.checksum.update(e),this.push(e)}catch(e){return n(e)}return n()}async _final(e){try{let t=await this.checksum.digest(),n=this.base64Encoder(t);if(this.expectedChecksum!==n)return e(Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(t){return e(t)}return this.push(null),e()}}})),je=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.isBlob=e.isReadableStream=void 0,e.isReadableStream=e=>typeof ReadableStream==`function`&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream),e.isBlob=e=>typeof Blob==`function`&&(e?.constructor?.name===Blob.name||e instanceof Blob)})),Me=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ChecksumStream=void 0;let t=typeof ReadableStream==`function`?ReadableStream:function(){};e.ChecksumStream=class extends t{}})),Ne=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createChecksumStream=void 0;let t=R(),n=je(),r=Me();e.createChecksumStream=({expectedChecksum:e,checksum:i,source:a,checksumSourceLocation:o,base64Encoder:s})=>{if(!(0,n.isReadableStream)(a))throw Error(`@smithy/util-stream: unsupported source type ${a?.constructor?.name??a} in ChecksumStream.`);let c=s??t.toBase64;if(typeof TransformStream!=`function`)throw Error(`@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.`);let l=new TransformStream({start(){},async transform(e,t){i.update(e),t.enqueue(e)},async flush(t){let n=c(await i.digest());if(e!==n){let r=Error(`Checksum mismatch: expected "${e}" but received "${n}" in response header "${o}".`);t.error(r)}else t.terminate()}});a.pipeThrough(l);let u=l.readable;return Object.setPrototypeOf(u,r.ChecksumStream.prototype),u}})),Pe=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createChecksumStream=i;let t=je(),n=Ae(),r=Ne();function i(e){return typeof ReadableStream==`function`&&(0,t.isReadableStream)(e.source)?(0,r.createChecksumStream)(e):new n.ChecksumStream(e)}})),Fe=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ByteArrayCollector=void 0,e.ByteArrayCollector=class{allocByteArray;byteLength=0;byteArrays=[];constructor(e){this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){let e=this.byteArrays[0];return this.reset(),e}let e=this.allocByteArray(this.byteLength),t=0;for(let n=0;n<this.byteArrays.length;++n){let r=this.byteArrays[n];e.set(r,t),t+=r.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}}})),Ie=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createBufferedReadable=void 0,e.createBufferedReadableStream=n,e.merge=r,e.flush=i,e.sizeOf=a,e.modeOf=o;let t=Fe();function n(e,n,s){let c=e.getReader(),l=!1,u=0,d=[``,new t.ByteArrayCollector(e=>new Uint8Array(e))],f=-1,p=async e=>{let{value:t,done:m}=await c.read(),h=t;if(m){if(f!==-1){let t=i(d,f);a(t)>0&&e.enqueue(t)}e.close()}else{let t=o(h,!1);if(f!==t&&(f>=0&&e.enqueue(i(d,f)),f=t),f===-1){e.enqueue(h);return}let c=a(h);u+=c;let m=a(d[f]);if(c>=n&&m===0)e.enqueue(h);else{let t=r(d,f,h);!l&&u>n*2&&(l=!0,s?.warn(`@smithy/util-stream - stream chunk size ${c} is below threshold of ${n}, automatically buffering.`)),t>=n?e.enqueue(i(d,f)):await p(e)}}};return new ReadableStream({pull:p})}e.createBufferedReadable=n;function r(e,t,n){switch(t){case 0:return e[0]+=n,a(e[0]);case 1:case 2:return e[t].push(n),a(e[t])}}function i(e,t){switch(t){case 0:let n=e[0];return e[0]=``,n;case 1:case 2:return e[t].flush()}throw Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function a(e){return e?.byteLength??e?.length??0}function o(e,t=!0){return t&&typeof Buffer<`u`&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e==`string`?0:-1}})),Le=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createBufferedReadable=a;let t=p(`node:stream`),n=Fe(),r=Ie(),i=je();function a(e,a,o){if((0,i.isReadableStream)(e))return(0,r.createBufferedReadableStream)(e,a,o);let s=new t.Readable({read(){}}),c=!1,l=0,u=[``,new n.ByteArrayCollector(e=>new Uint8Array(e)),new n.ByteArrayCollector(e=>Buffer.from(new Uint8Array(e)))],d=-1;return e.on(`data`,e=>{let t=(0,r.modeOf)(e,!0);if(d!==t&&(d>=0&&s.push((0,r.flush)(u,d)),d=t),d===-1){s.push(e);return}let n=(0,r.sizeOf)(e);l+=n;let i=(0,r.sizeOf)(u[d]);if(n>=a&&i===0)s.push(e);else{let t=(0,r.merge)(u,d,e);!c&&l>a*2&&(c=!0,o?.warn(`@smithy/util-stream - stream chunk size ${n} is below threshold of ${a}, automatically buffering.`)),t>=a&&s.push((0,r.flush)(u,d))}}),e.on(`end`,()=>{if(d!==-1){let e=(0,r.flush)(u,d);(0,r.sizeOf)(e)>0&&s.push(e)}s.push(null)}),s}})),Re=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getAwsChunkedEncodingStream=void 0;let t=p(`stream`);e.getAwsChunkedEncodingStream=(e,n)=>{let{base64Encoder:r,bodyLengthChecker:i,checksumAlgorithmFn:a,checksumLocationName:o,streamHasher:s}=n,c=r!==void 0&&a!==void 0&&o!==void 0&&s!==void 0,l=c?s(a,e):void 0,u=new t.Readable({read:()=>{}});return e.on(`data`,e=>{let t=i(e)||0;u.push(`${t.toString(16)}\r\n`),u.push(e),u.push(`\r
`)}),e.on(`end`,async()=>{if(u.push(`0\r
`),c){let e=r(await l);u.push(`${o}:${e}\r\n`),u.push(`\r
`)}u.push(null)}),u}})),ze=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.headStream=t;async function t(e,t){let n=0,r=[],i=e.getReader(),a=!1;for(;!a;){let{done:e,value:o}=await i.read();if(o&&(r.push(o),n+=o?.byteLength??0),n>=t)break;a=e}i.releaseLock();let o=new Uint8Array(Math.min(t,n)),s=0;for(let e of r){if(e.byteLength>o.byteLength-s){o.set(e.subarray(0,o.byteLength-s),s);break}else o.set(e,s);s+=e.length}return o}})),Be=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.headStream=void 0;let t=p(`stream`),n=ze(),r=je();e.headStream=(e,t)=>(0,r.isReadableStream)(e)?(0,n.headStream)(e,t):new Promise((n,r)=>{let a=new i;a.limit=t,e.pipe(a),e.on(`error`,e=>{a.end(),r(e)}),a.on(`error`,r),a.on(`finish`,function(){n(new Uint8Array(Buffer.concat(this.buffers)))})});var i=class extends t.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(e,t,n){if(this.buffers.push(e),this.bytesBuffered+=e.byteLength??0,this.bytesBuffered>=this.limit){let e=this.bytesBuffered-this.limit,t=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=t.subarray(0,t.byteLength-e),this.emit(`finish`)}n()}}})),Ve=c((e=>{let t=e=>encodeURIComponent(e).replace(/[!'()*]/g,n),n=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;e.escapeUri=t,e.escapeUriPath=e=>e.split(`/`).map(t).join(`/`)})),He=c((e=>{var t=Ve();function n(e){let n=[];for(let r of Object.keys(e).sort()){let i=e[r];if(r=t.escapeUri(r),Array.isArray(i))for(let e=0,a=i.length;e<a;e++)n.push(`${r}=${t.escapeUri(i[e])}`);else{let e=r;(i||typeof i==`string`)&&(e+=`=${t.escapeUri(i)}`),n.push(e)}}return n.join(`&`)}e.buildQueryString=n})),Ue=c((e=>{var t=h(),n=He(),r=p(`http`),i=p(`https`),a=p(`stream`),o=p(`http2`);let s=[`ECONNRESET`,`EPIPE`,`ETIMEDOUT`],c=e=>{let t={};for(let n of Object.keys(e)){let r=e[n];t[n]=Array.isArray(r)?r.join(`,`):r}return t},l={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},u=1e3,d=(e,t,n=0)=>{if(!n)return-1;let r=r=>{let i=l.setTimeout(()=>{e.destroy(),t(Object.assign(Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${n} ms.`),{name:`TimeoutError`}))},n-r),a=e=>{e?.connecting?e.on(`connect`,()=>{l.clearTimeout(i)}):l.clearTimeout(i)};e.socket?a(e.socket):e.on(`socket`,a)};return n<2e3?(r(0),0):l.setTimeout(r.bind(null,u),u)},f=(e,t,n=0,r,i)=>n?l.setTimeout(()=>{let a=`@smithy/node-http-handler - [${r?`ERROR`:`WARN`}] a request has exceeded the configured ${n} ms requestTimeout.`;if(r){let n=Object.assign(Error(a),{name:`TimeoutError`,code:`ETIMEDOUT`});e.destroy(n),t(n)}else a+=` Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.`,i?.warn?.(a)},n):-1,m=(e,{keepAlive:t,keepAliveMsecs:n},r=3e3)=>{if(t!==!0)return-1;let i=()=>{e.socket?e.socket.setKeepAlive(t,n||0):e.on(`socket`,e=>{e.setKeepAlive(t,n||0)})};return r===0?(i(),0):l.setTimeout(i,r)},g=3e3,_=(e,t,n=0)=>{let r=r=>{let i=n-r,a=()=>{e.destroy(),t(Object.assign(Error(`@smithy/node-http-handler - the request socket timed out after ${n} ms of inactivity (configured by client requestHandler).`),{name:`TimeoutError`}))};e.socket?(e.socket.setTimeout(i,a),e.on(`close`,()=>e.socket?.removeListener(`timeout`,a))):e.setTimeout(i,a)};return 0<n&&n<6e3?(r(0),0):l.setTimeout(r.bind(null,n===0?0:g),g)},v=6e3;async function y(e,t,n=v,r=!1){let i=t.headers??{},a=i.Expect||i.expect,o=-1,s=!0;!r&&a===`100-continue`&&(s=await Promise.race([new Promise(e=>{o=Number(l.setTimeout(()=>e(!0),Math.max(v,n)))}),new Promise(t=>{e.on(`continue`,()=>{l.clearTimeout(o),t(!0)}),e.on(`response`,()=>{l.clearTimeout(o),t(!1)}),e.on(`error`,()=>{l.clearTimeout(o),t(!1)})})])),s&&b(e,t.body)}function b(e,t){if(t instanceof a.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t==`string`){e.end(t);return}let n=t;if(typeof n==`object`&&n.buffer&&typeof n.byteOffset==`number`&&typeof n.byteLength==`number`){e.end(Buffer.from(n.buffer,n.byteOffset,n.byteLength));return}e.end(Buffer.from(t));return}e.end()}var x=class e{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:`http/1.1`};static create(t){return typeof t?.handle==`function`?t:new e(t)}static checkSocketUsage(e,t,n=console){let{sockets:r,requests:i,maxSockets:a}=e;if(typeof a!=`number`||a===1/0||Date.now()-15e3<t)return t;if(r&&i)for(let e in r){let t=r[e]?.length??0,o=i[e]?.length??0;if(t>=a&&o>=2*a)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${t} and ${o} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return t}constructor(e){this.configProvider=new Promise((t,n)=>{typeof e==`function`?e().then(e=>{t(this.resolveDefaultConfig(e))}).catch(n):t(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{requestTimeout:t,connectionTimeout:n,socketTimeout:a,socketAcquisitionWarningTimeout:o,httpAgent:s,httpsAgent:c,throwOnRequestTimeout:l}=e||{};return{connectionTimeout:n,requestTimeout:t,socketTimeout:a,socketAcquisitionWarningTimeout:o,throwOnRequestTimeout:l,httpAgent:s instanceof r.Agent||typeof s?.destroy==`function`?(this.externalAgent=!0,s):new r.Agent({keepAlive:!0,maxSockets:50,...s}),httpsAgent:c instanceof i.Agent||typeof c?.destroy==`function`?(this.externalAgent=!0,c):new i.Agent({keepAlive:!0,maxSockets:50,...c}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(a,{abortSignal:o,requestTimeout:u}={}){return this.config||=await this.configProvider,new Promise((p,h)=>{let g=this.config,v,b=[],x=async e=>{await v,b.forEach(l.clearTimeout),p(e)},S=async e=>{await v,b.forEach(l.clearTimeout),h(e)};if(o?.aborted){let e=Error(`Request aborted`);e.name=`AbortError`,S(e);return}let C=a.protocol===`https:`,w=a.headers??{},T=(w.Expect??w.expect)===`100-continue`,E=C?g.httpsAgent:g.httpAgent;T&&!this.externalAgent&&(E=new(C?i.Agent:r.Agent)({keepAlive:!1,maxSockets:1/0})),b.push(l.setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(E,this.socketWarningTimestamp,g.logger)},g.socketAcquisitionWarningTimeout??(g.requestTimeout??2e3)+(g.connectionTimeout??1e3)));let D=n.buildQueryString(a.query||{}),O;(a.username!=null||a.password!=null)&&(O=`${a.username??``}:${a.password??``}`);let k=a.path;D&&(k+=`?${D}`),a.fragment&&(k+=`#${a.fragment}`);let A=a.hostname??``;A=A[0]===`[`&&A.endsWith(`]`)?a.hostname.slice(1,-1):a.hostname;let j={headers:a.headers,host:A,method:a.method,path:k,port:a.port,agent:E,auth:O},M=(C?i.request:r.request)(j,e=>{x({response:new t.HttpResponse({statusCode:e.statusCode||-1,reason:e.statusMessage,headers:c(e.headers),body:e})})});if(M.on(`error`,e=>{s.includes(e.code)?S(Object.assign(e,{name:`TimeoutError`})):S(e)}),o){let e=()=>{M.destroy();let e=Error(`Request aborted`);e.name=`AbortError`,S(e)};if(typeof o.addEventListener==`function`){let t=o;t.addEventListener(`abort`,e,{once:!0}),M.once(`close`,()=>t.removeEventListener(`abort`,e))}else o.onabort=e}let ee=u??g.requestTimeout;b.push(d(M,S,g.connectionTimeout)),b.push(f(M,S,ee,g.throwOnRequestTimeout,g.logger??console)),b.push(_(M,S,g.socketTimeout));let te=j.agent;typeof te==`object`&&`keepAlive`in te&&b.push(m(M,{keepAlive:te.keepAlive,keepAliveMsecs:te.keepAliveMsecs})),v=y(M,a,ee,this.externalAgent).catch(e=>(b.forEach(l.clearTimeout),h(e)))})}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:t}))}httpHandlerConfigs(){return this.config??{}}},S=class{sessions=[];constructor(e){this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(t=>t!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let t of this.sessions)t===e&&(t.destroyed||t.destroy())}},C=class{constructor(e){if(this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw RangeError(`maxConcurrency must be greater than zero.`)}config;sessionCache=new Map;lease(e,t){let n=this.getUrlString(e),r=this.sessionCache.get(n);if(r){let e=r.poll();if(e&&!this.config.disableConcurrency)return e}let i=o.connect(n);this.config.maxConcurrency&&i.settings({maxConcurrentStreams:this.config.maxConcurrency},t=>{if(t)throw Error(`Fail to set maxConcurrentStreams to `+this.config.maxConcurrency+`when creating new session for `+e.destination.toString())}),i.unref();let a=()=>{i.destroy(),this.deleteSession(n,i)};i.on(`goaway`,a),i.on(`error`,a),i.on(`frameError`,a),i.on(`close`,()=>this.deleteSession(n,i)),t.requestTimeout&&i.setTimeout(t.requestTimeout,a);let s=this.sessionCache.get(n)||new S;return s.offerLast(i),this.sessionCache.set(n,s),i}deleteSession(e,t){let n=this.sessionCache.get(e);n&&n.contains(t)&&(n.remove(t),this.sessionCache.set(e,n))}release(e,t){let n=this.getUrlString(e);this.sessionCache.get(n)?.offerLast(t)}destroy(){for(let[e,t]of this.sessionCache){for(let e of t)e.destroyed||e.destroy(),t.remove(e);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(e&&e<=0)throw RangeError(`maxConcurrentStreams must be greater than zero.`);this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}},w=class e{config;configProvider;metadata={handlerProtocol:`h2`};connectionManager=new C({});static create(t){return typeof t?.handle==`function`?t:new e(t)}constructor(e){this.configProvider=new Promise((t,n)=>{typeof e==`function`?e().then(e=>{t(e||{})}).catch(n):t(e||{})})}destroy(){this.connectionManager.destroy()}async handle(e,{abortSignal:r,requestTimeout:i}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:a,disableConcurrentStreams:s}=this.config,l=i??a;return new Promise((i,a)=>{let u=!1,d,f=async e=>{await d,i(e)},p=async e=>{await d,a(e)};if(r?.aborted){u=!0;let e=Error(`Request aborted`);e.name=`AbortError`,p(e);return}let{hostname:m,method:h,port:g,protocol:_,query:v}=e,b=``;(e.username!=null||e.password!=null)&&(b=`${e.username??``}:${e.password??``}@`);let x=`${_}//${b}${m}${g?`:${g}`:``}`,S={destination:new URL(x)},C=this.connectionManager.lease(S,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:s||!1}),w=e=>{s&&this.destroySession(C),u=!0,p(e)},T=n.buildQueryString(v||{}),E=e.path;T&&(E+=`?${T}`),e.fragment&&(E+=`#${e.fragment}`);let D=C.request({...e.headers,[o.constants.HTTP2_HEADER_PATH]:E,[o.constants.HTTP2_HEADER_METHOD]:h});if(C.ref(),D.on(`response`,e=>{let n=new t.HttpResponse({statusCode:e[`:status`]||-1,headers:c(e),body:D});u=!0,f({response:n}),s&&(C.close(),this.connectionManager.deleteSession(x,C))}),l&&D.setTimeout(l,()=>{D.close();let e=Error(`Stream timed out because of no activity for ${l} ms`);e.name=`TimeoutError`,w(e)}),r){let e=()=>{D.close();let e=Error(`Request aborted`);e.name=`AbortError`,w(e)};if(typeof r.addEventListener==`function`){let t=r;t.addEventListener(`abort`,e,{once:!0}),D.once(`close`,()=>t.removeEventListener(`abort`,e))}else r.onabort=e}D.on(`frameError`,(e,t,n)=>{w(Error(`Frame type id ${e} in stream id ${n} has failed with code ${t}.`))}),D.on(`error`,w),D.on(`aborted`,()=>{w(Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${D.rstCode}.`))}),D.on(`close`,()=>{C.unref(),s&&C.destroy(),u||w(Error(`Unexpected error: http2 request did not get a response`))}),d=y(D,e,l)})}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:t}))}httpHandlerConfigs(){return this.config??{}}destroySession(e){e.destroyed||e.destroy()}},T=class extends a.Writable{bufferedBytes=[];_write(e,t,n){this.bufferedBytes.push(e),n()}};let E=e=>D(e)?O(e):new Promise((t,n)=>{let r=new T;e.pipe(r),e.on(`error`,e=>{r.end(),n(e)}),r.on(`error`,n),r.on(`finish`,function(){t(new Uint8Array(Buffer.concat(this.bufferedBytes)))})}),D=e=>typeof ReadableStream==`function`&&e instanceof ReadableStream;async function O(e){let t=[],n=e.getReader(),r=!1,i=0;for(;!r;){let{done:e,value:a}=await n.read();a&&(t.push(a),i+=a.length),r=e}let a=new Uint8Array(i),o=0;for(let e of t)a.set(e,o),o+=e.length;return a}e.DEFAULT_REQUEST_TIMEOUT=0,e.NodeHttp2Handler=w,e.NodeHttpHandler=x,e.streamCollector=E})),We=c((e=>{var t=h(),n=He(),r=R();function i(e,t){return new Request(e,t)}function a(e=0){return new Promise((t,n)=>{e&&setTimeout(()=>{let t=Error(`Request did not complete within ${e} ms`);t.name=`TimeoutError`,n(t)},e)})}let o={supported:void 0};var s=class e{config;configProvider;static create(t){return typeof t?.handle==`function`?t:new e(t)}constructor(e){typeof e==`function`?this.configProvider=e().then(e=>e||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),o.supported===void 0&&(o.supported=typeof Request<`u`&&`keepalive`in i(`https://[::1]`))}destroy(){}async handle(e,{abortSignal:r,requestTimeout:s}={}){this.config||=await this.configProvider;let c=s??this.config.requestTimeout,l=this.config.keepAlive===!0,u=this.config.credentials;if(r?.aborted){let e=Error(`Request aborted`);return e.name=`AbortError`,Promise.reject(e)}let d=e.path,f=n.buildQueryString(e.query||{});f&&(d+=`?${f}`),e.fragment&&(d+=`#${e.fragment}`);let p=``;(e.username!=null||e.password!=null)&&(p=`${e.username??``}:${e.password??``}@`);let{port:m,method:h}=e,g=`${e.protocol}//${p}${e.hostname}${m?`:${m}`:``}${d}`,_=h===`GET`||h===`HEAD`?void 0:e.body,v={body:_,headers:new Headers(e.headers),method:h,credentials:u};this.config?.cache&&(v.cache=this.config.cache),_&&(v.duplex=`half`),typeof AbortController<`u`&&(v.signal=r),o.supported&&(v.keepalive=l),typeof this.config.requestInit==`function`&&Object.assign(v,this.config.requestInit(e));let y=()=>{},b=i(g,v),x=[fetch(b).then(e=>{let n=e.headers,r={};for(let e of n.entries())r[e[0]]=e[1];return e.body==null?e.blob().then(n=>({response:new t.HttpResponse({headers:r,reason:e.statusText,statusCode:e.status,body:n})})):{response:new t.HttpResponse({headers:r,reason:e.statusText,statusCode:e.status,body:e.body})}}),a(c)];return r&&x.push(new Promise((e,t)=>{let n=()=>{let e=Error(`Request aborted`);e.name=`AbortError`,t(e)};if(typeof r.addEventListener==`function`){let e=r;e.addEventListener(`abort`,n,{once:!0}),y=()=>e.removeEventListener(`abort`,n)}else r.onabort=n})),Promise.race(x).finally(y)}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=t,n))}httpHandlerConfigs(){return this.config??{}}};let c=async e=>typeof Blob==`function`&&e instanceof Blob||e.constructor?.name===`Blob`?Blob.prototype.arrayBuffer===void 0?l(e):new Uint8Array(await e.arrayBuffer()):u(e);async function l(e){let t=await d(e),n=r.fromBase64(t);return new Uint8Array(n)}async function u(e){let t=[],n=e.getReader(),r=!1,i=0;for(;!r;){let{done:e,value:a}=await n.read();a&&(t.push(a),i+=a.length),r=e}let a=new Uint8Array(i),o=0;for(let e of t)a.set(e,o),o+=e.length;return a}function d(e){return new Promise((t,n)=>{let r=new FileReader;r.onloadend=()=>{if(r.readyState!==2)return n(Error(`Reader aborted too early`));let e=r.result??``,i=e.indexOf(`,`),a=i>-1?i+1:e.length;t(e.substring(a))},r.onabort=()=>n(Error(`Read aborted`)),r.onerror=()=>n(r.error),r.readAsDataURL(e)})}e.FetchHttpHandler=s,e.keepAliveSupport=o,e.streamCollector=c})),Ge=c((e=>{let t={},n={};for(let e=0;e<256;e++){let r=e.toString(16).toLowerCase();r.length===1&&(r=`0${r}`),t[e]=r,n[r]=e}function r(e){if(e.length%2!=0)throw Error(`Hex encoded strings must have an even number length`);let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let i=e.slice(r,r+2).toLowerCase();if(i in n)t[r/2]=n[i];else throw Error(`Cannot decode unrecognized sequence ${i} as hexadecimal`)}return t}function i(e){let n=``;for(let r=0;r<e.byteLength;r++)n+=t[e[r]];return n}e.fromHex=r,e.toHex=i})),Ke=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.sdkStreamMixin=void 0;let t=We(),n=R(),r=Ge(),i=L(),a=je(),o=`The stream has already been transformed.`;e.sdkStreamMixin=e=>{if(!s(e)&&!(0,a.isReadableStream)(e)){let t=e?.__proto__?.constructor?.name||e;throw Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${t}`)}let c=!1,l=async()=>{if(c)throw Error(o);return c=!0,await(0,t.streamCollector)(e)},u=e=>{if(typeof e.stream!=`function`)throw Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return e.stream()};return Object.assign(e,{transformToByteArray:l,transformToString:async e=>{let t=await l();if(e===`base64`)return(0,n.toBase64)(t);if(e===`hex`)return(0,r.toHex)(t);if(e===void 0||e===`utf8`||e===`utf-8`)return(0,i.toUtf8)(t);if(typeof TextDecoder==`function`)return new TextDecoder(e).decode(t);throw Error(`TextDecoder is not available, please make sure polyfill is provided.`)},transformToWebStream:()=>{if(c)throw Error(o);if(c=!0,s(e))return u(e);if((0,a.isReadableStream)(e))return e;throw Error(`Cannot transform payload to web stream, got ${e}`)}})};let s=e=>typeof Blob==`function`&&e instanceof Blob})),qe=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.sdkStreamMixin=void 0;let t=Ue(),n=De(),r=p(`stream`),i=Ke(),a=`The stream has already been transformed.`;e.sdkStreamMixin=e=>{if(!(e instanceof r.Readable))try{return(0,i.sdkStreamMixin)(e)}catch{let t=e?.__proto__?.constructor?.name||e;throw Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${t}`)}let o=!1,s=async()=>{if(o)throw Error(a);return o=!0,await(0,t.streamCollector)(e)};return Object.assign(e,{transformToByteArray:s,transformToString:async e=>{let t=await s();return e===void 0||Buffer.isEncoding(e)?(0,n.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString(e):new TextDecoder(e).decode(t)},transformToWebStream:()=>{if(o)throw Error(a);if(e.readableFlowing!==null)throw Error(`The stream has been consumed by other callbacks.`);if(typeof r.Readable.toWeb!=`function`)throw Error(`Readable.toWeb() is not supported. Please ensure a polyfill is available.`);return o=!0,r.Readable.toWeb(e)}})}})),Je=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.splitStream=t;async function t(e){return typeof e.stream==`function`&&(e=e.stream()),e.tee()}})),Ye=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.splitStream=i;let t=p(`stream`),n=Je(),r=je();async function i(e){if((0,r.isReadableStream)(e)||(0,r.isBlob)(e))return(0,n.splitStream)(e);let i=new t.PassThrough,a=new t.PassThrough;return e.pipe(i),e.pipe(a),[i,a]}})),Xe=c((e=>{var t=R(),n=L(),r=Ae(),i=Pe(),a=Le(),o=Re(),s=Be(),c=qe(),l=Ye(),u=je();e.Uint8ArrayBlobAdapter=class e extends Uint8Array{static fromString(r,i=`utf-8`){if(typeof r==`string`)return i===`base64`?e.mutate(t.fromBase64(r)):e.mutate(n.fromUtf8(r));throw Error(`Unsupported conversion from ${typeof r} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(e=`utf-8`){return e===`base64`?t.toBase64(this):n.toUtf8(this)}},Object.keys(r).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}),Object.keys(i).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}),Object.keys(a).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})}),Object.keys(o).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})}),Object.keys(s).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})}),Object.keys(c).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})}),Object.keys(l).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})}),Object.keys(u).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})})})),Ze,Qe,$e=s((()=>{Ze=Xe(),Qe=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return Ze.Uint8ArrayBlobAdapter.mutate(e);if(!e)return Ze.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let n=t.streamCollector(e);return Ze.Uint8ArrayBlobAdapter.mutate(await n)}}));function et(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return`%`+e.charCodeAt(0).toString(16).toUpperCase()})}var tt=s((()=>{})),nt,rt=s((()=>{nt=e=>typeof e==`function`?e():e})),it,at=s((()=>{it=(e,t,n,r,i)=>({name:t,namespace:e,traits:n,input:r,output:i})})),ot,st,ct,lt,ut=s((()=>{ot=h(),st=j(),at(),ct=e=>(t,n)=>async r=>{let{response:i}=await t(r),{operationSchema:a}=(0,st.getSmithyContext)(n),[,o,s,c,l,u]=a??[];try{return{response:i,output:await e.protocol.deserializeResponse(it(o,s,c,l,u),{...e,...n},i)}}catch(e){if(Object.defineProperty(e,`$response`,{value:i,enumerable:!1,writable:!1,configurable:!1}),!(`$metadata`in e)){let t=`Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.`;try{e.message+=`
  `+t}catch{!n.logger||n.logger?.constructor?.name===`NoOpLogger`?console.warn(t):n.logger?.warn?.(t)}e.$responseBodyText!==void 0&&e.$response&&(e.$response.body=e.$responseBodyText);try{if(ot.HttpResponse.isInstance(i)){let{headers:t={}}=i,n=Object.entries(t);e.$metadata={httpStatusCode:i.statusCode,requestId:lt(/^x-[\w-]+-request-?id$/,n),extendedRequestId:lt(/^x-[\w-]+-id-2$/,n),cfId:lt(/^x-[\w-]+-cf-id$/,n)}}}catch{}}throw e}},lt=(e,t)=>(t.find(([t])=>t.match(e))||[void 0,void 0])[1]})),dt,ft,pt=s((()=>{dt=j(),at(),ft=e=>(t,n)=>async r=>{let{operationSchema:i}=(0,dt.getSmithyContext)(n),[,a,o,s,c,l]=i??[],u=n.endpointV2?.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint,d=await e.protocol.serializeRequest(it(a,o,s,c,l),r.input,{...e,...n,endpoint:u});return t({...r,request:d})}}));function mt(e){return{applyToStack:t=>{t.add(ft(e),gt),t.add(ct(e),ht),e.protocol.setSerdeContext(e)}}}var ht,gt,_t=s((()=>{ut(),pt(),ht={name:`deserializerMiddleware`,step:`deserialize`,tags:[`DESERIALIZER`],override:!0},gt={name:`serializerMiddleware`,step:`serialize`,tags:[`SERIALIZER`],override:!0}})),vt,yt=s((()=>{vt=class{name;namespace;traits;static assign(e,t){return Object.assign(e,t)}static[Symbol.hasInstance](e){let t=this.prototype.isPrototypeOf(e);return!t&&typeof e==`object`&&e?e.symbol===this.symbol:t}getName(){return this.namespace+`#`+this.name}}})),bt,xt,St=s((()=>{yt(),bt=class e extends vt{static symbol=Symbol.for(`@smithy/lis`);name;traits;valueSchema;symbol=e.symbol},xt=(e,t,n,r)=>vt.assign(new bt,{name:t,namespace:e,traits:n,valueSchema:r})})),Ct,wt,Tt=s((()=>{yt(),Ct=class e extends vt{static symbol=Symbol.for(`@smithy/map`);name;traits;keySchema;valueSchema;symbol=e.symbol},wt=(e,t,n,r,i)=>vt.assign(new Ct,{name:t,namespace:e,traits:n,keySchema:r,valueSchema:i})})),Et,Dt,Ot=s((()=>{yt(),Et=class e extends vt{static symbol=Symbol.for(`@smithy/ope`);name;traits;input;output;symbol=e.symbol},Dt=(e,t,n,r,i)=>vt.assign(new Et,{name:t,namespace:e,traits:n,input:r,output:i})})),kt,At,jt=s((()=>{yt(),kt=class e extends vt{static symbol=Symbol.for(`@smithy/str`);name;traits;memberNames;memberList;symbol=e.symbol},At=(e,t,n,r,i)=>vt.assign(new kt,{name:t,namespace:e,traits:n,memberNames:r,memberList:i})})),Mt,Nt,Pt=s((()=>{yt(),jt(),Mt=class e extends kt{static symbol=Symbol.for(`@smithy/err`);ctor;symbol=e.symbol},Nt=(e,t,n,r,i,a)=>vt.assign(new Mt,{name:t,namespace:e,traits:n,memberNames:r,memberList:i,ctor:null})}));function Ft(e){if(typeof e==`object`)return e;e|=0;let t={},n=0;for(let r of[`httpLabel`,`idempotent`,`idempotencyToken`,`sensitive`,`httpPayload`,`httpResponseCode`,`httpQueryParams`])(e>>n++&1)==1&&(t[r]=1);return t}var It=s((()=>{}));function Lt(e,t){return e instanceof z?Object.assign(e,{memberName:t,_isMemberSchema:!0}):new z(e,t)}var z,Rt,zt,Bt=s((()=>{rt(),It(),z=class e{ref;memberName;static symbol=Symbol.for(`@smithy/nor`);symbol=e.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(t,n){this.ref=t,this.memberName=n;let r=[],i=t,a=t;for(this._isMemberSchema=!1;Rt(i);)r.push(i[1]),i=i[0],a=nt(i),this._isMemberSchema=!0;if(r.length>0){this.memberTraits={};for(let e=r.length-1;e>=0;--e){let t=r[e];Object.assign(this.memberTraits,Ft(t))}}else this.memberTraits=0;if(a instanceof e){let e=this.memberTraits;Object.assign(this,a),this.memberTraits=Object.assign({},e,a.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=n??a.memberName;return}if(this.schema=nt(a),zt(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(a),this.traits=0),this._isMemberSchema&&!n)throw Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){let t=this.prototype.isPrototypeOf(e);return!t&&typeof e==`object`&&e?e.symbol===this.symbol:t}static of(t){let n=nt(t);if(n instanceof e)return n;if(Rt(n)){let[r,i]=n;if(r instanceof e)return Object.assign(r.getMergedTraits(),Ft(i)),r;throw Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new e(n)}getSchema(){let e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){let{name:t}=this;return!e&&t&&t.includes(`#`)?t.split(`#`)[1]:t||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let e=this.getSchema();return typeof e==`number`?e>=64&&e<128:e[0]===1}isMapSchema(){let e=this.getSchema();return typeof e==`number`?e>=128&&e<=255:e[0]===2}isStructSchema(){let e=this.getSchema()[0];return e===3||e===-3||e===4}isUnionSchema(){return this.getSchema()[0]===4}isBlobSchema(){let e=this.getSchema();return e===21||e===42}isTimestampSchema(){let e=this.getSchema();return typeof e==`number`&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()===`unit`}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){let e=e=>(e&4)==4||!!e?.idempotencyToken,{normalizedTraits:t,traits:n,memberTraits:r}=this;return e(t)||e(n)||e(r)}getMergedTraits(){return this.normalizedTraits??={...this.getOwnTraits(),...this.getMemberTraits()}}getMemberTraits(){return Ft(this.memberTraits)}getOwnTraits(){return Ft(this.traits)}getKeySchema(){let[e,t]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!t)throw Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema();return Lt([e?15:n[4]??0,0],`key`)}getValueSchema(){let e=this.getSchema(),[t,n,r]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e==`number`?63&e:e&&typeof e==`object`&&(n||r)?e[3+e[0]]:t?15:void 0;if(i!=null)return Lt([i,0],n?`value`:`member`);throw Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){let t=this.getSchema();if(this.isStructSchema()&&t[4].includes(e)){let n=t[4].indexOf(e),r=t[5][n];return Lt(Rt(r)?r:[r,0],e)}if(this.isDocumentSchema())return Lt([15,0],e);throw Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){let e={};try{for(let[t,n]of this.structIterator())e[t]=n}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(let[e,t]of this.structIterator())if(t.isStreaming()&&t.isStructSchema())return e}return``}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw Error(`@smithy/core/schema - cannot iterate non-struct schema.`);let e=this.getSchema();for(let t=0;t<e[4].length;++t)yield[e[4][t],Lt([e[5][t],0],e[4][t])]}},Rt=e=>Array.isArray(e)&&e.length===2,zt=e=>Array.isArray(e)&&e.length>=5})),Vt,Ht,Ut,Wt=s((()=>{yt(),Vt=class e extends vt{static symbol=Symbol.for(`@smithy/sim`);name;schemaRef;traits;symbol=e.symbol},Ht=(e,t,n,r)=>vt.assign(new Vt,{name:t,namespace:e,traits:r,schemaRef:n}),Ut=(e,t,n,r)=>vt.assign(new Vt,{name:t,namespace:e,traits:n,schemaRef:r})})),Gt,Kt=s((()=>{Gt={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}})),B,qt=s((()=>{B=class e{namespace;schemas;exceptions;static registries=new Map;constructor(e,t=new Map,n=new Map){this.namespace=e,this.schemas=t,this.exceptions=n}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}register(t,n){let r=this.normalizeShapeId(t);e.for(r.split(`#`)[0]).schemas.set(r,n)}getSchema(e){let t=this.normalizeShapeId(e);if(!this.schemas.has(t))throw Error(`@smithy/core/schema - schema not found for ${t}`);return this.schemas.get(t)}registerError(t,n){let r=t,i=e.for(r[1]);i.schemas.set(r[1]+`#`+r[2],r),i.exceptions.set(r,n)}getErrorCtor(t){let n=t;return e.for(n[1]).exceptions.get(n)}getBaseException(){for(let e of this.exceptions.keys())if(Array.isArray(e)){let[,t,n]=e,r=t+`#`+n;if(r.startsWith(`smithy.ts.sdk.synthetic.`)&&r.endsWith(`ServiceException`))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes(`#`)?e:this.namespace+`#`+e}}})),Jt=l({ErrorSchema:()=>Mt,ListSchema:()=>bt,MapSchema:()=>Ct,NormalizedSchema:()=>z,OperationSchema:()=>Et,SCHEMA:()=>Gt,Schema:()=>vt,SimpleSchema:()=>Vt,StructureSchema:()=>kt,TypeRegistry:()=>B,deref:()=>nt,deserializerMiddlewareOption:()=>ht,error:()=>Nt,getSchemaSerdePlugin:()=>mt,isStaticSchema:()=>zt,list:()=>xt,map:()=>wt,op:()=>Dt,operation:()=>it,serializerMiddlewareOption:()=>gt,sim:()=>Ht,simAdapter:()=>Ut,struct:()=>At,translateTraits:()=>Ft}),V=s((()=>{rt(),_t(),St(),Tt(),Ot(),at(),Pt(),Bt(),yt(),Wt(),jt(),Kt(),It(),qt()})),Yt,Xt=s((()=>{Yt=(e,t,n=e=>e)=>e})),Zt,Qt,$t,en,tn,nn,rn,an,on,sn,cn,ln,un,dn,fn,pn,mn,hn,gn,_n,vn,yn,bn,xn,Sn,Cn,wn,Tn,En,Dn,On,kn,An,jn=s((()=>{Zt=e=>{switch(e){case`true`:return!0;case`false`:return!1;default:throw Error(`Unable to parse boolean value "${e}"`)}},Qt=e=>{if(e!=null){if(typeof e==`number`){if((e===0||e===1)&&An.warn(kn(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e==`string`){let t=e.toLowerCase();if((t===`false`||t===`true`)&&An.warn(kn(`Expected boolean, got ${typeof e}: ${e}`)),t===`false`)return!1;if(t===`true`)return!0}if(typeof e==`boolean`)return e;throw TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},$t=e=>{if(e!=null){if(typeof e==`string`){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&An.warn(kn(`Expected number but observed string: ${e}`)),t}if(typeof e==`number`)return e;throw TypeError(`Expected number, got ${typeof e}: ${e}`)}},en=Math.ceil(2**127*(2-2**-23)),tn=e=>{let t=$t(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>en)throw TypeError(`Expected 32-bit float, got ${e}`);return t},nn=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw TypeError(`Expected integer, got ${typeof e}: ${e}`)}},rn=nn,an=e=>cn(e,32),on=e=>cn(e,16),sn=e=>cn(e,8),cn=(e,t)=>{let n=nn(e);if(n!==void 0&&ln(n,t)!==n)throw TypeError(`Expected ${t}-bit integer, got ${e}`);return n},ln=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},un=(e,t)=>{if(e==null)throw t?TypeError(`Expected a non-null value for ${t}`):TypeError(`Expected a non-null value`);return e},dn=e=>{if(e==null)return;if(typeof e==`object`&&!Array.isArray(e))return e;let t=Array.isArray(e)?`array`:typeof e;throw TypeError(`Expected object, got ${t}: ${e}`)},fn=e=>{if(e!=null){if(typeof e==`string`)return e;if([`boolean`,`number`,`bigint`].includes(typeof e))return An.warn(kn(`Expected string, got ${typeof e}: ${e}`)),String(e);throw TypeError(`Expected string, got ${typeof e}: ${e}`)}},pn=e=>{if(e==null)return;let t=dn(e),n=Object.entries(t).filter(([,e])=>e!=null).map(([e])=>e);if(n.length===0)throw TypeError(`Unions must have exactly one non-null member. None were found.`);if(n.length>1)throw TypeError(`Unions must have exactly one non-null member. Keys ${n} were not null.`);return t},mn=e=>$t(typeof e==`string`?vn(e):e),hn=mn,gn=e=>tn(typeof e==`string`?vn(e):e),_n=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,vn=e=>{let t=e.match(_n);if(t===null||t[0].length!==e.length)throw TypeError(`Expected real number, got implicit NaN`);return parseFloat(e)},yn=e=>typeof e==`string`?Cn(e):$t(e),bn=yn,xn=yn,Sn=e=>typeof e==`string`?Cn(e):tn(e),Cn=e=>{switch(e){case`NaN`:return NaN;case`Infinity`:return 1/0;case`-Infinity`:return-1/0;default:throw Error(`Unable to parse float value: ${e}`)}},wn=e=>nn(typeof e==`string`?vn(e):e),Tn=wn,En=e=>an(typeof e==`string`?vn(e):e),Dn=e=>on(typeof e==`string`?vn(e):e),On=e=>sn(typeof e==`string`?vn(e):e),kn=e=>String(TypeError(e).stack||e).split(`
`).slice(0,5).filter(e=>!e.includes(`stackTraceWarning`)).join(`
`),An={warn:console.warn}}));function Mn(e){let t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),a=e.getUTCHours(),o=e.getUTCMinutes(),s=e.getUTCSeconds(),c=i<10?`0${i}`:`${i}`,l=a<10?`0${a}`:`${a}`,u=o<10?`0${o}`:`${o}`,d=s<10?`0${s}`:`${s}`;return`${Nn[r]}, ${c} ${Pn[n]} ${t} ${l}:${u}:${d} GMT`}var Nn,Pn,Fn,In,Ln,Rn,zn,Bn,Vn,Hn,Un,Wn,Gn,Kn,qn,Jn,Yn,Xn,Zn,Qn,$n,er,tr,nr=s((()=>{jn(),Nn=[`Sun`,`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`],Pn=[`Jan`,`Feb`,`Mar`,`Apr`,`May`,`Jun`,`Jul`,`Aug`,`Sep`,`Oct`,`Nov`,`Dec`],Fn=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),In=e=>{if(e==null)return;if(typeof e!=`string`)throw TypeError(`RFC-3339 date-times must be expressed as strings`);let t=Fn.exec(e);if(!t)throw TypeError(`Invalid RFC-3339 date-time value`);let[n,r,i,a,o,s,c,l]=t;return Wn(Dn(tr(r)),Qn(i,`month`,1,12),Qn(a,`day`,1,31),{hours:o,minutes:s,seconds:c,fractionalMilliseconds:l})},Ln=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Rn=e=>{if(e==null)return;if(typeof e!=`string`)throw TypeError(`RFC-3339 date-times must be expressed as strings`);let t=Ln.exec(e);if(!t)throw TypeError(`Invalid RFC-3339 date-time value`);let[n,r,i,a,o,s,c,l,u]=t,d=Wn(Dn(tr(r)),Qn(i,`month`,1,12),Qn(a,`day`,1,31),{hours:o,minutes:s,seconds:c,fractionalMilliseconds:l});return u.toUpperCase()!=`Z`&&d.setTime(d.getTime()-er(u)),d},zn=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Bn=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Vn=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Hn=e=>{if(e==null)return;if(typeof e!=`string`)throw TypeError(`RFC-7231 date-times must be expressed as strings`);let t=zn.exec(e);if(t){let[e,n,r,i,a,o,s,c]=t;return Wn(Dn(tr(i)),Jn(r),Qn(n,`day`,1,31),{hours:a,minutes:o,seconds:s,fractionalMilliseconds:c})}if(t=Bn.exec(e),t){let[e,n,r,i,a,o,s,c]=t;return qn(Wn(Gn(i),Jn(r),Qn(n,`day`,1,31),{hours:a,minutes:o,seconds:s,fractionalMilliseconds:c}))}if(t=Vn.exec(e),t){let[e,n,r,i,a,o,s,c]=t;return Wn(Dn(tr(c)),Jn(n),Qn(r.trimLeft(),`day`,1,31),{hours:i,minutes:a,seconds:o,fractionalMilliseconds:s})}throw TypeError(`Invalid RFC-7231 date-time value`)},Un=e=>{if(e==null)return;let t;if(typeof e==`number`)t=e;else if(typeof e==`string`)t=mn(e);else if(typeof e==`object`&&e.tag===1)t=e.value;else throw TypeError(`Epoch timestamps must be expressed as floating point numbers or their string representation`);if(Number.isNaN(t)||t===1/0||t===-1/0)throw TypeError(`Epoch timestamps must be valid, non-Infinite, non-NaN numerics`);return new Date(Math.round(t*1e3))},Wn=(e,t,n,r)=>{let i=t-1;return Xn(e,i,n),new Date(Date.UTC(e,i,n,Qn(r.hours,`hour`,0,23),Qn(r.minutes,`minute`,0,59),Qn(r.seconds,`seconds`,0,60),$n(r.fractionalMilliseconds)))},Gn=e=>{let t=new Date().getUTCFullYear(),n=Math.floor(t/100)*100+Dn(tr(e));return n<t?n+100:n},Kn=50*365*24*60*60*1e3,qn=e=>e.getTime()-new Date().getTime()>Kn?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Jn=e=>{let t=Pn.indexOf(e);if(t<0)throw TypeError(`Invalid month: ${e}`);return t+1},Yn=[31,28,31,30,31,30,31,31,30,31,30,31],Xn=(e,t,n)=>{let r=Yn[t];if(t===1&&Zn(e)&&(r=29),n>r)throw TypeError(`Invalid day for ${Pn[t]} in ${e}: ${n}`)},Zn=e=>e%4==0&&(e%100!=0||e%400==0),Qn=(e,t,n,r)=>{let i=On(tr(e));if(i<n||i>r)throw TypeError(`${t} must be between ${n} and ${r}, inclusive`);return i},$n=e=>e==null?0:gn(`0.`+e)*1e3,er=e=>{let t=e[0],n=1;if(t==`+`)n=1;else if(t==`-`)n=-1;else throw TypeError(`Offset direction, ${t}, must be "+" or "-"`);let r=Number(e.substring(1,3)),i=Number(e.substring(4,6));return n*(r*60+i)*60*1e3},tr=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)===`0`;)t++;return t===0?e:e.slice(t)}})),rr=l({__addDisposableResource:()=>jr,__assign:()=>Fr,__asyncDelegator:()=>Cr,__asyncGenerator:()=>Sr,__asyncValues:()=>wr,__await:()=>xr,__awaiter:()=>pr,__classPrivateFieldGet:()=>Or,__classPrivateFieldIn:()=>Ar,__classPrivateFieldSet:()=>kr,__createBinding:()=>Ir,__decorate:()=>or,__disposeResources:()=>Mr,__esDecorate:()=>cr,__exportStar:()=>hr,__extends:()=>ir,__generator:()=>mr,__importDefault:()=>Dr,__importStar:()=>Er,__makeTemplateObject:()=>Tr,__metadata:()=>fr,__param:()=>sr,__propKey:()=>ur,__read:()=>_r,__rest:()=>ar,__rewriteRelativeImportExtension:()=>Nr,__runInitializers:()=>lr,__setFunctionName:()=>dr,__spread:()=>vr,__spreadArray:()=>br,__spreadArrays:()=>yr,__values:()=>gr,default:()=>Br});function ir(e,t){if(typeof t!=`function`&&t!==null)throw TypeError(`Class extends value `+String(t)+` is not a constructor or null`);Pr(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function ar(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function or(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function sr(e,t){return function(n,r){t(n,r,e)}}function cr(e,t,n,r,i,a){function o(e){if(e!==void 0&&typeof e!=`function`)throw TypeError(`Function expected`);return e}for(var s=r.kind,c=s===`getter`?`get`:s===`setter`?`set`:`value`,l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d,f=!1,p=n.length-1;p>=0;p--){var m={};for(var h in r)m[h]=h===`access`?{}:r[h];for(var h in r.access)m.access[h]=r.access[h];m.addInitializer=function(e){if(f)throw TypeError(`Cannot add initializers after decoration has completed`);a.push(o(e||null))};var g=(0,n[p])(s===`accessor`?{get:u.get,set:u.set}:u[c],m);if(s===`accessor`){if(g===void 0)continue;if(typeof g!=`object`||!g)throw TypeError(`Object expected`);(d=o(g.get))&&(u.get=d),(d=o(g.set))&&(u.set=d),(d=o(g.init))&&i.unshift(d)}else (d=o(g))&&(s===`field`?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,r.name,u),f=!0}function lr(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function ur(e){return typeof e==`symbol`?e:`${e}`}function dr(e,t,n){return typeof t==`symbol`&&(t=t.description?`[${t.description}]`:``),Object.defineProperty(e,`name`,{configurable:!0,value:n?`${n} ${t}`:t})}function fr(e,t){if(typeof Reflect==`object`&&typeof Reflect.metadata==`function`)return Reflect.metadata(e,t)}function pr(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})}function mr(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o=Object.create((typeof Iterator==`function`?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(s){if(r)throw TypeError(`Generator is already executing.`);for(;o&&(o=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function hr(e,t){for(var n in e)n!==`default`&&!Object.prototype.hasOwnProperty.call(t,n)&&Ir(t,e,n)}function gr(e){var t=typeof Symbol==`function`&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==`number`)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?`Object is not iterable.`:`Symbol.iterator is not defined.`)}function _r(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function vr(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_r(arguments[t]));return e}function yr(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function br(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function xr(e){return this instanceof xr?(this.v=e,this):new xr(e)}function Sr(e,t,n){if(!Symbol.asyncIterator)throw TypeError(`Symbol.asyncIterator is not defined.`);var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator==`function`?AsyncIterator:Object).prototype),s(`next`),s(`throw`),s(`return`,o),i[Symbol.asyncIterator]=function(){return this},i;function o(e){return function(t){return Promise.resolve(t).then(e,d)}}function s(e,t){r[e]&&(i[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||c(e,t)})},t&&(i[e]=t(i[e])))}function c(e,t){try{l(r[e](t))}catch(e){f(a[0][3],e)}}function l(e){e.value instanceof xr?Promise.resolve(e.value.v).then(u,d):f(a[0][2],e)}function u(e){c(`next`,e)}function d(e){c(`throw`,e)}function f(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}}function Cr(e){var t,n;return t={},r(`next`),r(`throw`,function(e){throw e}),r(`return`),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:xr(e[r](t)),done:!1}:i?i(t):t}:i}}function wr(e){if(!Symbol.asyncIterator)throw TypeError(`Symbol.asyncIterator is not defined.`);var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof gr==`function`?gr(e):e[Symbol.iterator](),n={},r(`next`),r(`throw`),r(`return`),n[Symbol.asyncIterator]=function(){return this},n);function r(t){n[t]=e[t]&&function(n){return new Promise(function(r,a){n=e[t](n),i(r,a,n.done,n.value)})}}function i(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}}function Tr(e,t){return Object.defineProperty?Object.defineProperty(e,`raw`,{value:t}):e.raw=t,e}function Er(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Rr(e),r=0;r<n.length;r++)n[r]!==`default`&&Ir(t,e,n[r]);return Lr(t,e),t}function Dr(e){return e&&e.__esModule?e:{default:e}}function Or(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)}function kr(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n}function Ar(e,t){if(t===null||typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Cannot use 'in' operator on non-object`);return typeof e==`function`?t===e:e.has(t)}function jr(e,t,n){if(t!=null){if(typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Object expected.`);var r,i;if(n){if(!Symbol.asyncDispose)throw TypeError(`Symbol.asyncDispose is not defined.`);r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw TypeError(`Symbol.dispose is not defined.`);r=t[Symbol.dispose],n&&(i=r)}if(typeof r!=`function`)throw TypeError(`Object not disposable.`);i&&(r=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}function Mr(e){function t(t){e.error=e.hasError?new zr(t,e.error,`An error was suppressed during disposal.`):t,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(i,function(e){return t(e),i()})}else r|=1}catch(e){t(e)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function Nr(e,t){return typeof e==`string`&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,r,i,a){return n?t?`.jsx`:`.js`:r&&(!i||!a)?e:r+i+`.`+a.toLowerCase()+`js`}):e}var Pr,Fr,Ir,Lr,Rr,zr,Br,Vr=s((()=>{Pr=function(e,t){return Pr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Pr(e,t)},Fr=function(){return Fr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Fr.apply(this,arguments)},Ir=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Lr=Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t},Rr=function(e){return Rr=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},Rr(e)},zr=typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r},Br={__extends:ir,__assign:Fr,__rest:ar,__decorate:or,__param:sr,__esDecorate:cr,__runInitializers:lr,__propKey:ur,__setFunctionName:dr,__metadata:fr,__awaiter:pr,__generator:mr,__createBinding:Ir,__exportStar:hr,__values:gr,__read:_r,__spread:vr,__spreadArrays:yr,__spreadArray:br,__await:xr,__asyncGenerator:Sr,__asyncDelegator:Cr,__asyncValues:wr,__makeTemplateObject:Tr,__importStar:Er,__importDefault:Dr,__classPrivateFieldGet:Or,__classPrivateFieldSet:kr,__classPrivateFieldIn:Ar,__addDisposableResource:jr,__disposeResources:Mr,__rewriteRelativeImportExtension:Nr}})),Hr=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.randomUUID=void 0;let t=(Vr(),f(rr)).__importDefault(p(`crypto`));e.randomUUID=t.default.randomUUID.bind(t.default)})),Ur=c((e=>{var t=Hr();let n=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,`0`));e.v4=()=>{if(t.randomUUID)return t.randomUUID();let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,n[e[0]]+n[e[1]]+n[e[2]]+n[e[3]]+`-`+n[e[4]]+n[e[5]]+`-`+n[e[6]]+n[e[7]]+`-`+n[e[8]]+n[e[9]]+`-`+n[e[10]]+n[e[11]]+n[e[12]]+n[e[13]]+n[e[14]]+n[e[15]]}})),Wr,Gr=s((()=>{Wr=Ur()})),Kr,qr=s((()=>{Kr=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})},Kr.from=e=>e&&typeof e==`object`&&(e instanceof Kr||`deserializeJSON`in e)?e:typeof e==`string`||Object.getPrototypeOf(e)===String.prototype?Kr(String(e)):Kr(JSON.stringify(e)),Kr.fromObject=Kr.from}));function Jr(e){return(e.includes(`,`)||e.includes(`"`))&&(e=`"${e.replace(/"/g,`\\"`)}"`),e}var Yr=s((()=>{}));function Xr(e,t,n){let r=Number(e);if(r<t||r>n)throw Error(`Value ${r} out of range [${t}, ${n}]`)}var Zr,Qr,$r,ei,ti,ni,ri,ii,ai,oi,si,ci,li,ui=s((()=>{Zr=`(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?`,Qr=`(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)`,$r=`(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?`,ei=`(\\d?\\d)`,ti=`(\\d{4})`,ni=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),ri=RegExp(`^${Zr}, ${ei} ${Qr} ${ti} ${$r} GMT$`),ii=RegExp(`^${Zr}, ${ei}-${Qr}-(\\d\\d) ${$r} GMT$`),ai=RegExp(`^${Zr} ${Qr} ( [1-9]|\\d\\d) ${$r} ${ti}$`),oi=[`Jan`,`Feb`,`Mar`,`Apr`,`May`,`Jun`,`Jul`,`Aug`,`Sep`,`Oct`,`Nov`,`Dec`],si=e=>{if(e==null)return;let t=NaN;if(typeof e==`number`)t=e;else if(typeof e==`string`){if(!/^-?\d*\.?\d+$/.test(e))throw TypeError(`parseEpochTimestamp - numeric string invalid.`);t=Number.parseFloat(e)}else typeof e==`object`&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw TypeError(`Epoch timestamps must be valid finite numbers.`);return new Date(Math.round(t*1e3))},ci=e=>{if(e==null)return;if(typeof e!=`string`)throw TypeError(`RFC3339 timestamps must be strings`);let t=ni.exec(e);if(!t)throw TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,n,r,i,a,o,s,,c,l]=t;Xr(r,1,12),Xr(i,1,31),Xr(a,0,23),Xr(o,0,59),Xr(s,0,60);let u=new Date(Date.UTC(Number(n),Number(r)-1,Number(i),Number(a),Number(o),Number(s),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(u.setUTCFullYear(Number(n)),l.toUpperCase()!=`Z`){let[,e,t,n]=/([+-])(\d\d):(\d\d)/.exec(l)||[void 0,`+`,0,0],r=e===`-`?1:-1;u.setTime(u.getTime()+r*(Number(t)*60*60*1e3+Number(n)*60*1e3))}return u},li=e=>{if(e==null)return;if(typeof e!=`string`)throw TypeError(`RFC7231 timestamps must be strings.`);let t,n,r,i,a,o,s,c;if((c=ri.exec(e))?[,t,n,r,i,a,o,s]=c:(c=ii.exec(e))?([,t,n,r,i,a,o,s]=c,r=(Number(r)+1900).toString()):(c=ai.exec(e))&&([,n,t,i,a,o,s,r]=c),r&&o){let e=Date.UTC(Number(r),oi.indexOf(n),Number(t),Number(i),Number(a),Number(o),s?Math.round(parseFloat(`0.${s}`)*1e3):0);Xr(t,1,31),Xr(i,0,23),Xr(a,0,59),Xr(o,0,60);let c=new Date(e);return c.setUTCFullYear(Number(r)),c}throw TypeError(`Invalid RFC7231 date-time value ${e}.`)}}));function di(e,t,n){if(n<=0||!Number.isInteger(n))throw Error(`Invalid number of delimiters (`+n+`) for splitEvery.`);let r=e.split(t);if(n===1)return r;let i=[],a=``;for(let e=0;e<r.length;e++)a===``?a=r[e]:a+=t+r[e],(e+1)%n===0&&(i.push(a),a=``);return a!==``&&i.push(a),i}var fi=s((()=>{})),pi,mi=s((()=>{pi=e=>{let t=e.length,n=[],r=!1,i,a=0;for(let o=0;o<t;++o){let t=e[o];switch(t){case`"`:i!==`\\`&&(r=!r);break;case`,`:r||(n.push(e.slice(a,o)),a=o+1);break;default:}i=t}return n.push(e.slice(a)),n.map(e=>{e=e.trim();let t=e.length;return t<2?e:(e[0]===`"`&&e[t-1]===`"`&&(e=e.slice(1,t-1)),e.replace(/\\"/g,`"`))})}}));function hi(e){return new _i(String(e),`bigDecimal`)}var gi,_i,vi=s((()=>{gi=/^-?\d*(\.\d+)?$/,_i=class e{string;type;constructor(e,t){if(this.string=e,this.type=t,!gi.test(e))throw Error(`@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".`)}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!=`object`)return!1;let n=t;return e.prototype.isPrototypeOf(t)||n.type===`bigDecimal`&&gi.test(n.string)}}})),yi=l({LazyJsonString:()=>Kr,NumericValue:()=>_i,_parseEpochTimestamp:()=>si,_parseRfc3339DateTimeWithOffset:()=>ci,_parseRfc7231DateTime:()=>li,copyDocumentWithTransform:()=>Yt,dateToUtcString:()=>Mn,expectBoolean:()=>Qt,expectByte:()=>sn,expectFloat32:()=>tn,expectInt:()=>rn,expectInt32:()=>an,expectLong:()=>nn,expectNonNull:()=>un,expectNumber:()=>$t,expectObject:()=>dn,expectShort:()=>on,expectString:()=>fn,expectUnion:()=>pn,generateIdempotencyToken:()=>Wr.v4,handleFloat:()=>bn,limitedParseDouble:()=>yn,limitedParseFloat:()=>xn,limitedParseFloat32:()=>Sn,logger:()=>An,nv:()=>hi,parseBoolean:()=>Zt,parseEpochTimestamp:()=>Un,parseRfc3339DateTime:()=>In,parseRfc3339DateTimeWithOffset:()=>Rn,parseRfc7231DateTime:()=>Hn,quoteHeader:()=>Jr,splitEvery:()=>di,splitHeader:()=>pi,strictParseByte:()=>On,strictParseDouble:()=>mn,strictParseFloat:()=>hn,strictParseFloat32:()=>gn,strictParseInt:()=>Tn,strictParseInt32:()=>En,strictParseLong:()=>wn,strictParseShort:()=>Dn}),bi=s((()=>{Xt(),nr(),Gr(),qr(),jn(),Yr(),ui(),fi(),mi(),vi()})),xi,Si=s((()=>{xi=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}})),Ci,wi,Ti=s((()=>{Ci=L(),wi=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:e,serializer:t,deserializer:n,serdeContext:r,defaultContentType:i}){this.marshaller=e,this.serializer=t,this.deserializer=n,this.serdeContext=r,this.defaultContentType=i}async serializeEventStream({eventStream:e,requestSchema:t,initialRequest:n}){let r=this.marshaller,i=t.getEventStreamMember(),a=t.getMemberSchema(i),o=this.serializer,s=this.defaultContentType,c=Symbol(`initialRequestMarker`),l={async*[Symbol.asyncIterator](){if(n){let e={":event-type":{type:`string`,value:`initial-request`},":message-type":{type:`string`,value:`event`},":content-type":{type:`string`,value:s}};o.write(t,n);let r=o.flush();yield{[c]:!0,headers:e,body:r}}for await(let t of e)yield t}};return r.serialize(l,e=>{if(e[c])return{headers:e.headers,body:e.body};let t=Object.keys(e).find(e=>e!==`__type`)??``,{additionalHeaders:n,body:r,eventType:i,explicitPayloadContentType:o}=this.writeEventBody(t,a,e);return{headers:{":event-type":{type:`string`,value:i},":message-type":{type:`string`,value:`event`},":content-type":{type:`string`,value:o??s},...n},body:r}})}async deserializeEventStream({response:e,responseSchema:t,initialResponseContainer:n}){let r=this.marshaller,i=t.getEventStreamMember(),a=t.getMemberSchema(i).getMemberSchemas(),o=Symbol(`initialResponseMarker`),s=r.deserialize(e.body,async e=>{let n=Object.keys(e).find(e=>e!==`__type`)??``,r=e[n].body;if(n===`initial-response`){let e=await this.deserializer.read(t,r);return delete e[i],{[o]:!0,...e}}else if(n in a){let t=a[n];if(t.isStructSchema()){let i={},a=!1;for(let[o,s]of t.structIterator()){let{eventHeader:t,eventPayload:c}=s.getMergedTraits();if(a||=!!(t||c),c)s.isBlobSchema()?i[o]=r:s.isStringSchema()?i[o]=(this.serdeContext?.utf8Encoder??Ci.toUtf8)(r):s.isStructSchema()&&(i[o]=await this.deserializer.read(s,r));else if(t){let t=e[n].headers[o]?.value;t!=null&&(s.isNumericSchema()?t&&typeof t==`object`&&`bytes`in t?i[o]=BigInt(t.toString()):i[o]=Number(t):i[o]=t)}}if(a)return{[n]:i}}return{[n]:await this.deserializer.read(t,r)}}else return{$unknown:e}}),c=s[Symbol.asyncIterator](),l=await c.next();if(l.done)return s;if(l.value?.[o]){if(!t)throw Error(`@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.`);for(let[e,t]of Object.entries(l.value))n[e]=t}return{async*[Symbol.asyncIterator](){for(l?.value?.[o]||(yield l.value);;){let{done:e,value:t}=await c.next();if(e)break;yield t}}}}writeEventBody(e,t,n){let r=this.serializer,i=e,a=null,o,s=t.getSchema()[4].includes(e),c={};if(s){let i=t.getMemberSchema(e);if(i.isStructSchema()){for(let[t,r]of i.structIterator()){let{eventHeader:i,eventPayload:o}=r.getMergedTraits();if(o)a=t;else if(i){let i=n[e][t],a=`binary`;r.isNumericSchema()?a=(-2)**31<=i&&i<=2**31-1?`integer`:`long`:r.isTimestampSchema()?a=`timestamp`:r.isStringSchema()?a=`string`:r.isBooleanSchema()&&(a=`boolean`),i!=null&&(c[t]={type:a,value:i},delete n[e][t])}}if(a!==null){let t=i.getMemberSchema(a);t.isBlobSchema()?o=`application/octet-stream`:t.isStringSchema()&&(o=`text/plain`),r.write(t,n[e][a])}else r.write(i,n[e])}else throw Error(`@smithy/core/event-streams - non-struct member not supported in event stream union.`)}else{let[t,a]=n[e];i=t,r.write(15,a)}let l=r.flush();return{body:typeof l==`string`?(this.serdeContext?.utf8Decoder??Ci.fromUtf8)(l):l,eventType:i,explicitPayloadContentType:o,additionalHeaders:c}}}})),Ei=l({EventStreamSerde:()=>wi}),Di=s((()=>{Ti()})),Oi,ki,Ai=s((()=>{V(),Oi=h(),Si(),ki=class extends xi{options;constructor(e){super(),this.options=e}getRequestType(){return Oi.HttpRequest}getResponseType(){return Oi.HttpResponse}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,t){if(`url`in t){e.protocol=t.url.protocol,e.hostname=t.url.hostname,e.port=t.url.port?Number(t.url.port):void 0,e.path=t.url.pathname,e.fragment=t.url.hash||void 0,e.username=t.url.username||void 0,e.password=t.url.password||void 0,e.query||={};for(let[n,r]of t.url.searchParams.entries())e.query[n]=r;return e}else return e.protocol=t.protocol,e.hostname=t.hostname,e.port=t.port?Number(t.port):void 0,e.path=t.path,e.query={...t.query},e}setHostPrefix(e,t,n){let r=z.of(t.input),i=Ft(t.traits??{});if(i.endpoint){let t=i.endpoint?.[0];if(typeof t==`string`){let i=[...r.structIterator()].filter(([,e])=>e.getMergedTraits().hostLabel);for(let[e]of i){let r=n[e];if(typeof r!=`string`)throw Error(`@smithy/core/schema - ${e} in input must be a string as hostLabel.`);t=t.replace(`{${e}}`,r)}e.hostname=t+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers[`x-amzn-requestid`]??e.headers[`x-amzn-request-id`]??e.headers[`x-amz-request-id`],extendedRequestId:e.headers[`x-amz-id-2`],cfId:e.headers[`x-amz-cf-id`]}}async serializeEventStream({eventStream:e,requestSchema:t,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:t,initialRequest:n})}async deserializeEventStream({response:e,responseSchema:t,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:t,initialResponseContainer:n})}async loadEventStreamCapability(){let{EventStreamSerde:e}=await Promise.resolve().then(()=>(Di(),Ei));return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,t,n,r,i){return[]}getEventStreamMarshaller(){let e=this.serdeContext;if(!e.eventStreamMarshaller)throw Error(`@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.`);return e.eventStreamMarshaller}}})),ji,Mi,Ni,Pi=s((()=>{V(),bi(),ji=h(),Mi=Xe(),$e(),tt(),Ai(),Ni=class extends ki{async serializeRequest(e,t,n){let r={...t??{}},i=this.serializer,a={},o={},s=await n.endpoint(),c=z.of(e?.input),l=c.getSchema(),u=!1,d,f=new ji.HttpRequest({protocol:``,hostname:``,port:void 0,path:``,fragment:void 0,query:a,headers:o,body:void 0});if(s){this.updateServiceEndpoint(f,s),this.setHostPrefix(f,e,r);let t=Ft(e.traits);if(t.http){f.method=t.http[0];let[e,n]=t.http[1].split(`?`);f.path==`/`?f.path=e:f.path+=e;let r=new URLSearchParams(n??``);Object.assign(a,Object.fromEntries(r))}}for(let[e,t]of c.structIterator()){let n=t.getMergedTraits()??{},s=r[e];if(!(s==null&&!t.isIdempotencyToken()))if(n.httpPayload)t.isStreaming()?t.isStructSchema()?r[e]&&(d=await this.serializeEventStream({eventStream:r[e],requestSchema:c})):d=s:(i.write(t,s),d=i.flush()),delete r[e];else if(n.httpLabel){i.write(t,s);let n=i.flush();f.path.includes(`{${e}+}`)?f.path=f.path.replace(`{${e}+}`,n.split(`/`).map(et).join(`/`)):f.path.includes(`{${e}}`)&&(f.path=f.path.replace(`{${e}}`,et(n))),delete r[e]}else if(n.httpHeader)i.write(t,s),o[n.httpHeader.toLowerCase()]=String(i.flush()),delete r[e];else if(typeof n.httpPrefixHeaders==`string`){for(let[e,r]of Object.entries(s)){let a=n.httpPrefixHeaders+e;i.write([t.getValueSchema(),{httpHeader:a}],r),o[a.toLowerCase()]=i.flush()}delete r[e]}else n.httpQuery||n.httpQueryParams?(this.serializeQuery(t,s,a),delete r[e]):u=!0}return u&&r&&(i.write(l,r),d=i.flush()),f.headers=o,f.query=a,f.body=d,f}serializeQuery(e,t,n){let r=this.serializer,i=e.getMergedTraits();if(i.httpQueryParams){for(let[r,a]of Object.entries(t))if(!(r in n)){let t=e.getValueSchema();Object.assign(t.getMergedTraits(),{...i,httpQuery:r,httpQueryParams:void 0}),this.serializeQuery(t,a,n)}return}if(e.isListSchema()){let a=!!e.getMergedTraits().sparse,o=[];for(let n of t){r.write([e.getValueSchema(),i],n);let t=r.flush();(a||t!==void 0)&&o.push(t)}n[i.httpQuery]=o}else r.write([e,i],t),n[i.httpQuery]=r.flush()}async deserializeResponse(e,t,n){let r=this.deserializer,i=z.of(e.output),a={};if(n.statusCode>=300){let i=await Qe(n.body,t);throw i.byteLength>0&&Object.assign(a,await r.read(15,i)),await this.handleError(e,t,n,a,this.deserializeMetadata(n)),Error(`@smithy/core/protocols - HTTP Protocol error handler failed to throw.`)}for(let e in n.headers){let t=n.headers[e];delete n.headers[e],n.headers[e.toLowerCase()]=t}let o=await this.deserializeHttpMessage(i,t,n,a);if(o.length){let e=await Qe(n.body,t);if(e.byteLength>0){let t=await r.read(i,e);for(let e of o)a[e]=t[e]}}else o.discardResponseBody&&await Qe(n.body,t);return a.$metadata=this.deserializeMetadata(n),a}async deserializeHttpMessage(e,t,n,r,i){let a;a=r instanceof Set?i:r;let o=!0,s=this.deserializer,c=z.of(e),l=[];for(let[e,r]of c.structIterator()){let i=r.getMemberTraits();if(i.httpPayload){if(o=!1,r.isStreaming())r.isStructSchema()?a[e]=await this.deserializeEventStream({response:n,responseSchema:c}):a[e]=(0,Mi.sdkStreamMixin)(n.body);else if(n.body){let i=await Qe(n.body,t);i.byteLength>0&&(a[e]=await s.read(r,i))}}else if(i.httpHeader){let t=String(i.httpHeader).toLowerCase(),o=n.headers[t];if(o!=null)if(r.isListSchema()){let n=r.getValueSchema();n.getMergedTraits().httpHeader=t;let i;i=n.isTimestampSchema()&&n.getSchema()===4?di(o,`,`,2):pi(o);let c=[];for(let e of i)c.push(await s.read(n,e.trim()));a[e]=c}else a[e]=await s.read(r,o)}else if(i.httpPrefixHeaders!==void 0){a[e]={};for(let[t,o]of Object.entries(n.headers))if(t.startsWith(i.httpPrefixHeaders)){let n=r.getValueSchema();n.getMergedTraits().httpHeader=t,a[e][t.slice(i.httpPrefixHeaders.length)]=await s.read(n,o)}}else i.httpResponseCode?a[e]=n.statusCode:l.push(e)}return l.discardResponseBody=o,l}}})),Fi,Ii,Li=s((()=>{V(),Fi=h(),$e(),Ai(),Ii=class extends ki{async serializeRequest(e,t,n){let r=this.serializer,i={},a={},o=await n.endpoint(),s=z.of(e?.input),c=s.getSchema(),l,u=new Fi.HttpRequest({protocol:``,hostname:``,port:void 0,path:`/`,fragment:void 0,query:i,headers:a,body:void 0});o&&(this.updateServiceEndpoint(u,o),this.setHostPrefix(u,e,t));let d={...t};if(t){let e=s.getEventStreamMember();if(e){if(d[e]){let t={};for(let[n,i]of s.structIterator())n!==e&&d[n]&&(r.write(i,d[n]),t[n]=r.flush());l=await this.serializeEventStream({eventStream:d[e],requestSchema:s,initialRequest:t})}}else r.write(c,d),l=r.flush()}return u.headers=a,u.query=i,u.body=l,u.method=`POST`,u}async deserializeResponse(e,t,n){let r=this.deserializer,i=z.of(e.output),a={};if(n.statusCode>=300){let i=await Qe(n.body,t);throw i.byteLength>0&&Object.assign(a,await r.read(15,i)),await this.handleError(e,t,n,a,this.deserializeMetadata(n)),Error(`@smithy/core/protocols - RPC Protocol error handler failed to throw.`)}for(let e in n.headers){let t=n.headers[e];delete n.headers[e],n.headers[e.toLowerCase()]=t}let o=i.getEventStreamMember();if(o)a[o]=await this.deserializeEventStream({response:n,responseSchema:i,initialResponseContainer:a});else{let e=await Qe(n.body,t);e.byteLength>0&&Object.assign(a,await r.read(i,e))}return a.$metadata=this.deserializeMetadata(n),a}}})),Ri,zi=s((()=>{tt(),Ri=(e,t,n,r,i,a)=>{if(t!=null&&t[n]!==void 0){let t=r();if(t.length<=0)throw Error(`Empty value provided for input HTTP label: `+n+`.`);e=e.replace(i,a?t.split(`/`).map(e=>et(e)).join(`/`):et(t))}else throw Error(`No value provided for input HTTP label: `+n+`.`);return e}}));function Bi(e,t){return new Hi(e,t)}var Vi,Hi,Ui=s((()=>{Vi=h(),zi(),Hi=class{input;context;query={};method=``;headers={};path=``;body=null;hostname=``;resolvePathStack=[];constructor(e,t){this.input=e,this.context=t}async build(){let{hostname:e,protocol:t=`https`,port:n,path:r}=await this.context.endpoint();this.path=r;for(let e of this.resolvePathStack)e(this.path);return new Vi.HttpRequest({protocol:t,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(t=>{this.path=`${t?.endsWith(`/`)?t.slice(0,-1):t||``}`+e}),this}p(e,t,n,r){return this.resolvePathStack.push(i=>{this.path=Ri(i,this.input,e,t,n,r)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}}));function Wi(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();let{httpLabel:n,httpPrefixHeaders:r,httpHeader:i,httpQuery:a}=e.getMergedTraits();return(t.httpBindings?typeof r==`string`||i?6:a||n?5:void 0:void 0)??t.timestampFormat.default}var Gi=s((()=>{})),Ki,qi,Ji,Yi=s((()=>{V(),bi(),Ki=R(),qi=L(),Si(),Gi(),Ji=class extends xi{settings;constructor(e){super(),this.settings=e}read(e,t){let n=z.of(e);if(n.isListSchema())return pi(t).map(e=>this.read(n.getValueSchema(),e));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??Ki.fromBase64)(t);if(n.isTimestampSchema())switch(Wi(n,this.settings)){case 5:return ci(t);case 6:return li(t);case 7:return si(t);default:return console.warn(`Missing timestamp format, parsing value with Date constructor:`,t),new Date(t)}if(n.isStringSchema()){let e=n.getMergedTraits().mediaType,r=t;if(e)return n.getMergedTraits().httpHeader&&(r=this.base64ToUtf8(r)),(e===`application/json`||e.endsWith(`+json`))&&(r=Kr.from(r)),r}return n.isNumericSchema()?Number(t):n.isBigIntegerSchema()?BigInt(t):n.isBigDecimalSchema()?new _i(t,`bigDecimal`):n.isBooleanSchema()?String(t).toLowerCase()===`true`:t}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??qi.toUtf8)((this.serdeContext?.base64Decoder??Ki.fromBase64)(e))}}})),Xi,Zi,Qi=s((()=>{V(),Xi=L(),Si(),Yi(),Zi=class extends xi{codecDeserializer;stringDeserializer;constructor(e,t){super(),this.codecDeserializer=e,this.stringDeserializer=new Ji(t)}setSerdeContext(e){this.stringDeserializer.setSerdeContext(e),this.codecDeserializer.setSerdeContext(e),this.serdeContext=e}read(e,t){let n=z.of(e),r=n.getMergedTraits(),i=this.serdeContext?.utf8Encoder??Xi.toUtf8;if(r.httpHeader||r.httpResponseCode)return this.stringDeserializer.read(n,i(t));if(r.httpPayload){if(n.isBlobSchema()){let e=this.serdeContext?.utf8Decoder??Xi.fromUtf8;return typeof t==`string`?e(t):t}else if(n.isStringSchema())return`byteLength`in t?i(t):t}return this.codecDeserializer.read(n,t)}}})),$i,ea,ta=s((()=>{V(),bi(),$i=R(),Si(),Gi(),ea=class extends xi{settings;stringBuffer=``;constructor(e){super(),this.settings=e}write(e,t){let n=z.of(e);switch(typeof t){case`object`:if(t===null){this.stringBuffer=`null`;return}if(n.isTimestampSchema()){if(!(t instanceof Date))throw Error(`@smithy/core/protocols - received non-Date value ${t} when schema expected Date in ${n.getName(!0)}`);switch(Wi(n,this.settings)){case 5:this.stringBuffer=t.toISOString().replace(`.000Z`,`Z`);break;case 6:this.stringBuffer=Mn(t);break;case 7:this.stringBuffer=String(t.getTime()/1e3);break;default:console.warn(`Missing timestamp format, using epoch seconds`,t),this.stringBuffer=String(t.getTime()/1e3)}return}if(n.isBlobSchema()&&`byteLength`in t){this.stringBuffer=(this.serdeContext?.base64Encoder??$i.toBase64)(t);return}if(n.isListSchema()&&Array.isArray(t)){let e=``;for(let r of t){this.write([n.getValueSchema(),n.getMergedTraits()],r);let t=this.flush(),i=n.getValueSchema().isTimestampSchema()?t:Jr(t);e!==``&&(e+=`, `),e+=i}this.stringBuffer=e;return}this.stringBuffer=JSON.stringify(t,null,2);break;case`string`:let e=n.getMergedTraits().mediaType,r=t;if(e&&((e===`application/json`||e.endsWith(`+json`))&&(r=Kr.from(r)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??$i.toBase64)(r.toString());return}this.stringBuffer=t;break;default:n.isIdempotencyToken()?this.stringBuffer=(0,Wr.v4)():this.stringBuffer=String(t)}}flush(){let e=this.stringBuffer;return this.stringBuffer=``,e}}})),na,ra=s((()=>{V(),ta(),na=class{codecSerializer;stringSerializer;buffer;constructor(e,t,n=new ea(t)){this.codecSerializer=e,this.stringSerializer=n}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,t){let n=z.of(e),r=n.getMergedTraits();if(r.httpHeader||r.httpLabel||r.httpQuery){this.stringSerializer.write(n,t),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,t)}flush(){if(this.buffer!==void 0){let e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}})),ia=l({FromStringShapeDeserializer:()=>Ji,HttpBindingProtocol:()=>Ni,HttpInterceptingShapeDeserializer:()=>Zi,HttpInterceptingShapeSerializer:()=>na,HttpProtocol:()=>ki,RequestBuilder:()=>Hi,RpcProtocol:()=>Ii,SerdeContext:()=>xi,ToStringShapeSerializer:()=>ea,collectBody:()=>Qe,determineTimestampFormat:()=>Wi,extendedEncodeURIComponent:()=>et,requestBuilder:()=>Bi,resolvedPath:()=>Ri}),aa=s((()=>{$e(),tt(),Pi(),Ai(),Li(),Ui(),zi(),Yi(),Qi(),ra(),ta(),Gi(),Si()})),oa=s((()=>{aa()}));function sa(e,t,n){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=n}var ca=s((()=>{})),la,ua=s((()=>{la=class{authSchemes=new Map;constructor(e){for(let[t,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(t,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}})),da,fa,pa,ma=s((()=>{da=h(),fa=m(),pa=class{async sign(e,t,n){if(!n)throw Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!t.apiKey)throw Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let r=da.HttpRequest.clone(e);if(n.in===fa.HttpApiKeyAuthLocation.QUERY)r.query[n.name]=t.apiKey;else if(n.in===fa.HttpApiKeyAuthLocation.HEADER)r.headers[n.name]=n.scheme?`${n.scheme} ${t.apiKey}`:t.apiKey;else throw Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return r}}})),ha,ga,_a=s((()=>{ha=h(),ga=class{async sign(e,t,n){let r=ha.HttpRequest.clone(e);if(!t.token)throw Error("request could not be signed with `token` since the `token` is not defined");return r.headers.Authorization=`Bearer ${t.token}`,r}}})),va,ya=s((()=>{va=class{async sign(e,t,n){return e}}})),ba=s((()=>{ma(),_a(),ya()})),xa,Sa,Ca,wa,Ta,Ea=s((()=>{xa=e=>function(t){return wa(t)&&t.expiration.getTime()-Date.now()<e},Sa=3e5,Ca=xa(Sa),wa=e=>e.expiration!==void 0,Ta=(e,t,n)=>{if(e===void 0)return;let r=typeof e==`function`?e:async()=>Promise.resolve(e),i,a,o,s=!1,c=async e=>{a||=r(e);try{i=await a,o=!0,s=!1}finally{a=void 0}return i};return t===void 0?async e=>((!o||e?.forceRefresh)&&(i=await c(e)),i):async e=>((!o||e?.forceRefresh)&&(i=await c(e)),s?i:n(i)?(t(i)&&await c(e),i):(s=!0,i))}})),Da=s((()=>{ua(),ba(),Ea()})),Oa=l({DefaultIdentityProviderConfig:()=>la,EXPIRATION_MS:()=>Sa,HttpApiKeyAuthSigner:()=>pa,HttpBearerAuthSigner:()=>ga,NoAuthSigner:()=>va,createIsIdentityExpiredFunction:()=>xa,createPaginator:()=>Se,doesIdentityRequireRefresh:()=>wa,getHttpAuthSchemeEndpointRuleSetPlugin:()=>oe,getHttpAuthSchemePlugin:()=>le,getHttpSigningPlugin:()=>_e,getSmithyContext:()=>k,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>ae,httpAuthSchemeMiddleware:()=>re,httpAuthSchemeMiddlewareOptions:()=>ce,httpSigningMiddleware:()=>me,httpSigningMiddlewareOptions:()=>ge,isIdentityExpired:()=>Ca,memoizeIdentityProvider:()=>Ta,normalizeProvider:()=>be,requestBuilder:()=>Bi,setFeature:()=>sa}),ka=s((()=>{A(),F(),ye(),xe(),Te(),oa(),ca(),Da()})),Aa=c((e=>{var t=m(),n=class{capacity;data=new Map;parameters=[];constructor({size:e,params:t}){this.capacity=e??50,t&&(this.parameters=t)}get(e,t){let n=this.hash(e);if(n===!1)return t();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let e=this.data.keys(),t=0;for(;;){let{value:n,done:r}=e.next();if(this.data.delete(n),r||++t>10)break}}this.data.set(n,t())}return this.data.get(n)}size(){return this.data.size}hash(e){let t=``,{parameters:n}=this;if(n.length===0)return!1;for(let r of n){let n=String(e[r]??``);if(n.includes(`|;`))return!1;t+=n+`|;`}return t}};let r=RegExp(`^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$`),i=e=>r.test(e)||e.startsWith(`[`)&&e.endsWith(`]`),a=RegExp(`^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$`),o=(e,t=!1)=>{if(!t)return a.test(e);let n=e.split(`.`);for(let e of n)if(!o(e))return!1;return!0},s={},c=`endpoints`;function l(e){return typeof e!=`object`||!e?e:`ref`in e?`$${l(e.ref)}`:`fn`in e?`${e.fn}(${(e.argv||[]).map(l).join(`, `)})`:JSON.stringify(e,null,2)}var u=class extends Error{constructor(e){super(e),this.name=`EndpointError`}};let d=(e,t)=>e===t,f=e=>{let t=e.split(`.`),n=[];for(let r of t){let t=r.indexOf(`[`);if(t!==-1){if(r.indexOf(`]`)!==r.length-1)throw new u(`Path: '${e}' does not end with ']'`);let i=r.slice(t+1,-1);if(Number.isNaN(parseInt(i)))throw new u(`Invalid array index: '${i}' in path: '${e}'`);t!==0&&n.push(r.slice(0,t)),n.push(i)}else n.push(r)}return n},p=(e,t)=>f(t).reduce((n,r)=>{if(typeof n!=`object`)throw new u(`Index '${r}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]},e),h=e=>e!=null,g=e=>!e,_={[t.EndpointURLScheme.HTTP]:80,[t.EndpointURLScheme.HTTPS]:443},v={booleanEquals:d,getAttr:p,isSet:h,isValidHostLabel:o,not:g,parseURL:e=>{let n=(()=>{try{if(e instanceof URL)return e;if(typeof e==`object`&&`hostname`in e){let{hostname:t,port:n,protocol:r=``,path:i=``,query:a={}}=e,o=new URL(`${r}//${t}${n?`:${n}`:``}${i}`);return o.search=Object.entries(a).map(([e,t])=>`${e}=${t}`).join(`&`),o}return new URL(e)}catch{return null}})();if(!n)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=n.href,{host:a,hostname:o,pathname:s,protocol:c,search:l}=n;if(l)return null;let u=c.slice(0,-1);if(!Object.values(t.EndpointURLScheme).includes(u))return null;let d=i(o);return{scheme:u,authority:`${a}${r.includes(`${a}:${_[u]}`)||typeof e==`string`&&e.includes(`${a}:${_[u]}`)?`:${_[u]}`:``}`,path:s,normalizedPath:s.endsWith(`/`)?s:`${s}/`,isIp:d}},stringEquals:(e,t)=>e===t,substring:(e,t,n,r)=>t>=n||e.length<n?null:r?e.substring(e.length-n,e.length-t):e.substring(t,n),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)},y=(e,t)=>{let n=[],r={...t.endpointParams,...t.referenceRecord},i=0;for(;i<e.length;){let t=e.indexOf(`{`,i);if(t===-1){n.push(e.slice(i));break}n.push(e.slice(i,t));let a=e.indexOf(`}`,t);if(a===-1){n.push(e.slice(t));break}e[t+1]===`{`&&e[a+1]===`}`&&(n.push(e.slice(t+1,a)),i=a+2);let o=e.substring(t+1,a);if(o.includes(`#`)){let[e,t]=o.split(`#`);n.push(p(r[e],t))}else n.push(r[o]);i=a+1}return n.join(``)},b=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],x=(e,t,n)=>{if(typeof e==`string`)return y(e,n);if(e.fn)return C.callFunction(e,n);if(e.ref)return b(e,n);throw new u(`'${t}': ${String(e)} is not a string, function or reference.`)},S=({fn:e,argv:t},n)=>{let r=t.map(e=>[`boolean`,`number`].includes(typeof e)?e:C.evaluateExpression(e,`arg`,n)),i=e.split(`.`);return i[0]in s&&i[1]!=null?s[i[0]][i[1]](...r):v[e](...r)},C={evaluateExpression:x,callFunction:S},w=({assign:e,...t},n)=>{if(e&&e in n.referenceRecord)throw new u(`'${e}' is already defined in Reference Record.`);let r=S(t,n);return n.logger?.debug?.(`${c} evaluateCondition: ${l(t)} = ${l(r)}`),{result:r===``?!0:!!r,...e!=null&&{toAssign:{name:e,value:r}}}},T=(e=[],t)=>{let n={};for(let r of e){let{result:e,toAssign:i}=w(r,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!e)return{result:e};i&&(n[i.name]=i.value,t.logger?.debug?.(`${c} assign: ${i.name} := ${l(i.value)}`))}return{result:!0,referenceRecord:n}},E=(e,t)=>Object.entries(e).reduce((e,[n,r])=>({...e,[n]:r.map(e=>{let r=x(e,`Header value entry`,t);if(typeof r!=`string`)throw new u(`Header '${n}' value '${r}' is not a string`);return r})}),{}),D=(e,t)=>Object.entries(e).reduce((e,[n,r])=>({...e,[n]:k.getEndpointProperty(r,t)}),{}),O=(e,t)=>{if(Array.isArray(e))return e.map(e=>O(e,t));switch(typeof e){case`string`:return y(e,t);case`object`:if(e===null)throw new u(`Unexpected endpoint property: ${e}`);return k.getEndpointProperties(e,t);case`boolean`:return e;default:throw new u(`Unexpected endpoint property type: ${typeof e}`)}},k={getEndpointProperty:O,getEndpointProperties:D},A=(e,t)=>{let n=x(e,`Endpoint URL`,t);if(typeof n==`string`)try{return new URL(n)}catch(e){throw console.error(`Failed to construct URL with ${n}`,e),e}throw new u(`Endpoint URL must be a string, got ${typeof n}`)},j=(e,t)=>{let{conditions:n,endpoint:r}=e,{result:i,referenceRecord:a}=T(n,t);if(!i)return;let o={...t,referenceRecord:{...t.referenceRecord,...a}},{url:s,properties:u,headers:d}=r;return t.logger?.debug?.(`${c} Resolving endpoint from template: ${l(r)}`),{...d!=null&&{headers:E(d,o)},...u!=null&&{properties:D(u,o)},url:A(s,o)}},M=(e,t)=>{let{conditions:n,error:r}=e,{result:i,referenceRecord:a}=T(n,t);if(i)throw new u(x(r,`Error`,{...t,referenceRecord:{...t.referenceRecord,...a}}))},ee=(e,t)=>{for(let n of e)if(n.type===`endpoint`){let e=j(n,t);if(e)return e}else if(n.type===`error`)M(n,t);else if(n.type===`tree`){let e=te.evaluateTreeRule(n,t);if(e)return e}else throw new u(`Unknown endpoint rule: ${n}`);throw new u(`Rules evaluation failed`)},te={evaluateRules:ee,evaluateTreeRule:(e,t)=>{let{conditions:n,rules:r}=e,{result:i,referenceRecord:a}=T(n,t);if(i)return te.evaluateRules(r,{...t,referenceRecord:{...t.referenceRecord,...a}})}};e.EndpointCache=n,e.EndpointError=u,e.customEndpointFunctions=s,e.isIpAddress=i,e.isValidHostLabel=o,e.resolveEndpoint=(e,t)=>{let{endpointParams:n,logger:r}=t,{parameters:i,rules:a}=e;t.logger?.debug?.(`${c} Initial EndpointParams: ${l(n)}`);let o=Object.entries(i).filter(([,e])=>e.default!=null).map(([e,t])=>[e,t.default]);if(o.length>0)for(let[e,t]of o)n[e]=n[e]??t;let s=Object.entries(i).filter(([,e])=>e.required).map(([e])=>e);for(let e of s)if(n[e]==null)throw new u(`Missing required parameter: '${e}'`);let d=ee(a,{endpointParams:n,logger:r,referenceRecord:{}});return t.logger?.debug?.(`${c} Resolved endpoint: ${l(d)}`),d}})),ja=c((e=>{function t(e){let t={};if(e=e.replace(/^\?/,``),e)for(let n of e.split(`&`)){let[e,r=null]=n.split(`=`);e=decodeURIComponent(e),r&&=decodeURIComponent(r),e in t?Array.isArray(t[e])?t[e].push(r):t[e]=[t[e],r]:t[e]=r}return t}e.parseQueryString=t})),Ma=c((e=>{var t=ja();let n=e=>{if(typeof e==`string`)return n(new URL(e));let{hostname:r,pathname:i,port:a,protocol:o,search:s}=e,c;return s&&(c=t.parseQueryString(s)),{hostname:r,port:a?parseInt(a):void 0,protocol:o,path:i,query:c}};e.parseUrl=n})),Na=c((e=>{var t=Aa(),n=Ma();let r=(e,n=!1)=>{if(n){for(let t of e.split(`.`))if(!r(t))return!1;return!0}return!(!t.isValidHostLabel(e)||e.length<3||e.length>63||e!==e.toLowerCase()||t.isIpAddress(e))},i=e=>{let t=e.split(`:`);if(t.length<6)return null;let[n,r,i,a,o,...s]=t;return n!==`arn`||r===``||i===``||s.join(`:`)===``?null:{partition:r,service:i,region:a,accountId:o,resourceId:s.map(e=>e.split(`/`)).flat()}};var a={partitions:[{id:`aws`,outputs:{dnsSuffix:`amazonaws.com`,dualStackDnsSuffix:`api.aws`,implicitGlobalRegion:`us-east-1`,name:`aws`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$`,regions:{"af-south-1":{description:`Africa (Cape Town)`},"ap-east-1":{description:`Asia Pacific (Hong Kong)`},"ap-east-2":{description:`Asia Pacific (Taipei)`},"ap-northeast-1":{description:`Asia Pacific (Tokyo)`},"ap-northeast-2":{description:`Asia Pacific (Seoul)`},"ap-northeast-3":{description:`Asia Pacific (Osaka)`},"ap-south-1":{description:`Asia Pacific (Mumbai)`},"ap-south-2":{description:`Asia Pacific (Hyderabad)`},"ap-southeast-1":{description:`Asia Pacific (Singapore)`},"ap-southeast-2":{description:`Asia Pacific (Sydney)`},"ap-southeast-3":{description:`Asia Pacific (Jakarta)`},"ap-southeast-4":{description:`Asia Pacific (Melbourne)`},"ap-southeast-5":{description:`Asia Pacific (Malaysia)`},"ap-southeast-6":{description:`Asia Pacific (New Zealand)`},"ap-southeast-7":{description:`Asia Pacific (Thailand)`},"aws-global":{description:`aws global region`},"ca-central-1":{description:`Canada (Central)`},"ca-west-1":{description:`Canada West (Calgary)`},"eu-central-1":{description:`Europe (Frankfurt)`},"eu-central-2":{description:`Europe (Zurich)`},"eu-north-1":{description:`Europe (Stockholm)`},"eu-south-1":{description:`Europe (Milan)`},"eu-south-2":{description:`Europe (Spain)`},"eu-west-1":{description:`Europe (Ireland)`},"eu-west-2":{description:`Europe (London)`},"eu-west-3":{description:`Europe (Paris)`},"il-central-1":{description:`Israel (Tel Aviv)`},"me-central-1":{description:`Middle East (UAE)`},"me-south-1":{description:`Middle East (Bahrain)`},"mx-central-1":{description:`Mexico (Central)`},"sa-east-1":{description:`South America (Sao Paulo)`},"us-east-1":{description:`US East (N. Virginia)`},"us-east-2":{description:`US East (Ohio)`},"us-west-1":{description:`US West (N. California)`},"us-west-2":{description:`US West (Oregon)`}}},{id:`aws-cn`,outputs:{dnsSuffix:`amazonaws.com.cn`,dualStackDnsSuffix:`api.amazonwebservices.com.cn`,implicitGlobalRegion:`cn-northwest-1`,name:`aws-cn`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^cn\\-\\w+\\-\\d+$`,regions:{"aws-cn-global":{description:`aws-cn global region`},"cn-north-1":{description:`China (Beijing)`},"cn-northwest-1":{description:`China (Ningxia)`}}},{id:`aws-eusc`,outputs:{dnsSuffix:`amazonaws.eu`,dualStackDnsSuffix:`api.amazonwebservices.eu`,implicitGlobalRegion:`eusc-de-east-1`,name:`aws-eusc`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^eusc\\-(de)\\-\\w+\\-\\d+$`,regions:{"eusc-de-east-1":{description:`EU (Germany)`}}},{id:`aws-iso`,outputs:{dnsSuffix:`c2s.ic.gov`,dualStackDnsSuffix:`api.aws.ic.gov`,implicitGlobalRegion:`us-iso-east-1`,name:`aws-iso`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-iso\\-\\w+\\-\\d+$`,regions:{"aws-iso-global":{description:`aws-iso global region`},"us-iso-east-1":{description:`US ISO East`},"us-iso-west-1":{description:`US ISO WEST`}}},{id:`aws-iso-b`,outputs:{dnsSuffix:`sc2s.sgov.gov`,dualStackDnsSuffix:`api.aws.scloud`,implicitGlobalRegion:`us-isob-east-1`,name:`aws-iso-b`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-isob\\-\\w+\\-\\d+$`,regions:{"aws-iso-b-global":{description:`aws-iso-b global region`},"us-isob-east-1":{description:`US ISOB East (Ohio)`},"us-isob-west-1":{description:`US ISOB West`}}},{id:`aws-iso-e`,outputs:{dnsSuffix:`cloud.adc-e.uk`,dualStackDnsSuffix:`api.cloud-aws.adc-e.uk`,implicitGlobalRegion:`eu-isoe-west-1`,name:`aws-iso-e`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^eu\\-isoe\\-\\w+\\-\\d+$`,regions:{"aws-iso-e-global":{description:`aws-iso-e global region`},"eu-isoe-west-1":{description:`EU ISOE West`}}},{id:`aws-iso-f`,outputs:{dnsSuffix:`csp.hci.ic.gov`,dualStackDnsSuffix:`api.aws.hci.ic.gov`,implicitGlobalRegion:`us-isof-south-1`,name:`aws-iso-f`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-isof\\-\\w+\\-\\d+$`,regions:{"aws-iso-f-global":{description:`aws-iso-f global region`},"us-isof-east-1":{description:`US ISOF EAST`},"us-isof-south-1":{description:`US ISOF SOUTH`}}},{id:`aws-us-gov`,outputs:{dnsSuffix:`amazonaws.com`,dualStackDnsSuffix:`api.aws`,implicitGlobalRegion:`us-gov-west-1`,name:`aws-us-gov`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-gov\\-\\w+\\-\\d+$`,regions:{"aws-us-gov-global":{description:`aws-us-gov global region`},"us-gov-east-1":{description:`AWS GovCloud (US-East)`},"us-gov-west-1":{description:`AWS GovCloud (US-West)`}}}],version:`1.1`};let o=a,s=``,c=e=>{let{partitions:t}=o;for(let n of t){let{regions:t,outputs:r}=n;for(let[n,i]of Object.entries(t))if(n===e)return{...r,...i}}for(let n of t){let{regionRegex:t,outputs:r}=n;if(new RegExp(t).test(e))return{...r}}let n=t.find(e=>e.id===`aws`);if(!n)throw Error(`Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.`);return{...n.outputs}},l=(e,t=``)=>{o=e,s=t},u=()=>{l(a,``)},d=()=>s,f={isVirtualHostableS3Bucket:r,parseArn:i,partition:c};t.customEndpointFunctions.aws=f;let p=e=>{if(typeof e.endpointProvider!=`function`)throw Error(`@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.`);let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>m(e.endpointProvider({Region:typeof e.region==`function`?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint==`function`?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint==`function`?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},m=e=>n.parseUrl(e.url);Object.defineProperty(e,`EndpointError`,{enumerable:!0,get:function(){return t.EndpointError}}),Object.defineProperty(e,`isIpAddress`,{enumerable:!0,get:function(){return t.isIpAddress}}),Object.defineProperty(e,`resolveEndpoint`,{enumerable:!0,get:function(){return t.resolveEndpoint}}),e.awsEndpointFunctions=f,e.getUserAgentPrefix=d,e.partition=c,e.resolveDefaultAwsRegionalEndpointsConfig=p,e.setPartitionInfo=l,e.toEndpointV1=m,e.useDefaultPartitionInfo=u})),Pa,Fa,Ia=s((()=>{Pa={warningEmitted:!1},Fa=e=>{e&&!Pa.warningEmitted&&parseInt(e.substring(1,e.indexOf(`.`)))<20&&(Pa.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js ${e} in January 2026.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/c895JFp`))}}));function La(e,t,n){return e.$source||={},e.$source[t]=n,e}var Ra=s((()=>{}));function za(e,t,n){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=n}var Ba=s((()=>{}));function Va(e,t,n){return e.$source||={},e.$source[t]=n,e}var Ha=s((()=>{})),Ua=l({emitWarningIfUnsupportedVersion:()=>Fa,setCredentialFeature:()=>La,setFeature:()=>za,setTokenFeature:()=>Va,state:()=>Pa}),Wa=s((()=>{Ia(),Ra(),Ba(),Ha()})),Ga,Ka,qa=s((()=>{Ga=h(),Ka=e=>Ga.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0})),Ja,Ya=s((()=>{Ja=e=>new Date(Date.now()+e)})),Xa,Za=s((()=>{Ya(),Xa=(e,t)=>Math.abs(Ja(t).getTime()-e)>=3e5})),Qa,$a=s((()=>{Za(),Qa=(e,t)=>{let n=Date.parse(e);return Xa(n,t)?n-Date.now():t}})),eo=s((()=>{qa(),Ya(),$a()})),to,no,ro,io,ao,oo=s((()=>{to=h(),eo(),no=(e,t)=>{if(!t)throw Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},ro=async e=>{let t=no(`context`,e.context),n=no(`config`,e.config),r=t.endpointV2?.properties?.authSchemes?.[0];return{config:n,signer:await no(`signer`,n.signer)(r),signingRegion:e?.signingRegion,signingRegionSet:e?.signingRegionSet,signingName:e?.signingName}},io=class{async sign(e,t,n){if(!to.HttpRequest.isInstance(e))throw Error("The request is not an instance of `HttpRequest` and cannot be signed");let r=await ro(n),{config:i,signer:a}=r,{signingRegion:o,signingName:s}=r,c=n.context;if(c?.authSchemes?.length??!1){let[e,t]=c.authSchemes;e?.name===`sigv4a`&&t?.name===`sigv4`&&(o=t?.signingRegion??o,s=t?.signingName??s)}return await a.sign(e,{signingDate:Ja(i.systemClockOffset),signingRegion:o,signingService:s})}errorHandler(e){return t=>{let n=t.ServerTime??Ka(t.$response);if(n){let r=no(`config`,e.config),i=r.systemClockOffset;r.systemClockOffset=Qa(n,r.systemClockOffset),r.systemClockOffset!==i&&t.$metadata&&(t.$metadata.clockSkewCorrected=!0)}throw t}}successHandler(e,t){let n=Ka(e);if(n){let e=no(`config`,t.config);e.systemClockOffset=Qa(n,e.systemClockOffset)}}},ao=io})),so,co,lo=s((()=>{so=h(),eo(),oo(),co=class extends io{async sign(e,t,n){if(!so.HttpRequest.isInstance(e))throw Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:r,signer:i,signingRegion:a,signingRegionSet:o,signingName:s}=await ro(n),c=(await r.sigv4aSigningRegionSet?.()??o??[a]).join(`,`);return await i.sign(e,{signingDate:Ja(r.systemClockOffset),signingRegion:c,signingService:s})}}})),uo,fo=s((()=>{uo=e=>typeof e==`string`&&e.length>0?e.split(`,`).map(e=>e.trim()):[]})),po,mo=s((()=>{po=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,`_`).toUpperCase()}`})),ho,go,_o,vo=s((()=>{fo(),mo(),ho=`AWS_AUTH_SCHEME_PREFERENCE`,go=`auth_scheme_preference`,_o={environmentVariableSelector:(e,t)=>{if(t?.signingName&&po(t.signingName)in e)return[`httpBearerAuth`];if(ho in e)return uo(e[ho])},configFileSelector:e=>{if(go in e)return uo(e[go])},default:[]}})),yo=c((e=>{var t=class e extends Error{name=`ProviderError`;tryNextLink;constructor(t,n=!0){let r,i=!0;typeof n==`boolean`?(r=void 0,i=n):typeof n==`object`&&n&&(r=n.logger,i=n.tryNextLink??!0),super(t),this.tryNextLink=i,Object.setPrototypeOf(this,e.prototype),r?.debug?.(`@smithy/property-provider ${i?`->`:`(!)`} ${t}`)}static from(e,t=!0){return Object.assign(new this(e.message,t),e)}},n=class e extends t{name=`CredentialsProviderError`;constructor(t,n=!0){super(t,n),Object.setPrototypeOf(this,e.prototype)}},r=class e extends t{name=`TokenProviderError`;constructor(t,n=!0){super(t,n),Object.setPrototypeOf(this,e.prototype)}};e.CredentialsProviderError=n,e.ProviderError=t,e.TokenProviderError=r,e.chain=(...e)=>async()=>{if(e.length===0)throw new t(`No providers in chain`);let n;for(let t of e)try{return await t()}catch(e){if(n=e,e?.tryNextLink)continue;throw e}throw n},e.fromStatic=e=>()=>Promise.resolve(e),e.memoize=(e,t,n)=>{let r,i,a,o=!1,s=async()=>{i||=e();try{r=await i,a=!0,o=!1}finally{i=void 0}return r};return t===void 0?async e=>((!a||e?.forceRefresh)&&(r=await s()),r):async e=>((!a||e?.forceRefresh)&&(r=await s()),o?r:n&&!n(r)?(o=!0,r):(t(r)&&await s(),r))}})),bo,xo,So,Co=s((()=>{ka(),bo=yo(),xo=e=>(e.sigv4aSigningRegionSet=be(e.sigv4aSigningRegionSet),e),So={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(`,`).map(e=>e.trim());throw new bo.ProviderError(`AWS_SIGV4A_SIGNING_REGION_SET not set in env.`,{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??``).split(`,`).map(e=>e.trim());throw new bo.ProviderError(`sigv4a_signing_region_set not set in profile.`,{tryNextLink:!0})},default:void 0}})),wo=c((e=>{var t=Ge(),n=L(),r=Ee(),i=h(),a=j(),o=Ve();let s=`authorization`,c=`x-amz-date`,l=[s,c,`date`],u=`x-amz-content-sha256`,d={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},f=/^proxy-/,p=/^sec-/,m=`AWS4-HMAC-SHA256`,g=`aws4_request`,_={},v=[],y=(e,t,n)=>`${e}/${t}/${n}/${g}`,b=async(e,n,r,i,a)=>{let o=await x(e,n.secretAccessKey,n.accessKeyId),s=`${r}:${i}:${a}:${t.toHex(o)}:${n.sessionToken}`;if(s in _)return _[s];for(v.push(s);v.length>50;)delete _[v.shift()];let c=`AWS4${n.secretAccessKey}`;for(let t of[r,i,a,g])c=await x(e,c,t);return _[s]=c},x=(e,t,r)=>{let i=new e(t);return i.update(n.toUint8Array(r)),i.digest()},S=({headers:e},t,n)=>{let r={};for(let i of Object.keys(e).sort()){if(e[i]==null)continue;let a=i.toLowerCase();(a in d||t?.has(a)||f.test(a)||p.test(a))&&(!n||n&&!n.has(a))||(r[a]=e[i].trim().replace(/\s+/g,` `))}return r},C=async({headers:e,body:i},a)=>{for(let t of Object.keys(e))if(t.toLowerCase()===u)return e[t];if(i==null)return`e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855`;if(typeof i==`string`||ArrayBuffer.isView(i)||r.isArrayBuffer(i)){let e=new a;return e.update(n.toUint8Array(i)),t.toHex(await e.digest())}return`UNSIGNED-PAYLOAD`};var w=class{format(e){let t=[];for(let r of Object.keys(e)){let i=n.fromUtf8(r);t.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(e[r]))}let r=new Uint8Array(t.reduce((e,t)=>e+t.byteLength,0)),i=0;for(let e of t)r.set(e,i),i+=e.byteLength;return r}formatHeaderValue(e){switch(e.type){case`boolean`:return Uint8Array.from([e.value?0:1]);case`byte`:return Uint8Array.from([2,e.value]);case`short`:let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case`integer`:let i=new DataView(new ArrayBuffer(5));return i.setUint8(0,4),i.setInt32(1,e.value,!1),new Uint8Array(i.buffer);case`long`:let a=new Uint8Array(9);return a[0]=5,a.set(e.value.bytes,1),a;case`binary`:let o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);let s=new Uint8Array(o.buffer);return s.set(e.value,3),s;case`string`:let c=n.fromUtf8(e.value),l=new DataView(new ArrayBuffer(3+c.byteLength));l.setUint8(0,7),l.setUint16(1,c.byteLength,!1);let u=new Uint8Array(l.buffer);return u.set(c,3),u;case`timestamp`:let d=new Uint8Array(9);return d[0]=8,d.set(E.fromNumber(e.value.valueOf()).bytes,1),d;case`uuid`:if(!T.test(e.value))throw Error(`Invalid UUID received: ${e.value}`);let f=new Uint8Array(17);return f[0]=9,f.set(t.fromHex(e.value.replace(/\-/g,``)),1),f}}};let T=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var E=class e{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw Error(`Int64 buffers must be exactly 8 bytes`)}static fromNumber(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let n=new Uint8Array(8);for(let e=7,r=Math.abs(Math.round(t));e>-1&&r>0;e--,r/=256)n[e]=r;return t<0&&D(n),new e(n)}valueOf(){let e=this.bytes.slice(0),n=e[0]&128;return n&&D(e),parseInt(t.toHex(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}};function D(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}let O=(e,t)=>{e=e.toLowerCase();for(let n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1},k=(e,t={})=>{let{headers:n,query:r={}}=i.HttpRequest.clone(e);for(let e of Object.keys(n)){let i=e.toLowerCase();(i.slice(0,6)===`x-amz-`&&!t.unhoistableHeaders?.has(i)||t.hoistableHeaders?.has(i))&&(r[e]=n[e],delete n[e])}return{...e,headers:n,query:r}},A=e=>{e=i.HttpRequest.clone(e);for(let t of Object.keys(e.headers))l.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},M=({query:e={}})=>{let t=[],n={};for(let r of Object.keys(e)){if(r.toLowerCase()===`x-amz-signature`)continue;let i=o.escapeUri(r);t.push(i);let a=e[r];typeof a==`string`?n[i]=`${i}=${o.escapeUri(a)}`:Array.isArray(a)&&(n[i]=a.slice(0).reduce((e,t)=>e.concat([`${i}=${o.escapeUri(t)}`]),[]).sort().join(`&`))}return t.sort().map(e=>n[e]).filter(e=>e).join(`&`)},ee=e=>te(e).toISOString().replace(/\.\d{3}Z$/,`Z`),te=e=>typeof e==`number`?new Date(e*1e3):typeof e==`string`?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var ne=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:t,region:n,service:r,sha256:i,uriEscapePath:o=!0}){this.service=r,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e==`boolean`?e:!0,this.regionProvider=a.normalizeProvider(n),this.credentialProvider=a.normalizeProvider(t)}createCanonicalRequest(e,t,n){let r=Object.keys(t).sort();return`${e.method}
${this.getCanonicalPath(e)}
${M(e)}
${r.map(e=>`${e}:${t[e]}`).join(`
`)}

${r.join(`;`)}
${n}`}async createStringToSign(e,r,i,a){let o=new this.sha256;o.update(n.toUint8Array(i));let s=await o.digest();return`${a}
${e}
${r}
${t.toHex(s)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let t=[];for(let n of e.split(`/`))n?.length!==0&&n!==`.`&&(n===`..`?t.pop():t.push(n));let n=`${e?.startsWith(`/`)?`/`:``}${t.join(`/`)}${t.length>0&&e?.endsWith(`/`)?`/`:``}`;return o.escapeUri(n).replace(/%2F/g,`/`)}return e}validateResolvedCredentials(e){if(typeof e!=`object`||typeof e.accessKeyId!=`string`||typeof e.secretAccessKey!=`string`)throw Error(`Resolved credential object is not valid`)}formatDate(e){let t=ee(e).replace(/[\-:]/g,``);return{longDate:t,shortDate:t.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(`;`)}};e.SignatureV4=class extends ne{headerFormatter=new w;constructor({applyChecksum:e,credentials:t,region:n,service:r,sha256:i,uriEscapePath:a=!0}){super({applyChecksum:e,credentials:t,region:n,service:r,sha256:i,uriEscapePath:a})}async presign(e,t={}){let{signingDate:n=new Date,expiresIn:r=3600,unsignableHeaders:i,unhoistableHeaders:a,signableHeaders:o,hoistableHeaders:s,signingRegion:c,signingService:l}=t,u=await this.credentialProvider();this.validateResolvedCredentials(u);let d=c??await this.regionProvider(),{longDate:f,shortDate:p}=this.formatDate(n);if(r>604800)return Promise.reject(`Signature version 4 presigned URLs must have an expiration date less than one week in the future`);let h=y(p,d,l??this.service),g=k(A(e),{unhoistableHeaders:a,hoistableHeaders:s});u.sessionToken&&(g.query[`X-Amz-Security-Token`]=u.sessionToken),g.query[`X-Amz-Algorithm`]=m,g.query[`X-Amz-Credential`]=`${u.accessKeyId}/${h}`,g.query[`X-Amz-Date`]=f,g.query[`X-Amz-Expires`]=r.toString(10);let _=S(g,i,o);return g.query[`X-Amz-SignedHeaders`]=this.getCanonicalHeaderList(_),g.query[`X-Amz-Signature`]=await this.getSignature(f,h,this.getSigningKey(u,d,p,l),this.createCanonicalRequest(g,_,await C(e,this.sha256))),g}async sign(e,t){return typeof e==`string`?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:n},{signingDate:r=new Date,priorSignature:i,signingRegion:a,signingService:o}){let s=a??await this.regionProvider(),{shortDate:c,longDate:l}=this.formatDate(r),u=y(c,s,o??this.service),d=await C({headers:{},body:n},this.sha256),f=new this.sha256;f.update(e);let p=[`AWS4-HMAC-SHA256-PAYLOAD`,l,u,i,t.toHex(await f.digest()),d].join(`
`);return this.signString(p,{signingDate:r,signingRegion:s,signingService:o})}async signMessage(e,{signingDate:t=new Date,signingRegion:n,signingService:r}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:n,signingService:r,priorSignature:e.priorSignature}).then(t=>({message:e.message,signature:t}))}async signString(e,{signingDate:r=new Date,signingRegion:i,signingService:a}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let s=i??await this.regionProvider(),{shortDate:c}=this.formatDate(r),l=new this.sha256(await this.getSigningKey(o,s,c,a));return l.update(n.toUint8Array(e)),t.toHex(await l.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:n,unsignableHeaders:r,signingRegion:i,signingService:a}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let l=i??await this.regionProvider(),d=A(e),{longDate:f,shortDate:p}=this.formatDate(t),h=y(p,l,a??this.service);d.headers[c]=f,o.sessionToken&&(d.headers[`x-amz-security-token`]=o.sessionToken);let g=await C(d,this.sha256);!O(u,d.headers)&&this.applyChecksum&&(d.headers[u]=g);let _=S(d,r,n),v=await this.getSignature(f,h,this.getSigningKey(o,l,p,a),this.createCanonicalRequest(d,_,g));return d.headers[s]=`${m} Credential=${o.accessKeyId}/${h}, SignedHeaders=${this.getCanonicalHeaderList(_)}, Signature=${v}`,d}async getSignature(e,r,i,a){let o=await this.createStringToSign(e,r,a,m),s=new this.sha256(await i);return s.update(n.toUint8Array(o)),t.toHex(await s.digest())}getSigningKey(e,t,n,r){return b(this.sha256,e,n,t,r||this.service)}}}));function To(e,{credentials:t,credentialDefaultProvider:n}){let r;return r=t?t?.memoized?t:Ta(t,Ca,wa):n?be(n(Object.assign({},e,{parentClientConfig:e}))):async()=>{throw Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},r.memoized=!0,r}function Eo(e,t){if(t.configBound)return t;let n=async n=>t({...n,callerClientConfig:e});return n.memoized=t.memoized,n.configBound=!0,n}var Do,Oo,ko,Ao=s((()=>{Wa(),ka(),Do=wo(),Oo=e=>{let t=e.credentials,n=!!e.credentials,r;Object.defineProperty(e,`credentials`,{set(i){i&&i!==t&&i!==r&&(n=!0),t=i;let a=Eo(e,To(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}));n&&!a.attributed?(r=async e=>a(e).then(e=>La(e,`CREDENTIALS_CODE`,`e`)),r.memoized=a.memoized,r.configBound=a.configBound,r.attributed=!0):r=a},get(){return r},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:i=!0,systemClockOffset:a=e.systemClockOffset||0,sha256:o}=e,s;return s=e.signer?be(e.signer):e.regionInfoProvider?()=>be(e.region)().then(async t=>[await e.regionInfoProvider(t,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},t]).then(([t,n])=>{let{signingRegion:r,signingService:a}=t;e.signingRegion=e.signingRegion||r||n,e.signingName=e.signingName||a||e.serviceId;let s={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:i};return new(e.signerConstructor||Do.SignatureV4)(s)}):async t=>{t=Object.assign({},{name:`sigv4`,signingName:e.signingName||e.defaultSigningName,signingRegion:await be(e.region)(),properties:{}},t);let n=t.signingRegion,r=t.signingName;e.signingRegion=e.signingRegion||n,e.signingName=e.signingName||r||e.serviceId;let a={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:i};return new(e.signerConstructor||Do.SignatureV4)(a)},Object.assign(e,{systemClockOffset:a,signingEscapePath:i,signer:s})},ko=Oo})),jo=s((()=>{oo(),lo(),vo(),Co(),Ao()})),Mo=l({AWSSDKSigV4Signer:()=>ao,AwsSdkSigV4ASigner:()=>co,AwsSdkSigV4Signer:()=>io,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>_o,NODE_SIGV4A_CONFIG_OPTIONS:()=>So,getBearerTokenEnvKey:()=>po,resolveAWSSDKSigV4Config:()=>ko,resolveAwsSdkSigV4AConfig:()=>xo,resolveAwsSdkSigV4Config:()=>Oo,validateSigningProperties:()=>ro}),No=s((()=>{jo(),mo()}));function Po(e){return typeof Buffer<`u`?Buffer.alloc(e):new Uint8Array(e)}function Fo(e){return e[$o]=!0,e}var Io,Lo,Ro,zo,Bo,Vo,Ho,Uo,Wo,Go,Ko,qo,Jo,Yo,Xo,Zo,Qo,$o,es=s((()=>{Io=0,Lo=1,Ro=2,zo=3,Bo=4,Vo=5,Ho=6,Uo=7,Wo=20,Go=21,Ko=22,qo=23,Jo=24,Yo=25,Xo=26,Zo=27,Qo=31,$o=Symbol(`@smithy/core/cbor::tagSymbol`)}));function ts(e){H=e,bs=new DataView(H.buffer,H.byteOffset,H.byteLength)}function ns(e,t){if(e>=t)throw Error(`unexpected end of (decode) payload.`);let n=(H[e]&224)>>5,r=H[e]&31;switch(n){case Io:case Lo:case Ho:let i,a;if(r<24)i=r,a=1;else switch(r){case Jo:case Yo:case Xo:case Zo:let n=Ss[r],o=n+1;if(a=o,t-e<o)throw Error(`countLength ${n} greater than remaining buf len.`);let s=e+1;i=n===1?H[s]:n===2?bs.getUint16(s):n===4?bs.getUint32(s):bs.getBigUint64(s);break;default:throw Error(`unexpected minor value ${r}.`)}if(n===Io)return U=a,gs(i);if(n===Lo){let e;return e=typeof i==`bigint`?BigInt(-1)-i:-1-i,U=a,gs(e)}else if(r===2||r===3){let n=os(e+a,t),i=BigInt(0),o=e+a+U;for(let e=o;e<o+n;++e)i=i<<BigInt(8)|BigInt(H[e]);return U=a+U+n,r===3?-i-BigInt(1):i}else if(r===4){let[n,r]=ns(e+a,t),i=r<0?-1:1,o=`0`.repeat(Math.abs(n)+1)+String(BigInt(i)*BigInt(r)),s,c=r<0?`-`:``;return s=n===0?o:o.slice(0,o.length+n)+`.`+o.slice(n),s=s.replace(/^0+/g,``),s===``&&(s=`0`),s[0]===`.`&&(s=`0`+s),s=c+s,U=a+U,hi(s)}else{let n=ns(e+a,t);return U=a+U,Fo({tag:gs(i),value:n})}case zo:case Vo:case Bo:case Ro:if(r===Qo)switch(n){case zo:return cs(e,t);case Vo:return ms(e,t);case Bo:return fs(e,t);case Ro:return us(e,t)}else switch(n){case zo:return ss(e,t);case Vo:return ps(e,t);case Bo:return ds(e,t);case Ro:return ls(e,t)}default:return hs(e,t)}}function rs(e,t,n){return ys&&e.constructor?.name===`Buffer`?e.toString(`utf-8`,t,n):xs?xs.decode(e.subarray(t,n)):(0,_s.toUtf8)(e.subarray(t,n))}function is(e){let t=Number(e);return(t<-(2**53-1)||2**53-1<t)&&console.warn(Error(`@smithy/core/cbor - truncating BigInt(${e}) to ${t} with loss of precision.`)),t}function as(e,t){let n=e>>7,r=(e&124)>>2,i=(e&3)<<8|t,a=n===0?1:-1,o,s;if(r===0){if(i===0)return 0;o=2**-14,s=0}else if(r===31)return i===0?a*(1/0):NaN;else o=2**(r-15),s=1;return s+=i/1024,o*s*a}function os(e,t){let n=H[e]&31;if(n<24)return U=1,n;if(n===Jo||n===Yo||n===Xo||n===Zo){let r=Ss[n];if(U=r+1,t-e<U)throw Error(`countLength ${r} greater than remaining buf len.`);let i=e+1;return r===1?H[i]:r===2?bs.getUint16(i):r===4?bs.getUint32(i):is(bs.getBigUint64(i))}throw Error(`unexpected minor value ${n}.`)}function ss(e,t){let n=os(e,t),r=U;if(e+=r,t-e<n)throw Error(`string len ${n} greater than remaining buf len.`);let i=rs(H,e,e+n);return U=r+n,i}function cs(e,t){e+=1;let n=[];for(let r=e;e<t;){if(H[e]===255){let t=Po(n.length);return t.set(n,0),U=e-r+2,rs(t,0,t.length)}let i=(H[e]&224)>>5,a=H[e]&31;if(i!==zo)throw Error(`unexpected major type ${i} in indefinite string.`);if(a===Qo)throw Error(`nested indefinite string.`);let o=ls(e,t);e+=U;for(let e=0;e<o.length;++e)n.push(o[e])}throw Error(`expected break marker.`)}function ls(e,t){let n=os(e,t),r=U;if(e+=r,t-e<n)throw Error(`unstructured byte string len ${n} greater than remaining buf len.`);let i=H.subarray(e,e+n);return U=r+n,i}function us(e,t){e+=1;let n=[];for(let r=e;e<t;){if(H[e]===255){let t=Po(n.length);return t.set(n,0),U=e-r+2,t}let i=(H[e]&224)>>5,a=H[e]&31;if(i!==Ro)throw Error(`unexpected major type ${i} in indefinite string.`);if(a===Qo)throw Error(`nested indefinite string.`);let o=ls(e,t);e+=U;for(let e=0;e<o.length;++e)n.push(o[e])}throw Error(`expected break marker.`)}function ds(e,t){let n=os(e,t),r=U;e+=r;let i=e,a=Array(n);for(let r=0;r<n;++r){let n=ns(e,t),i=U;a[r]=n,e+=i}return U=r+(e-i),a}function fs(e,t){e+=1;let n=[];for(let r=e;e<t;){if(H[e]===255)return U=e-r+2,n;let i=ns(e,t);e+=U,n.push(i)}throw Error(`expected break marker.`)}function ps(e,t){let n=os(e,t),r=U;e+=r;let i=e,a={};for(let r=0;r<n;++r){if(e>=t)throw Error(`unexpected end of map payload.`);let n=(H[e]&224)>>5;if(n!==zo)throw Error(`unexpected major type ${n} for map key at index ${e}.`);let r=ns(e,t);e+=U;let i=ns(e,t);e+=U,a[r]=i}return U=r+(e-i),a}function ms(e,t){e+=1;let n=e,r={};for(;e<t;){if(e>=t)throw Error(`unexpected end of map payload.`);if(H[e]===255)return U=e-n+2,r;let i=(H[e]&224)>>5;if(i!==zo)throw Error(`unexpected major type ${i} for map key.`);let a=ns(e,t);e+=U;let o=ns(e,t);e+=U,r[a]=o}throw Error(`expected break marker.`)}function hs(e,t){let n=H[e]&31;switch(n){case Go:case Wo:return U=1,n===Go;case Ko:return U=1,null;case qo:return U=1,null;case Yo:if(t-e<3)throw Error(`incomplete float16 at end of buf.`);return U=3,as(H[e+1],H[e+2]);case Xo:if(t-e<5)throw Error(`incomplete float32 at end of buf.`);return U=5,bs.getFloat32(e+1);case Zo:if(t-e<9)throw Error(`incomplete float64 at end of buf.`);return U=9,bs.getFloat64(e+1);default:throw Error(`unexpected minor value ${n}.`)}}function gs(e){if(typeof e==`number`)return e;let t=Number(e);return-(2**53-1)<=t&&t<=2**53-1?t:e}var _s,vs,ys,H,bs,xs,U,Ss,Cs=s((()=>{bi(),_s=L(),es(),vs=typeof TextDecoder<`u`,ys=typeof Buffer<`u`,H=Po(0),bs=new DataView(H.buffer,H.byteOffset,H.byteLength),xs=vs?new TextDecoder:null,U=0,Ss={[Jo]:1,[Yo]:2,[Xo]:4,[Zo]:8}}));function ws(e){W.byteLength-G<e&&Es(G<16e6?Math.max(W.byteLength*4,W.byteLength+e):W.byteLength+e+16e6)}function Ts(){let e=Po(G);return e.set(W.subarray(0,G),0),G=0,e}function Es(e){let t=W;W=Po(e),t&&(t.copy?t.copy(W,0,0,t.byteLength):W.set(t,0)),js=new DataView(W.buffer,W.byteOffset,W.byteLength)}function Ds(e,t){t<24?W[G++]=e<<5|t:t<256?(W[G++]=e<<5|24,W[G++]=t):t<65536?(W[G++]=e<<5|Yo,js.setUint16(G,t),G+=2):t<2**32?(W[G++]=e<<5|Xo,js.setUint32(G,t),G+=4):(W[G++]=e<<5|Zo,js.setBigUint64(G,typeof t==`bigint`?t:BigInt(t)),G+=8)}function Os(e){let t=[e];for(;t.length;){let e=t.pop();if(ws(typeof e==`string`?e.length*4:64),typeof e==`string`){if(As)Ds(zo,Buffer.byteLength(e)),G+=W.write(e,G);else{let t=(0,ks.fromUtf8)(e);Ds(zo,t.byteLength),W.set(t,G),G+=t.byteLength}continue}else if(typeof e==`number`){if(Number.isInteger(e)){let t=e>=0,n=t?Io:Lo,r=t?e:-e-1;r<24?W[G++]=n<<5|r:r<256?(W[G++]=n<<5|24,W[G++]=r):r<65536?(W[G++]=n<<5|Yo,W[G++]=r>>8,W[G++]=r):r<4294967296?(W[G++]=n<<5|Xo,js.setUint32(G,r),G+=4):(W[G++]=n<<5|Zo,js.setBigUint64(G,BigInt(r)),G+=8);continue}W[G++]=Uo<<5|Zo,js.setFloat64(G,e),G+=8;continue}else if(typeof e==`bigint`){let t=e>=0,n=t?Io:Lo,r=t?e:-e-BigInt(1),i=Number(r);if(i<24)W[G++]=n<<5|i;else if(i<256)W[G++]=n<<5|24,W[G++]=i;else if(i<65536)W[G++]=n<<5|Yo,W[G++]=i>>8,W[G++]=i&255;else if(i<4294967296)W[G++]=n<<5|Xo,js.setUint32(G,i),G+=4;else if(r<BigInt(`18446744073709551616`))W[G++]=n<<5|Zo,js.setBigUint64(G,r),G+=8;else{let e=r.toString(2),n=new Uint8Array(Math.ceil(e.length/8)),i=r,a=0;for(;n.byteLength-++a>=0;)n[n.byteLength-a]=Number(i&BigInt(255)),i>>=BigInt(8);ws(n.byteLength*2),W[G++]=t?194:195,As?Ds(Ro,Buffer.byteLength(n)):Ds(Ro,n.byteLength),W.set(n,G),G+=n.byteLength}continue}else if(e===null){W[G++]=Uo<<5|Ko;continue}else if(typeof e==`boolean`){W[G++]=Uo<<5|(e?Go:Wo);continue}else if(e===void 0)throw Error(`@smithy/core/cbor: client may not serialize undefined value.`);else if(Array.isArray(e)){for(let n=e.length-1;n>=0;--n)t.push(e[n]);Ds(Bo,e.length);continue}else if(typeof e.byteLength==`number`){ws(e.length*2),Ds(Ro,e.length),W.set(e,G),G+=e.byteLength;continue}else if(typeof e==`object`){if(e instanceof _i){let n=e.string.indexOf(`.`),r=n===-1?0:n-e.string.length+1,i=BigInt(e.string.replace(`.`,``));W[G++]=196,t.push(i),t.push(r),Ds(Bo,2);continue}if(e[$o])if(`tag`in e&&`value`in e){t.push(e.value),Ds(Ho,e.tag);continue}else throw Error(`tag encountered with missing fields, need 'tag' and 'value', found: `+JSON.stringify(e));let n=Object.keys(e);for(let r=n.length-1;r>=0;--r){let i=n[r];t.push(e[i]),t.push(i)}Ds(Vo,n.length);continue}throw Error(`data type ${e?.constructor?.name??typeof e} not compatible for encoding.`)}}var ks,As,W,js,G,Ms=s((()=>{bi(),ks=L(),es(),As=typeof Buffer<`u`,W=Po(2048),js=new DataView(W.buffer,W.byteOffset,W.byteLength),G=0})),Ns,Ps=s((()=>{Cs(),Ms(),Ns={deserialize(e){return ts(e),ns(0,e.length)},serialize(e){try{return Os(e),Ts()}catch(e){throw Ts(),e}},resizeEncodingBuffer(e){Es(e)}}})),Fs,Is,Ls=s((()=>{es(),Fs=e=>Fo({tag:1,value:e.getTime()/1e3}),Is=(e,t)=>{let n=e=>{let t=e;return typeof t==`number`&&(t=t.toString()),t.indexOf(`,`)>=0&&(t=t.split(`,`)[0]),t.indexOf(`:`)>=0&&(t=t.split(`:`)[0]),t.indexOf(`#`)>=0&&(t=t.split(`#`)[1]),t};if(t.__type!==void 0)return n(t.__type);let r=Object.keys(t).find(e=>e.toLowerCase()===`code`);if(r&&t[r]!==void 0)return n(t[r])}})),Rs,zs,Bs,Vs,Hs=s((()=>{aa(),V(),bi(),Rs=R(),Ps(),Ls(),zs=class extends xi{createSerializer(){let e=new Bs;return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new Vs;return e.setSerdeContext(this.serdeContext),e}},Bs=class extends xi{value;write(e,t){this.value=this.serialize(e,t)}serialize(e,t){let n=z.of(e);if(t==null)return n.isIdempotencyToken()?(0,Wr.v4)():t;if(n.isBlobSchema())return typeof t==`string`?(this.serdeContext?.base64Decoder??Rs.fromBase64)(t):t;if(n.isTimestampSchema())return Fs(typeof t==`number`||typeof t==`bigint`?new Date(Number(t)/1e3|0):t);if(typeof t==`function`||typeof t==`object`){let e=t;if(n.isListSchema()&&Array.isArray(e)){let t=!!n.getMergedTraits().sparse,r=[],i=0;for(let a of e){let e=this.serialize(n.getValueSchema(),a);(e!=null||t)&&(r[i++]=e)}return r}if(e instanceof Date)return Fs(e);let r={};if(n.isMapSchema()){let t=!!n.getMergedTraits().sparse;for(let i of Object.keys(e)){let a=this.serialize(n.getValueSchema(),e[i]);(a!=null||t)&&(r[i]=a)}}else if(n.isStructSchema()){for(let[t,i]of n.structIterator()){let n=this.serialize(i,e[t]);n!=null&&(r[t]=n)}if(n.isUnionSchema()&&Array.isArray(e.$unknown)){let[t,n]=e.$unknown;r[t]=n}}else if(n.isDocumentSchema())for(let t of Object.keys(e))r[t]=this.serialize(n.getValueSchema(),e[t]);return r}return t}flush(){let e=Ns.serialize(this.value);return this.value=void 0,e}},Vs=class extends xi{read(e,t){let n=Ns.deserialize(t);return this.readValue(e,n)}readValue(e,t){let n=z.of(e);if(n.isTimestampSchema()){if(typeof t==`number`)return si(t);if(typeof t==`object`&&t.tag===1&&`value`in t)return si(t.value)}if(n.isBlobSchema())return typeof t==`string`?(this.serdeContext?.base64Decoder??Rs.fromBase64)(t):t;if(t===void 0||typeof t==`boolean`||typeof t==`number`||typeof t==`string`||typeof t==`bigint`||typeof t==`symbol`)return t;if(typeof t==`object`){if(t===null)return null;if(`byteLength`in t||t instanceof Date||n.isDocumentSchema())return t;if(n.isListSchema()){let e=[],r=n.getValueSchema(),i=!!n.getMergedTraits().sparse;for(let n of t){let t=this.readValue(r,n);(t!=null||i)&&e.push(t)}return e}let e={};if(n.isMapSchema()){let r=!!n.getMergedTraits().sparse,i=n.getValueSchema();for(let n of Object.keys(t)){let a=this.readValue(i,t[n]);(a!=null||r)&&(e[n]=a)}}else if(n.isStructSchema()){let r=n.isUnionSchema(),i;r&&(i=new Set(Object.keys(t).filter(e=>e!==`__type`)));for(let[a,o]of n.structIterator())r&&i.delete(a),t[a]!=null&&(e[a]=this.readValue(o,t[a]));if(r&&i?.size===1&&Object.keys(e).length===0){let n=i.values().next().value;e.$unknown=[n,t[n]]}}return e}else return t}}})),Us,Ws,Gs=s((()=>{aa(),V(),Us=j(),Hs(),Ls(),Ws=class extends Ii{codec=new zs;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:e}){super({defaultNamespace:e})}getShapeId(){return`smithy.protocols#rpcv2Cbor`}getPayloadCodec(){return this.codec}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n);if(Object.assign(r.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":`rpc-v2-cbor`,accept:this.getDefaultContentType()}),nt(e.input)===`unit`)delete r.body,delete r.headers[`content-type`];else{r.body||=(this.serializer.write(15,{}),this.serializer.flush());try{r.headers[`content-length`]=String(r.body.byteLength)}catch{}}let{service:i,operation:a}=(0,Us.getSmithyContext)(n),o=`/service/${i}/operation/${a}`;return r.path.endsWith(`/`)?r.path+=o.slice(1):r.path+=o,r}async deserializeResponse(e,t,n){return super.deserializeResponse(e,t,n)}async handleError(e,t,n,r,i){let a=Is(n,r)??`Unknown`,o=this.options.defaultNamespace;a.includes(`#`)&&([o]=a.split(`#`));let s={$metadata:i,$fault:n.statusCode<=500?`client`:`server`},c=B.for(o),l;try{l=c.getSchema(a)}catch{r.Message&&(r.message=r.Message);let e=B.for(`smithy.ts.sdk.synthetic.`+o),t=e.getBaseException();if(t){let n=e.getErrorCtor(t);throw Object.assign(new n({name:a}),s,r)}throw Object.assign(Error(a),s,r)}let u=z.of(l),d=c.getErrorCtor(l),f=r.message??r.Message??`Unknown`,p=new d(f),m={};for(let[e,t]of u.structIterator())m[e]=this.deserializer.readValue(t,r[e]);throw Object.assign(p,s,{$fault:u.getMergedTraits().error,message:f},m)}getDefaultContentType(){return`application/cbor`}}})),Ks=s((()=>{Ls(),Gs(),Hs()})),qs=c((e=>{let t=(e,t)=>{let n=[];if(e&&n.push(e),t)for(let e of t)n.push(e);return n},n=(e,t)=>`${e||`anonymous`}${t&&t.length>0?` (a.k.a. ${t.join(`,`)})`:``}`,r=()=>{let e=[],o=[],s=!1,c=new Set,l=e=>e.sort((e,t)=>i[t.step]-i[e.step]||a[t.priority||`normal`]-a[e.priority||`normal`]),u=n=>{let r=!1,i=e=>{let i=t(e.name,e.aliases);if(i.includes(n)){r=!0;for(let e of i)c.delete(e);return!1}return!0};return e=e.filter(i),o=o.filter(i),r},d=n=>{let r=!1,i=e=>{if(e.middleware===n){r=!0;for(let n of t(e.name,e.aliases))c.delete(n);return!1}return!0};return e=e.filter(i),o=o.filter(i),r},f=t=>(e.forEach(e=>{t.add(e.middleware,{...e})}),o.forEach(e=>{t.addRelativeTo(e.middleware,{...e})}),t.identifyOnResolve?.(h.identifyOnResolve()),t),p=e=>{let t=[];return e.before.forEach(e=>{e.before.length===0&&e.after.length===0?t.push(e):t.push(...p(e))}),t.push(e),e.after.reverse().forEach(e=>{e.before.length===0&&e.after.length===0?t.push(e):t.push(...p(e))}),t},m=(r=!1)=>{let i=[],a=[],s={};return e.forEach(e=>{let n={...e,before:[],after:[]};for(let e of t(n.name,n.aliases))s[e]=n;i.push(n)}),o.forEach(e=>{let n={...e,before:[],after:[]};for(let e of t(n.name,n.aliases))s[e]=n;a.push(n)}),a.forEach(e=>{if(e.toMiddleware){let t=s[e.toMiddleware];if(t===void 0){if(r)return;throw Error(`${e.toMiddleware} is not found when adding ${n(e.name,e.aliases)} middleware ${e.relation} ${e.toMiddleware}`)}e.relation===`after`&&t.after.push(e),e.relation===`before`&&t.before.push(e)}}),l(i).map(p).reduce((e,t)=>(e.push(...t),e),[])},h={add:(r,i={})=>{let{name:a,override:o,aliases:s}=i,l={step:`initialize`,priority:`normal`,middleware:r,...i},u=t(a,s);if(u.length>0){if(u.some(e=>c.has(e))){if(!o)throw Error(`Duplicate middleware name '${n(a,s)}'`);for(let t of u){let r=e.findIndex(e=>e.name===t||e.aliases?.some(e=>e===t));if(r===-1)continue;let i=e[r];if(i.step!==l.step||l.priority!==i.priority)throw Error(`"${n(i.name,i.aliases)}" middleware with ${i.priority} priority in ${i.step} step cannot be overridden by "${n(a,s)}" middleware with ${l.priority} priority in ${l.step} step.`);e.splice(r,1)}}for(let e of u)c.add(e)}e.push(l)},addRelativeTo:(e,r)=>{let{name:i,override:a,aliases:s}=r,l={middleware:e,...r},u=t(i,s);if(u.length>0){if(u.some(e=>c.has(e))){if(!a)throw Error(`Duplicate middleware name '${n(i,s)}'`);for(let e of u){let t=o.findIndex(t=>t.name===e||t.aliases?.some(t=>t===e));if(t===-1)continue;let r=o[t];if(r.toMiddleware!==l.toMiddleware||r.relation!==l.relation)throw Error(`"${n(r.name,r.aliases)}" middleware ${r.relation} "${r.toMiddleware}" middleware cannot be overridden by "${n(i,s)}" middleware ${l.relation} "${l.toMiddleware}" middleware.`);o.splice(t,1)}}for(let e of u)c.add(e)}o.push(l)},clone:()=>f(r()),use:e=>{e.applyToStack(h)},remove:e=>typeof e==`string`?u(e):d(e),removeByTag:n=>{let r=!1,i=e=>{let{tags:i,name:a,aliases:o}=e;if(i&&i.includes(n)){let e=t(a,o);for(let t of e)c.delete(t);return r=!0,!1}return!0};return e=e.filter(i),o=o.filter(i),r},concat:e=>{let t=f(r());return t.use(e),t.identifyOnResolve(s||t.identifyOnResolve()||(e.identifyOnResolve?.()??!1)),t},applyToStack:f,identify:()=>m(!0).map(e=>{let t=e.step??e.relation+` `+e.toMiddleware;return n(e.name,e.aliases)+` - `+t}),identifyOnResolve(e){return typeof e==`boolean`&&(s=e),s},resolve:(e,t)=>{for(let n of m().map(e=>e.middleware).reverse())e=n(e,t);return s&&console.log(h.identify()),e}};return h},i={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},a={high:3,normal:2,low:1};e.constructStack=r})),K=c((e=>{var t=qs(),n=(aa(),f(ia)),r=m(),i=(V(),f(Jt)),a=(bi(),f(yi)),o=class{config;middlewareStack=t.constructStack();initConfig;handlers;constructor(e){this.config=e;let{protocol:t,protocolSettings:n}=e;n&&typeof t==`function`&&(e.protocol=new t(n))}send(e,t,n){let r=typeof t==`function`?void 0:t,i=typeof t==`function`?t:n,a=r===void 0&&this.config.cacheMiddleware===!0,o;if(a){this.handlers||=new WeakMap;let t=this.handlers;t.has(e.constructor)?o=t.get(e.constructor):(o=e.resolveMiddleware(this.middlewareStack,this.config,r),t.set(e.constructor,o))}else delete this.handlers,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(i)o(e).then(e=>i(null,e.output),e=>i(e)).catch(()=>{});else return o(e).then(e=>e.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}};let s=`***SensitiveInformation***`;function c(e,t){if(t==null)return t;let n=i.NormalizedSchema.of(e);if(n.getMergedTraits().sensitive)return s;if(n.isListSchema()){if(n.getValueSchema().getMergedTraits().sensitive)return s}else if(n.isMapSchema()){if(n.getKeySchema().getMergedTraits().sensitive||n.getValueSchema().getMergedTraits().sensitive)return s}else if(n.isStructSchema()&&typeof t==`object`){let e=t,r={};for(let[t,i]of n.structIterator())e[t]!=null&&(r[t]=c(i,e[t]));return r}return t}var l=class{middlewareStack=t.constructStack();schema;static classBuilder(){return new u}resolveMiddlewareWithContext(e,t,n,{middlewareFn:i,clientName:a,commandName:o,inputFilterSensitiveLog:s,outputFilterSensitiveLog:c,smithyContext:l,additionalContext:u,CommandCtor:d}){for(let r of i.bind(this)(d,e,t,n))this.middlewareStack.use(r);let f=e.concat(this.middlewareStack),{logger:p}=t,m={logger:p,clientName:a,commandName:o,inputFilterSensitiveLog:s,outputFilterSensitiveLog:c,[r.SMITHY_CONTEXT_KEY]:{commandInstance:this,...l},...u},{requestHandler:h}=t;return f.resolve(e=>h.handle(e.request,n||{}),m)}},u=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName=``;_clientName=``;_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,n={}){return this._smithyContext={service:e,operation:t,...n},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=e=>e,t=e=>e){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){let e=this,t;return t=class extends l{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[t]){super(),this.input=t??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(n,r,i){let a=e._operationSchema,o=a?.[4]??a?.input,s=a?.[5]??a?.output;return this.resolveMiddlewareWithContext(n,r,i,{CommandCtor:t,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(a?c.bind(null,o):e=>e),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(a?c.bind(null,s):e=>e),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}};let d=(e,t)=>{for(let n of Object.keys(e)){let r=e[n],i=async function(e,t,n){let i=new r(e);if(typeof t==`function`)this.send(i,t);else if(typeof n==`function`){if(typeof t!=`object`)throw Error(`Expected http options but got ${typeof t}`);this.send(i,t||{},n)}else return this.send(i,t)},a=(n[0].toLowerCase()+n.slice(1)).replace(/Command$/,``);t.prototype[a]=i}};var p=class e extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(t){if(!t)return!1;let n=t;return e.prototype.isPrototypeOf(n)||!!n.$fault&&!!n.$metadata&&(n.$fault===`client`||n.$fault===`server`)}static[Symbol.hasInstance](t){if(!t)return!1;let n=t;return this===e?e.isInstance(t):e.isInstance(t)?n.name&&this.name?this.prototype.isPrototypeOf(t)||n.name===this.name:this.prototype.isPrototypeOf(t):!1}};let h=(e,t={})=>(Object.entries(t).filter(([,e])=>e!==void 0).forEach(([t,n])=>{(e[t]==null||e[t]===``)&&(e[t]=n)}),e.message=e.message||e.Message||`UnknownError`,delete e.Message,e),g=({output:e,parsedBody:t,exceptionCtor:n,errorCode:r})=>{let i=v(e),a=i.httpStatusCode?i.httpStatusCode+``:void 0;throw h(new n({name:t?.code||t?.Code||r||a||`UnknownError`,$fault:`client`,$metadata:i}),t)},_=e=>({output:t,parsedBody:n,errorCode:r})=>{g({output:t,parsedBody:n,exceptionCtor:e,errorCode:r})},v=e=>({httpStatusCode:e.statusCode,requestId:e.headers[`x-amzn-requestid`]??e.headers[`x-amzn-request-id`]??e.headers[`x-amz-request-id`],extendedRequestId:e.headers[`x-amz-id-2`],cfId:e.headers[`x-amz-cf-id`]}),y=e=>{switch(e){case`standard`:return{retryMode:`standard`,connectionTimeout:3100};case`in-region`:return{retryMode:`standard`,connectionTimeout:1100};case`cross-region`:return{retryMode:`standard`,connectionTimeout:3100};case`mobile`:return{retryMode:`standard`,connectionTimeout:3e4};default:return{}}},b=!1,x=e=>{e&&!b&&parseInt(e.substring(1,e.indexOf(`.`)))<16&&(b=!0)},S=e=>{let t=[];for(let n in r.AlgorithmId){let i=r.AlgorithmId[n];e[i]!==void 0&&t.push({algorithmId:()=>i,checksumConstructor:()=>e[i]})}return{addChecksumAlgorithm(e){t.push(e)},checksumAlgorithms(){return t}}},C=e=>{let t={};return e.checksumAlgorithms().forEach(e=>{t[e.algorithmId()]=e.checksumConstructor()}),t},w=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),T=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},E=e=>Object.assign(S(e),w(e)),D=E,O=e=>Object.assign(C(e),T(e)),k=e=>Array.isArray(e)?e:[e],A=e=>{let t=`#text`;for(let n in e)e.hasOwnProperty(n)&&e[n][t]!==void 0?e[n]=e[n][t]:typeof e[n]==`object`&&e[n]!==null&&(e[n]=A(e[n]));return e},j=e=>e!=null;var M=class{trace(){}debug(){}info(){}warn(){}error(){}};function ee(e,t,n){let r,i,a;if(t===void 0&&n===void 0)r={},a=e;else{if(r=e,typeof t==`function`)return i=t,a=n,re(r,i,a);a=t}for(let e of Object.keys(a)){if(!Array.isArray(a[e])){r[e]=a[e];continue}ie(r,null,a,e)}return r}let te=e=>{let t={};for(let[n,r]of Object.entries(e||{}))t[n]=[,r];return t},ne=(e,t)=>{let n={};for(let r in t)ie(n,e,t,r);return n},re=(e,t,n)=>ee(e,Object.entries(n).reduce((e,[n,r])=>(Array.isArray(r)?e[n]=r:typeof r==`function`?e[n]=[t,r()]:e[n]=[t,r],e),{})),ie=(e,t,n,r)=>{if(t!==null){let i=n[r];typeof i==`function`&&(i=[,i]);let[a=ae,o=oe,s=r]=i;(typeof a==`function`&&a(t[s])||typeof a!=`function`&&a)&&(e[r]=o(t[s]));return}let[i,a]=n[r];if(typeof a==`function`){let t,n=i===void 0&&(t=a())!=null,o=typeof i==`function`&&!!i(void 0)||typeof i!=`function`&&!!i;n?e[r]=t:o&&(e[r]=a())}else{let t=i===void 0&&a!=null,n=typeof i==`function`&&!!i(a)||typeof i!=`function`&&!!i;(t||n)&&(e[r]=a)}},ae=e=>e!=null,oe=e=>e,N=e=>{if(e!==e)return`NaN`;switch(e){case 1/0:return`Infinity`;case-1/0:return`-Infinity`;default:return e}},se=e=>e.toISOString().replace(`.000Z`,`Z`),P=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(e=>e!=null).map(P);if(typeof e==`object`){let t={};for(let n of Object.keys(e))e[n]!=null&&(t[n]=P(e[n]));return t}return e};Object.defineProperty(e,`collectBody`,{enumerable:!0,get:function(){return n.collectBody}}),Object.defineProperty(e,`extendedEncodeURIComponent`,{enumerable:!0,get:function(){return n.extendedEncodeURIComponent}}),Object.defineProperty(e,`resolvedPath`,{enumerable:!0,get:function(){return n.resolvedPath}}),e.Client=o,e.Command=l,e.NoOpLogger=M,e.SENSITIVE_STRING=`***SensitiveInformation***`,e.ServiceException=p,e._json=P,e.convertMap=te,e.createAggregatedClient=d,e.decorateServiceException=h,e.emitWarningIfUnsupportedVersion=x,e.getArrayIfSingleItem=k,e.getDefaultClientConfiguration=D,e.getDefaultExtensionConfiguration=E,e.getValueFromTextNode=A,e.isSerializableHeaderValue=j,e.loadConfigsForDefaultMode=y,e.map=ee,e.resolveDefaultRuntimeConfig=O,e.serializeDateTime=se,e.serializeFloat=N,e.take=ne,e.throwDefaultError=g,e.withBaseException=_,Object.keys(a).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})})})),Js,Ys,Xs=s((()=>{V(),Js=K(),Ys=class{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,t){let n=t.getMemberSchemas(),r=Object.values(n).find(e=>!!e.getMergedTraits().httpPayload);if(r)return r.getMergedTraits().mediaType||(r.isStringSchema()?`text/plain`:r.isBlobSchema()?`application/octet-stream`:e);if(!t.isUnitSchema()&&Object.values(n).find(e=>{let{httpQuery:t,httpQueryParams:n,httpHeader:r,httpLabel:i,httpPrefixHeaders:a}=e.getMergedTraits();return!t&&!n&&!r&&!i&&a===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,t,n,r,i,a){let o=t,s=e;e.includes(`#`)&&([o,s]=e.split(`#`));let c={$metadata:i,$fault:n.statusCode<500?`client`:`server`},l=B.for(o);try{return{errorSchema:a?.(l,s)??l.getSchema(e),errorMetadata:c}}catch{r.message=r.message??r.Message??`UnknownError`;let e=B.for(`smithy.ts.sdk.synthetic.`+o),t=e.getBaseException();if(t){let n=e.getErrorCtor(t)??Error;throw this.decorateServiceException(Object.assign(new n({name:s}),c),r)}throw this.decorateServiceException(Object.assign(Error(s),c),r)}}decorateServiceException(e,t={}){if(this.queryCompat){let n=e.Message??t.Message,r=(0,Js.decorateServiceException)(e,t);n&&(r.message=n),r.Error={...r.Error,Type:r.Error.Type,Code:r.Error.Code,Message:r.Error.message??r.Error.Message??n};let i=r.$metadata.requestId;return i&&(r.RequestId=i),r}return(0,Js.decorateServiceException)(e,t)}setQueryCompatError(e,t){let n=t.headers?.[`x-amzn-query-error`];if(e!==void 0&&n!=null){let[t,r]=n.split(`;`),i=Object.entries(e),a={Code:t,Type:r};Object.assign(e,a);for(let[e,t]of i)a[e===`message`?`Message`:e]=t;delete a.__type,e.Error=a}}queryCompatOutput(e,t){e.Error&&(t.Error=e.Error),e.Type&&(t.Type=e.Type),e.Code&&(t.Code=e.Code)}findQueryCompatibleError(e,t){try{return e.getSchema(t)}catch{return e.find(e=>z.of(e).getMergedTraits().awsQueryError?.[0]===t)}}}})),Zs,Qs=s((()=>{Ks(),V(),Xs(),Zs=class extends Ws{awsQueryCompatible;mixin;constructor({defaultNamespace:e,awsQueryCompatible:t}){super({defaultNamespace:e}),this.awsQueryCompatible=!!t,this.mixin=new Ys(this.awsQueryCompatible)}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n);return this.awsQueryCompatible&&(r.headers[`x-amzn-query-mode`]=`true`),r}async handleError(e,t,n,r,i){this.awsQueryCompatible&&this.mixin.setQueryCompatError(r,n);let a=(()=>{let e=n.headers[`x-amzn-query-error`];return e&&this.awsQueryCompatible?e.split(`;`)[0]:Is(n,r)??`Unknown`})(),{errorSchema:o,errorMetadata:s}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,r,i,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),c=z.of(o),l=r.message??r.Message??`Unknown`,u=new((B.for(o[1]).getErrorCtor(o))??Error)(l),d={};for(let[e,t]of c.structIterator())r[e]!=null&&(d[e]=this.deserializer.readValue(t,r[e]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(r,d),this.mixin.decorateServiceException(Object.assign(u,s,{$fault:c.getMergedTraits().error,message:l},d),r)}}})),$s,ec,tc,nc=s((()=>{$s=e=>{if(e==null)return e;if(typeof e==`number`||typeof e==`bigint`){let t=Error(`Received number ${e} where a string was expected.`);return t.name=`Warning`,console.warn(t),String(e)}if(typeof e==`boolean`){let t=Error(`Received boolean ${e} where a string was expected.`);return t.name=`Warning`,console.warn(t),String(e)}return e},ec=e=>{if(e==null)return e;if(typeof e==`string`){let t=e.toLowerCase();if(e!==``&&t!==`false`&&t!==`true`){let t=Error(`Received string "${e}" where a boolean was expected.`);t.name=`Warning`,console.warn(t)}return e!==``&&t!==`false`}return e},tc=e=>{if(e==null)return e;if(typeof e==`string`){let t=Number(e);if(t.toString()!==e){let t=Error(`Received string "${e}" where a number was expected.`);return t.name=`Warning`,console.warn(t),e}return t}return e}})),rc,ic=s((()=>{rc=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}}));function*ac(e,t){if(e.isUnitSchema())return;let n=e.getSchema();for(let e=0;e<n[4].length;++e){let r=n[4][e],i=n[5][e],a=new z([i,0],r);!(r in t)&&!a.isIdempotencyToken()||(yield[r,a])}}function*oc(e,t,n){if(e.isUnitSchema())return;let r=e.getSchema(),i=Object.keys(t).filter(e=>e!==`__type`).length;for(let e=0;e<r[4].length&&i!==0;++e){let a=r[4][e],o=r[5][e],s=new z([o,0],a),c=a;n&&(c=s.getMergedTraits()[n]??a),c in t&&(yield[a,s],--i)}}var sc=s((()=>{V()})),cc,lc=s((()=>{cc=class{from;to;keys;constructor(e,t){this.from=e,this.to=t,this.keys=new Set(Object.keys(this.from).filter(e=>e!==`__type`))}mark(e){this.keys.delete(e)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){let e=this.keys.values().next().value,t=this.from[e];this.to.$unknown=[e,t]}}}}));function uc(e,t,n){if(n?.source){let e=n.source;if(typeof t==`number`&&(t>2**53-1||t<-(2**53-1)||e!==String(t)))return e.includes(`.`)?new _i(e,`bigDecimal`):BigInt(e)}return t}var dc=s((()=>{bi()})),fc,pc,mc,hc=s((()=>{fc=K(),pc=L(),mc=(e,t)=>(0,fc.collectBody)(e,t).then(e=>(t?.utf8Encoder??pc.toUtf8)(e))})),gc,_c,vc,yc=s((()=>{hc(),gc=(e,t)=>mc(e,t).then(e=>{if(e.length)try{return JSON.parse(e)}catch(t){throw t?.name===`SyntaxError`&&Object.defineProperty(t,`$responseBodyText`,{value:e}),t}return{}}),_c=async(e,t)=>{let n=await gc(e,t);return n.message=n.message??n.Message,n},vc=(e,t)=>{let n=(e,t)=>Object.keys(e).find(e=>e.toLowerCase()===t.toLowerCase()),r=e=>{let t=e;return typeof t==`number`&&(t=t.toString()),t.indexOf(`,`)>=0&&(t=t.split(`,`)[0]),t.indexOf(`:`)>=0&&(t=t.split(`:`)[0]),t.indexOf(`#`)>=0&&(t=t.split(`#`)[1]),t},i=n(e.headers,`x-amzn-errortype`);if(i!==void 0)return r(e.headers[i]);if(t&&typeof t==`object`){let e=n(t,`code`);if(e&&t[e]!==void 0)return r(t[e]);if(t.__type!==void 0)return r(t.__type)}}})),bc,xc,Sc=s((()=>{aa(),V(),bi(),bc=R(),ic(),sc(),lc(),dc(),yc(),xc=class extends rc{settings;constructor(e){super(),this.settings=e}async read(e,t){return this._read(e,typeof t==`string`?JSON.parse(t,uc):await gc(t,this.serdeContext))}readObject(e,t){return this._read(e,t)}_read(e,t){let n=typeof t==`object`&&!!t,r=z.of(e);if(n){if(r.isStructSchema()){let e=r.isUnionSchema(),n={},i;e&&(i=new cc(t,n));for(let[a,o]of oc(r,t,this.settings.jsonName?`jsonName`:!1)){let r=this.settings.jsonName?o.getMergedTraits().jsonName??a:a;e&&i.mark(r),t[r]!=null&&(n[a]=this._read(o,t[r]))}return e&&i.writeUnknown(),n}if(Array.isArray(t)&&r.isListSchema()){let e=r.getValueSchema(),n=[],i=!!r.getMergedTraits().sparse;for(let r of t)(i||r!=null)&&n.push(this._read(e,r));return n}if(r.isMapSchema()){let e=r.getValueSchema(),n={},i=!!r.getMergedTraits().sparse;for(let[r,a]of Object.entries(t))(i||a!=null)&&(n[r]=this._read(e,a));return n}}if(r.isBlobSchema()&&typeof t==`string`)return(0,bc.fromBase64)(t);let i=r.getMergedTraits().mediaType;if(r.isStringSchema()&&typeof t==`string`&&i)return i===`application/json`||i.endsWith(`+json`)?Kr.from(t):t;if(r.isTimestampSchema()&&t!=null)switch(Wi(r,this.settings)){case 5:return Rn(t);case 6:return Hn(t);case 7:return Un(t);default:return console.warn(`Missing timestamp format, parsing value with Date constructor:`,t),new Date(t)}if(r.isBigIntegerSchema()&&(typeof t==`number`||typeof t==`string`))return BigInt(t);if(r.isBigDecimalSchema()&&t!=null){if(t instanceof _i)return t;let e=t;return e.type===`bigDecimal`&&`string`in e?new _i(e.string,e.type):new _i(String(t),`bigDecimal`)}if(r.isNumericSchema()&&typeof t==`string`){switch(t){case`Infinity`:return 1/0;case`-Infinity`:return-1/0;case`NaN`:return NaN}return t}if(r.isDocumentSchema())if(n){let e=Array.isArray(t)?[]:{};for(let[n,i]of Object.entries(t))i instanceof _i?e[n]=i:e[n]=this._read(r,i);return e}else return structuredClone(t);return t}}})),Cc,wc,Tc=s((()=>{bi(),Cc=``,wc=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw Error(`@aws-sdk/core/protocols - JsonReplacer already created.`);if(this.stage===2)throw Error(`@aws-sdk/core/protocols - JsonReplacer exhausted.`);return this.stage=1,(e,t)=>{if(t instanceof _i){let e=`${Cc+`nv`+ this.counter++}_`+t.string;return this.values.set(`"${e}"`,t.string),e}if(typeof t==`bigint`){let e=t.toString(),n=`${Cc+`b`+ this.counter++}_`+e;return this.values.set(`"${n}"`,e),n}return t}}replaceInJson(e){if(this.stage===0)throw Error(`@aws-sdk/core/protocols - JsonReplacer not created yet.`);if(this.stage===2)throw Error(`@aws-sdk/core/protocols - JsonReplacer exhausted.`);if(this.stage=2,this.counter===0)return e;for(let[t,n]of this.values)e=e.replace(t,n);return e}}})),Ec,Dc,Oc=s((()=>{aa(),V(),bi(),Ec=R(),ic(),sc(),Tc(),Dc=class extends rc{settings;buffer;useReplacer=!1;rootSchema;constructor(e){super(),this.settings=e}write(e,t){this.rootSchema=z.of(e),this.buffer=this._write(this.rootSchema,t)}writeDiscriminatedDocument(e,t){this.write(e,t),typeof this.buffer==`object`&&(this.buffer.__type=z.of(e).getName(!0))}flush(){let{rootSchema:e,useReplacer:t}=this;if(this.rootSchema=void 0,this.useReplacer=!1,e?.isStructSchema()||e?.isDocumentSchema()){if(!t)return JSON.stringify(this.buffer);let e=new wc;return e.replaceInJson(JSON.stringify(this.buffer,e.createReplacer(),0))}return this.buffer}_write(e,t,n){let r=typeof t==`object`&&!!t,i=z.of(e);if(r){if(i.isStructSchema()){let e={};for(let[n,r]of ac(i,t)){let a=this._write(r,t[n],i);if(a!==void 0){let t=r.getMergedTraits().jsonName,i=this.settings.jsonName?t??n:n;e[i]=a}}if(i.isUnionSchema()&&Object.keys(e).length===0){let{$unknown:n}=t;if(Array.isArray(n)){let[t,r]=n;e[t]=this._write(15,r)}}return e}if(Array.isArray(t)&&i.isListSchema()){let e=i.getValueSchema(),n=[],r=!!i.getMergedTraits().sparse;for(let i of t)(r||i!=null)&&n.push(this._write(e,i));return n}if(i.isMapSchema()){let e=i.getValueSchema(),n={},r=!!i.getMergedTraits().sparse;for(let[i,a]of Object.entries(t))(r||a!=null)&&(n[i]=this._write(e,a));return n}if(t instanceof Uint8Array&&(i.isBlobSchema()||i.isDocumentSchema()))return i===this.rootSchema?t:(this.serdeContext?.base64Encoder??Ec.toBase64)(t);if(t instanceof Date&&(i.isTimestampSchema()||i.isDocumentSchema()))switch(Wi(i,this.settings)){case 5:return t.toISOString().replace(`.000Z`,`Z`);case 6:return Mn(t);case 7:return t.getTime()/1e3;default:return console.warn(`Missing timestamp format, using epoch seconds`,t),t.getTime()/1e3}t instanceof _i&&(this.useReplacer=!0)}if(!(t===null&&n?.isStructSchema())){if(i.isStringSchema()){if(t===void 0&&i.isIdempotencyToken())return(0,Wr.v4)();let e=i.getMergedTraits().mediaType;return t!=null&&e&&(e===`application/json`||e.endsWith(`+json`))?Kr.from(t):t}if(typeof t==`number`&&i.isNumericSchema())return Math.abs(t)===1/0||isNaN(t)?String(t):t;if(typeof t==`string`&&i.isBlobSchema())return i===this.rootSchema?t:(this.serdeContext?.base64Encoder??Ec.toBase64)(t);if(typeof t==`bigint`&&(this.useReplacer=!0),i.isDocumentSchema())if(r){let e=Array.isArray(t)?[]:{};for(let[n,r]of Object.entries(t))r instanceof _i?(this.useReplacer=!0,e[n]=r):e[n]=this._write(i,r);return e}else return structuredClone(t);return t}}}})),kc,Ac=s((()=>{ic(),Sc(),Oc(),kc=class extends rc{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new Dc(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new xc(this.settings);return e.setSerdeContext(this.serdeContext),e}}})),jc,Mc=s((()=>{aa(),V(),Xs(),Ac(),yc(),jc=class extends Ii{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:e,serviceTarget:t,awsQueryCompatible:n,jsonCodec:r}){super({defaultNamespace:e}),this.serviceTarget=t,this.codec=r??new kc({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!n,this.mixin=new Ys(this.awsQueryCompatible)}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n);return r.path.endsWith(`/`)||(r.path+=`/`),Object.assign(r.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${e.name}`}),this.awsQueryCompatible&&(r.headers[`x-amzn-query-mode`]=`true`),(nt(e.input)===`unit`||!r.body)&&(r.body=`{}`),r}getPayloadCodec(){return this.codec}async handleError(e,t,n,r,i){this.awsQueryCompatible&&this.mixin.setQueryCompatError(r,n);let a=vc(n,r)??`Unknown`,{errorSchema:o,errorMetadata:s}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,r,i,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),c=z.of(o),l=r.message??r.Message??`Unknown`,u=new((B.for(o[1]).getErrorCtor(o))??Error)(l),d={};for(let[e,t]of c.structIterator())r[e]!=null&&(d[e]=this.codec.createDeserializer().readObject(t,r[e]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(r,d),this.mixin.decorateServiceException(Object.assign(u,s,{$fault:c.getMergedTraits().error,message:l},d),r)}}})),Nc,Pc=s((()=>{Mc(),Nc=class extends jc{constructor({defaultNamespace:e,serviceTarget:t,awsQueryCompatible:n,jsonCodec:r}){super({defaultNamespace:e,serviceTarget:t,awsQueryCompatible:n,jsonCodec:r})}getShapeId(){return`aws.protocols#awsJson1_0`}getJsonRpcVersion(){return`1.0`}getDefaultContentType(){return`application/x-amz-json-1.0`}}})),Fc,Ic=s((()=>{Mc(),Fc=class extends jc{constructor({defaultNamespace:e,serviceTarget:t,awsQueryCompatible:n,jsonCodec:r}){super({defaultNamespace:e,serviceTarget:t,awsQueryCompatible:n,jsonCodec:r})}getShapeId(){return`aws.protocols#awsJson1_1`}getJsonRpcVersion(){return`1.1`}getDefaultContentType(){return`application/x-amz-json-1.1`}}})),Lc,Rc=s((()=>{aa(),V(),Xs(),Ac(),yc(),Lc=class extends Ni{serializer;deserializer;codec;mixin=new Ys;constructor({defaultNamespace:e}){super({defaultNamespace:e});let t={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new kc(t),this.serializer=new na(this.codec.createSerializer(),t),this.deserializer=new Zi(this.codec.createDeserializer(),t)}getShapeId(){return`aws.protocols#restJson1`}getPayloadCodec(){return this.codec}setSerdeContext(e){this.codec.setSerdeContext(e),super.setSerdeContext(e)}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n),i=z.of(e.input);if(!r.headers[`content-type`]){let e=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);e&&(r.headers[`content-type`]=e)}return r.body==null&&r.headers[`content-type`]===this.getDefaultContentType()&&(r.body=`{}`),r}async deserializeResponse(e,t,n){let r=await super.deserializeResponse(e,t,n),i=z.of(e.output);for(let[e,t]of i.structIterator())t.getMemberTraits().httpPayload&&!(e in r)&&(r[e]=null);return r}async handleError(e,t,n,r,i){let a=vc(n,r)??`Unknown`,{errorSchema:o,errorMetadata:s}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,r,i),c=z.of(o),l=r.message??r.Message??`Unknown`,u=new((B.for(o[1]).getErrorCtor(o))??Error)(l);await this.deserializeHttpMessage(o,t,n,r);let d={};for(let[e,t]of c.structIterator()){let n=t.getMergedTraits().jsonName??e;d[e]=this.codec.createDeserializer().readObject(t,r[n])}throw this.mixin.decorateServiceException(Object.assign(u,s,{$fault:c.getMergedTraits().error,message:l},d),r)}getDefaultContentType(){return`application/json`}}})),zc,Bc,Vc=s((()=>{zc=K(),Bc=e=>{if(e!=null)return typeof e==`object`&&`__type`in e&&delete e.__type,(0,zc.expectUnion)(e)}})),Hc=c(((e,t)=>{(()=>{var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{typeof Symbol<`u`&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:`Module`}),Object.defineProperty(e,`__esModule`,{value:!0})}},n={};e.r(n),e.d(n,{XMLBuilder:()=>De,XMLParser:()=>ye,XMLValidator:()=>R});let r=RegExp(`^[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`);function i(e,t){let n=[],r=t.exec(e);for(;r;){let i=[];i.startIndex=t.lastIndex-r[0].length;let a=r.length;for(let e=0;e<a;e++)i.push(r[e]);n.push(i),r=t.exec(e)}return n}let a=function(e){return r.exec(e)!=null},o={allowBooleanAttributes:!1,unpairedTags:[]};function s(e,t){t=Object.assign({},o,t);let n=[],r=!1,i=!1;e[0]===``&&(e=e.substr(1));for(let o=0;o<e.length;o++)if(e[o]===`<`&&e[o+1]===`?`){if(o+=2,o=l(e,o),o.err)return o}else{if(e[o]!==`<`){if(c(e[o]))continue;return h(`InvalidChar`,`char '`+e[o]+`' is not expected.`,_(e,o))}{let s=o;if(o++,e[o]===`!`){o=u(e,o);continue}{let f=!1;e[o]===`/`&&(f=!0,o++);let g=``;for(;o<e.length&&e[o]!==`>`&&e[o]!==` `&&e[o]!==`	`&&e[o]!==`
`&&e[o]!==`\r`;o++)g+=e[o];if(g=g.trim(),g[g.length-1]===`/`&&(g=g.substring(0,g.length-1),o--),!a(g)){let t;return t=g.trim().length===0?`Invalid space after '<'.`:`Tag '`+g+`' is an invalid name.`,h(`InvalidTag`,t,_(e,o))}let v=d(e,o);if(!1===v)return h(`InvalidAttr`,`Attributes for '`+g+`' have open quote.`,_(e,o));let y=v.value;if(o=v.index,y[y.length-1]===`/`){let n=o-y.length;y=y.substring(0,y.length-1);let i=p(y,t);if(!0!==i)return h(i.err.code,i.err.msg,_(e,n+i.err.line));r=!0}else if(f){if(!v.tagClosed)return h(`InvalidTag`,`Closing tag '`+g+`' doesn't have proper closing.`,_(e,o));if(y.trim().length>0)return h(`InvalidTag`,`Closing tag '`+g+`' can't have attributes or invalid starting.`,_(e,s));if(n.length===0)return h(`InvalidTag`,`Closing tag '`+g+`' has not been opened.`,_(e,s));{let t=n.pop();if(g!==t.tagName){let n=_(e,t.tagStartPos);return h(`InvalidTag`,`Expected closing tag '`+t.tagName+`' (opened in line `+n.line+`, col `+n.col+`) instead of closing tag '`+g+`'.`,_(e,s))}n.length==0&&(i=!0)}}else{let a=p(y,t);if(!0!==a)return h(a.err.code,a.err.msg,_(e,o-y.length+a.err.line));if(!0===i)return h(`InvalidXml`,`Multiple possible root nodes found.`,_(e,o));t.unpairedTags.indexOf(g)!==-1||n.push({tagName:g,tagStartPos:s}),r=!0}for(o++;o<e.length;o++)if(e[o]===`<`){if(e[o+1]===`!`){o++,o=u(e,o);continue}if(e[o+1]!==`?`)break;if(o=l(e,++o),o.err)return o}else if(e[o]===`&`){let t=m(e,o);if(t==-1)return h(`InvalidChar`,`char '&' is not expected.`,_(e,o));o=t}else if(!0===i&&!c(e[o]))return h(`InvalidXml`,`Extra text at the end`,_(e,o));e[o]===`<`&&o--}}}return r?n.length==1?h(`InvalidTag`,`Unclosed tag '`+n[0].tagName+`'.`,_(e,n[0].tagStartPos)):!(n.length>0)||h(`InvalidXml`,`Invalid '`+JSON.stringify(n.map((e=>e.tagName)),null,4).replace(/\r?\n/g,``)+`' found.`,{line:1,col:1}):h(`InvalidXml`,`Start tag expected.`,1)}function c(e){return e===` `||e===`	`||e===`
`||e===`\r`}function l(e,t){let n=t;for(;t<e.length;t++)if(!(e[t]!=`?`&&e[t]!=` `)){let r=e.substr(n,t-n);if(t>5&&r===`xml`)return h(`InvalidXml`,`XML declaration allowed only at the start of the document.`,_(e,t));if(e[t]==`?`&&e[t+1]==`>`){t++;break}}return t}function u(e,t){if(e.length>t+5&&e[t+1]===`-`&&e[t+2]===`-`){for(t+=3;t<e.length;t++)if(e[t]===`-`&&e[t+1]===`-`&&e[t+2]===`>`){t+=2;break}}else if(e.length>t+8&&e[t+1]===`D`&&e[t+2]===`O`&&e[t+3]===`C`&&e[t+4]===`T`&&e[t+5]===`Y`&&e[t+6]===`P`&&e[t+7]===`E`){let n=1;for(t+=8;t<e.length;t++)if(e[t]===`<`)n++;else if(e[t]===`>`&&(n--,n===0))break}else if(e.length>t+9&&e[t+1]===`[`&&e[t+2]===`C`&&e[t+3]===`D`&&e[t+4]===`A`&&e[t+5]===`T`&&e[t+6]===`A`&&e[t+7]===`[`){for(t+=8;t<e.length;t++)if(e[t]===`]`&&e[t+1]===`]`&&e[t+2]===`>`){t+=2;break}}return t}function d(e,t){let n=``,r=``,i=!1;for(;t<e.length;t++){if(e[t]===`"`||e[t]===`'`)r===``?r=e[t]:r!==e[t]||(r=``);else if(e[t]===`>`&&r===``){i=!0;break}n+=e[t]}return r===``&&{value:n,index:t,tagClosed:i}}let f=RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,`g`);function p(e,t){let n=i(e,f),r={};for(let e=0;e<n.length;e++){if(n[e][1].length===0)return h(`InvalidAttr`,`Attribute '`+n[e][2]+`' has no space in starting.`,v(n[e]));if(n[e][3]!==void 0&&n[e][4]===void 0)return h(`InvalidAttr`,`Attribute '`+n[e][2]+`' is without value.`,v(n[e]));if(n[e][3]===void 0&&!t.allowBooleanAttributes)return h(`InvalidAttr`,`boolean attribute '`+n[e][2]+`' is not allowed.`,v(n[e]));let i=n[e][2];if(!g(i))return h(`InvalidAttr`,`Attribute '`+i+`' is an invalid name.`,v(n[e]));if(r.hasOwnProperty(i))return h(`InvalidAttr`,`Attribute '`+i+`' is repeated.`,v(n[e]));r[i]=1}return!0}function m(e,t){if(e[++t]===`;`)return-1;if(e[t]===`#`)return function(e,t){let n=/\d/;for(e[t]===`x`&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(e[t]===`;`)return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(e[t]===`;`)break;return-1}return t}function h(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function g(e){return a(e)}function _(e,t){let n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function v(e){return e.startIndex+e[1].length}let y={preserveOrder:!1,attributeNamePrefix:`@_`,attributesGroupName:!1,textNodeName:`#text`,ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,n){return e},captureMetaData:!1},b;b=typeof Symbol==`function`?Symbol(`XML Node Metadata`):`@@xmlMetadata`;class x{constructor(e){this.tagname=e,this.child=[],this[`:@`]={}}add(e,t){e===`__proto__`&&(e=`#__proto__`),this.child.push({[e]:t})}addChild(e,t){e.tagname===`__proto__`&&(e.tagname=`#__proto__`),e[`:@`]&&Object.keys(e[`:@`]).length>0?this.child.push({[e.tagname]:e.child,":@":e[`:@`]}):this.child.push({[e.tagname]:e.child}),t!==void 0&&(this.child[this.child.length-1][b]={startIndex:t})}static getMetaDataSymbol(){return b}}function S(e,t){let n={};if(e[t+3]!==`O`||e[t+4]!==`C`||e[t+5]!==`T`||e[t+6]!==`Y`||e[t+7]!==`P`||e[t+8]!==`E`)throw Error(`Invalid Tag instead of DOCTYPE`);{t+=9;let r=1,i=!1,a=!1,o=``;for(;t<e.length;t++)if(e[t]!==`<`||a)if(e[t]===`>`){if(a?e[t-1]===`-`&&e[t-2]===`-`&&(a=!1,r--):r--,r===0)break}else e[t]===`[`?i=!0:o+=e[t];else{if(i&&O(e,`!ENTITY`,t)){let r,i;t+=7,[r,i,t]=w(e,t+1),i.indexOf(`&`)===-1&&(n[r]={regx:RegExp(`&${r};`,`g`),val:i})}else if(i&&O(e,`!ELEMENT`,t)){t+=8;let{index:n}=D(e,t+1);t=n}else if(i&&O(e,`!ATTLIST`,t))t+=8;else if(i&&O(e,`!NOTATION`,t)){t+=9;let{index:n}=T(e,t+1);t=n}else{if(!O(e,`!--`,t))throw Error(`Invalid DOCTYPE`);a=!0}r++,o=``}if(r!==0)throw Error(`Unclosed DOCTYPE`)}return{entities:n,i:t}}let C=(e,t)=>{for(;t<e.length&&/\s/.test(e[t]);)t++;return t};function w(e,t){t=C(e,t);let n=``;for(;t<e.length&&!/\s/.test(e[t])&&e[t]!==`"`&&e[t]!==`'`;)n+=e[t],t++;if(k(n),t=C(e,t),e.substring(t,t+6).toUpperCase()===`SYSTEM`)throw Error(`External entities are not supported`);if(e[t]===`%`)throw Error(`Parameter entities are not supported`);let r=``;return[t,r]=E(e,t,`entity`),[n,r,--t]}function T(e,t){t=C(e,t);let n=``;for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;k(n),t=C(e,t);let r=e.substring(t,t+6).toUpperCase();if(r!==`SYSTEM`&&r!==`PUBLIC`)throw Error(`Expected SYSTEM or PUBLIC, found "${r}"`);t+=r.length,t=C(e,t);let i=null,a=null;if(r===`PUBLIC`)[t,i]=E(e,t,`publicIdentifier`),e[t=C(e,t)]!==`"`&&e[t]!==`'`||([t,a]=E(e,t,`systemIdentifier`));else if(r===`SYSTEM`&&([t,a]=E(e,t,`systemIdentifier`),!a))throw Error(`Missing mandatory system identifier for SYSTEM notation`);return{notationName:n,publicIdentifier:i,systemIdentifier:a,index:--t}}function E(e,t,n){let r=``,i=e[t];if(i!==`"`&&i!==`'`)throw Error(`Expected quoted string, found "${i}"`);for(t++;t<e.length&&e[t]!==i;)r+=e[t],t++;if(e[t]!==i)throw Error(`Unterminated ${n} value`);return[++t,r]}function D(e,t){t=C(e,t);let n=``;for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;if(!k(n))throw Error(`Invalid element name: "${n}"`);let r=``;if(e[t=C(e,t)]===`E`&&O(e,`MPTY`,t))t+=4;else if(e[t]===`A`&&O(e,`NY`,t))t+=2;else{if(e[t]!==`(`)throw Error(`Invalid Element Expression, found "${e[t]}"`);for(t++;t<e.length&&e[t]!==`)`;)r+=e[t],t++;if(e[t]!==`)`)throw Error(`Unterminated content model`)}return{elementName:n,contentModel:r.trim(),index:t}}function O(e,t,n){for(let r=0;r<t.length;r++)if(t[r]!==e[n+r+1])return!1;return!0}function k(e){if(a(e))return e;throw Error(`Invalid entity name ${e}`)}let A=/^[-+]?0x[a-fA-F0-9]+$/,j=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,M={hex:!0,leadingZeros:!0,decimalPoint:`.`,eNotation:!0},ee=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function te(e){return typeof e==`function`?e:Array.isArray(e)?t=>{for(let n of e)if(typeof n==`string`&&t===n||n instanceof RegExp&&n.test(t))return!0}:()=>!1}class ne{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:`'`},gt:{regex:/&(gt|#62|#x3E);/g,val:`>`},lt:{regex:/&(lt|#60|#x3C);/g,val:`<`},quot:{regex:/&(quot|#34|#x22);/g,val:`"`}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:`&`},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:` `},cent:{regex:/&(cent|#162);/g,val:``},pound:{regex:/&(pound|#163);/g,val:``},yen:{regex:/&(yen|#165);/g,val:``},euro:{regex:/&(euro|#8364);/g,val:``},copyright:{regex:/&(copy|#169);/g,val:``},reg:{regex:/&(reg|#174);/g,val:``},inr:{regex:/&(inr|#8377);/g,val:``},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,16))}},this.addExternalEntities=re,this.parseXml=se,this.parseTextData=ie,this.resolveNameSpace=ae,this.buildAttributesMap=N,this.isItStopNode=ue,this.replaceEntitiesValue=ce,this.readStopNodeData=fe,this.saveTextToParentTag=le,this.addChild=P,this.ignoreAttributesFn=te(this.options.ignoreAttributes)}}function re(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let r=t[n];this.lastEntities[r]={regex:RegExp(`&`+r+`;`,`g`),val:e[r]}}}function ie(e,t,n,r,i,a,o){if(e!==void 0&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));let r=this.options.tagValueProcessor(t,e,n,i,a);return r==null?e:typeof r!=typeof e||r!==e?r:this.options.trimValues||e.trim()===e?I(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function ae(e){if(this.options.removeNSPrefix){let t=e.split(`:`),n=e.charAt(0)===`/`?`/`:``;if(t[0]===`xmlns`)return``;t.length===2&&(e=n+t[1])}return e}let oe=RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,`gm`);function N(e,t,n){if(!0!==this.options.ignoreAttributes&&typeof e==`string`){let n=i(e,oe),r=n.length,a={};for(let e=0;e<r;e++){let r=this.resolveNameSpace(n[e][1]);if(this.ignoreAttributesFn(r,t))continue;let i=n[e][4],o=this.options.attributeNamePrefix+r;if(r.length)if(this.options.transformAttributeName&&(o=this.options.transformAttributeName(o)),o===`__proto__`&&(o=`#__proto__`),i!==void 0){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);let e=this.options.attributeValueProcessor(r,i,t);a[o]=e==null?i:typeof e!=typeof i||e!==i?e:I(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[o]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){let e={};return e[this.options.attributesGroupName]=a,e}return a}}let se=function(e){e=e.replace(/\r\n?/g,`
`);let t=new x(`!xml`),n=t,r=``,i=``;for(let a=0;a<e.length;a++)if(e[a]===`<`)if(e[a+1]===`/`){let t=F(e,`>`,a,`Closing Tag is not closed.`),o=e.substring(a+2,t).trim();if(this.options.removeNSPrefix){let e=o.indexOf(`:`);e!==-1&&(o=o.substr(e+1))}this.options.transformTagName&&(o=this.options.transformTagName(o)),n&&(r=this.saveTextToParentTag(r,n,i));let s=i.substring(i.lastIndexOf(`.`)+1);if(o&&this.options.unpairedTags.indexOf(o)!==-1)throw Error(`Unpaired tag can not be used as closing tag: </${o}>`);let c=0;s&&this.options.unpairedTags.indexOf(s)!==-1?(c=i.lastIndexOf(`.`,i.lastIndexOf(`.`)-1),this.tagsNodeStack.pop()):c=i.lastIndexOf(`.`),i=i.substring(0,c),n=this.tagsNodeStack.pop(),r=``,a=t}else if(e[a+1]===`?`){let t=de(e,a,!1,`?>`);if(!t)throw Error(`Pi Tag is not closed.`);if(r=this.saveTextToParentTag(r,n,i),!(this.options.ignoreDeclaration&&t.tagName===`?xml`||this.options.ignorePiTags)){let e=new x(t.tagName);e.add(this.options.textNodeName,``),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[`:@`]=this.buildAttributesMap(t.tagExp,i,t.tagName)),this.addChild(n,e,i,a)}a=t.closeIndex+1}else if(e.substr(a+1,3)===`!--`){let t=F(e,`-->`,a+4,`Comment is not closed.`);if(this.options.commentPropName){let o=e.substring(a+4,t-2);r=this.saveTextToParentTag(r,n,i),n.add(this.options.commentPropName,[{[this.options.textNodeName]:o}])}a=t}else if(e.substr(a+1,2)===`!D`){let t=S(e,a);this.docTypeEntities=t.entities,a=t.i}else if(e.substr(a+1,2)===`![`){let t=F(e,`]]>`,a,`CDATA is not closed.`)-2,o=e.substring(a+9,t);r=this.saveTextToParentTag(r,n,i);let s=this.parseTextData(o,n.tagname,i,!0,!1,!0,!0);s??=``,this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:o}]):n.add(this.options.textNodeName,s),a=t+2}else{let o=de(e,a,this.options.removeNSPrefix),s=o.tagName,c=o.rawTagName,l=o.tagExp,u=o.attrExpPresent,d=o.closeIndex;this.options.transformTagName&&(s=this.options.transformTagName(s)),n&&r&&n.tagname!==`!xml`&&(r=this.saveTextToParentTag(r,n,i,!1));let f=n;f&&this.options.unpairedTags.indexOf(f.tagname)!==-1&&(n=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf(`.`))),s!==t.tagname&&(i+=i?`.`+s:s);let p=a;if(this.isItStopNode(this.options.stopNodes,i,s)){let t=``;if(l.length>0&&l.lastIndexOf(`/`)===l.length-1)s[s.length-1]===`/`?(s=s.substr(0,s.length-1),i=i.substr(0,i.length-1),l=s):l=l.substr(0,l.length-1),a=o.closeIndex;else if(this.options.unpairedTags.indexOf(s)!==-1)a=o.closeIndex;else{let n=this.readStopNodeData(e,c,d+1);if(!n)throw Error(`Unexpected end of ${c}`);a=n.i,t=n.tagContent}let r=new x(s);s!==l&&u&&(r[`:@`]=this.buildAttributesMap(l,i,s)),t&&=this.parseTextData(t,s,i,!0,u,!0,!0),i=i.substr(0,i.lastIndexOf(`.`)),r.add(this.options.textNodeName,t),this.addChild(n,r,i,p)}else{if(l.length>0&&l.lastIndexOf(`/`)===l.length-1){s[s.length-1]===`/`?(s=s.substr(0,s.length-1),i=i.substr(0,i.length-1),l=s):l=l.substr(0,l.length-1),this.options.transformTagName&&(s=this.options.transformTagName(s));let e=new x(s);s!==l&&u&&(e[`:@`]=this.buildAttributesMap(l,i,s)),this.addChild(n,e,i,p),i=i.substr(0,i.lastIndexOf(`.`))}else{let e=new x(s);this.tagsNodeStack.push(n),s!==l&&u&&(e[`:@`]=this.buildAttributesMap(l,i,s)),this.addChild(n,e,i,p),n=e}r=``,a=d}}else r+=e[a];return t.child};function P(e,t,n,r){this.options.captureMetaData||(r=void 0);let i=this.options.updateTag(t.tagname,n,t[`:@`]);!1===i||(typeof i==`string`&&(t.tagname=i),e.addChild(t,r))}let ce=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){let n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function le(e,t,n,r){return e&&=(r===void 0&&(r=t.child.length===0),(e=this.parseTextData(e,t.tagname,n,!1,!!t[`:@`]&&Object.keys(t[`:@`]).length!==0,r))!==void 0&&e!==``&&t.add(this.options.textNodeName,e),``),e}function ue(e,t,n){let r=`*.`+n;for(let n in e){let i=e[n];if(r===i||t===i)return!0}return!1}function F(e,t,n,r){let i=e.indexOf(t,n);if(i===-1)throw Error(r);return i+t.length-1}function de(e,t,n,r=`>`){let i=function(e,t,n=`>`){let r,i=``;for(let a=t;a<e.length;a++){let t=e[a];if(r)t===r&&(r=``);else if(t===`"`||t===`'`)r=t;else if(t===n[0]){if(!n[1]||e[a+1]===n[1])return{data:i,index:a}}else t===`	`&&(t=` `);i+=t}}(e,t+1,r);if(!i)return;let a=i.data,o=i.index,s=a.search(/\s/),c=a,l=!0;s!==-1&&(c=a.substring(0,s),a=a.substring(s+1).trimStart());let u=c;if(n){let e=c.indexOf(`:`);e!==-1&&(c=c.substr(e+1),l=c!==i.data.substr(e+1))}return{tagName:c,tagExp:a,closeIndex:o,attrExpPresent:l,rawTagName:u}}function fe(e,t,n){let r=n,i=1;for(;n<e.length;n++)if(e[n]===`<`)if(e[n+1]===`/`){let a=F(e,`>`,n,`${t} is not closed`);if(e.substring(n+2,a).trim()===t&&(i--,i===0))return{tagContent:e.substring(r,n),i:a};n=a}else if(e[n+1]===`?`)n=F(e,`?>`,n+1,`StopNode is not closed.`);else if(e.substr(n+1,3)===`!--`)n=F(e,`-->`,n+3,`StopNode is not closed.`);else if(e.substr(n+1,2)===`![`)n=F(e,`]]>`,n,`StopNode is not closed.`)-2;else{let r=de(e,n,`>`);r&&((r&&r.tagName)===t&&r.tagExp[r.tagExp.length-1]!==`/`&&i++,n=r.closeIndex)}}function I(e,t,n){if(t&&typeof e==`string`){let t=e.trim();return t===`true`||t!==`false`&&function(e,t={}){if(t=Object.assign({},M,t),!e||typeof e!=`string`)return e;let n=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(n))return e;if(e===`0`)return 0;if(t.hex&&A.test(n))return function(e){if(parseInt)return parseInt(e,16);if(Number.parseInt)return Number.parseInt(e,16);if(window&&window.parseInt)return window.parseInt(e,16);throw Error(`parseInt, Number.parseInt, window.parseInt are not supported`)}(n);if(n.search(/.+[eE].+/)!==-1)return function(e,t,n){if(!n.eNotation)return e;let r=t.match(ee);if(r){let i=r[1]||``,a=r[3].indexOf(`e`)===-1?`E`:`e`,o=r[2],s=i?e[o.length+1]===a:e[o.length]===a;return o.length>1&&s?e:o.length!==1||!r[3].startsWith(`.${a}`)&&r[3][0]!==a?n.leadingZeros&&!s?(t=(r[1]||``)+r[3],Number(t)):e:Number(t)}return e}(e,n,t);{let i=j.exec(n);if(i){let a=i[1]||``,o=i[2],s=((r=i[3])&&r.indexOf(`.`)!==-1&&((r=r.replace(/0+$/,``))===`.`?r=`0`:r[0]===`.`?r=`0`+r:r[r.length-1]===`.`&&(r=r.substring(0,r.length-1))),r),c=a?e[o.length+1]===`.`:e[o.length]===`.`;if(!t.leadingZeros&&(o.length>1||o.length===1&&!c))return e;{let r=Number(n),i=String(r);if(r===0||r===-0)return r;if(i.search(/[eE]/)!==-1)return t.eNotation?r:e;if(n.indexOf(`.`)!==-1)return i===`0`||i===s||i===`${a}${s}`?r:e;let c=o?s:n;return o?c===i||a+c===i?r:e:c===i||c===a+i?r:e}}return e}var r}(e,n)}return e===void 0?``:e}let pe=x.getMetaDataSymbol();function me(e,t){return he(e,t)}function he(e,t,n){let r,i={};for(let a=0;a<e.length;a++){let o=e[a],s=ge(o),c=``;if(c=n===void 0?s:n+`.`+s,s===t.textNodeName)r===void 0?r=o[s]:r+=``+o[s];else{if(s===void 0)continue;if(o[s]){let e=he(o[s],t,c),n=ve(e,t);o[pe]!==void 0&&(e[pe]=o[pe]),o[`:@`]?_e(e,o[`:@`],c,t):Object.keys(e).length!==1||e[t.textNodeName]===void 0||t.alwaysCreateTextNode?Object.keys(e).length===0&&(t.alwaysCreateTextNode?e[t.textNodeName]=``:e=``):e=e[t.textNodeName],i[s]!==void 0&&i.hasOwnProperty(s)?(Array.isArray(i[s])||(i[s]=[i[s]]),i[s].push(e)):t.isArray(s,c,n)?i[s]=[e]:i[s]=e}}}return typeof r==`string`?r.length>0&&(i[t.textNodeName]=r):r!==void 0&&(i[t.textNodeName]=r),i}function ge(e){let t=Object.keys(e);for(let e=0;e<t.length;e++){let n=t[e];if(n!==`:@`)return n}}function _e(e,t,n,r){if(t){let i=Object.keys(t),a=i.length;for(let o=0;o<a;o++){let a=i[o];r.isArray(a,n+`.`+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function ve(e,t){let{textNodeName:n}=t,r=Object.keys(e).length;return r===0||!(r!==1||!e[n]&&typeof e[n]!=`boolean`&&e[n]!==0)}class ye{constructor(e){this.externalEntities={},this.options=function(e){return Object.assign({},y,e)}(e)}parse(e,t){if(typeof e!=`string`){if(!e.toString)throw Error(`XML data is accepted in String or Bytes[] form.`);e=e.toString()}if(t){!0===t&&(t={});let n=s(e,t);if(!0!==n)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}let n=new ne(this.options);n.addExternalEntities(this.externalEntities);let r=n.parseXml(e);return this.options.preserveOrder||r===void 0?r:me(r,this.options)}addEntity(e,t){if(t.indexOf(`&`)!==-1)throw Error(`Entity value can't have '&'`);if(e.indexOf(`&`)!==-1||e.indexOf(`;`)!==-1)throw Error(`An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'`);if(t===`&`)throw Error(`An entity with value '&' is not permitted`);this.externalEntities[e]=t}static getMetaDataSymbol(){return x.getMetaDataSymbol()}}function be(e,t){let n=``;return t.format&&t.indentBy.length>0&&(n=`
`),xe(e,t,``,n)}function xe(e,t,n,r){let i=``,a=!1;for(let o=0;o<e.length;o++){let s=e[o],c=Se(s);if(c===void 0)continue;let l=``;if(l=n.length===0?c:`${n}.${c}`,c===t.textNodeName){let e=s[c];we(l,t)||(e=t.tagValueProcessor(c,e),e=Te(e,t)),a&&(i+=r),i+=e,a=!1;continue}if(c===t.cdataPropName){a&&(i+=r),i+=`<![CDATA[${s[c][0][t.textNodeName]}]]>`,a=!1;continue}if(c===t.commentPropName){i+=r+`\x3c!--${s[c][0][t.textNodeName]}--\x3e`,a=!0;continue}if(c[0]===`?`){let e=Ce(s[`:@`],t),n=c===`?xml`?``:r,o=s[c][0][t.textNodeName];o=o.length===0?``:` `+o,i+=n+`<${c}${o}${e}?>`,a=!0;continue}let u=r;u!==``&&(u+=t.indentBy);let d=r+`<${c}${Ce(s[`:@`],t)}`,f=xe(s[c],t,l,u);t.unpairedTags.indexOf(c)===-1?f&&f.length!==0||!t.suppressEmptyNode?f&&f.endsWith(`>`)?i+=d+`>${f}${r}</${c}>`:(i+=d+`>`,f&&r!==``&&(f.includes(`/>`)||f.includes(`</`))?i+=r+t.indentBy+f+r:i+=f,i+=`</${c}>`):i+=d+`/>`:t.suppressUnpairedNode?i+=d+`>`:i+=d+`/>`,a=!0}return i}function Se(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let r=t[n];if(e.hasOwnProperty(r)&&r!==`:@`)return r}}function Ce(e,t){let n=``;if(e&&!t.ignoreAttributes)for(let r in e){if(!e.hasOwnProperty(r))continue;let i=t.attributeValueProcessor(r,e[r]);i=Te(i,t),!0===i&&t.suppressBooleanAttributes?n+=` ${r.substr(t.attributeNamePrefix.length)}`:n+=` ${r.substr(t.attributeNamePrefix.length)}="${i}"`}return n}function we(e,t){let n=(e=e.substr(0,e.length-t.textNodeName.length-1)).substr(e.lastIndexOf(`.`)+1);for(let r in t.stopNodes)if(t.stopNodes[r]===e||t.stopNodes[r]===`*.`+n)return!0;return!1}function Te(e,t){if(e&&e.length>0&&t.processEntities)for(let n=0;n<t.entities.length;n++){let r=t.entities[n];e=e.replace(r.regex,r.val)}return e}let Ee={attributeNamePrefix:`@_`,attributesGroupName:!1,textNodeName:`#text`,ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:`  `,suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:RegExp(`&`,`g`),val:`&amp;`},{regex:RegExp(`>`,`g`),val:`&gt;`},{regex:RegExp(`<`,`g`),val:`&lt;`},{regex:RegExp(`'`,`g`),val:`&apos;`},{regex:RegExp(`"`,`g`),val:`&quot;`}],processEntities:!0,stopNodes:[],oneListGroup:!1};function De(e){this.options=Object.assign({},Ee,e),!0===this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=te(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=ke),this.processTextOrObjNode=Oe,this.options.format?(this.indentate=L,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return``},this.tagEndChar=`>`,this.newLine=``)}function Oe(e,t,n,r){let i=this.j2x(e,n+1,r.concat(t));return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,i.attrStr,n):this.buildObjectNode(i.val,t,i.attrStr,n)}function L(e){return this.options.indentBy.repeat(e)}function ke(e){return!(!e.startsWith(this.options.attributeNamePrefix)||e===this.options.textNodeName)&&e.substr(this.attrPrefixLen)}De.prototype.build=function(e){return this.options.preserveOrder?be(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0,[]).val)},De.prototype.j2x=function(e,t,n){let r=``,i=``,a=n.join(`.`);for(let o in e)if(Object.prototype.hasOwnProperty.call(e,o))if(e[o]===void 0)this.isAttribute(o)&&(i+=``);else if(e[o]===null)this.isAttribute(o)||o===this.options.cdataPropName?i+=``:o[0]===`?`?i+=this.indentate(t)+`<`+o+`?`+this.tagEndChar:i+=this.indentate(t)+`<`+o+`/`+this.tagEndChar;else if(e[o]instanceof Date)i+=this.buildTextValNode(e[o],o,``,t);else if(typeof e[o]!=`object`){let n=this.isAttribute(o);if(n&&!this.ignoreAttributesFn(n,a))r+=this.buildAttrPairStr(n,``+e[o]);else if(!n)if(o===this.options.textNodeName){let t=this.options.tagValueProcessor(o,``+e[o]);i+=this.replaceEntitiesValue(t)}else i+=this.buildTextValNode(e[o],o,``,t)}else if(Array.isArray(e[o])){let r=e[o].length,a=``,s=``;for(let c=0;c<r;c++){let r=e[o][c];if(r!==void 0)if(r===null)o[0]===`?`?i+=this.indentate(t)+`<`+o+`?`+this.tagEndChar:i+=this.indentate(t)+`<`+o+`/`+this.tagEndChar;else if(typeof r==`object`)if(this.options.oneListGroup){let e=this.j2x(r,t+1,n.concat(o));a+=e.val,this.options.attributesGroupName&&r.hasOwnProperty(this.options.attributesGroupName)&&(s+=e.attrStr)}else a+=this.processTextOrObjNode(r,o,t,n);else if(this.options.oneListGroup){let e=this.options.tagValueProcessor(o,r);e=this.replaceEntitiesValue(e),a+=e}else a+=this.buildTextValNode(r,o,``,t)}this.options.oneListGroup&&(a=this.buildObjectNode(a,o,s,t)),i+=a}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let t=Object.keys(e[o]),n=t.length;for(let i=0;i<n;i++)r+=this.buildAttrPairStr(t[i],``+e[o][t[i]])}else i+=this.processTextOrObjNode(e[o],o,t,n);return{attrStr:r,val:i}},De.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,``+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t===`true`?` `+e:` `+e+`="`+t+`"`},De.prototype.buildObjectNode=function(e,t,n,r){if(e===``)return t[0]===`?`?this.indentate(r)+`<`+t+n+`?`+this.tagEndChar:this.indentate(r)+`<`+t+n+this.closeTag(t)+this.tagEndChar;{let i=`</`+t+this.tagEndChar,a=``;return t[0]===`?`&&(a=`?`,i=``),!n&&n!==``||e.indexOf(`<`)!==-1?!1!==this.options.commentPropName&&t===this.options.commentPropName&&a.length===0?this.indentate(r)+`\x3c!--${e}--\x3e`+this.newLine:this.indentate(r)+`<`+t+n+a+this.tagEndChar+e+this.indentate(r)+i:this.indentate(r)+`<`+t+n+a+`>`+e+i}},De.prototype.closeTag=function(e){let t=``;return this.options.unpairedTags.indexOf(e)===-1?t=this.options.suppressEmptyNode?`/`:`></${e}`:this.options.suppressUnpairedNode||(t=`/`),t},De.prototype.buildTextValNode=function(e,t,n,r){if(!1!==this.options.cdataPropName&&t===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${e}]]>`+this.newLine;if(!1!==this.options.commentPropName&&t===this.options.commentPropName)return this.indentate(r)+`\x3c!--${e}--\x3e`+this.newLine;if(t[0]===`?`)return this.indentate(r)+`<`+t+n+`?`+this.tagEndChar;{let i=this.options.tagValueProcessor(t,e);return i=this.replaceEntitiesValue(i),i===``?this.indentate(r)+`<`+t+n+this.closeTag(t)+this.tagEndChar:this.indentate(r)+`<`+t+n+`>`+i+`</`+t+this.tagEndChar}},De.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let n=this.options.entities[t];e=e.replace(n.regex,n.val)}return e};let R={validate:s};t.exports=n})()})),Uc=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.parseXML=n;let t=new(Hc()).XMLParser({attributeNamePrefix:``,htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===``&&t.includes(`
`)?``:void 0});t.addEntity(`#xD`,`\r`),t.addEntity(`#10`,`
`);function n(e){return t.parse(e,!0)}})),Wc=c((e=>{var t=Uc();function n(e){return e.replace(/&/g,`&amp;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`).replace(/"/g,`&quot;`)}function r(e){return e.replace(/&/g,`&amp;`).replace(/"/g,`&quot;`).replace(/'/g,`&apos;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`).replace(/\r/g,`&#x0D;`).replace(/\n/g,`&#x0A;`).replace(/\u0085/g,`&#x85;`).replace(/\u2028/,`&#x2028;`)}var i=class{value;constructor(e){this.value=e}toString(){return r(``+this.value)}},a=class e{name;children;attributes={};static of(t,n,r){let a=new e(t);return n!==void 0&&a.addChildNode(new i(n)),r!==void 0&&a.withName(r),a}constructor(e,t=[]){this.name=e,this.children=t}withName(e){return this.name=e,this}addAttribute(e,t){return this.attributes[e]=t,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,t){return t!=null&&(this.attributes[e]=t),this}cc(t,n,r=n){if(t[n]!=null){let i=e.of(n,t[n]).withName(r);this.c(i)}}l(e,t,n,r){e[t]!=null&&r().map(e=>{e.withName(n),this.c(e)})}lc(t,n,r,i){if(t[n]!=null){let t=i(),n=new e(r);t.map(e=>{n.c(e)}),this.c(n)}}toString(){let e=!!this.children.length,t=`<${this.name}`,r=this.attributes;for(let e of Object.keys(r)){let i=r[e];i!=null&&(t+=` ${e}="${n(``+i)}"`)}return t+=e?`>${this.children.map(e=>e.toString()).join(``)}</${this.name}>`:`/>`}};Object.defineProperty(e,`parseXML`,{enumerable:!0,get:function(){return t.parseXML}}),e.XmlNode=a,e.XmlText=i})),Gc,Kc,qc,Jc,Yc=s((()=>{Gc=Wc(),aa(),V(),Kc=K(),qc=L(),ic(),lc(),Jc=class extends rc{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new Ji(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,t,n){let r=z.of(e),i=r.getMemberSchemas();if(r.isStructSchema()&&r.isMemberSchema()&&Object.values(i).find(e=>!!e.getMemberTraits().eventPayload)){let e={},n=Object.keys(i)[0];return i[n].isBlobSchema()?e[n]=t:e[n]=this.read(i[n],t),e}let a=(this.serdeContext?.utf8Encoder??qc.toUtf8)(t),o=this.parseXml(a);return this.readSchema(e,n?o[n]:o)}readSchema(e,t){let n=z.of(e);if(n.isUnitSchema())return;let r=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(t))return this.readSchema(n,[t]);if(t==null)return t;if(typeof t==`object`){let e=!!r.sparse,i=!!r.xmlFlattened;if(n.isListSchema()){let r=n.getValueSchema(),a=[],o=r.getMergedTraits().xmlName??`member`,s=i?t:(t[0]??t)[o],c=Array.isArray(s)?s:[s];for(let t of c)(t!=null||e)&&a.push(this.readSchema(r,t));return a}let a={};if(n.isMapSchema()){let r=n.getKeySchema(),o=n.getValueSchema(),s;s=i?Array.isArray(t)?t:[t]:Array.isArray(t.entry)?t.entry:[t.entry];let c=r.getMergedTraits().xmlName??`key`,l=o.getMergedTraits().xmlName??`value`;for(let t of s){let n=t[c],r=t[l];(r!=null||e)&&(a[n]=this.readSchema(o,r))}return a}if(n.isStructSchema()){let e=n.isUnionSchema(),r;e&&(r=new cc(t,a));for(let[i,o]of n.structIterator()){let n=o.getMergedTraits(),s=n.httpPayload?n.xmlName??o.getName():o.getMemberTraits().xmlName??i;e&&r.mark(s),t[s]!=null&&(a[i]=this.readSchema(o,t[s]))}return e&&r.writeUnknown(),a}if(n.isDocumentSchema())return t;throw Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,t)}parseXml(e){if(e.length){let t;try{t=(0,Gc.parseXML)(e)}catch(t){throw t&&typeof t==`object`&&Object.defineProperty(t,`$responseBodyText`,{value:e}),t}let n=`#text`,r=Object.keys(t)[0],i=t[r];return i[n]&&(i[r]=i[n],delete i[n]),(0,Kc.getValueFromTextNode)(i)}return{}}}})),Xc,Zc,Qc,$c=s((()=>{aa(),V(),bi(),Xc=K(),Zc=R(),ic(),sc(),Qc=class extends rc{settings;buffer;constructor(e){super(),this.settings=e}write(e,t,n=``){this.buffer===void 0&&(this.buffer=``);let r=z.of(e);if(n&&!n.endsWith(`.`)&&(n+=`.`),r.isBlobSchema())(typeof t==`string`||t instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??Zc.toBase64)(t)));else if(r.isBooleanSchema()||r.isNumericSchema()||r.isStringSchema())t==null?r.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,Wr.v4)())):(this.writeKey(n),this.writeValue(String(t)));else if(r.isBigIntegerSchema())t!=null&&(this.writeKey(n),this.writeValue(String(t)));else if(r.isBigDecimalSchema())t!=null&&(this.writeKey(n),this.writeValue(t instanceof _i?t.string:String(t)));else if(r.isTimestampSchema()){if(t instanceof Date)switch(this.writeKey(n),Wi(r,this.settings)){case 5:this.writeValue(t.toISOString().replace(`.000Z`,`Z`));break;case 6:this.writeValue((0,Xc.dateToUtcString)(t));break;case 7:this.writeValue(String(t.getTime()/1e3));break}}else if(r.isDocumentSchema())Array.isArray(t)?this.write(79,t,n):t instanceof Date?this.write(4,t,n):t instanceof Uint8Array?this.write(21,t,n):t&&typeof t==`object`?this.write(143,t,n):(this.writeKey(n),this.writeValue(String(t)));else if(r.isListSchema()){if(Array.isArray(t))if(t.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(``));else{let e=r.getValueSchema(),i=this.settings.flattenLists||r.getMergedTraits().xmlFlattened,a=1;for(let r of t){if(r==null)continue;let t=this.getKey(`member`,e.getMergedTraits().xmlName),o=i?`${n}${a}`:`${n}${t}.${a}`;this.write(e,r,o),++a}}}else if(r.isMapSchema()){if(t&&typeof t==`object`){let e=r.getKeySchema(),i=r.getValueSchema(),a=r.getMergedTraits().xmlFlattened,o=1;for(let[r,s]of Object.entries(t)){if(s==null)continue;let t=this.getKey(`key`,e.getMergedTraits().xmlName),c=a?`${n}${o}.${t}`:`${n}entry.${o}.${t}`,l=this.getKey(`value`,i.getMergedTraits().xmlName),u=a?`${n}${o}.${l}`:`${n}entry.${o}.${l}`;this.write(e,r,c),this.write(i,s,u),++o}}}else if(r.isStructSchema()){if(t&&typeof t==`object`){let e=!1;for(let[i,a]of ac(r,t)){if(t[i]==null&&!a.isIdempotencyToken())continue;let r=this.getKey(i,a.getMergedTraits().xmlName),o=`${n}${r}`;this.write(a,t[i],o),e=!0}if(!e&&r.isUnionSchema()){let{$unknown:e}=t;if(Array.isArray(e)){let[t,r]=e,i=`${n}${t}`;this.write(15,r,i)}}}}else if(!r.isUnitSchema())throw Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${r.getName(!0)}`)}flush(){if(this.buffer===void 0)throw Error(`@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.`);let e=this.buffer;return delete this.buffer,e}getKey(e,t){let n=t??e;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(e){e.endsWith(`.`)&&(e=e.slice(0,e.length-1)),this.buffer+=`&${et(e)}=`}writeValue(e){this.buffer+=et(e)}}})),el,tl=s((()=>{aa(),V(),Xs(),Yc(),$c(),el=class extends Ii{options;serializer;deserializer;mixin=new Ys;constructor(e){super({defaultNamespace:e.defaultNamespace}),this.options=e;let t={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Qc(t),this.deserializer=new Jc(t)}getShapeId(){return`aws.protocols#awsQuery`}setSerdeContext(e){this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e)}getPayloadCodec(){throw Error(`AWSQuery protocol has no payload codec.`)}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n);return r.path.endsWith(`/`)||(r.path+=`/`),Object.assign(r.headers,{"content-type":`application/x-www-form-urlencoded`}),(nt(e.input)===`unit`||!r.body)&&(r.body=``),r.body=`Action=${e.name.split(`#`)[1]??e.name}&Version=${this.options.version}`+r.body,r.body.endsWith(`&`)&&(r.body=r.body.slice(-1)),r}async deserializeResponse(e,t,n){let r=this.deserializer,i=z.of(e.output),a={};if(n.statusCode>=300){let i=await Qe(n.body,t);i.byteLength>0&&Object.assign(a,await r.read(15,i)),await this.handleError(e,t,n,a,this.deserializeMetadata(n))}for(let e in n.headers){let t=n.headers[e];delete n.headers[e],n.headers[e.toLowerCase()]=t}let o=e.name.split(`#`)[1]??e.name,s=i.isStructSchema()&&this.useNestedResult()?o+`Result`:void 0,c=await Qe(n.body,t);return c.byteLength>0&&Object.assign(a,await r.read(i,c,s)),{$metadata:this.deserializeMetadata(n),...a}}useNestedResult(){return!0}async handleError(e,t,n,r,i){let a=this.loadQueryErrorCode(n,r)??`Unknown`,o=this.loadQueryError(r),s=this.loadQueryErrorMessage(r);o.message=s,o.Error={Type:o.Type,Code:o.Code,Message:s};let{errorSchema:c,errorMetadata:l}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,o,i,this.mixin.findQueryCompatibleError),u=z.of(c),d=new((B.for(c[1]).getErrorCtor(c))??Error)(s),f={Type:o.Error.Type,Code:o.Error.Code,Error:o.Error};for(let[e,t]of u.structIterator()){let n=t.getMergedTraits().xmlName??e,i=o[n]??r[n];f[e]=this.deserializer.readSchema(t,i)}throw this.mixin.decorateServiceException(Object.assign(d,l,{$fault:u.getMergedTraits().error,message:s},f),r)}loadQueryErrorCode(e,t){let n=(t.Errors?.[0]?.Error??t.Errors?.Error??t.Error)?.Code;if(n!==void 0)return n;if(e.statusCode==404)return`NotFound`}loadQueryError(e){return e.Errors?.[0]?.Error??e.Errors?.Error??e.Error}loadQueryErrorMessage(e){let t=this.loadQueryError(e);return t?.message??t?.Message??e.message??e.Message??`Unknown`}getDefaultContentType(){return`application/x-www-form-urlencoded`}}})),nl,rl=s((()=>{tl(),nl=class extends el{options;constructor(e){super(e),this.options=e,Object.assign(this.serializer.settings,{capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1})}useNestedResult(){return!1}}})),il,al,ol,sl,cl,ll=s((()=>{il=Wc(),al=K(),hc(),ol=(e,t)=>mc(e,t).then(e=>{if(e.length){let t;try{t=(0,il.parseXML)(e)}catch(t){throw t&&typeof t==`object`&&Object.defineProperty(t,`$responseBodyText`,{value:e}),t}let n=`#text`,r=Object.keys(t)[0],i=t[r];return i[n]&&(i[r]=i[n],delete i[n]),(0,al.getValueFromTextNode)(i)}return{}}),sl=async(e,t)=>{let n=await ol(e,t);return n.Error&&(n.Error.message=n.Error.message??n.Error.Message),n},cl=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return`NotFound`}})),ul,dl,fl,pl,ml=s((()=>{ul=Wc(),aa(),V(),bi(),dl=K(),fl=R(),ic(),sc(),pl=class extends rc{settings;stringBuffer;byteBuffer;buffer;constructor(e){super(),this.settings=e}write(e,t){let n=z.of(e);if(n.isStringSchema()&&typeof t==`string`)this.stringBuffer=t;else if(n.isBlobSchema())this.byteBuffer=`byteLength`in t?t:(this.serdeContext?.base64Decoder??fl.fromBase64)(t);else{this.buffer=this.writeStruct(n,t,void 0);let e=n.getMergedTraits();e.httpPayload&&!e.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let e=this.byteBuffer;return delete this.byteBuffer,e}if(this.stringBuffer!==void 0){let e=this.stringBuffer;return delete this.stringBuffer,e}let e=this.buffer;return this.settings.xmlNamespace&&(e?.attributes?.xmlns||e.addAttribute(`xmlns`,this.settings.xmlNamespace)),delete this.buffer,e.toString()}writeStruct(e,t,n){let r=e.getMergedTraits(),i=e.isMemberSchema()&&!r.httpPayload?e.getMemberTraits().xmlName??e.getMemberName():r.xmlName??e.getName();if(!i||!e.isStructSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${e.getName(!0)}.`);let a=ul.XmlNode.of(i),[o,s]=this.getXmlnsAttribute(e,n);for(let[n,r]of ac(e,t)){let e=t[n];if(e!=null||r.isIdempotencyToken()){if(r.getMergedTraits().xmlAttribute){a.addAttribute(r.getMergedTraits().xmlName??n,this.writeSimple(r,e));continue}if(r.isListSchema())this.writeList(r,e,a,s);else if(r.isMapSchema())this.writeMap(r,e,a,s);else if(r.isStructSchema())a.addChildNode(this.writeStruct(r,e,s));else{let t=ul.XmlNode.of(r.getMergedTraits().xmlName??r.getMemberName());this.writeSimpleInto(r,e,t,s),a.addChildNode(t)}}}let{$unknown:c}=t;if(c&&e.isUnionSchema()&&Array.isArray(c)&&Object.keys(t).length===1){let[e,n]=c,r=ul.XmlNode.of(e);if(typeof n!=`string`)if(t instanceof ul.XmlNode||t instanceof ul.XmlText)a.addChildNode(t);else throw Error(`@aws-sdk - $unknown union member in XML requires value of type string, @aws-sdk/xml-builder::XmlNode or XmlText.`);this.writeSimpleInto(0,n,r,s),a.addChildNode(r)}return s&&a.addAttribute(o,s),a}writeList(e,t,n,r){if(!e.isMemberSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${e.getName(!0)}`);let i=e.getMergedTraits(),a=e.getValueSchema(),o=a.getMergedTraits(),s=!!o.sparse,c=!!i.xmlFlattened,[l,u]=this.getXmlnsAttribute(e,r),d=(t,n)=>{if(a.isListSchema())this.writeList(a,Array.isArray(n)?n:[n],t,u);else if(a.isMapSchema())this.writeMap(a,n,t,u);else if(a.isStructSchema()){let r=this.writeStruct(a,n,u);t.addChildNode(r.withName(c?i.xmlName??e.getMemberName():o.xmlName??`member`))}else{let r=ul.XmlNode.of(c?i.xmlName??e.getMemberName():o.xmlName??`member`);this.writeSimpleInto(a,n,r,u),t.addChildNode(r)}};if(c)for(let e of t)(s||e!=null)&&d(n,e);else{let r=ul.XmlNode.of(i.xmlName??e.getMemberName());u&&r.addAttribute(l,u);for(let e of t)(s||e!=null)&&d(r,e);n.addChildNode(r)}}writeMap(e,t,n,r,i=!1){if(!e.isMemberSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${e.getName(!0)}`);let a=e.getMergedTraits(),o=e.getKeySchema(),s=o.getMergedTraits().xmlName??`key`,c=e.getValueSchema(),l=c.getMergedTraits(),u=l.xmlName??`value`,d=!!l.sparse,f=!!a.xmlFlattened,[p,m]=this.getXmlnsAttribute(e,r),h=(e,t,n)=>{let r=ul.XmlNode.of(s,t),[i,a]=this.getXmlnsAttribute(o,m);a&&r.addAttribute(i,a),e.addChildNode(r);let l=ul.XmlNode.of(u);c.isListSchema()?this.writeList(c,n,l,m):c.isMapSchema()?this.writeMap(c,n,l,m,!0):c.isStructSchema()?l=this.writeStruct(c,n,m):this.writeSimpleInto(c,n,l,m),e.addChildNode(l)};if(f){for(let[r,i]of Object.entries(t))if(d||i!=null){let t=ul.XmlNode.of(a.xmlName??e.getMemberName());h(t,r,i),n.addChildNode(t)}}else{let r;i||(r=ul.XmlNode.of(a.xmlName??e.getMemberName()),m&&r.addAttribute(p,m),n.addChildNode(r));for(let[e,a]of Object.entries(t))if(d||a!=null){let t=ul.XmlNode.of(`entry`);h(t,e,a),(i?n:r).addChildNode(t)}}}writeSimple(e,t){if(t===null)throw Error(`@aws-sdk/core/protocols - (XML serializer) cannot write null value.`);let n=z.of(e),r=null;if(t&&typeof t==`object`)if(n.isBlobSchema())r=(this.serdeContext?.base64Encoder??fl.toBase64)(t);else if(n.isTimestampSchema()&&t instanceof Date)switch(Wi(n,this.settings)){case 5:r=t.toISOString().replace(`.000Z`,`Z`);break;case 6:r=(0,dl.dateToUtcString)(t);break;case 7:r=String(t.getTime()/1e3);break;default:console.warn(`Missing timestamp format, using http date`,t),r=(0,dl.dateToUtcString)(t);break}else if(n.isBigDecimalSchema()&&t)return t instanceof _i?t.string:String(t);else if(n.isMapSchema()||n.isListSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead.`);else throw Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`);if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(r=String(t)),n.isStringSchema()&&(r=t===void 0&&n.isIdempotencyToken()?(0,Wr.v4)():String(t)),r===null)throw Error(`Unhandled schema-value pair ${n.getName(!0)}=${t}`);return r}writeSimpleInto(e,t,n,r){let i=this.writeSimple(e,t),a=z.of(e),o=new ul.XmlText(i),[s,c]=this.getXmlnsAttribute(a,r);c&&n.addAttribute(s,c),n.addChildNode(o)}getXmlnsAttribute(e,t){let[n,r]=e.getMergedTraits().xmlNamespace??[];return r&&r!==t?[n?`xmlns:${n}`:`xmlns`,r]:[void 0,void 0]}}})),hl,gl=s((()=>{ic(),Yc(),ml(),hl=class extends rc{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new pl(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new Jc(this.settings);return e.setSerdeContext(this.serdeContext),e}}})),_l,vl=s((()=>{aa(),V(),Xs(),ll(),gl(),_l=class extends Ni{codec;serializer;deserializer;mixin=new Ys;constructor(e){super(e);let t={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace};this.codec=new hl(t),this.serializer=new na(this.codec.createSerializer(),t),this.deserializer=new Zi(this.codec.createDeserializer(),t)}getPayloadCodec(){return this.codec}getShapeId(){return`aws.protocols#restXml`}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n),i=z.of(e.input);if(!r.headers[`content-type`]){let e=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);e&&(r.headers[`content-type`]=e)}return typeof r.body==`string`&&r.headers[`content-type`]===this.getDefaultContentType()&&!r.body.startsWith(`<?xml `)&&!this.hasUnstructuredPayloadBinding(i)&&(r.body=`<?xml version="1.0" encoding="UTF-8"?>`+r.body),r}async deserializeResponse(e,t,n){return super.deserializeResponse(e,t,n)}async handleError(e,t,n,r,i){let a=cl(n,r)??`Unknown`,{errorSchema:o,errorMetadata:s}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,r,i),c=z.of(o),l=r.Error?.message??r.Error?.Message??r.message??r.Message??`Unknown`,u=new((B.for(o[1]).getErrorCtor(o))??Error)(l);await this.deserializeHttpMessage(o,t,n,r);let d={};for(let[e,t]of c.structIterator()){let n=t.getMergedTraits().xmlName??e,i=r.Error?.[n]??r[n];d[e]=this.codec.createDeserializer().readSchema(t,i)}throw this.mixin.decorateServiceException(Object.assign(u,s,{$fault:c.getMergedTraits().error,message:l},d),r)}getDefaultContentType(){return`application/xml`}hasUnstructuredPayloadBinding(e){for(let[,t]of e.structIterator())if(t.getMergedTraits().httpPayload)return!(t.isStructSchema()||t.isMapSchema()||t.isListSchema());return!1}}})),yl=l({AwsEc2QueryProtocol:()=>nl,AwsJson1_0Protocol:()=>Nc,AwsJson1_1Protocol:()=>Fc,AwsJsonRpcProtocol:()=>jc,AwsQueryProtocol:()=>el,AwsRestJsonProtocol:()=>Lc,AwsRestXmlProtocol:()=>_l,AwsSmithyRpcV2CborProtocol:()=>Zs,JsonCodec:()=>kc,JsonShapeDeserializer:()=>xc,JsonShapeSerializer:()=>Dc,XmlCodec:()=>hl,XmlShapeDeserializer:()=>Jc,XmlShapeSerializer:()=>pl,_toBool:()=>ec,_toNum:()=>tc,_toStr:()=>$s,awsExpectUnion:()=>Bc,loadRestJsonErrorCode:()=>vc,loadRestXmlErrorCode:()=>cl,parseJsonBody:()=>gc,parseJsonErrorBody:()=>_c,parseXmlBody:()=>ol,parseXmlErrorBody:()=>sl}),bl=s((()=>{Qs(),nc(),Pc(),Ic(),Mc(),Rc(),Ac(),Sc(),Oc(),Vc(),yc(),rl(),tl(),vl(),gl(),Yc(),ml(),ll()})),xl=l({AWSSDKSigV4Signer:()=>ao,AwsEc2QueryProtocol:()=>nl,AwsJson1_0Protocol:()=>Nc,AwsJson1_1Protocol:()=>Fc,AwsJsonRpcProtocol:()=>jc,AwsQueryProtocol:()=>el,AwsRestJsonProtocol:()=>Lc,AwsRestXmlProtocol:()=>_l,AwsSdkSigV4ASigner:()=>co,AwsSdkSigV4Signer:()=>io,AwsSmithyRpcV2CborProtocol:()=>Zs,JsonCodec:()=>kc,JsonShapeDeserializer:()=>xc,JsonShapeSerializer:()=>Dc,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>_o,NODE_SIGV4A_CONFIG_OPTIONS:()=>So,XmlCodec:()=>hl,XmlShapeDeserializer:()=>Jc,XmlShapeSerializer:()=>pl,_toBool:()=>ec,_toNum:()=>tc,_toStr:()=>$s,awsExpectUnion:()=>Bc,emitWarningIfUnsupportedVersion:()=>Fa,getBearerTokenEnvKey:()=>po,loadRestJsonErrorCode:()=>vc,loadRestXmlErrorCode:()=>cl,parseJsonBody:()=>gc,parseJsonErrorBody:()=>_c,parseXmlBody:()=>ol,parseXmlErrorBody:()=>sl,resolveAWSSDKSigV4Config:()=>ko,resolveAwsSdkSigV4AConfig:()=>xo,resolveAwsSdkSigV4Config:()=>Oo,setCredentialFeature:()=>La,setFeature:()=>za,setTokenFeature:()=>Va,state:()=>Pa,validateSigningProperties:()=>ro}),Sl=s((()=>{Wa(),No(),bl()})),Cl=c((e=>{var t=(ka(),f(Oa)),n=Na(),r=h(),i=(Sl(),f(xl));function a(e){return e===void 0?!0:typeof e==`string`&&e.length<=50}function o(e){let n=t.normalizeProvider(e.userAgentAppId??void 0),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r==`string`?[[r]]:r,userAgentAppId:async()=>{let t=await n();if(!a(t)){let n=e.logger?.constructor?.name===`NoOpLogger`||!e.logger?console:e.logger;typeof t==`string`?t.length>50&&n?.warn(`The provided userAgentAppId exceeds the maximum length of 50 characters.`):n?.warn(`userAgentAppId must be a string or undefined.`)}return t}})}let s=/\d{12}\.ddb/;async function c(e,t,n){if(n.request?.headers?.[`smithy-protocol`]===`rpc-v2-cbor`&&i.setFeature(e,`PROTOCOL_RPC_V2_CBOR`,`M`),typeof t.retryStrategy==`function`){let n=await t.retryStrategy();typeof n.acquireInitialRetryToken==`function`?n.constructor?.name?.includes(`Adaptive`)?i.setFeature(e,`RETRY_MODE_ADAPTIVE`,`F`):i.setFeature(e,`RETRY_MODE_STANDARD`,`E`):i.setFeature(e,`RETRY_MODE_LEGACY`,`D`)}if(typeof t.accountIdEndpointMode==`function`){let n=e.endpointV2;switch(String(n?.url?.hostname).match(s)&&i.setFeature(e,`ACCOUNT_ID_ENDPOINT`,`O`),await t.accountIdEndpointMode?.()){case`disabled`:i.setFeature(e,`ACCOUNT_ID_MODE_DISABLED`,`Q`);break;case`preferred`:i.setFeature(e,`ACCOUNT_ID_MODE_PREFERRED`,`P`);break;case`required`:i.setFeature(e,`ACCOUNT_ID_MODE_REQUIRED`,`R`);break}}let r=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(r?.$source){let t=r;t.accountId&&i.setFeature(e,`RESOLVED_ACCOUNT_ID`,`T`);for(let[n,r]of Object.entries(t.$source??{}))i.setFeature(e,n,r)}}let l=`user-agent`,u=`x-amz-user-agent`,d=/[^!$%&'*+\-.^_`|~\w]/g,p=/[^!$%&'*+\-.^_`|~\w#]/g;function m(e){let t=``;for(let n in e){let r=e[n];if(t.length+r.length+1<=1024){t.length?t+=`,`+r:t+=r;continue}break}return t}let g=e=>(t,i)=>async a=>{let{request:o}=a;if(!r.HttpRequest.isInstance(o))return t(a);let{headers:s}=o,d=i?.userAgent?.map(_)||[],f=(await e.defaultUserAgentProvider()).map(_);await c(i,e,a);let p=i;f.push(`m/${m(Object.assign({},i.__smithy_context?.features,p.__aws_sdk_context?.features))}`);let h=e?.customUserAgent?.map(_)||[],g=await e.userAgentAppId();g&&f.push(_([`app`,`${g}`]));let v=n.getUserAgentPrefix(),y=(v?[v]:[]).concat([...f,...d,...h]).join(` `),b=[...f.filter(e=>e.startsWith(`aws-sdk-`)),...h].join(` `);return e.runtime===`browser`?s[u]=y:(b&&(s[u]=s[u]?`${s[l]} ${b}`:b),s[l]=y),t({...a,request:o})},_=e=>{let t=e[0].split(`/`).map(e=>e.replace(d,`-`)).join(`/`),n=e[1]?.replace(p,`-`),r=t.indexOf(`/`),i=t.substring(0,r),a=t.substring(r+1);return i===`api`&&(a=a.toLowerCase()),[i,a,n].filter(e=>e&&e.length>0).reduce((e,t,n)=>{switch(n){case 0:return t;case 1:return`${e}/${t}`;default:return`${e}#${t}`}},``)},v={name:`getUserAgentMiddleware`,step:`build`,priority:`low`,tags:[`SET_USER_AGENT`,`USER_AGENT`],override:!0};e.DEFAULT_UA_APP_ID=void 0,e.getUserAgentMiddlewareOptions=v,e.getUserAgentPlugin=e=>({applyToStack:t=>{t.add(g(e),v)}}),e.resolveUserAgentConfig=o,e.userAgentMiddleware=g})),wl=c((e=>{e.SelectorType=void 0,(function(e){e.ENV=`env`,e.CONFIG=`shared config entry`})(e.SelectorType||={}),e.booleanSelector=(e,t,n)=>{if(t in e){if(e[t]===`true`)return!0;if(e[t]===`false`)return!1;throw Error(`Cannot load ${n} "${t}". Expected "true" or "false", got ${e[t]}.`)}},e.numberSelector=(e,t,n)=>{if(!(t in e))return;let r=parseInt(e[t],10);if(Number.isNaN(r))throw TypeError(`Cannot load ${n} '${t}'. Expected number, got '${e[t]}'.`);return r}})),Tl=c((e=>{var t=wl(),n=j(),r=Aa();let i=`AWS_USE_DUALSTACK_ENDPOINT`,a=`use_dualstack_endpoint`,o={environmentVariableSelector:e=>t.booleanSelector(e,i,t.SelectorType.ENV),configFileSelector:e=>t.booleanSelector(e,a,t.SelectorType.CONFIG),default:!1},s=`AWS_USE_FIPS_ENDPOINT`,c=`use_fips_endpoint`,l={environmentVariableSelector:e=>t.booleanSelector(e,s,t.SelectorType.ENV),configFileSelector:e=>t.booleanSelector(e,c,t.SelectorType.CONFIG),default:!1},u=e=>{let{tls:t,endpoint:r,urlParser:i,useDualstackEndpoint:a}=e;return Object.assign(e,{tls:t??!0,endpoint:n.normalizeProvider(typeof r==`string`?i(r):r),isCustomEndpoint:!0,useDualstackEndpoint:n.normalizeProvider(a??!1)})},d=async e=>{let{tls:t=!0}=e,n=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw Error(`Invalid region in client config`);let r=await e.useDualstackEndpoint(),i=await e.useFipsEndpoint(),{hostname:a}=await e.regionInfoProvider(n,{useDualstackEndpoint:r,useFipsEndpoint:i})??{};if(!a)throw Error(`Cannot resolve hostname from client config`);return e.urlParser(`${t?`https:`:`http:`}//${a}`)},f=e=>{let t=n.normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:i,urlParser:a,tls:o}=e;return Object.assign(e,{tls:o??!0,endpoint:r?n.normalizeProvider(typeof r==`string`?a(r):r):()=>d({...e,useDualstackEndpoint:t,useFipsEndpoint:i}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},p=`AWS_REGION`,m=`region`,h={environmentVariableSelector:e=>e[p],configFileSelector:e=>e[m],default:()=>{throw Error(`Region is missing`)}},g={preferredFile:`credentials`},_=new Set,v=(e,t=r.isValidHostLabel)=>{if(!_.has(e)&&!t(e))if(e===`*`)console.warn(`@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.`);else throw Error(`Region not accepted: region="${e}" is not a valid hostname component.`);else _.add(e)},y=e=>typeof e==`string`&&(e.startsWith(`fips-`)||e.endsWith(`-fips`)),b=e=>y(e)?[`fips-aws-global`,`aws-fips`].includes(e)?`us-east-1`:e.replace(/fips-(dkr-|prod-)?|-fips/,``):e,x=e=>{let{region:t,useFipsEndpoint:n}=e;if(!t)throw Error(`Region is missing`);return Object.assign(e,{region:async()=>{let e=b(typeof t==`function`?await t():t);return v(e),e},useFipsEndpoint:async()=>y(typeof t==`string`?t:await t())?!0:typeof n==`function`?n():Promise.resolve(!!n)})},S=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:n})=>e.find(({tags:e})=>t===e.includes(`fips`)&&n===e.includes(`dualstack`))?.hostname,C=(e,{regionHostname:t,partitionHostname:n})=>t||(n?n.replace(`{region}`,e):void 0),w=(e,{partitionHash:t})=>Object.keys(t||{}).find(n=>t[n].regions.includes(e))??`aws`,T=(e,{signingRegion:t,regionRegex:n,useFipsEndpoint:r})=>{if(t)return t;if(r){let t=n.replace(`\\\\`,`\\`).replace(/^\^/g,`\\.`).replace(/\$$/g,`\\.`),r=e.match(t);if(r)return r[0].slice(1,-1)}};e.CONFIG_USE_DUALSTACK_ENDPOINT=a,e.CONFIG_USE_FIPS_ENDPOINT=c,e.DEFAULT_USE_DUALSTACK_ENDPOINT=!1,e.DEFAULT_USE_FIPS_ENDPOINT=!1,e.ENV_USE_DUALSTACK_ENDPOINT=i,e.ENV_USE_FIPS_ENDPOINT=s,e.NODE_REGION_CONFIG_FILE_OPTIONS=g,e.NODE_REGION_CONFIG_OPTIONS=h,e.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=o,e.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=l,e.REGION_ENV_NAME=p,e.REGION_INI_NAME=m,e.getRegionInfo=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:n=!1,signingService:r,regionHash:i,partitionHash:a})=>{let o=w(e,{partitionHash:a}),s=e in i?e:a[o]?.endpoint??e,c={useFipsEndpoint:t,useDualstackEndpoint:n},l=C(s,{regionHostname:S(i[s]?.variants,c),partitionHostname:S(a[o]?.variants,c)});if(l===void 0)throw Error(`Endpoint resolution failed for: [object Object]`);let u=T(l,{signingRegion:i[s]?.signingRegion,regionRegex:a[o].regionRegex,useFipsEndpoint:t});return{partition:o,signingService:r,hostname:l,...u&&{signingRegion:u},...i[s]?.signingService&&{signingService:i[s].signingService}}},e.resolveCustomEndpointsConfig=u,e.resolveEndpointsConfig=f,e.resolveRegionConfig=x})),El=c((e=>{var t=h();let n=`content-length`;function r(e){return r=>async i=>{let a=i.request;if(t.HttpRequest.isInstance(a)){let{body:t,headers:r}=a;if(t&&Object.keys(r).map(e=>e.toLowerCase()).indexOf(n)===-1)try{let r=e(t);a.headers={...a.headers,[n]:String(r)}}catch{}}return r({...i,request:a})}}let i={step:`build`,tags:[`SET_CONTENT_LENGTH`,`CONTENT_LENGTH`],name:`contentLengthMiddleware`,override:!0};e.contentLengthMiddleware=r,e.contentLengthMiddlewareOptions=i,e.getContentLengthPlugin=e=>({applyToStack:t=>{t.add(r(e.bodyLengthChecker),i)}})})),Dl=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getHomeDir=void 0;let t=p(`os`),n=p(`path`),r={},i=()=>process&&process.geteuid?`${process.geteuid()}`:`DEFAULT`;e.getHomeDir=()=>{let{HOME:e,USERPROFILE:a,HOMEPATH:o,HOMEDRIVE:s=`C:${n.sep}`}=process.env;if(e)return e;if(a)return a;if(o)return`${s}${o}`;let c=i();return r[c]||(r[c]=(0,t.homedir)()),r[c]}})),Ol=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getSSOTokenFilepath=void 0;let t=p(`crypto`),n=p(`path`),r=Dl();e.getSSOTokenFilepath=e=>{let i=(0,t.createHash)(`sha1`).update(e).digest(`hex`);return(0,n.join)((0,r.getHomeDir)(),`.aws`,`sso`,`cache`,`${i}.json`)}})),kl=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getSSOTokenFromFile=e.tokenIntercept=void 0;let t=p(`fs/promises`),n=Ol();e.tokenIntercept={},e.getSSOTokenFromFile=async r=>{if(e.tokenIntercept[r])return e.tokenIntercept[r];let i=(0,n.getSSOTokenFilepath)(r),a=await(0,t.readFile)(i,`utf8`);return JSON.parse(a)}})),Al=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.readFile=e.fileIntercept=e.filePromises=void 0;let t=p(`node:fs/promises`);e.filePromises={},e.fileIntercept={},e.readFile=(n,r)=>e.fileIntercept[n]===void 0?((!e.filePromises[n]||r?.ignoreCache)&&(e.filePromises[n]=(0,t.readFile)(n,`utf8`)),e.filePromises[n]):e.fileIntercept[n]})),jl=c((e=>{var t=Dl(),n=Ol(),r=kl(),i=p(`path`),a=m(),o=Al();let s=`AWS_PROFILE`,c=`default`,l=e=>e.profile||process.env[s]||c,u=e=>Object.entries(e).filter(([e])=>{let t=e.indexOf(`.`);return t===-1?!1:Object.values(a.IniSectionType).includes(e.substring(0,t))}).reduce((e,[t,n])=>{let r=t.indexOf(`.`),i=t.substring(0,r)===a.IniSectionType.PROFILE?t.substring(r+1):t;return e[i]=n,e},{...e.default&&{default:e.default}}),d=()=>process.env.AWS_CONFIG_FILE||i.join(t.getHomeDir(),`.aws`,`config`),f=()=>process.env.AWS_SHARED_CREDENTIALS_FILE||i.join(t.getHomeDir(),`.aws`,`credentials`),h=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,g=[`__proto__`,`profile __proto__`],_=e=>{let t={},n,r;for(let i of e.split(/\r?\n/)){let e=i.split(/(^|\s)[;#]/)[0].trim();if(e[0]===`[`&&e[e.length-1]===`]`){n=void 0,r=void 0;let t=e.substring(1,e.length-1),i=h.exec(t);if(i){let[,e,,t]=i;Object.values(a.IniSectionType).includes(e)&&(n=[e,t].join(`.`))}else n=t;if(g.includes(t))throw Error(`Found invalid profile name "${t}"`)}else if(n){let a=e.indexOf(`=`);if(![0,-1].includes(a)){let[o,s]=[e.substring(0,a).trim(),e.substring(a+1).trim()];if(s===``)r=o;else{r&&i.trimStart()===i&&(r=void 0),t[n]=t[n]||{};let e=r?[r,o].join(`.`):o;t[n][e]=s}}}}return t},v=()=>({}),y=async(e={})=>{let{filepath:n=f(),configFilepath:r=d()}=e,a=t.getHomeDir(),s=n;n.startsWith(`~/`)&&(s=i.join(a,n.slice(2)));let c=r;r.startsWith(`~/`)&&(c=i.join(a,r.slice(2)));let l=await Promise.all([o.readFile(c,{ignoreCache:e.ignoreCache}).then(_).then(u).catch(v),o.readFile(s,{ignoreCache:e.ignoreCache}).then(_).catch(v)]);return{configFile:l[0],credentialsFile:l[1]}},b=e=>Object.entries(e).filter(([e])=>e.startsWith(a.IniSectionType.SSO_SESSION+`.`)).reduce((e,[t,n])=>({...e,[t.substring(t.indexOf(`.`)+1)]:n}),{}),x=()=>({}),S=async(e={})=>o.readFile(e.configFilepath??d()).then(_).then(b).catch(x),C=(...e)=>{let t={};for(let n of e)for(let[e,r]of Object.entries(n))t[e]===void 0?t[e]=r:Object.assign(t[e],r);return t};Object.defineProperty(e,`getSSOTokenFromFile`,{enumerable:!0,get:function(){return r.getSSOTokenFromFile}}),Object.defineProperty(e,`readFile`,{enumerable:!0,get:function(){return o.readFile}}),e.CONFIG_PREFIX_SEPARATOR=`.`,e.DEFAULT_PROFILE=c,e.ENV_PROFILE=s,e.externalDataInterceptor={getFileRecord(){return o.fileIntercept},interceptFile(e,t){o.fileIntercept[e]=Promise.resolve(t)},getTokenRecord(){return r.tokenIntercept},interceptToken(e,t){r.tokenIntercept[e]=t}},e.getProfileName=l,e.loadSharedConfigFiles=y,e.loadSsoSessionData=S,e.parseKnownFiles=async e=>{let t=await y(e);return C(t.configFile,t.credentialsFile)},Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),Object.keys(n).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})})),Ml=c((e=>{var t=yo(),n=jl();function r(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete(`CONFIG`),t.delete(`CONFIG_PREFIX_SEPARATOR`),t.delete(`ENV`),[...t].join(`, `)}catch{return e}}let i=(e,n)=>async()=>{try{let t=e(process.env,n);if(t===void 0)throw Error();return t}catch(i){throw new t.CredentialsProviderError(i.message||`Not found in ENV: ${r(e.toString())}`,{logger:n?.logger})}},a=(e,{preferredFile:i=`config`,...a}={})=>async()=>{let o=n.getProfileName(a),{configFile:s,credentialsFile:c}=await n.loadSharedConfigFiles(a),l=c[o]||{},u=s[o]||{},d=i===`config`?{...l,...u}:{...u,...l};try{let t=e(d,i===`config`?s:c);if(t===void 0)throw Error();return t}catch(n){throw new t.CredentialsProviderError(n.message||`Not found in config files w/ profile [${o}]: ${r(e.toString())}`,{logger:a.logger})}},o=e=>typeof e==`function`,s=e=>o(e)?async()=>await e():t.fromStatic(e);e.loadConfig=({environmentVariableSelector:e,configFileSelector:n,default:r},o={})=>{let{signingName:c,logger:l}=o,u={signingName:c,logger:l};return t.memoize(t.chain(i(e,u),a(n,o),s(r)))}})),Nl=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getEndpointUrlConfig=void 0;let t=jl(),n=`AWS_ENDPOINT_URL`,r=`endpoint_url`;e.getEndpointUrlConfig=e=>({environmentVariableSelector:t=>{let r=t[[n,...e.split(` `).map(e=>e.toUpperCase())].join(`_`)];if(r)return r;let i=t[n];if(i)return i},configFileSelector:(n,i)=>{if(i&&n.services){let a=i[[`services`,n.services].join(t.CONFIG_PREFIX_SEPARATOR)];if(a){let n=a[[e.split(` `).map(e=>e.toLowerCase()).join(`_`),r].join(t.CONFIG_PREFIX_SEPARATOR)];if(n)return n}}let a=n[r];if(a)return a},default:void 0})})),Pl=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getEndpointFromConfig=void 0;let t=Ml(),n=Nl();e.getEndpointFromConfig=async e=>(0,t.loadConfig)((0,n.getEndpointUrlConfig)(e??``))()})),Fl=c((e=>{var t=Pl(),n=Ma(),r=(ka(),f(Oa)),i=j(),a=se();let o=async e=>{let t=e?.Bucket||``;if(typeof e.Bucket==`string`&&(e.Bucket=t.replace(/#/g,`%23`).replace(/\?/g,`%3F`)),d(t)){if(e.ForcePathStyle===!0)throw Error(`Path-style addressing cannot be used with ARN buckets`)}else (!u(t)||t.indexOf(`.`)!==-1&&!String(e.Endpoint).startsWith(`http:`)||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},s=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,c=/(\d+\.){3}\d+/,l=/\.\./,u=e=>s.test(e)&&!c.test(e)&&!l.test(e),d=e=>{let[t,n,r,,,i]=e.split(`:`),a=t===`arn`&&e.split(`:`).length>=6,o=!!(a&&n&&r&&i);if(a&&!o)throw Error(`Invalid ARN: ${e} was an invalid ARN.`);return o},p=(e,t,n,r=!1)=>{let i=async()=>{let i;return i=r?n.clientContextParams?.[e]??n[e]??n[t]:n[e]??n[t],typeof i==`function`?i():i};return e===`credentialScope`||t===`CredentialScope`?async()=>{let e=typeof n.credentials==`function`?await n.credentials():n.credentials;return e?.credentialScope??e?.CredentialScope}:e===`accountId`||t===`AccountId`?async()=>{let e=typeof n.credentials==`function`?await n.credentials():n.credentials;return e?.accountId??e?.AccountId}:e===`endpoint`||t===`endpoint`?async()=>{if(n.isCustomEndpoint===!1)return;let e=await i();if(e&&typeof e==`object`){if(`url`in e)return e.url.href;if(`hostname`in e){let{protocol:t,hostname:n,port:r,path:i}=e;return`${t}//${n}${r?`:`+r:``}${i}`}}return e}:i},m=e=>typeof e==`object`?`url`in e?n.parseUrl(e.url):e:n.parseUrl(e),h=async(e,n,r,i)=>{if(!r.isCustomEndpoint){let e;e=r.serviceConfiguredEndpoint?await r.serviceConfiguredEndpoint():await t.getEndpointFromConfig(r.serviceId),e&&(r.endpoint=()=>Promise.resolve(m(e)),r.isCustomEndpoint=!0)}let a=await g(e,n,r);if(typeof r.endpointProvider!=`function`)throw Error(`config.endpointProvider is not set.`);return r.endpointProvider(a,i)},g=async(e,t,n)=>{let r={},i=t?.getEndpointParameterInstructions?.()||{};for(let[t,a]of Object.entries(i))switch(a.type){case`staticContextParams`:r[t]=a.value;break;case`contextParams`:r[t]=e[a.name];break;case`clientContextParams`:case`builtInParams`:r[t]=await p(a.name,t,n,a.type!==`builtInParams`)();break;case`operationContextParams`:r[t]=a.get(e);break;default:throw Error(`Unrecognized endpoint parameter instruction: `+JSON.stringify(a))}return Object.keys(i).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()===`s3`&&await o(r),r},_=({config:e,instructions:t})=>(n,a)=>async o=>{e.isCustomEndpoint&&r.setFeature(a,`ENDPOINT_OVERRIDE`,`N`);let s=await h(o.input,{getEndpointParameterInstructions(){return t}},{...e},a);a.endpointV2=s,a.authSchemes=s.properties?.authSchemes;let c=a.authSchemes?.[0];if(c){a.signing_region=c.signingRegion,a.signing_service=c.signingName;let e=i.getSmithyContext(a)?.selectedHttpAuthScheme?.httpAuthOption;e&&(e.signingProperties=Object.assign(e.signingProperties||{},{signing_region:c.signingRegion,signingRegion:c.signingRegion,signing_service:c.signingName,signingName:c.signingName,signingRegionSet:c.signingRegionSet},c.properties))}return n({...o})},v={step:`serialize`,tags:[`ENDPOINT_PARAMETERS`,`ENDPOINT_V2`,`ENDPOINT`],name:`endpointV2Middleware`,override:!0,relation:`before`,toMiddleware:a.serializerMiddlewareOption.name};e.endpointMiddleware=_,e.endpointMiddlewareOptions=v,e.getEndpointFromInstructions=h,e.getEndpointPlugin=(e,t)=>({applyToStack:n=>{n.addRelativeTo(_({config:e,instructions:t}),v)}}),e.resolveEndpointConfig=e=>{let n=e.tls??!0,{endpoint:r,useDualstackEndpoint:a,useFipsEndpoint:o}=e,s=r==null?void 0:async()=>m(await i.normalizeProvider(r)()),c=!!r,l=Object.assign(e,{endpoint:s,tls:n,isCustomEndpoint:c,useDualstackEndpoint:i.normalizeProvider(a??!1),useFipsEndpoint:i.normalizeProvider(o??!1)}),u;return l.serviceConfiguredEndpoint=async()=>(e.serviceId&&!u&&(u=t.getEndpointFromConfig(e.serviceId)),u),l},e.resolveEndpointRequiredConfig=e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw Error(`@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.`)}),e},e.resolveParams=g,e.toEndpointV1=m})),Il=c((e=>{let t=[`AuthFailure`,`InvalidSignatureException`,`RequestExpired`,`RequestInTheFuture`,`RequestTimeTooSkewed`,`SignatureDoesNotMatch`],n=[`BandwidthLimitExceeded`,`EC2ThrottledException`,`LimitExceededException`,`PriorRequestNotComplete`,`ProvisionedThroughputExceededException`,`RequestLimitExceeded`,`RequestThrottled`,`RequestThrottledException`,`SlowDown`,`ThrottledException`,`Throttling`,`ThrottlingException`,`TooManyRequestsException`,`TransactionInProgressException`],r=[`TimeoutError`,`RequestTimeout`,`RequestTimeoutException`],i=[500,502,503,504],a=[`ECONNRESET`,`ECONNREFUSED`,`EPIPE`,`ETIMEDOUT`],o=[`EHOSTUNREACH`,`ENETUNREACH`,`ENOTFOUND`],s=e=>e?.$retryable!==void 0,c=e=>t.includes(e.name),l=e=>e.$metadata?.clockSkewCorrected,u=e=>{let t=new Set([`Failed to fetch`,`NetworkError when attempting to fetch resource`,`The Internet connection appears to be offline`,`Load failed`,`Network request failed`]);return e&&e instanceof TypeError?t.has(e.message):!1},d=e=>e.$metadata?.httpStatusCode===429||n.includes(e.name)||e.$retryable?.throttling==1,f=(e,t=0)=>s(e)||l(e)||r.includes(e.name)||a.includes(e?.code||``)||o.includes(e?.code||``)||i.includes(e.$metadata?.httpStatusCode||0)||u(e)||e.cause!==void 0&&t<=10&&f(e.cause,t+1);e.isBrowserNetworkError=u,e.isClockSkewCorrectedError=l,e.isClockSkewError=c,e.isRetryableByTrait=s,e.isServerError=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!f(e)}return!1},e.isThrottlingError=d,e.isTransientError=f})),Ll=c((e=>{var t=Il();e.RETRY_MODES=void 0,(function(e){e.STANDARD=`standard`,e.ADAPTIVE=`adaptive`})(e.RETRY_MODES||={});let n=e.RETRY_MODES.STANDARD;var r=class e{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8,this.lastThrottleTime=this.getCurrentTimeInSeconds(),this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let n=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(t=>e.setTimeoutFn(t,n))}this.currentCapacity-=t}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let n;if(this.updateMeasuredRate(),t.isThrottlingError(e)){let e=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=e,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(e),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());let r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise((this.lastMaxRate*(1-this.beta)/this.scaleConstant)**(1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*(e-this.lastThrottleTime-this.timeWindow)**3+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),t=Math.floor(e*2)/2;if(this.requestCount++,t>this.lastTxRateBucket){let e=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(e*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}}getPrecise(e){return parseFloat(e.toFixed(8))}};let i=20*1e3,a=()=>{let e=100;return{computeNextBackoffDelay:t=>Math.floor(Math.min(i,Math.random()*2**t*e)),setDelayBase:t=>{e=t}}},o=({retryDelay:e,retryCount:t,retryCost:n})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(i,e),getRetryCost:()=>n});var s=class{maxAttempts;mode=e.RETRY_MODES.STANDARD;capacity=500;retryBackoffStrategy=a();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e==`function`?e:async()=>e}async acquireInitialRetryToken(e){return o({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(e,t){let n=await this.getMaxAttempts();if(this.shouldRetry(e,t,n)){let n=t.errorType;this.retryBackoffStrategy.setDelayBase(n===`THROTTLING`?500:100);let r=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),i=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,r):r,a=this.getCapacityCost(n);return this.capacity-=a,o({retryDelay:i,retryCount:e.getRetryCount()+1,retryCost:a})}throw Error(`No retry token available`)}recordSuccess(e){this.capacity=Math.max(500,this.capacity+(e.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of 3`),3}}shouldRetry(e,t,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return e===`TRANSIENT`?10:5}isRetryableError(e){return e===`THROTTLING`||e===`TRANSIENT`}},c=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=e.RETRY_MODES.ADAPTIVE;constructor(e,t){this.maxAttemptsProvider=e;let{rateLimiter:n}=t??{};this.rateLimiter=n??new r,this.standardRetryStrategy=new s(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}},l=class extends s{computeNextBackoffDelay;constructor(e,t=100){super(typeof e==`function`?e:async()=>e),typeof t==`number`?this.computeNextBackoffDelay=()=>t:this.computeNextBackoffDelay=t}async refreshRetryTokenForRetry(e,t){let n=await super.refreshRetryTokenForRetry(e,t);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};e.AdaptiveRetryStrategy=c,e.ConfiguredRetryStrategy=l,e.DEFAULT_MAX_ATTEMPTS=3,e.DEFAULT_RETRY_DELAY_BASE=100,e.DEFAULT_RETRY_MODE=n,e.DefaultRateLimiter=r,e.INITIAL_RETRY_TOKENS=500,e.INVOCATION_ID_HEADER=`amz-sdk-invocation-id`,e.MAXIMUM_RETRY_DELAY=i,e.NO_RETRY_INCREMENT=1,e.REQUEST_HEADER=`amz-sdk-request`,e.RETRY_COST=5,e.StandardRetryStrategy=s,e.THROTTLING_RETRY_DELAY_BASE=500,e.TIMEOUT_RETRY_COST=10})),Rl=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.isStreamingPayload=void 0;let t=p(`stream`);e.isStreamingPayload=e=>e?.body instanceof t.Readable||typeof ReadableStream<`u`&&e?.body instanceof ReadableStream})),zl=c((e=>{var t=Ll(),n=h(),r=Il(),i=Ur(),a=j(),o=K(),s=Rl();let c=(e,n)=>{let r=e,i=t.NO_RETRY_INCREMENT,a=t.RETRY_COST,o=t.TIMEOUT_RETRY_COST,s=e,c=e=>e.name===`TimeoutError`?o:a,l=e=>c(e)<=s;return Object.freeze({hasRetryTokens:l,retrieveRetryTokens:e=>{if(!l(e))throw Error(`No retry token available`);let t=c(e);return s-=t,t},releaseRetryTokens:e=>{s+=e??i,s=Math.min(s,r)}})},l=(e,n)=>Math.floor(Math.min(t.MAXIMUM_RETRY_DELAY,Math.random()*2**n*e)),u=e=>e?r.isRetryableByTrait(e)||r.isClockSkewError(e)||r.isThrottlingError(e)||r.isTransientError(e):!1,d=e=>e instanceof Error?e:e instanceof Object?Object.assign(Error(),e):typeof e==`string`?Error(e):Error(`AWS SDK error wrapper for ${e}`);var f=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=t.RETRY_MODES.STANDARD;constructor(e,n){this.maxAttemptsProvider=e,this.retryDecider=n?.retryDecider??u,this.delayDecider=n?.delayDecider??l,this.retryQuota=n?.retryQuota??c(t.INITIAL_RETRY_TOKENS)}shouldRetry(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=t.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,a,o){let s,c=0,l=0,u=await this.getMaxAttempts(),{request:f}=a;for(n.HttpRequest.isInstance(f)&&(f.headers[t.INVOCATION_ID_HEADER]=i.v4());;)try{n.HttpRequest.isInstance(f)&&(f.headers[t.REQUEST_HEADER]=`attempt=${c+1}; max=${u}`),o?.beforeRequest&&await o.beforeRequest();let{response:r,output:i}=await e(a);return o?.afterRequest&&o.afterRequest(r),this.retryQuota.releaseRetryTokens(s),i.$metadata.attempts=c+1,i.$metadata.totalRetryDelay=l,{response:r,output:i}}catch(e){let n=d(e);if(c++,this.shouldRetry(n,c,u)){s=this.retryQuota.retrieveRetryTokens(n);let e=this.delayDecider(r.isThrottlingError(n)?t.THROTTLING_RETRY_DELAY_BASE:t.DEFAULT_RETRY_DELAY_BASE,c),i=p(n.$response),a=Math.max(i||0,e);l+=a,await new Promise(e=>setTimeout(e,a));continue}throw n.$metadata||={},n.$metadata.attempts=c,n.$metadata.totalRetryDelay=l,n}}};let p=e=>{if(!n.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(e=>e.toLowerCase()===`retry-after`);if(!t)return;let r=e.headers[t],i=Number(r);return Number.isNaN(i)?new Date(r).getTime()-Date.now():i*1e3};var m=class extends f{rateLimiter;constructor(e,n){let{rateLimiter:r,...i}=n??{};super(e,i),this.rateLimiter=r??new t.DefaultRateLimiter,this.mode=t.RETRY_MODES.ADAPTIVE}async retry(e,t){return super.retry(e,t,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:e=>{this.rateLimiter.updateClientSendingRate(e)}})}};let g=`AWS_MAX_ATTEMPTS`,_=`max_attempts`,v={environmentVariableSelector:e=>{let t=e[g];if(!t)return;let n=parseInt(t);if(Number.isNaN(n))throw Error(`Environment variable ${g} mast be a number, got "${t}"`);return n},configFileSelector:e=>{let t=e[_];if(!t)return;let n=parseInt(t);if(Number.isNaN(n))throw Error(`Shared config file entry ${_} mast be a number, got "${t}"`);return n},default:t.DEFAULT_MAX_ATTEMPTS},y=e=>{let{retryStrategy:n,retryMode:r,maxAttempts:i}=e,o=a.normalizeProvider(i??t.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:o,retryStrategy:async()=>n||(await a.normalizeProvider(r)()===t.RETRY_MODES.ADAPTIVE?new t.AdaptiveRetryStrategy(o):new t.StandardRetryStrategy(o))})},b=`AWS_RETRY_MODE`,x=`retry_mode`,S={environmentVariableSelector:e=>e[b],configFileSelector:e=>e[x],default:t.DEFAULT_RETRY_MODE},C=()=>e=>async r=>{let{request:i}=r;return n.HttpRequest.isInstance(i)&&(delete i.headers[t.INVOCATION_ID_HEADER],delete i.headers[t.REQUEST_HEADER]),e(r)},w={name:`omitRetryHeadersMiddleware`,tags:[`RETRY`,`HEADERS`,`OMIT_RETRY_HEADERS`],relation:`before`,toMiddleware:`awsAuthMiddleware`,override:!0},T=e=>({applyToStack:e=>{e.addRelativeTo(C(),w)}}),E=e=>(r,a)=>async c=>{let l=await e.retryStrategy(),u=await e.maxAttempts();if(D(l)){l=l;let e=await l.acquireInitialRetryToken(a.partition_id),f=Error(),p=0,m=0,{request:h}=c,g=n.HttpRequest.isInstance(h);for(g&&(h.headers[t.INVOCATION_ID_HEADER]=i.v4());;)try{g&&(h.headers[t.REQUEST_HEADER]=`attempt=${p+1}; max=${u}`);let{response:n,output:i}=await r(c);return l.recordSuccess(e),i.$metadata.attempts=p+1,i.$metadata.totalRetryDelay=m,{response:n,output:i}}catch(t){let n=O(t);if(f=d(t),g&&s.isStreamingPayload(h))throw(a.logger instanceof o.NoOpLogger?console:a.logger)?.warn(`An error was encountered in a non-retryable streaming request.`),f;try{e=await l.refreshRetryTokenForRetry(e,n)}catch{throw f.$metadata||={},f.$metadata.attempts=p+1,f.$metadata.totalRetryDelay=m,f}p=e.getRetryCount();let r=e.getRetryDelay();m+=r,await new Promise(e=>setTimeout(e,r))}}else return l=l,l?.mode&&(a.userAgent=[...a.userAgent||[],[`cfg/retry-mode`,l.mode]]),l.retry(r,c)},D=e=>e.acquireInitialRetryToken!==void 0&&e.refreshRetryTokenForRetry!==void 0&&e.recordSuccess!==void 0,O=e=>{let t={error:e,errorType:k(e)},n=ee(e.$response);return n&&(t.retryAfterHint=n),t},k=e=>r.isThrottlingError(e)?`THROTTLING`:r.isTransientError(e)?`TRANSIENT`:r.isServerError(e)?`SERVER_ERROR`:`CLIENT_ERROR`,A={name:`retryMiddleware`,tags:[`RETRY`],step:`finalizeRequest`,priority:`high`,override:!0},M=e=>({applyToStack:t=>{t.add(E(e),A)}}),ee=e=>{if(!n.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(e=>e.toLowerCase()===`retry-after`);if(!t)return;let r=e.headers[t],i=Number(r);return Number.isNaN(i)?new Date(r):new Date(i*1e3)};e.AdaptiveRetryStrategy=m,e.CONFIG_MAX_ATTEMPTS=_,e.CONFIG_RETRY_MODE=x,e.ENV_MAX_ATTEMPTS=g,e.ENV_RETRY_MODE=b,e.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=v,e.NODE_RETRY_MODE_CONFIG_OPTIONS=S,e.StandardRetryStrategy=f,e.defaultDelayDecider=l,e.defaultRetryDecider=u,e.getOmitRetryHeadersPlugin=T,e.getRetryAfterHint=ee,e.getRetryPlugin=M,e.omitRetryHeadersMiddleware=C,e.omitRetryHeadersMiddlewareOptions=w,e.resolveRetryConfig=y,e.retryMiddleware=E,e.retryMiddlewareOptions=A})),Bl=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.resolveHttpAuthSchemeConfig=e.resolveStsAuthConfig=e.defaultSTSHttpAuthSchemeProvider=e.defaultSTSHttpAuthSchemeParametersProvider=void 0;let t=(Sl(),f(xl)),n=j(),r=hb();e.defaultSTSHttpAuthSchemeParametersProvider=async(e,t,r)=>({operation:(0,n.getSmithyContext)(t).operation,region:await(0,n.normalizeProvider)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function i(e){return{schemeId:`aws.auth#sigv4`,signingProperties:{name:`sts`,region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function a(e){return{schemeId:`smithy.api#noAuth`}}e.defaultSTSHttpAuthSchemeProvider=e=>{let t=[];switch(e.operation){case`AssumeRoleWithSAML`:t.push(a(e));break;case`AssumeRoleWithWebIdentity`:t.push(a(e));break;default:t.push(i(e))}return t},e.resolveStsAuthConfig=e=>Object.assign(e,{stsClientCtor:r.STSClient}),e.resolveHttpAuthSchemeConfig=r=>{let i=(0,e.resolveStsAuthConfig)(r),a=(0,t.resolveAwsSdkSigV4Config)(i);return Object.assign(a,{authSchemePreference:(0,n.normalizeProvider)(r.authSchemePreference??[])})}})),Vl=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.commonParams=e.resolveClientEndpointParameters=void 0,e.resolveClientEndpointParameters=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:`sts`}),e.commonParams={UseGlobalEndpoint:{type:`builtInParams`,name:`useGlobalEndpoint`},UseFIPS:{type:`builtInParams`,name:`useFipsEndpoint`},Endpoint:{type:`builtInParams`,name:`endpoint`},Region:{type:`builtInParams`,name:`region`},UseDualStack:{type:`builtInParams`,name:`useDualstackEndpoint`}}})),Hl=c(((e,t)=>{t.exports={name:`@aws-sdk/client-sts`,description:`AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native`,version:`3.958.0`,scripts:{build:`concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs`,"build:cjs":`node ../../scripts/compilation/inline client-sts`,"build:es":`tsc -p tsconfig.es.json`,"build:include:deps":`yarn g:turbo run build -F="$npm_package_name"`,"build:types":`rimraf ./dist-types tsconfig.types.tsbuildinfo && tsc -p tsconfig.types.json`,"build:types:downlevel":`downlevel-dts dist-types dist-types/ts3.4`,clean:`rimraf ./dist-* && rimraf *.tsbuildinfo`,"extract:docs":`api-extractor run --local`,"generate:client":`node ../../scripts/generate-clients/single-service --solo sts`,test:`yarn g:vitest run`,"test:e2e":`yarn g:vitest run -c vitest.config.e2e.mts --mode development`,"test:e2e:watch":`yarn g:vitest watch -c vitest.config.e2e.mts`,"test:index":`tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs`,"test:watch":`yarn g:vitest watch`},main:`./dist-cjs/index.js`,types:`./dist-types/index.d.ts`,module:`./dist-es/index.js`,sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":`5.2.0`,"@aws-crypto/sha256-js":`5.2.0`,"@aws-sdk/core":`3.957.0`,"@aws-sdk/credential-provider-node":`3.958.0`,"@aws-sdk/middleware-host-header":`3.957.0`,"@aws-sdk/middleware-logger":`3.957.0`,"@aws-sdk/middleware-recursion-detection":`3.957.0`,"@aws-sdk/middleware-user-agent":`3.957.0`,"@aws-sdk/region-config-resolver":`3.957.0`,"@aws-sdk/types":`3.957.0`,"@aws-sdk/util-endpoints":`3.957.0`,"@aws-sdk/util-user-agent-browser":`3.957.0`,"@aws-sdk/util-user-agent-node":`3.957.0`,"@smithy/config-resolver":`^4.4.5`,"@smithy/core":`^3.20.0`,"@smithy/fetch-http-handler":`^5.3.8`,"@smithy/hash-node":`^4.2.7`,"@smithy/invalid-dependency":`^4.2.7`,"@smithy/middleware-content-length":`^4.2.7`,"@smithy/middleware-endpoint":`^4.4.1`,"@smithy/middleware-retry":`^4.4.17`,"@smithy/middleware-serde":`^4.2.8`,"@smithy/middleware-stack":`^4.2.7`,"@smithy/node-config-provider":`^4.3.7`,"@smithy/node-http-handler":`^4.4.7`,"@smithy/protocol-http":`^5.3.7`,"@smithy/smithy-client":`^4.10.2`,"@smithy/types":`^4.11.0`,"@smithy/url-parser":`^4.2.7`,"@smithy/util-base64":`^4.3.0`,"@smithy/util-body-length-browser":`^4.2.0`,"@smithy/util-body-length-node":`^4.2.1`,"@smithy/util-defaults-mode-browser":`^4.3.16`,"@smithy/util-defaults-mode-node":`^4.2.19`,"@smithy/util-endpoints":`^3.2.7`,"@smithy/util-middleware":`^4.2.7`,"@smithy/util-retry":`^4.2.7`,"@smithy/util-utf8":`^4.2.0`,tslib:`^2.6.2`},devDependencies:{"@tsconfig/node18":`18.2.4`,"@types/node":`^18.19.69`,concurrently:`7.0.0`,"downlevel-dts":`0.10.1`,rimraf:`3.0.2`,typescript:`~5.8.3`},engines:{node:`>=18.0.0`},typesVersions:{"<4.0":{"dist-types/*":[`dist-types/ts3.4/*`]}},files:[`dist-*/**`],author:{name:`AWS SDK for JavaScript Team`,url:`https://aws.amazon.com/javascript/`},license:`Apache-2.0`,browser:{"./dist-es/runtimeConfig":`./dist-es/runtimeConfig.browser`},"react-native":{"./dist-es/runtimeConfig":`./dist-es/runtimeConfig.native`},homepage:`https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts`,repository:{type:`git`,url:`https://github.com/aws/aws-sdk-js-v3.git`,directory:`clients/client-sts`}}})),Ul=c((e=>{var t=(Wa(),f(Ua)),n=yo();let r=`AWS_ACCESS_KEY_ID`,i=`AWS_SECRET_ACCESS_KEY`,a=`AWS_SESSION_TOKEN`,o=`AWS_CREDENTIAL_EXPIRATION`,s=`AWS_CREDENTIAL_SCOPE`,c=`AWS_ACCOUNT_ID`;e.ENV_ACCOUNT_ID=c,e.ENV_CREDENTIAL_SCOPE=s,e.ENV_EXPIRATION=o,e.ENV_KEY=r,e.ENV_SECRET=i,e.ENV_SESSION=a,e.fromEnv=e=>async()=>{e?.logger?.debug(`@aws-sdk/credential-provider-env - fromEnv`);let l=process.env[r],u=process.env[i],d=process.env[a],f=process.env[o],p=process.env[s],m=process.env[c];if(l&&u){let e={accessKeyId:l,secretAccessKey:u,...d&&{sessionToken:d},...f&&{expiration:new Date(f)},...p&&{credentialScope:p},...m&&{accountId:m}};return t.setCredentialFeature(e,`CREDENTIALS_ENV_VARS`,`g`),e}throw new n.CredentialsProviderError(`Unable to find environment variable credentials.`,{logger:e?.logger})}})),Wl=c((e=>{var t=yo(),n=p(`url`),r=p(`buffer`),i=p(`http`),a=Ml(),o=Ma();function s(e){return new Promise((n,a)=>{let o=i.request({method:`GET`,...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,`$1`)});o.on(`error`,e=>{a(Object.assign(new t.ProviderError(`Unable to connect to instance metadata service`),e)),o.destroy()}),o.on(`timeout`,()=>{a(new t.ProviderError(`TimeoutError from instance metadata service`)),o.destroy()}),o.on(`response`,e=>{let{statusCode:i=400}=e;(i<200||300<=i)&&(a(Object.assign(new t.ProviderError(`Error response received from instance metadata service`),{statusCode:i})),o.destroy());let s=[];e.on(`data`,e=>{s.push(e)}),e.on(`end`,()=>{n(r.Buffer.concat(s)),o.destroy()})}),o.end()})}let c=e=>!!e&&typeof e==`object`&&typeof e.AccessKeyId==`string`&&typeof e.SecretAccessKey==`string`&&typeof e.Token==`string`&&typeof e.Expiration==`string`,l=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),u=1e3,d=({maxRetries:e=0,timeout:t=u})=>({maxRetries:e,timeout:t}),f=(e,t)=>{let n=e();for(let r=0;r<t;r++)n=n.catch(e);return n},m=`AWS_CONTAINER_CREDENTIALS_FULL_URI`,h=`AWS_CONTAINER_CREDENTIALS_RELATIVE_URI`,g=`AWS_CONTAINER_AUTHORIZATION_TOKEN`,_=(e={})=>{let{timeout:n,maxRetries:r}=d(e);return()=>f(async()=>{let r=await x({logger:e.logger}),i=JSON.parse(await v(n,r));if(!c(i))throw new t.CredentialsProviderError(`Invalid response received from instance metadata service.`,{logger:e.logger});return l(i)},r)},v=async(e,t)=>(process.env[g]&&(t.headers={...t.headers,Authorization:process.env[g]}),(await s({...t,timeout:e})).toString()),y={localhost:!0,"127.0.0.1":!0},b={"http:":!0,"https:":!0},x=async({logger:e})=>{if(process.env[h])return{hostname:`169.254.170.2`,path:process.env[h]};if(process.env[m]){let r=n.parse(process.env[m]);if(!r.hostname||!(r.hostname in y))throw new t.CredentialsProviderError(`${r.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!r.protocol||!(r.protocol in b))throw new t.CredentialsProviderError(`${r.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...r,port:r.port?parseInt(r.port,10):void 0}}throw new t.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${h} or ${m} environment variable is set`,{tryNextLink:!1,logger:e})};var S=class e extends t.CredentialsProviderError{tryNextLink;name=`InstanceMetadataV1FallbackError`;constructor(t,n=!0){super(t,n),this.tryNextLink=n,Object.setPrototypeOf(this,e.prototype)}};e.Endpoint=void 0,(function(e){e.IPv4=`http://169.254.169.254`,e.IPv6=`http://[fd00:ec2::254]`})(e.Endpoint||={});let C={environmentVariableSelector:e=>e.AWS_EC2_METADATA_SERVICE_ENDPOINT,configFileSelector:e=>e.ec2_metadata_service_endpoint,default:void 0};var w;(function(e){e.IPv4=`IPv4`,e.IPv6=`IPv6`})(w||={});let T={environmentVariableSelector:e=>e.AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE,configFileSelector:e=>e.ec2_metadata_service_endpoint_mode,default:w.IPv4},E=async()=>o.parseUrl(await D()||await O()),D=async()=>a.loadConfig(C)(),O=async()=>{let t=await a.loadConfig(T)();switch(t){case w.IPv4:return e.Endpoint.IPv4;case w.IPv6:return e.Endpoint.IPv6;default:throw Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(w)}`)}},k=(e,t)=>{let n=300+Math.floor(Math.random()*300),r=new Date(Date.now()+n*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(r)}.\nFor more information, please visit: https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html`);let i=e.originalExpiration??e.expiration;return{...e,...i?{originalExpiration:i}:{},expiration:r}},A=(e,t={})=>{let n=t?.logger||console,r;return async()=>{let t;try{t=await e(),t.expiration&&t.expiration.getTime()<Date.now()&&(t=k(t,n))}catch(e){if(r)n.warn(`Credential renew failed: `,e),t=k(r,n);else throw e}return r=t,t}},j=`/latest/meta-data/iam/security-credentials/`,M=`AWS_EC2_METADATA_V1_DISABLED`,ee=`ec2_metadata_v1_disabled`,te=`x-aws-ec2-metadata-token`,ne=(e={})=>A(re(e),{logger:e.logger}),re=(e={})=>{let n=!1,{logger:r,profile:i}=e,{timeout:o,maxRetries:s}=d(e),c=async(r,o)=>{if(n||o.headers?.[te]==null){let n=!1,r=!1,o=await a.loadConfig({environmentVariableSelector:n=>{let i=n[M];if(r=!!i&&i!==`false`,i===void 0)throw new t.CredentialsProviderError(`${M} not set in env, checking config file next.`,{logger:e.logger});return r},configFileSelector:e=>{let t=e[ee];return n=!!t&&t!==`false`,n},default:!1},{profile:i})();if(e.ec2MetadataV1Disabled||o){let t=[];throw e.ec2MetadataV1Disabled&&t.push(`credential provider initialization (runtime option ec2MetadataV1Disabled)`),n&&t.push(`config file profile (${ee})`),r&&t.push(`process environment variable (${M})`),new S(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${t.join(`, `)}].`)}}let s=(await f(async()=>{let e;try{e=await ae(o)}catch(e){throw e.statusCode===401&&(n=!1),e}return e},r)).trim();return f(async()=>{let t;try{t=await oe(s,o,e)}catch(e){throw e.statusCode===401&&(n=!1),e}return t},r)};return async()=>{let e=await E();if(n)return r?.debug(`AWS SDK Instance Metadata`,`using v1 fallback (no token fetch)`),c(s,{...e,timeout:o});{let t;try{t=(await ie({...e,timeout:o})).toString()}catch(t){if(t?.statusCode===400)throw Object.assign(t,{message:`EC2 Metadata token request returned error`});return(t.message===`TimeoutError`||[403,404,405].includes(t.statusCode))&&(n=!0),r?.debug(`AWS SDK Instance Metadata`,`using v1 fallback (initial)`),c(s,{...e,timeout:o})}return c(s,{...e,headers:{[te]:t},timeout:o})}}},ie=async e=>s({...e,path:`/latest/api/token`,method:`PUT`,headers:{"x-aws-ec2-metadata-token-ttl-seconds":`21600`}}),ae=async e=>(await s({...e,path:j})).toString(),oe=async(e,n,r)=>{let i=JSON.parse((await s({...n,path:j+e})).toString());if(!c(i))throw new t.CredentialsProviderError(`Invalid response received from instance metadata service.`,{logger:r.logger});return l(i)};e.DEFAULT_MAX_RETRIES=0,e.DEFAULT_TIMEOUT=u,e.ENV_CMDS_AUTH_TOKEN=g,e.ENV_CMDS_FULL_URI=m,e.ENV_CMDS_RELATIVE_URI=h,e.fromContainerMetadata=_,e.fromInstanceMetadata=ne,e.getInstanceMetadataEndpoint=E,e.httpRequest=s,e.providerConfigFromInit=d})),Gl=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.checkUrl=void 0;let t=yo();e.checkUrl=(e,n)=>{if(e.protocol!==`https:`&&!(e.hostname===`169.254.170.2`||e.hostname===`169.254.170.23`||e.hostname===`[fd00:ec2::23]`)){if(e.hostname.includes(`[`)){if(e.hostname===`[::1]`||e.hostname===`[0000:0000:0000:0000:0000:0000:0000:0001]`)return}else{if(e.hostname===`localhost`)return;let t=e.hostname.split(`.`),n=e=>{let t=parseInt(e,10);return 0<=t&&t<=255};if(t[0]===`127`&&n(t[1])&&n(t[2])&&n(t[3])&&t.length===4)return}throw new t.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:n})}}})),Kl=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createGetRequest=a,e.getCredentials=o;let t=yo(),n=h(),r=K(),i=Xe();function a(e){return new n.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((e,[t,n])=>(e[t]=n,e),{}),fragment:e.hash})}async function o(e,n){let a=await(0,i.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let e=JSON.parse(a);if(typeof e.AccessKeyId!=`string`||typeof e.SecretAccessKey!=`string`||typeof e.Token!=`string`||typeof e.Expiration!=`string`)throw new t.CredentialsProviderError(`HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }`,{logger:n});return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:(0,r.parseRfc3339DateTime)(e.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let r={};try{r=JSON.parse(a)}catch{}throw Object.assign(new t.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:n}),{Code:r.Code,Message:r.Message})}throw new t.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:n})}})),ql=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.retryWrapper=void 0,e.retryWrapper=(e,t,n)=>async()=>{for(let r=0;r<t;++r)try{return await e()}catch{await new Promise(e=>setTimeout(e,n))}return await e()}})),Jl=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.fromHttp=void 0;let t=(Vr(),f(rr)),n=(Wa(),f(Ua)),r=Ue(),i=yo(),a=t.__importDefault(p(`fs/promises`)),o=Gl(),s=Kl(),c=ql();e.fromHttp=(e={})=>{e.logger?.debug(`@aws-sdk/credential-provider-http - fromHttp`);let t,l=e.awsContainerCredentialsRelativeUri??process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI,u=e.awsContainerCredentialsFullUri??process.env.AWS_CONTAINER_CREDENTIALS_FULL_URI,d=e.awsContainerAuthorizationToken??process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN,f=e.awsContainerAuthorizationTokenFile??process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE,p=e.logger?.constructor?.name===`NoOpLogger`||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(l&&u&&(p(`@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri.`),p(`awsContainerCredentialsFullUri will take precedence.`)),d&&f&&(p(`@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile.`),p(`awsContainerAuthorizationToken will take precedence.`)),u)t=u;else if(l)t=`http://169.254.170.2${l}`;else throw new i.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let m=new URL(t);(0,o.checkUrl)(m,e.logger);let h=r.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,c.retryWrapper)(async()=>{let t=(0,s.createGetRequest)(m);d?t.headers.Authorization=d:f&&(t.headers.Authorization=(await a.default.readFile(f)).toString());try{let e=await h.handle(t);return(0,s.getCredentials)(e.response).then(e=>(0,n.setCredentialFeature)(e,`CREDENTIALS_HTTP`,`z`))}catch(t){throw new i.CredentialsProviderError(String(t),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)}})),Yl=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.fromHttp=void 0;var t=Jl();Object.defineProperty(e,`fromHttp`,{enumerable:!0,get:function(){return t.fromHttp}})}));function Xl(e){return{schemeId:`aws.auth#sigv4`,signingProperties:{name:`sso-oauth`,region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function Zl(e){return{schemeId:`smithy.api#noAuth`}}var Ql,$l,eu,tu,nu=s((()=>{Sl(),Ql=j(),$l=async(e,t,n)=>({operation:(0,Ql.getSmithyContext)(t).operation,region:await(0,Ql.normalizeProvider)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),eu=e=>{let t=[];switch(e.operation){case`CreateToken`:t.push(Zl(e));break;default:t.push(Xl(e))}return t},tu=e=>{let t=Oo(e);return Object.assign(t,{authSchemePreference:(0,Ql.normalizeProvider)(e.authSchemePreference??[])})}})),ru,iu,au=s((()=>{ru=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:`sso-oauth`}),iu={UseFIPS:{type:`builtInParams`,name:`useFipsEndpoint`},Endpoint:{type:`builtInParams`,name:`endpoint`},Region:{type:`builtInParams`,name:`region`},UseDualStack:{type:`builtInParams`,name:`useDualstackEndpoint`}}})),ou=`3.958.0`,su=c((e=>{var t=p(`os`),n=p(`process`),r=Cl();let i={isCrtAvailable:!1},a=()=>i.isCrtAvailable?[`md/crt-avail`]:null,o=({serviceId:e,clientVersion:r})=>async i=>{let o=[[`aws-sdk-js`,r],[`ua`,`2.1`],[`os/${t.platform()}`,t.release()],[`lang/js`],[`md/nodejs`,`${n.versions.node}`]],s=a();s&&o.push(s),e&&o.push([`api/${e}`,r]),n.env.AWS_EXECUTION_ENV&&o.push([`exec-env/${n.env.AWS_EXECUTION_ENV}`]);let c=await i?.userAgentAppId?.();return c?[...o,[`app/${c}`]]:[...o]},s=o,c=`AWS_SDK_UA_APP_ID`,l=`sdk_ua_app_id`;e.NODE_APP_ID_CONFIG_OPTIONS={environmentVariableSelector:e=>e[c],configFileSelector:e=>e[l]??e[`sdk-ua-app-id`],default:r.DEFAULT_UA_APP_ID},e.UA_APP_ID_ENV_NAME=c,e.UA_APP_ID_INI_NAME=l,e.createDefaultUserAgentProvider=o,e.crtAvailability=i,e.defaultUserAgent=s})),cu=c((e=>{var t=De(),n=L(),r=p(`buffer`),i=p(`crypto`),a=class{algorithmIdentifier;secret;hash;constructor(e,t){this.algorithmIdentifier=e,this.secret=t,this.reset()}update(e,t){this.hash.update(n.toUint8Array(o(e,t)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?i.createHmac(this.algorithmIdentifier,o(this.secret)):i.createHash(this.algorithmIdentifier)}};function o(e,n){return r.Buffer.isBuffer(e)?e:typeof e==`string`?t.fromString(e,n):ArrayBuffer.isView(e)?t.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength):t.fromArrayBuffer(e)}e.Hash=a})),lu=c((e=>{var t=p(`node:fs`);e.calculateBodyLength=e=>{if(!e)return 0;if(typeof e==`string`)return Buffer.byteLength(e);if(typeof e.byteLength==`number`)return e.byteLength;if(typeof e.size==`number`)return e.size;if(typeof e.start==`number`&&typeof e.end==`number`)return e.end+1-e.start;if(e instanceof t.ReadStream){if(e.path!=null)return t.lstatSync(e.path).size;if(typeof e.fd==`number`)return t.fstatSync(e.fd).size}throw Error(`Body Length computation failed for ${e}`)}})),uu=c((e=>{var t=Tl(),n=Ml(),r=yo();let i=`AWS_REGION`,a=`AWS_DEFAULT_REGION`,o=[`in-region`,`cross-region`,`mobile`,`standard`,`legacy`],s={environmentVariableSelector:e=>e.AWS_DEFAULTS_MODE,configFileSelector:e=>e.defaults_mode,default:`legacy`},c=({region:e=n.loadConfig(t.NODE_REGION_CONFIG_OPTIONS),defaultsMode:i=n.loadConfig(s)}={})=>r.memoize(async()=>{let t=typeof i==`function`?await i():i;switch(t?.toLowerCase()){case`auto`:return l(e);case`in-region`:case`cross-region`:case`mobile`:case`standard`:case`legacy`:return Promise.resolve(t?.toLocaleLowerCase());case void 0:return Promise.resolve(`legacy`);default:throw Error(`Invalid parameter for "defaultsMode", expect ${o.join(`, `)}, got ${t}`)}}),l=async e=>{if(e){let t=typeof e==`function`?await e():e,n=await u();return n?t===n?`in-region`:`cross-region`:`standard`}return`standard`},u=async()=>{if(process.env.AWS_EXECUTION_ENV&&(process.env[i]||process.env[a]))return process.env[i]??process.env[a];if(!process.env.AWS_EC2_METADATA_DISABLED)try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>d(Wl()));return(await t({...await e(),path:`/latest/meta-data/placement/region`})).toString()}catch{}};e.resolveDefaultsModeConfig=c})),du,fu,pu,mu,hu,gu,_u,vu,yu,bu,xu,Su,Cu,wu,Tu,Eu,Du,Ou,ku,Au,ju,Mu,Nu,Pu,Fu,Iu,Lu=s((()=>{du=`required`,fu=`fn`,pu=`argv`,mu=`ref`,hu=!0,gu=`isSet`,_u=`booleanEquals`,vu=`error`,yu=`endpoint`,bu=`tree`,xu=`PartitionResult`,Su=`getAttr`,Cu={[du]:!1,type:`string`},wu={[du]:!0,default:!1,type:`boolean`},Tu={[mu]:`Endpoint`},Eu={[fu]:_u,[pu]:[{[mu]:`UseFIPS`},!0]},Du={[fu]:_u,[pu]:[{[mu]:`UseDualStack`},!0]},Ou={},ku={[fu]:Su,[pu]:[{[mu]:xu},`supportsFIPS`]},Au={[mu]:xu},ju={[fu]:_u,[pu]:[!0,{[fu]:Su,[pu]:[Au,`supportsDualStack`]}]},Mu=[Eu],Nu=[Du],Pu=[{[mu]:`Region`}],Fu={version:`1.0`,parameters:{Region:Cu,UseDualStack:wu,UseFIPS:wu,Endpoint:Cu},rules:[{conditions:[{[fu]:gu,[pu]:[Tu]}],rules:[{conditions:Mu,error:`Invalid Configuration: FIPS and custom endpoint are not supported`,type:vu},{conditions:Nu,error:`Invalid Configuration: Dualstack and custom endpoint are not supported`,type:vu},{endpoint:{url:Tu,properties:Ou,headers:Ou},type:yu}],type:bu},{conditions:[{[fu]:gu,[pu]:Pu}],rules:[{conditions:[{[fu]:`aws.partition`,[pu]:Pu,assign:xu}],rules:[{conditions:[Eu,Du],rules:[{conditions:[{[fu]:_u,[pu]:[hu,ku]},ju],rules:[{endpoint:{url:`https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:Ou,headers:Ou},type:yu}],type:bu},{error:`FIPS and DualStack are enabled, but this partition does not support one or both`,type:vu}],type:bu},{conditions:Mu,rules:[{conditions:[{[fu]:_u,[pu]:[ku,hu]}],rules:[{conditions:[{[fu]:`stringEquals`,[pu]:[{[fu]:Su,[pu]:[Au,`name`]},`aws-us-gov`]}],endpoint:{url:`https://oidc.{Region}.amazonaws.com`,properties:Ou,headers:Ou},type:yu},{endpoint:{url:`https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}`,properties:Ou,headers:Ou},type:yu}],type:bu},{error:`FIPS is enabled but this partition does not support FIPS`,type:vu}],type:bu},{conditions:Nu,rules:[{conditions:[ju],rules:[{endpoint:{url:`https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:Ou,headers:Ou},type:yu}],type:bu},{error:`DualStack is enabled but this partition does not support DualStack`,type:vu}],type:bu},{endpoint:{url:`https://oidc.{Region}.{PartitionResult#dnsSuffix}`,properties:Ou,headers:Ou},type:yu}],type:bu}],type:bu},{error:`Invalid Configuration: Missing Region`,type:vu}]},Iu=Fu})),Ru,zu,Bu,Vu,Hu=s((()=>{Ru=Na(),zu=Aa(),Lu(),Bu=new zu.EndpointCache({size:50,params:[`Endpoint`,`Region`,`UseDualStack`,`UseFIPS`]}),Vu=(e,t={})=>Bu.get(e,()=>(0,zu.resolveEndpoint)(Iu,{endpointParams:e,logger:t.logger})),zu.customEndpointFunctions.aws=Ru.awsEndpointFunctions})),Uu,Wu,Gu,Ku,qu,Ju=s((()=>{Sl(),bl(),ka(),Uu=K(),Wu=Ma(),Gu=R(),Ku=L(),nu(),Hu(),qu=e=>({apiVersion:`2019-06-10`,base64Decoder:e?.base64Decoder??Gu.fromBase64,base64Encoder:e?.base64Encoder??Gu.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Vu,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??eu,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`),signer:new io},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new va}],logger:e?.logger??new Uu.NoOpLogger,protocol:e?.protocol??Lc,protocolSettings:e?.protocolSettings??{defaultNamespace:`com.amazonaws.ssooidc`,version:`2019-06-10`,serviceTarget:`AWSSSOOIDCService`},serviceId:e?.serviceId??`SSO OIDC`,urlParser:e?.urlParser??Wu.parseUrl,utf8Decoder:e?.utf8Decoder??Ku.fromUtf8,utf8Encoder:e?.utf8Encoder??Ku.toUtf8})})),Yu,Xu,Zu,Qu,$u,ed,td,nd,rd,id,ad,od=s((()=>{Sl(),Yu=su(),Xu=Tl(),Zu=cu(),Qu=zl(),$u=Ml(),ed=Ue(),td=K(),nd=lu(),rd=uu(),id=Ll(),Ju(),ad=e=>{(0,td.emitWarningIfUnsupportedVersion)(process.version);let t=(0,rd.resolveDefaultsModeConfig)(e),n=()=>t().then(td.loadConfigsForDefaultMode),r=qu(e);Fa(process.version);let i={profile:e?.profile,logger:r.logger};return{...r,...e,runtime:`node`,defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,$u.loadConfig)(_o,i),bodyLengthChecker:e?.bodyLengthChecker??nd.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Yu.createDefaultUserAgentProvider)({serviceId:r.serviceId,clientVersion:ou}),maxAttempts:e?.maxAttempts??(0,$u.loadConfig)(Qu.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,$u.loadConfig)(Xu.NODE_REGION_CONFIG_OPTIONS,{...Xu.NODE_REGION_CONFIG_FILE_OPTIONS,...i}),requestHandler:ed.NodeHttpHandler.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,$u.loadConfig)({...Qu.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await n()).retryMode||id.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??Zu.Hash.bind(null,`sha256`),streamCollector:e?.streamCollector??ed.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,$u.loadConfig)(Xu.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,i),useFipsEndpoint:e?.useFipsEndpoint??(0,$u.loadConfig)(Xu.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,i),userAgentAppId:e?.userAgentAppId??(0,$u.loadConfig)(Yu.NODE_APP_ID_CONFIG_OPTIONS,i)}}})),sd=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.warning=void 0,e.stsRegionDefaultResolver=r;let t=Tl(),n=Ml();function r(r={}){return(0,n.loadConfig)({...t.NODE_REGION_CONFIG_OPTIONS,async default(){return e.warning.silence||console.warn(`@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly.`),`us-east-1`}},{...t.NODE_REGION_CONFIG_FILE_OPTIONS,...r})}e.warning={silence:!1}})),cd=c((e=>{var t=sd(),n=Tl();Object.defineProperty(e,`NODE_REGION_CONFIG_FILE_OPTIONS`,{enumerable:!0,get:function(){return n.NODE_REGION_CONFIG_FILE_OPTIONS}}),Object.defineProperty(e,`NODE_REGION_CONFIG_OPTIONS`,{enumerable:!0,get:function(){return n.NODE_REGION_CONFIG_OPTIONS}}),Object.defineProperty(e,`REGION_ENV_NAME`,{enumerable:!0,get:function(){return n.REGION_ENV_NAME}}),Object.defineProperty(e,`REGION_INI_NAME`,{enumerable:!0,get:function(){return n.REGION_INI_NAME}}),Object.defineProperty(e,`resolveRegionConfig`,{enumerable:!0,get:function(){return n.resolveRegionConfig}}),e.getAwsRegionExtensionConfiguration=e=>({setRegion(t){e.region=t},region(){return e.region}}),e.resolveAwsRegionExtensionConfiguration=e=>({region:e.region()}),Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})})),ld,ud,dd=s((()=>{ld=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);n===-1?t.push(e):t.splice(n,1,e)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider(){return n},setCredentials(e){r=e},credentials(){return r}}},ud=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})})),fd,pd,md,hd,gd=s((()=>{fd=cd(),pd=h(),md=K(),dd(),hd=(e,t)=>{let n=Object.assign((0,fd.getAwsRegionExtensionConfiguration)(e),(0,md.getDefaultExtensionConfiguration)(e),(0,pd.getHttpHandlerExtensionConfiguration)(e),ld(e));return t.forEach(e=>e.configure(n)),Object.assign(e,(0,fd.resolveAwsRegionExtensionConfiguration)(n),(0,md.resolveDefaultRuntimeConfig)(n),(0,pd.resolveHttpHandlerRuntimeConfig)(n),ud(n))}})),_d,vd,yd,bd,xd,Sd,Cd,wd,Td,Ed,Dd=s((()=>{_d=g(),vd=_(),yd=D(),bd=Cl(),xd=Tl(),ka(),V(),Sd=El(),Cd=Fl(),wd=zl(),Td=K(),nu(),au(),od(),gd(),Ed=class extends Td.Client{config;constructor(...[e]){let t=ad(e||{});super(t),this.initConfig=t,this.config=hd(tu((0,Cd.resolveEndpointConfig)((0,_d.resolveHostHeaderConfig)((0,xd.resolveRegionConfig)((0,wd.resolveRetryConfig)((0,bd.resolveUserAgentConfig)(ru(t))))))),e?.extensions||[]),this.middlewareStack.use(mt(this.config)),this.middlewareStack.use((0,bd.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,wd.getRetryPlugin)(this.config)),this.middlewareStack.use((0,Sd.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,_d.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,vd.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,yd.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(oe(this.config,{httpAuthSchemeParametersProvider:$l,identityProviderConfigProvider:async e=>new la({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use(_e(this.config))}destroy(){super.destroy()}}})),Od,kd,Ad=s((()=>{Od=K(),kd=class e extends Od.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}})),jd,Md,Nd,Pd,Fd,Id,Ld,Rd,zd,Bd,Vd,Hd=s((()=>{Ad(),jd=class e extends kd{name=`AccessDeniedException`;$fault=`client`;error;reason;error_description;constructor(t){super({name:`AccessDeniedException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Md=class e extends kd{name=`AuthorizationPendingException`;$fault=`client`;error;error_description;constructor(t){super({name:`AuthorizationPendingException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Nd=class e extends kd{name=`ExpiredTokenException`;$fault=`client`;error;error_description;constructor(t){super({name:`ExpiredTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Pd=class e extends kd{name=`InternalServerException`;$fault=`server`;error;error_description;constructor(t){super({name:`InternalServerException`,$fault:`server`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Fd=class e extends kd{name=`InvalidClientException`;$fault=`client`;error;error_description;constructor(t){super({name:`InvalidClientException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Id=class e extends kd{name=`InvalidGrantException`;$fault=`client`;error;error_description;constructor(t){super({name:`InvalidGrantException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ld=class e extends kd{name=`InvalidRequestException`;$fault=`client`;error;reason;error_description;constructor(t){super({name:`InvalidRequestException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Rd=class e extends kd{name=`InvalidScopeException`;$fault=`client`;error;error_description;constructor(t){super({name:`InvalidScopeException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},zd=class e extends kd{name=`SlowDownException`;$fault=`client`;error;error_description;constructor(t){super({name:`SlowDownException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Bd=class e extends kd{name=`UnauthorizedClientException`;$fault=`client`;error;error_description;constructor(t){super({name:`UnauthorizedClientException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Vd=class e extends kd{name=`UnsupportedGrantTypeException`;$fault=`client`;error;error_description;constructor(t){super({name:`UnsupportedGrantTypeException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}})),Ud,Wd,Gd,Kd,qd,Jd,Yd,Xd,Zd,Qd,$d,ef,tf,nf,rf,af,of,sf,cf,lf,uf,df,ff,pf,mf,hf,q,gf,_f,vf,yf,bf,xf,Sf,Cf,wf,Tf,Ef,Df,Of,J,kf,Af,jf,Mf,Nf,Pf,Ff,If,Lf,Rf,zf,Bf,Vf,Hf,Uf,Wf,Gf,Kf,qf,Jf,Yf=s((()=>{V(),Hd(),Ad(),Ud=`AccessDeniedException`,Wd=`AuthorizationPendingException`,Gd=`AccessToken`,Kd=`ClientSecret`,qd=`CreateToken`,Jd=`CreateTokenRequest`,Yd=`CreateTokenResponse`,Xd=`CodeVerifier`,Zd=`ExpiredTokenException`,Qd=`InvalidClientException`,$d=`InvalidGrantException`,ef=`InvalidRequestException`,tf=`InternalServerException`,nf=`InvalidScopeException`,rf=`IdToken`,af=`RefreshToken`,of=`SlowDownException`,sf=`UnauthorizedClientException`,cf=`UnsupportedGrantTypeException`,lf=`accessToken`,uf=`client`,df=`clientId`,ff=`clientSecret`,pf=`codeVerifier`,mf=`code`,hf=`deviceCode`,q=`error`,gf=`expiresIn`,_f=`error_description`,vf=`grantType`,yf=`http`,bf=`httpError`,xf=`idToken`,Sf=`reason`,Cf=`refreshToken`,wf=`redirectUri`,Tf=`scope`,Ef=`server`,Df=`smithy.ts.sdk.synthetic.com.amazonaws.ssooidc`,Of=`tokenType`,J=`com.amazonaws.ssooidc`,kf=[0,J,Gd,8,0],Af=[0,J,Kd,8,0],jf=[0,J,Xd,8,0],Mf=[0,J,rf,8,0],Nf=[0,J,af,8,0],Pf=[-3,J,Ud,{[q]:uf,[bf]:400},[q,Sf,_f],[0,0,0]],B.for(J).registerError(Pf,jd),Ff=[-3,J,Wd,{[q]:uf,[bf]:400},[q,_f],[0,0]],B.for(J).registerError(Ff,Md),If=[3,J,Jd,0,[df,ff,vf,hf,mf,Cf,Tf,wf,pf],[0,[()=>Af,0],0,0,0,[()=>Nf,0],64,0,[()=>jf,0]]],Lf=[3,J,Yd,0,[lf,Of,gf,Cf,xf],[[()=>kf,0],0,1,[()=>Nf,0],[()=>Mf,0]]],Rf=[-3,J,Zd,{[q]:uf,[bf]:400},[q,_f],[0,0]],B.for(J).registerError(Rf,Nd),zf=[-3,J,tf,{[q]:Ef,[bf]:500},[q,_f],[0,0]],B.for(J).registerError(zf,Pd),Bf=[-3,J,Qd,{[q]:uf,[bf]:401},[q,_f],[0,0]],B.for(J).registerError(Bf,Fd),Vf=[-3,J,$d,{[q]:uf,[bf]:400},[q,_f],[0,0]],B.for(J).registerError(Vf,Id),Hf=[-3,J,ef,{[q]:uf,[bf]:400},[q,Sf,_f],[0,0,0]],B.for(J).registerError(Hf,Ld),Uf=[-3,J,nf,{[q]:uf,[bf]:400},[q,_f],[0,0]],B.for(J).registerError(Uf,Rd),Wf=[-3,J,of,{[q]:uf,[bf]:400},[q,_f],[0,0]],B.for(J).registerError(Wf,zd),Gf=[-3,J,sf,{[q]:uf,[bf]:400},[q,_f],[0,0]],B.for(J).registerError(Gf,Bd),Kf=[-3,J,cf,{[q]:uf,[bf]:400},[q,_f],[0,0]],B.for(J).registerError(Kf,Vd),qf=[-3,Df,`SSOOIDCServiceException`,0,[],[]],B.for(Df).registerError(qf,kd),Jf=[9,J,qd,{[yf]:[`POST`,`/token`,200]},()=>If,()=>Lf]})),Xf,Zf,Qf,$f=s((()=>{Xf=Fl(),Zf=K(),au(),Yf(),Qf=class extends Zf.Command.classBuilder().ep(iu).m(function(e,t,n,r){return[(0,Xf.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s(`AWSSSOOIDCService`,`CreateToken`,{}).n(`SSOOIDCClient`,`CreateTokenCommand`).sc(Jf).build(){}})),ep,tp,np,rp=s((()=>{ep=K(),$f(),Dd(),tp={CreateTokenCommand:Qf},np=class extends Ed{},(0,ep.createAggregatedClient)(tp,np)})),ip=s((()=>{$f()})),ap,op,sp=s((()=>{ap={KMS_ACCESS_DENIED:`KMS_AccessDeniedException`},op={KMS_DISABLED_KEY:`KMS_DisabledException`,KMS_INVALID_KEY_USAGE:`KMS_InvalidKeyUsageException`,KMS_INVALID_STATE:`KMS_InvalidStateException`,KMS_KEY_NOT_FOUND:`KMS_NotFoundException`}})),cp=s((()=>{})),lp=l({$Command:()=>Zf.Command,AccessDeniedException:()=>jd,AccessDeniedException$:()=>Pf,AccessDeniedExceptionReason:()=>ap,AuthorizationPendingException:()=>Md,AuthorizationPendingException$:()=>Ff,CreateToken$:()=>Jf,CreateTokenCommand:()=>Qf,CreateTokenRequest$:()=>If,CreateTokenResponse$:()=>Lf,ExpiredTokenException:()=>Nd,ExpiredTokenException$:()=>Rf,InternalServerException:()=>Pd,InternalServerException$:()=>zf,InvalidClientException:()=>Fd,InvalidClientException$:()=>Bf,InvalidGrantException:()=>Id,InvalidGrantException$:()=>Vf,InvalidRequestException:()=>Ld,InvalidRequestException$:()=>Hf,InvalidRequestExceptionReason:()=>op,InvalidScopeException:()=>Rd,InvalidScopeException$:()=>Uf,SSOOIDC:()=>np,SSOOIDCClient:()=>Ed,SSOOIDCServiceException:()=>kd,SSOOIDCServiceException$:()=>qf,SlowDownException:()=>zd,SlowDownException$:()=>Wf,UnauthorizedClientException:()=>Bd,UnauthorizedClientException$:()=>Gf,UnsupportedGrantTypeException:()=>Vd,UnsupportedGrantTypeException$:()=>Kf,__Client:()=>Td.Client}),up=s((()=>{Dd(),rp(),ip(),Yf(),sp(),Hd(),cp(),Ad()})),dp=c((e=>{var t=(Wa(),f(Ua)),n=(No(),f(Mo)),r=yo(),i=jl(),a=p(`fs`);let o=({logger:e,signingName:i}={})=>async()=>{if(e?.debug?.(`@aws-sdk/token-providers - fromEnvSigningName`),!i)throw new r.TokenProviderError(`Please pass 'signingName' to compute environment variable key`,{logger:e});let a=n.getBearerTokenEnvKey(i);if(!(a in process.env))throw new r.TokenProviderError(`Token not present in '${a}' environment variable`,{logger:e});let o={token:process.env[a]};return t.setTokenFeature(o,`BEARER_SERVICE_ENV_VARS`,`3`),o},s=`To refresh this SSO session run 'aws sso login' with the corresponding profile.`,c=async(e,t={},n)=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(up(),lp)),i=e=>t.clientConfig?.[e]??t.parentClientConfig?.[e]??n?.[e];return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:i(`logger`),userAgentAppId:i(`userAgentAppId`)}))},l=async(e,t,n={},r)=>{let{CreateTokenCommand:i}=await Promise.resolve().then(()=>(up(),lp));return(await c(t,n,r)).send(new i({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:`refresh_token`}))},u=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new r.TokenProviderError(`Token is expired. ${s}`,!1)},d=(e,t,n=!1)=>{if(t===void 0)throw new r.TokenProviderError(`Value not present for '${e}' in SSO Token${n?`. Cannot refresh`:``}. ${s}`,!1)},{writeFile:m}=a.promises,h=(e,t)=>m(i.getSSOTokenFilepath(e),JSON.stringify(t,null,2)),g=new Date(0),_=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug(`@aws-sdk/token-providers - fromSso`);let n=await i.parseKnownFiles(e),a=i.getProfileName({profile:e.profile??t?.profile}),o=n[a];if(o){if(!o.sso_session)throw new r.TokenProviderError(`Profile '${a}' is missing required property 'sso_session'.`)}else throw new r.TokenProviderError(`Profile '${a}' could not be found in shared credentials file.`,!1);let c=o.sso_session,f=(await i.loadSsoSessionData(e))[c];if(!f)throw new r.TokenProviderError(`Sso session '${c}' could not be found in shared credentials file.`,!1);for(let e of[`sso_start_url`,`sso_region`])if(!f[e])throw new r.TokenProviderError(`Sso session '${c}' is missing required property '${e}'.`,!1);f.sso_start_url;let p=f.sso_region,m;try{m=await i.getSSOTokenFromFile(c)}catch{throw new r.TokenProviderError(`The SSO session token associated with profile=${a} was not found or is invalid. ${s}`,!1)}d(`accessToken`,m.accessToken),d(`expiresAt`,m.expiresAt);let{accessToken:_,expiresAt:v}=m,y={token:_,expiration:new Date(v)};if(y.expiration.getTime()-Date.now()>3e5)return y;if(Date.now()-g.getTime()<30*1e3)return u(y),y;d(`clientId`,m.clientId,!0),d(`clientSecret`,m.clientSecret,!0),d(`refreshToken`,m.refreshToken,!0);try{g.setTime(Date.now());let n=await l(m,p,e,t);d(`accessToken`,n.accessToken),d(`expiresIn`,n.expiresIn);let r=new Date(Date.now()+n.expiresIn*1e3);try{await h(c,{...m,accessToken:n.accessToken,expiresAt:r.toISOString(),refreshToken:n.refreshToken})}catch{}return{token:n.accessToken,expiration:r}}catch{return u(y),y}};e.fromEnvSigningName=o,e.fromSso=_,e.fromStatic=({token:e,logger:t})=>async()=>{if(t?.debug(`@aws-sdk/token-providers - fromStatic`),!e||!e.token)throw new r.TokenProviderError(`Please pass a valid token to fromStatic`,!1);return e},e.nodeProvider=(e={})=>r.memoize(r.chain(_(e),async()=>{throw new r.TokenProviderError(`Could not load token from any providers`,!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0)})),fp=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.resolveHttpAuthSchemeConfig=e.defaultSSOHttpAuthSchemeProvider=e.defaultSSOHttpAuthSchemeParametersProvider=void 0;let t=(Sl(),f(xl)),n=j();e.defaultSSOHttpAuthSchemeParametersProvider=async(e,t,r)=>({operation:(0,n.getSmithyContext)(t).operation,region:await(0,n.normalizeProvider)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function r(e){return{schemeId:`aws.auth#sigv4`,signingProperties:{name:`awsssoportal`,region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function i(e){return{schemeId:`smithy.api#noAuth`}}e.defaultSSOHttpAuthSchemeProvider=e=>{let t=[];switch(e.operation){case`GetRoleCredentials`:t.push(i(e));break;case`ListAccountRoles`:t.push(i(e));break;case`ListAccounts`:t.push(i(e));break;case`Logout`:t.push(i(e));break;default:t.push(r(e))}return t},e.resolveHttpAuthSchemeConfig=e=>{let r=(0,t.resolveAwsSdkSigV4Config)(e);return Object.assign(r,{authSchemePreference:(0,n.normalizeProvider)(e.authSchemePreference??[])})}})),pp=c(((e,t)=>{t.exports={name:`@aws-sdk/client-sso`,description:`AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native`,version:`3.958.0`,scripts:{build:`concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs`,"build:cjs":`node ../../scripts/compilation/inline client-sso`,"build:es":`tsc -p tsconfig.es.json`,"build:include:deps":`yarn g:turbo run build -F="$npm_package_name"`,"build:types":`tsc -p tsconfig.types.json`,"build:types:downlevel":`downlevel-dts dist-types dist-types/ts3.4`,clean:`rimraf ./dist-* && rimraf *.tsbuildinfo`,"extract:docs":`api-extractor run --local`,"generate:client":`node ../../scripts/generate-clients/single-service --solo sso`,"test:index":`tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs`},main:`./dist-cjs/index.js`,types:`./dist-types/index.d.ts`,module:`./dist-es/index.js`,sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":`5.2.0`,"@aws-crypto/sha256-js":`5.2.0`,"@aws-sdk/core":`3.957.0`,"@aws-sdk/middleware-host-header":`3.957.0`,"@aws-sdk/middleware-logger":`3.957.0`,"@aws-sdk/middleware-recursion-detection":`3.957.0`,"@aws-sdk/middleware-user-agent":`3.957.0`,"@aws-sdk/region-config-resolver":`3.957.0`,"@aws-sdk/types":`3.957.0`,"@aws-sdk/util-endpoints":`3.957.0`,"@aws-sdk/util-user-agent-browser":`3.957.0`,"@aws-sdk/util-user-agent-node":`3.957.0`,"@smithy/config-resolver":`^4.4.5`,"@smithy/core":`^3.20.0`,"@smithy/fetch-http-handler":`^5.3.8`,"@smithy/hash-node":`^4.2.7`,"@smithy/invalid-dependency":`^4.2.7`,"@smithy/middleware-content-length":`^4.2.7`,"@smithy/middleware-endpoint":`^4.4.1`,"@smithy/middleware-retry":`^4.4.17`,"@smithy/middleware-serde":`^4.2.8`,"@smithy/middleware-stack":`^4.2.7`,"@smithy/node-config-provider":`^4.3.7`,"@smithy/node-http-handler":`^4.4.7`,"@smithy/protocol-http":`^5.3.7`,"@smithy/smithy-client":`^4.10.2`,"@smithy/types":`^4.11.0`,"@smithy/url-parser":`^4.2.7`,"@smithy/util-base64":`^4.3.0`,"@smithy/util-body-length-browser":`^4.2.0`,"@smithy/util-body-length-node":`^4.2.1`,"@smithy/util-defaults-mode-browser":`^4.3.16`,"@smithy/util-defaults-mode-node":`^4.2.19`,"@smithy/util-endpoints":`^3.2.7`,"@smithy/util-middleware":`^4.2.7`,"@smithy/util-retry":`^4.2.7`,"@smithy/util-utf8":`^4.2.0`,tslib:`^2.6.2`},devDependencies:{"@tsconfig/node18":`18.2.4`,"@types/node":`^18.19.69`,concurrently:`7.0.0`,"downlevel-dts":`0.10.1`,rimraf:`3.0.2`,typescript:`~5.8.3`},engines:{node:`>=18.0.0`},typesVersions:{"<4.0":{"dist-types/*":[`dist-types/ts3.4/*`]}},files:[`dist-*/**`],author:{name:`AWS SDK for JavaScript Team`,url:`https://aws.amazon.com/javascript/`},license:`Apache-2.0`,browser:{"./dist-es/runtimeConfig":`./dist-es/runtimeConfig.browser`},"react-native":{"./dist-es/runtimeConfig":`./dist-es/runtimeConfig.native`},homepage:`https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso`,repository:{type:`git`,url:`https://github.com/aws/aws-sdk-js-v3.git`,directory:`clients/client-sso`}}})),mp=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ruleSet=void 0;let t=`required`,n=`argv`,r=`isSet`,i=`booleanEquals`,a=`error`,o=`endpoint`,s=`tree`,c=`PartitionResult`,l=`getAttr`,u={[t]:!1,type:`string`},d={[t]:!0,default:!1,type:`boolean`},f={ref:`Endpoint`},p={fn:i,[n]:[{ref:`UseFIPS`},!0]},m={fn:i,[n]:[{ref:`UseDualStack`},!0]},h={},g={fn:l,[n]:[{ref:c},`supportsFIPS`]},_={ref:c},v={fn:i,[n]:[!0,{fn:l,[n]:[_,`supportsDualStack`]}]},y=[p],b=[m],x=[{ref:`Region`}];e.ruleSet={version:`1.0`,parameters:{Region:u,UseDualStack:d,UseFIPS:d,Endpoint:u},rules:[{conditions:[{fn:r,[n]:[f]}],rules:[{conditions:y,error:`Invalid Configuration: FIPS and custom endpoint are not supported`,type:a},{conditions:b,error:`Invalid Configuration: Dualstack and custom endpoint are not supported`,type:a},{endpoint:{url:f,properties:h,headers:h},type:o}],type:s},{conditions:[{fn:r,[n]:x}],rules:[{conditions:[{fn:`aws.partition`,[n]:x,assign:c}],rules:[{conditions:[p,m],rules:[{conditions:[{fn:i,[n]:[!0,g]},v],rules:[{endpoint:{url:`https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:h,headers:h},type:o}],type:s},{error:`FIPS and DualStack are enabled, but this partition does not support one or both`,type:a}],type:s},{conditions:y,rules:[{conditions:[{fn:i,[n]:[g,!0]}],rules:[{conditions:[{fn:`stringEquals`,[n]:[{fn:l,[n]:[_,`name`]},`aws-us-gov`]}],endpoint:{url:`https://portal.sso.{Region}.amazonaws.com`,properties:h,headers:h},type:o},{endpoint:{url:`https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}`,properties:h,headers:h},type:o}],type:s},{error:`FIPS is enabled but this partition does not support FIPS`,type:a}],type:s},{conditions:b,rules:[{conditions:[v],rules:[{endpoint:{url:`https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:h,headers:h},type:o}],type:s},{error:`DualStack is enabled but this partition does not support DualStack`,type:a}],type:s},{endpoint:{url:`https://portal.sso.{Region}.{PartitionResult#dnsSuffix}`,properties:h,headers:h},type:o}],type:s}],type:s},{error:`Invalid Configuration: Missing Region`,type:a}]}})),hp=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.defaultEndpointResolver=void 0;let t=Na(),n=Aa(),r=mp(),i=new n.EndpointCache({size:50,params:[`Endpoint`,`Region`,`UseDualStack`,`UseFIPS`]});e.defaultEndpointResolver=(e,t={})=>i.get(e,()=>(0,n.resolveEndpoint)(r.ruleSet,{endpointParams:e,logger:t.logger})),n.customEndpointFunctions.aws=t.awsEndpointFunctions})),gp=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getRuntimeConfig=void 0;let t=(Sl(),f(xl)),n=(bl(),f(yl)),r=(ka(),f(Oa)),i=K(),a=Ma(),o=R(),s=L(),c=fp(),l=hp();e.getRuntimeConfig=e=>({apiVersion:`2019-06-10`,base64Decoder:e?.base64Decoder??o.fromBase64,base64Encoder:e?.base64Encoder??o.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??l.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??c.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`),signer:new t.AwsSdkSigV4Signer},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new r.NoAuthSigner}],logger:e?.logger??new i.NoOpLogger,protocol:e?.protocol??n.AwsRestJsonProtocol,protocolSettings:e?.protocolSettings??{defaultNamespace:`com.amazonaws.sso`,version:`2019-06-10`,serviceTarget:`SWBPortalService`},serviceId:e?.serviceId??`SSO`,urlParser:e?.urlParser??a.parseUrl,utf8Decoder:e?.utf8Decoder??s.fromUtf8,utf8Encoder:e?.utf8Encoder??s.toUtf8})})),_p=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getRuntimeConfig=void 0;let t=(Vr(),f(rr)).__importDefault(pp()),n=(Sl(),f(xl)),r=su(),i=Tl(),a=cu(),o=zl(),s=Ml(),c=Ue(),l=K(),u=lu(),d=uu(),p=Ll(),m=gp();e.getRuntimeConfig=e=>{(0,l.emitWarningIfUnsupportedVersion)(process.version);let f=(0,d.resolveDefaultsModeConfig)(e),h=()=>f().then(l.loadConfigsForDefaultMode),g=(0,m.getRuntimeConfig)(e);(0,n.emitWarningIfUnsupportedVersion)(process.version);let _={profile:e?.profile,logger:g.logger};return{...g,...e,runtime:`node`,defaultsMode:f,authSchemePreference:e?.authSchemePreference??(0,s.loadConfig)(n.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,_),bodyLengthChecker:e?.bodyLengthChecker??u.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,r.createDefaultUserAgentProvider)({serviceId:g.serviceId,clientVersion:t.default.version}),maxAttempts:e?.maxAttempts??(0,s.loadConfig)(o.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,s.loadConfig)(i.NODE_REGION_CONFIG_OPTIONS,{...i.NODE_REGION_CONFIG_FILE_OPTIONS,..._}),requestHandler:c.NodeHttpHandler.create(e?.requestHandler??h),retryMode:e?.retryMode??(0,s.loadConfig)({...o.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await h()).retryMode||p.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??a.Hash.bind(null,`sha256`),streamCollector:e?.streamCollector??c.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,s.loadConfig)(i.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,_),useFipsEndpoint:e?.useFipsEndpoint??(0,s.loadConfig)(i.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,_),userAgentAppId:e?.userAgentAppId??(0,s.loadConfig)(r.NODE_APP_ID_CONFIG_OPTIONS,_)}}})),vp=c((e=>{var t=g(),n=_(),r=D(),i=Cl(),a=Tl(),o=(ka(),f(Oa)),s=(V(),f(Jt)),c=El(),l=Fl(),u=zl(),d=K(),p=fp(),m=_p(),v=cd(),y=h();let b=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:`awsssoportal`}),x={UseFIPS:{type:`builtInParams`,name:`useFipsEndpoint`},Endpoint:{type:`builtInParams`,name:`endpoint`},Region:{type:`builtInParams`,name:`region`},UseDualStack:{type:`builtInParams`,name:`useDualstackEndpoint`}},S=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);n===-1?t.push(e):t.splice(n,1,e)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider(){return n},setCredentials(e){r=e},credentials(){return r}}},C=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),w=(e,t)=>{let n=Object.assign(v.getAwsRegionExtensionConfiguration(e),d.getDefaultExtensionConfiguration(e),y.getHttpHandlerExtensionConfiguration(e),S(e));return t.forEach(e=>e.configure(n)),Object.assign(e,v.resolveAwsRegionExtensionConfiguration(n),d.resolveDefaultRuntimeConfig(n),y.resolveHttpHandlerRuntimeConfig(n),C(n))};var T=class extends d.Client{config;constructor(...[e]){let d=m.getRuntimeConfig(e||{});super(d),this.initConfig=d;let f=b(d),h=i.resolveUserAgentConfig(f),g=u.resolveRetryConfig(h),_=a.resolveRegionConfig(g),v=t.resolveHostHeaderConfig(_),y=l.resolveEndpointConfig(v);this.config=w(p.resolveHttpAuthSchemeConfig(y),e?.extensions||[]),this.middlewareStack.use(s.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(i.getUserAgentPlugin(this.config)),this.middlewareStack.use(u.getRetryPlugin(this.config)),this.middlewareStack.use(c.getContentLengthPlugin(this.config)),this.middlewareStack.use(t.getHostHeaderPlugin(this.config)),this.middlewareStack.use(n.getLoggerPlugin(this.config)),this.middlewareStack.use(r.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(o.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:p.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async e=>new o.DefaultIdentityProviderConfig({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use(o.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},E=class e extends d.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},O=class e extends E{name=`InvalidRequestException`;$fault=`client`;constructor(t){super({name:`InvalidRequestException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},k=class e extends E{name=`ResourceNotFoundException`;$fault=`client`;constructor(t){super({name:`ResourceNotFoundException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},A=class e extends E{name=`TooManyRequestsException`;$fault=`client`;constructor(t){super({name:`TooManyRequestsException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},j=class e extends E{name=`UnauthorizedException`;$fault=`client`;constructor(t){super({name:`UnauthorizedException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}};let M=`accountId`,ee=`accessToken`,te=`account_id`,ne=`client`,re=`error`,ie=`http`,ae=`httpError`,oe=`httpHeader`,N=`httpQuery`,se=`message`,P=`maxResults`,ce=`max_result`,le=`nextToken`,ue=`next_token`,F=`roleName`,de=`smithy.ts.sdk.synthetic.com.amazonaws.sso`,fe=`x-amz-sso_bearer_token`,I=`com.amazonaws.sso`;var pe=[0,I,`AccessTokenType`,8,0],me=[0,I,`SecretAccessKeyType`,8,0],he=[0,I,`SessionTokenType`,8,0],ge=[3,I,`AccountInfo`,0,[M,`accountName`,`emailAddress`],[0,0,0]],_e=[3,I,`GetRoleCredentialsRequest`,0,[F,M,ee],[[0,{[N]:`role_name`}],[0,{[N]:te}],[()=>pe,{[oe]:fe}]]],ve=[3,I,`GetRoleCredentialsResponse`,0,[`roleCredentials`],[[()=>Ee,0]]],ye=[-3,I,`InvalidRequestException`,{[re]:ne,[ae]:400},[se],[0]];s.TypeRegistry.for(I).registerError(ye,O);var be=[3,I,`ListAccountRolesRequest`,0,[le,P,ee,M],[[0,{[N]:ue}],[1,{[N]:ce}],[()=>pe,{[oe]:fe}],[0,{[N]:te}]]],xe=[3,I,`ListAccountRolesResponse`,0,[le,`roleList`],[0,()=>je]],Se=[3,I,`ListAccountsRequest`,0,[le,P,ee],[[0,{[N]:ue}],[1,{[N]:ce}],[()=>pe,{[oe]:fe}]]],Ce=[3,I,`ListAccountsResponse`,0,[le,`accountList`],[0,()=>Ae]],we=[3,I,`LogoutRequest`,0,[ee],[[()=>pe,{[oe]:fe}]]],Te=[-3,I,`ResourceNotFoundException`,{[re]:ne,[ae]:404},[se],[0]];s.TypeRegistry.for(I).registerError(Te,k);var Ee=[3,I,`RoleCredentials`,0,[`accessKeyId`,`secretAccessKey`,`sessionToken`,`expiration`],[0,[()=>me,0],[()=>he,0],1]],De=[3,I,`RoleInfo`,0,[F,M],[0,0]],Oe=[-3,I,`TooManyRequestsException`,{[re]:ne,[ae]:429},[se],[0]];s.TypeRegistry.for(I).registerError(Oe,A);var L=[-3,I,`UnauthorizedException`,{[re]:ne,[ae]:401},[se],[0]];s.TypeRegistry.for(I).registerError(L,j);var ke=`unit`,R=[-3,de,`SSOServiceException`,0,[],[]];s.TypeRegistry.for(de).registerError(R,E);var Ae=[1,I,`AccountListType`,0,()=>ge],je=[1,I,`RoleListType`,0,()=>De],Me=[9,I,`GetRoleCredentials`,{[ie]:[`GET`,`/federation/credentials`,200]},()=>_e,()=>ve],Ne=[9,I,`ListAccountRoles`,{[ie]:[`GET`,`/assignment/roles`,200]},()=>be,()=>xe],Pe=[9,I,`ListAccounts`,{[ie]:[`GET`,`/assignment/accounts`,200]},()=>Se,()=>Ce],Fe=[9,I,`Logout`,{[ie]:[`POST`,`/logout`,200]},()=>we,()=>ke],Ie=class extends d.Command.classBuilder().ep(x).m(function(e,t,n,r){return[l.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`SWBPortalService`,`GetRoleCredentials`,{}).n(`SSOClient`,`GetRoleCredentialsCommand`).sc(Me).build(){},Le=class extends d.Command.classBuilder().ep(x).m(function(e,t,n,r){return[l.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`SWBPortalService`,`ListAccountRoles`,{}).n(`SSOClient`,`ListAccountRolesCommand`).sc(Ne).build(){},Re=class extends d.Command.classBuilder().ep(x).m(function(e,t,n,r){return[l.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`SWBPortalService`,`ListAccounts`,{}).n(`SSOClient`,`ListAccountsCommand`).sc(Pe).build(){},ze=class extends d.Command.classBuilder().ep(x).m(function(e,t,n,r){return[l.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`SWBPortalService`,`Logout`,{}).n(`SSOClient`,`LogoutCommand`).sc(Fe).build(){};let Be={GetRoleCredentialsCommand:Ie,ListAccountRolesCommand:Le,ListAccountsCommand:Re,LogoutCommand:ze};var Ve=class extends T{};d.createAggregatedClient(Be,Ve);let He=o.createPaginator(T,Le,`nextToken`,`nextToken`,`maxResults`),Ue=o.createPaginator(T,Re,`nextToken`,`nextToken`,`maxResults`);Object.defineProperty(e,`$Command`,{enumerable:!0,get:function(){return d.Command}}),Object.defineProperty(e,`__Client`,{enumerable:!0,get:function(){return d.Client}}),e.AccountInfo$=ge,e.GetRoleCredentials$=Me,e.GetRoleCredentialsCommand=Ie,e.GetRoleCredentialsRequest$=_e,e.GetRoleCredentialsResponse$=ve,e.InvalidRequestException=O,e.InvalidRequestException$=ye,e.ListAccountRoles$=Ne,e.ListAccountRolesCommand=Le,e.ListAccountRolesRequest$=be,e.ListAccountRolesResponse$=xe,e.ListAccounts$=Pe,e.ListAccountsCommand=Re,e.ListAccountsRequest$=Se,e.ListAccountsResponse$=Ce,e.Logout$=Fe,e.LogoutCommand=ze,e.LogoutRequest$=we,e.ResourceNotFoundException=k,e.ResourceNotFoundException$=Te,e.RoleCredentials$=Ee,e.RoleInfo$=De,e.SSO=Ve,e.SSOClient=T,e.SSOServiceException=E,e.SSOServiceException$=R,e.TooManyRequestsException=A,e.TooManyRequestsException$=Oe,e.UnauthorizedException=j,e.UnauthorizedException$=L,e.paginateListAccountRoles=He,e.paginateListAccounts=Ue})),yp=c((e=>{var t=vp();Object.defineProperty(e,`GetRoleCredentialsCommand`,{enumerable:!0,get:function(){return t.GetRoleCredentialsCommand}}),Object.defineProperty(e,`SSOClient`,{enumerable:!0,get:function(){return t.SSOClient}})})),bp=c((e=>{var t=yo(),n=jl(),r=(Wa(),f(Ua)),i=dp();let a=e=>e&&(typeof e.sso_start_url==`string`||typeof e.sso_account_id==`string`||typeof e.sso_session==`string`||typeof e.sso_region==`string`||typeof e.sso_role_name==`string`),o=async({ssoStartUrl:e,ssoSession:a,ssoAccountId:o,ssoRegion:s,ssoRoleName:c,ssoClient:l,clientConfig:u,parentClientConfig:d,callerClientConfig:f,profile:p,filepath:m,configFilepath:h,ignoreCache:g,logger:_})=>{let v,y=`To refresh this SSO session run aws sso login with the corresponding profile.`;if(a)try{let e=await i.fromSso({profile:p,filepath:m,configFilepath:h,ignoreCache:g})();v={accessToken:e.token,expiresAt:new Date(e.expiration).toISOString()}}catch(e){throw new t.CredentialsProviderError(e.message,{tryNextLink:!1,logger:_})}else try{v=await n.getSSOTokenFromFile(e)}catch{throw new t.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${y}`,{tryNextLink:!1,logger:_})}if(new Date(v.expiresAt).getTime()-Date.now()<=0)throw new t.CredentialsProviderError(`The SSO session associated with this profile has expired. ${y}`,{tryNextLink:!1,logger:_});let{accessToken:b}=v,{SSOClient:x,GetRoleCredentialsCommand:S}=await Promise.resolve().then(function(){return yp()}),C=l||new x(Object.assign({},u??{},{logger:u?.logger??f?.logger??d?.logger,region:u?.region??s,userAgentAppId:u?.userAgentAppId??f?.userAgentAppId??d?.userAgentAppId})),w;try{w=await C.send(new S({accountId:o,roleName:c,accessToken:b}))}catch(e){throw new t.CredentialsProviderError(e,{tryNextLink:!1,logger:_})}let{roleCredentials:{accessKeyId:T,secretAccessKey:E,sessionToken:D,expiration:O,credentialScope:k,accountId:A}={}}=w;if(!T||!E||!D||!O)throw new t.CredentialsProviderError(`SSO returns an invalid temporary credential.`,{tryNextLink:!1,logger:_});let j={accessKeyId:T,secretAccessKey:E,sessionToken:D,expiration:new Date(O),...k&&{credentialScope:k},...A&&{accountId:A}};return a?r.setCredentialFeature(j,`CREDENTIALS_SSO`,`s`):r.setCredentialFeature(j,`CREDENTIALS_SSO_LEGACY`,`u`),j},s=(e,n)=>{let{sso_start_url:r,sso_account_id:i,sso_region:a,sso_role_name:o}=e;if(!r||!i||!a||!o)throw new t.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(`, `)}\nReference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:n});return e};e.fromSSO=(e={})=>async({callerClientConfig:r}={})=>{e.logger?.debug(`@aws-sdk/credential-provider-sso - fromSSO`);let{ssoStartUrl:i,ssoAccountId:c,ssoRegion:l,ssoRoleName:u,ssoSession:d}=e,{ssoClient:f}=e,p=n.getProfileName({profile:e.profile??r?.profile});if(!i&&!c&&!l&&!u&&!d){let r=(await n.parseKnownFiles(e))[p];if(!r)throw new t.CredentialsProviderError(`Profile ${p} was not found.`,{logger:e.logger});if(!a(r))throw new t.CredentialsProviderError(`Profile ${p} is not configured with SSO credentials.`,{logger:e.logger});if(r?.sso_session){let a=(await n.loadSsoSessionData(e))[r.sso_session],o=` configurations in profile ${p} and sso-session ${r.sso_session}`;if(l&&l!==a.sso_region)throw new t.CredentialsProviderError(`Conflicting SSO region`+o,{tryNextLink:!1,logger:e.logger});if(i&&i!==a.sso_start_url)throw new t.CredentialsProviderError(`Conflicting SSO start_url`+o,{tryNextLink:!1,logger:e.logger});r.sso_region=a.sso_region,r.sso_start_url=a.sso_start_url}let{sso_start_url:c,sso_account_id:u,sso_region:d,sso_role_name:m,sso_session:h}=s(r,e.logger);return o({ssoStartUrl:c,ssoSession:h,ssoAccountId:u,ssoRegion:d,ssoRoleName:m,ssoClient:f,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,callerClientConfig:e.callerClientConfig,profile:p,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else if(!i||!c||!l||!u)throw new t.CredentialsProviderError(`Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"`,{tryNextLink:!1,logger:e.logger});else return o({ssoStartUrl:i,ssoSession:d,ssoAccountId:c,ssoRegion:l,ssoRoleName:u,ssoClient:f,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,callerClientConfig:e.callerClientConfig,profile:p,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})},e.isSsoProfile=a,e.validateSsoProfile=s}));function xp(e){return{schemeId:`aws.auth#sigv4`,signingProperties:{name:`signin`,region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function Sp(e){return{schemeId:`smithy.api#noAuth`}}var Cp,wp,Tp,Ep,Dp=s((()=>{Sl(),Cp=j(),wp=async(e,t,n)=>({operation:(0,Cp.getSmithyContext)(t).operation,region:await(0,Cp.normalizeProvider)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),Tp=e=>{let t=[];switch(e.operation){case`CreateOAuth2Token`:t.push(Sp(e));break;default:t.push(xp(e))}return t},Ep=e=>{let t=Oo(e);return Object.assign(t,{authSchemePreference:(0,Cp.normalizeProvider)(e.authSchemePreference??[])})}})),Op,kp,Ap=s((()=>{Op=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:`signin`}),kp={UseFIPS:{type:`builtInParams`,name:`useFipsEndpoint`},Endpoint:{type:`builtInParams`,name:`endpoint`},Region:{type:`builtInParams`,name:`region`},UseDualStack:{type:`builtInParams`,name:`useDualstackEndpoint`}}})),jp,Mp,Np,Pp,Fp,Ip,Lp,Rp,zp,Bp,Vp,Hp,Up,Wp,Gp,Kp,qp,Jp,Yp,Xp,Zp,Qp,$p,em,tm,nm,rm=s((()=>{jp=`required`,Mp=`fn`,Np=`argv`,Pp=`ref`,Fp=!0,Ip=`isSet`,Lp=`booleanEquals`,Rp=`error`,zp=`endpoint`,Bp=`tree`,Vp=`PartitionResult`,Hp=`stringEquals`,Up={[jp]:!0,default:!1,type:`boolean`},Wp={[jp]:!1,type:`string`},Gp={[Pp]:`Endpoint`},Kp={[Mp]:Lp,[Np]:[{[Pp]:`UseFIPS`},!0]},qp={[Mp]:Lp,[Np]:[{[Pp]:`UseDualStack`},!0]},Jp={},Yp={[Mp]:`getAttr`,[Np]:[{[Pp]:Vp},`name`]},Xp={[Mp]:Lp,[Np]:[{[Pp]:`UseFIPS`},!1]},Zp={[Mp]:Lp,[Np]:[{[Pp]:`UseDualStack`},!1]},Qp={[Mp]:`getAttr`,[Np]:[{[Pp]:Vp},`supportsFIPS`]},$p={[Mp]:Lp,[Np]:[!0,{[Mp]:`getAttr`,[Np]:[{[Pp]:Vp},`supportsDualStack`]}]},em=[{[Pp]:`Region`}],tm={version:`1.0`,parameters:{UseDualStack:Up,UseFIPS:Up,Endpoint:Wp,Region:Wp},rules:[{conditions:[{[Mp]:Ip,[Np]:[Gp]}],rules:[{conditions:[Kp],error:`Invalid Configuration: FIPS and custom endpoint are not supported`,type:Rp},{rules:[{conditions:[qp],error:`Invalid Configuration: Dualstack and custom endpoint are not supported`,type:Rp},{endpoint:{url:Gp,properties:Jp,headers:Jp},type:zp}],type:Bp}],type:Bp},{rules:[{conditions:[{[Mp]:Ip,[Np]:em}],rules:[{conditions:[{[Mp]:`aws.partition`,[Np]:em,assign:Vp}],rules:[{conditions:[{[Mp]:Hp,[Np]:[Yp,`aws`]},Xp,Zp],endpoint:{url:`https://{Region}.signin.aws.amazon.com`,properties:Jp,headers:Jp},type:zp},{conditions:[{[Mp]:Hp,[Np]:[Yp,`aws-cn`]},Xp,Zp],endpoint:{url:`https://{Region}.signin.amazonaws.cn`,properties:Jp,headers:Jp},type:zp},{conditions:[{[Mp]:Hp,[Np]:[Yp,`aws-us-gov`]},Xp,Zp],endpoint:{url:`https://{Region}.signin.amazonaws-us-gov.com`,properties:Jp,headers:Jp},type:zp},{conditions:[Kp,qp],rules:[{conditions:[{[Mp]:Lp,[Np]:[Fp,Qp]},$p],rules:[{endpoint:{url:`https://signin-fips.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:Jp,headers:Jp},type:zp}],type:Bp},{error:`FIPS and DualStack are enabled, but this partition does not support one or both`,type:Rp}],type:Bp},{conditions:[Kp,Zp],rules:[{conditions:[{[Mp]:Lp,[Np]:[Qp,Fp]}],rules:[{endpoint:{url:`https://signin-fips.{Region}.{PartitionResult#dnsSuffix}`,properties:Jp,headers:Jp},type:zp}],type:Bp},{error:`FIPS is enabled but this partition does not support FIPS`,type:Rp}],type:Bp},{conditions:[Xp,qp],rules:[{conditions:[$p],rules:[{endpoint:{url:`https://signin.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:Jp,headers:Jp},type:zp}],type:Bp},{error:`DualStack is enabled but this partition does not support DualStack`,type:Rp}],type:Bp},{endpoint:{url:`https://signin.{Region}.{PartitionResult#dnsSuffix}`,properties:Jp,headers:Jp},type:zp}],type:Bp}],type:Bp},{error:`Invalid Configuration: Missing Region`,type:Rp}],type:Bp}]},nm=tm})),im,am,om,sm,cm=s((()=>{im=Na(),am=Aa(),rm(),om=new am.EndpointCache({size:50,params:[`Endpoint`,`Region`,`UseDualStack`,`UseFIPS`]}),sm=(e,t={})=>om.get(e,()=>(0,am.resolveEndpoint)(nm,{endpointParams:e,logger:t.logger})),am.customEndpointFunctions.aws=im.awsEndpointFunctions})),lm,um,dm,fm,pm,mm=s((()=>{Sl(),bl(),ka(),lm=K(),um=Ma(),dm=R(),fm=L(),Dp(),cm(),pm=e=>({apiVersion:`2023-01-01`,base64Decoder:e?.base64Decoder??dm.fromBase64,base64Encoder:e?.base64Encoder??dm.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??sm,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Tp,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`),signer:new io},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new va}],logger:e?.logger??new lm.NoOpLogger,protocol:e?.protocol??Lc,protocolSettings:e?.protocolSettings??{defaultNamespace:`com.amazonaws.signin`,version:`2023-01-01`,serviceTarget:`Signin`},serviceId:e?.serviceId??`Signin`,urlParser:e?.urlParser??um.parseUrl,utf8Decoder:e?.utf8Decoder??fm.fromUtf8,utf8Encoder:e?.utf8Encoder??fm.toUtf8})})),hm,gm,_m,vm,ym,bm,xm,Sm,Cm,wm,Tm,Em=s((()=>{Sl(),hm=su(),gm=Tl(),_m=cu(),vm=zl(),ym=Ml(),bm=Ue(),xm=K(),Sm=lu(),Cm=uu(),wm=Ll(),mm(),Tm=e=>{(0,xm.emitWarningIfUnsupportedVersion)(process.version);let t=(0,Cm.resolveDefaultsModeConfig)(e),n=()=>t().then(xm.loadConfigsForDefaultMode),r=pm(e);Fa(process.version);let i={profile:e?.profile,logger:r.logger};return{...r,...e,runtime:`node`,defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,ym.loadConfig)(_o,i),bodyLengthChecker:e?.bodyLengthChecker??Sm.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,hm.createDefaultUserAgentProvider)({serviceId:r.serviceId,clientVersion:ou}),maxAttempts:e?.maxAttempts??(0,ym.loadConfig)(vm.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,ym.loadConfig)(gm.NODE_REGION_CONFIG_OPTIONS,{...gm.NODE_REGION_CONFIG_FILE_OPTIONS,...i}),requestHandler:bm.NodeHttpHandler.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,ym.loadConfig)({...vm.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await n()).retryMode||wm.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??_m.Hash.bind(null,`sha256`),streamCollector:e?.streamCollector??bm.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,ym.loadConfig)(gm.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,i),useFipsEndpoint:e?.useFipsEndpoint??(0,ym.loadConfig)(gm.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,i),userAgentAppId:e?.userAgentAppId??(0,ym.loadConfig)(hm.NODE_APP_ID_CONFIG_OPTIONS,i)}}})),Dm,Om,km=s((()=>{Dm=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);n===-1?t.push(e):t.splice(n,1,e)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider(){return n},setCredentials(e){r=e},credentials(){return r}}},Om=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})})),Am,jm,Mm,Nm,Pm=s((()=>{Am=cd(),jm=h(),Mm=K(),km(),Nm=(e,t)=>{let n=Object.assign((0,Am.getAwsRegionExtensionConfiguration)(e),(0,Mm.getDefaultExtensionConfiguration)(e),(0,jm.getHttpHandlerExtensionConfiguration)(e),Dm(e));return t.forEach(e=>e.configure(n)),Object.assign(e,(0,Am.resolveAwsRegionExtensionConfiguration)(n),(0,Mm.resolveDefaultRuntimeConfig)(n),(0,jm.resolveHttpHandlerRuntimeConfig)(n),Om(n))}})),Fm,Im,Lm,Rm,zm,Bm,Vm,Hm,Um,Wm,Gm=s((()=>{Fm=g(),Im=_(),Lm=D(),Rm=Cl(),zm=Tl(),ka(),V(),Bm=El(),Vm=Fl(),Hm=zl(),Um=K(),Dp(),Ap(),Em(),Pm(),Wm=class extends Um.Client{config;constructor(...[e]){let t=Tm(e||{});super(t),this.initConfig=t,this.config=Nm(Ep((0,Vm.resolveEndpointConfig)((0,Fm.resolveHostHeaderConfig)((0,zm.resolveRegionConfig)((0,Hm.resolveRetryConfig)((0,Rm.resolveUserAgentConfig)(Op(t))))))),e?.extensions||[]),this.middlewareStack.use(mt(this.config)),this.middlewareStack.use((0,Rm.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Hm.getRetryPlugin)(this.config)),this.middlewareStack.use((0,Bm.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Fm.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,Im.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,Lm.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(oe(this.config,{httpAuthSchemeParametersProvider:wp,identityProviderConfigProvider:async e=>new la({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use(_e(this.config))}destroy(){super.destroy()}}})),Km,qm,Jm=s((()=>{Km=K(),qm=class e extends Km.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}})),Ym,Xm,Zm,Qm,$m=s((()=>{Jm(),Ym=class e extends qm{name=`AccessDeniedException`;$fault=`client`;error;constructor(t){super({name:`AccessDeniedException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},Xm=class e extends qm{name=`InternalServerException`;$fault=`server`;error;constructor(t){super({name:`InternalServerException`,$fault:`server`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},Zm=class e extends qm{name=`TooManyRequestsError`;$fault=`client`;error;constructor(t){super({name:`TooManyRequestsError`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},Qm=class e extends qm{name=`ValidationException`;$fault=`client`;error;constructor(t){super({name:`ValidationException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}}})),eh,th,nh,rh,ih,ah,oh,sh,ch,lh,uh,dh,fh,ph,mh,hh,gh,_h,vh,yh,bh,xh,Sh,Ch,wh,Th,Eh,Dh,Oh,kh,Ah,jh,Mh,Nh,Ph,Fh,Ih,Lh,Rh,zh,Bh,Vh,Hh,Uh,Wh,Gh,Kh,qh=s((()=>{V(),$m(),Jm(),eh=`AccessDeniedException`,th=`AccessToken`,nh=`CreateOAuth2Token`,rh=`CreateOAuth2TokenRequest`,ih=`CreateOAuth2TokenRequestBody`,ah=`CreateOAuth2TokenResponseBody`,oh=`CreateOAuth2TokenResponse`,sh=`InternalServerException`,ch=`RefreshToken`,lh=`TooManyRequestsError`,uh=`ValidationException`,dh=`accessKeyId`,fh=`accessToken`,ph=`client`,mh=`clientId`,hh=`codeVerifier`,gh=`code`,_h=`error`,vh=`expiresIn`,yh=`grantType`,bh=`http`,xh=`httpError`,Sh=`idToken`,Ch=`jsonName`,wh=`message`,Th=`refreshToken`,Eh=`redirectUri`,Dh=`server`,Oh=`secretAccessKey`,kh=`sessionToken`,Ah=`smithy.ts.sdk.synthetic.com.amazonaws.signin`,jh=`tokenInput`,Mh=`tokenOutput`,Nh=`tokenType`,Ph=`com.amazonaws.signin`,Fh=[0,Ph,ch,8,0],Ih=[-3,Ph,eh,{[_h]:ph},[_h,wh],[0,0]],B.for(Ph).registerError(Ih,Ym),Lh=[3,Ph,th,8,[dh,Oh,kh],[[0,{[Ch]:dh}],[0,{[Ch]:Oh}],[0,{[Ch]:kh}]]],Rh=[3,Ph,rh,0,[jh],[[()=>zh,16]]],zh=[3,Ph,ih,0,[mh,yh,gh,Eh,hh,Th],[[0,{[Ch]:mh}],[0,{[Ch]:yh}],0,[0,{[Ch]:Eh}],[0,{[Ch]:hh}],[()=>Fh,{[Ch]:Th}]]],Bh=[3,Ph,oh,0,[Mh],[[()=>Vh,16]]],Vh=[3,Ph,ah,0,[fh,Nh,vh,Th,Sh],[[()=>Lh,{[Ch]:fh}],[0,{[Ch]:Nh}],[1,{[Ch]:vh}],[()=>Fh,{[Ch]:Th}],[0,{[Ch]:Sh}]]],Hh=[-3,Ph,sh,{[_h]:Dh,[xh]:500},[_h,wh],[0,0]],B.for(Ph).registerError(Hh,Xm),Uh=[-3,Ph,lh,{[_h]:ph,[xh]:429},[_h,wh],[0,0]],B.for(Ph).registerError(Uh,Zm),Wh=[-3,Ph,uh,{[_h]:ph,[xh]:400},[_h,wh],[0,0]],B.for(Ph).registerError(Wh,Qm),Gh=[-3,Ah,`SigninServiceException`,0,[],[]],B.for(Ah).registerError(Gh,qm),Kh=[9,Ph,nh,{[bh]:[`POST`,`/v1/token`,200]},()=>Rh,()=>Bh]})),Jh,Yh,Xh,Zh=s((()=>{Jh=Fl(),Yh=K(),Ap(),qh(),Xh=class extends Yh.Command.classBuilder().ep(kp).m(function(e,t,n,r){return[(0,Jh.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s(`Signin`,`CreateOAuth2Token`,{}).n(`SigninClient`,`CreateOAuth2TokenCommand`).sc(Kh).build(){}})),Qh,$h,eg,tg=s((()=>{Qh=K(),Zh(),Gm(),$h={CreateOAuth2TokenCommand:Xh},eg=class extends Wm{},(0,Qh.createAggregatedClient)($h,eg)})),ng=s((()=>{Zh()})),rg,ig=s((()=>{rg={AUTHCODE_EXPIRED:`AUTHCODE_EXPIRED`,INSUFFICIENT_PERMISSIONS:`INSUFFICIENT_PERMISSIONS`,INVALID_REQUEST:`INVALID_REQUEST`,SERVER_ERROR:`server_error`,TOKEN_EXPIRED:`TOKEN_EXPIRED`,USER_CREDENTIALS_CHANGED:`USER_CREDENTIALS_CHANGED`}})),ag=s((()=>{})),og=l({$Command:()=>Yh.Command,AccessDeniedException:()=>Ym,AccessDeniedException$:()=>Ih,AccessToken$:()=>Lh,CreateOAuth2Token$:()=>Kh,CreateOAuth2TokenCommand:()=>Xh,CreateOAuth2TokenRequest$:()=>Rh,CreateOAuth2TokenRequestBody$:()=>zh,CreateOAuth2TokenResponse$:()=>Bh,CreateOAuth2TokenResponseBody$:()=>Vh,InternalServerException:()=>Xm,InternalServerException$:()=>Hh,OAuth2ErrorCode:()=>rg,Signin:()=>eg,SigninClient:()=>Wm,SigninServiceException:()=>qm,SigninServiceException$:()=>Gh,TooManyRequestsError:()=>Zm,TooManyRequestsError$:()=>Uh,ValidationException:()=>Qm,ValidationException$:()=>Wh,__Client:()=>Um.Client}),sg=s((()=>{Gm(),tg(),ng(),qh(),ig(),$m(),ag(),Jm()})),cg=c((e=>{var t=(Wa(),f(Ua)),n=yo(),r=jl(),i=h(),a=p(`node:crypto`),o=p(`node:fs`),s=p(`node:os`),c=p(`node:path`),l=class e{profileData;init;callerClientConfig;static REFRESH_THRESHOLD=300*1e3;constructor(e,t,n){this.profileData=e,this.init=t,this.callerClientConfig=n}async loadCredentials(){let t=await this.loadToken();if(!t)throw new n.CredentialsProviderError(`Failed to load a token for session ${this.loginSession}, please re-authenticate using aws login`,{tryNextLink:!1,logger:this.logger});let r=t.accessToken,i=Date.now();return new Date(r.expiresAt).getTime()-i<=e.REFRESH_THRESHOLD?this.refresh(t):{accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken,accountId:r.accountId,expiration:new Date(r.expiresAt)}}get logger(){return this.init?.logger}get loginSession(){return this.profileData.login_session}async refresh(e){let{SigninClient:t,CreateOAuth2TokenCommand:r}=await Promise.resolve().then(()=>(sg(),og)),{logger:i,userAgentAppId:a}=this.callerClientConfig??{},o=(e=>e?.metadata?.handlerProtocol===`h2`)(this.callerClientConfig?.requestHandler)?void 0:this.callerClientConfig?.requestHandler,s=new t({credentials:{accessKeyId:``,secretAccessKey:``},region:this.profileData.region??await this.callerClientConfig?.region?.()??process.env.AWS_REGION,requestHandler:o,logger:i,userAgentAppId:a,...this.init?.clientConfig});this.createDPoPInterceptor(s.middlewareStack);let c={tokenInput:{clientId:e.clientId,refreshToken:e.refreshToken,grantType:`refresh_token`}};try{let t=await s.send(new r(c)),{accessKeyId:i,secretAccessKey:a,sessionToken:o}=t.tokenOutput?.accessToken??{},{refreshToken:l,expiresIn:u}=t.tokenOutput??{};if(!i||!a||!o||!l)throw new n.CredentialsProviderError(`Token refresh response missing required fields`,{logger:this.logger,tryNextLink:!1});let d=(u??900)*1e3,f=new Date(Date.now()+d),p={...e,accessToken:{...e.accessToken,accessKeyId:i,secretAccessKey:a,sessionToken:o,expiresAt:f.toISOString()},refreshToken:l};await this.saveToken(p);let m=p.accessToken;return{accessKeyId:m.accessKeyId,secretAccessKey:m.secretAccessKey,sessionToken:m.sessionToken,accountId:m.accountId,expiration:f}}catch(e){if(e.name===`AccessDeniedException`){let t=e.error,r;switch(t){case`TOKEN_EXPIRED`:r=`Your session has expired. Please reauthenticate.`;break;case`USER_CREDENTIALS_CHANGED`:r=`Unable to refresh credentials because of a change in your password. Please reauthenticate with your new password.`;break;case`INSUFFICIENT_PERMISSIONS`:r=`Unable to refresh credentials due to insufficient permissions. You may be missing permission for the 'CreateOAuth2Token' action.`;break;default:r=`Failed to refresh token: ${String(e)}. Please re-authenticate using \`aws login\``}throw new n.CredentialsProviderError(r,{logger:this.logger,tryNextLink:!1})}throw new n.CredentialsProviderError(`Failed to refresh token: ${String(e)}. Please re-authenticate using aws login`,{logger:this.logger})}}async loadToken(){let e=this.getTokenFilePath();try{let t;try{t=await r.readFile(e,{ignoreCache:this.init?.ignoreCache})}catch{t=await o.promises.readFile(e,`utf8`)}let i=JSON.parse(t),a=[`accessToken`,`clientId`,`refreshToken`,`dpopKey`].filter(e=>!i[e]);if(i.accessToken?.accountId||a.push(`accountId`),a.length>0)throw new n.CredentialsProviderError(`Token validation failed, missing fields: ${a.join(`, `)}`,{logger:this.logger,tryNextLink:!1});return i}catch(t){throw new n.CredentialsProviderError(`Failed to load token from ${e}: ${String(t)}`,{logger:this.logger,tryNextLink:!1})}}async saveToken(e){let t=this.getTokenFilePath(),n=c.dirname(t);try{await o.promises.mkdir(n,{recursive:!0})}catch{}await o.promises.writeFile(t,JSON.stringify(e,null,2),`utf8`)}getTokenFilePath(){let e=process.env.AWS_LOGIN_CACHE_DIRECTORY??c.join(s.homedir(),`.aws`,`login`,`cache`),t=Buffer.from(this.loginSession,`utf8`),n=a.createHash(`sha256`).update(t).digest(`hex`);return c.join(e,`${n}.json`)}derToRawSignature(e){let t=2;if(e[t]!==2)throw Error(`Invalid DER signature`);t++;let n=e[t++],r=e.subarray(t,t+n);if(t+=n,e[t]!==2)throw Error(`Invalid DER signature`);t++;let i=e[t++],a=e.subarray(t,t+i);r=r[0]===0?r.subarray(1):r,a=a[0]===0?a.subarray(1):a;let o=Buffer.concat([Buffer.alloc(32-r.length),r]),s=Buffer.concat([Buffer.alloc(32-a.length),a]);return Buffer.concat([o,s])}createDPoPInterceptor(e){e.add(e=>async t=>{if(i.HttpRequest.isInstance(t.request)){let e=t.request,n=`${e.protocol}//${e.hostname}${e.port?`:${e.port}`:``}${e.path}`,r=await this.generateDpop(e.method,n);e.headers={...e.headers,DPoP:r}}return e(t)},{step:`finalizeRequest`,name:`dpopInterceptor`,override:!0})}async generateDpop(e=`POST`,t){let r=await this.loadToken();try{let n=a.createPrivateKey({key:r.dpopKey,format:`pem`,type:`sec1`}),i=a.createPublicKey(n).export({format:`der`,type:`spki`}),o=-1;for(let e=0;e<i.length;e++)if(i[e]===4){o=e;break}let s=i.slice(o+1,o+33),c=i.slice(o+33,o+65),l={alg:`ES256`,typ:`dpop+jwt`,jwk:{kty:`EC`,crv:`P-256`,x:s.toString(`base64url`),y:c.toString(`base64url`)}},u={jti:crypto.randomUUID(),htm:e,htu:t,iat:Math.floor(Date.now()/1e3)},d=`${Buffer.from(JSON.stringify(l)).toString(`base64url`)}.${Buffer.from(JSON.stringify(u)).toString(`base64url`)}`,f=a.sign(`sha256`,Buffer.from(d),n);return`${d}.${this.derToRawSignature(f).toString(`base64url`)}`}catch(e){throw new n.CredentialsProviderError(`Failed to generate Dpop proof: ${e instanceof Error?e.message:String(e)}`,{logger:this.logger,tryNextLink:!1})}}};e.fromLoginCredentials=e=>async({callerClientConfig:i}={})=>{e?.logger?.debug?.(`@aws-sdk/credential-providers - fromLoginCredentials`);let a=await r.parseKnownFiles(e||{}),o=r.getProfileName({profile:e?.profile??i?.profile}),s=a[o];if(!s?.login_session)throw new n.CredentialsProviderError(`Profile ${o} does not contain login_session.`,{tryNextLink:!0,logger:e?.logger});let c=await new l(s,e,i).loadCredentials();return t.setCredentialFeature(c,`CREDENTIALS_LOGIN`,`AD`)}}));function lg(e){return{schemeId:`aws.auth#sigv4`,signingProperties:{name:`sts`,region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function ug(e){return{schemeId:`smithy.api#noAuth`}}var dg,fg,pg,mg,hg,gg=s((()=>{Sl(),dg=j(),H_(),fg=async(e,t,n)=>({operation:(0,dg.getSmithyContext)(t).operation,region:await(0,dg.normalizeProvider)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),pg=e=>{let t=[];switch(e.operation){case`AssumeRoleWithWebIdentity`:t.push(ug(e));break;default:t.push(lg(e))}return t},mg=e=>Object.assign(e,{stsClientCtor:V_}),hg=e=>{let t=Oo(mg(e));return Object.assign(t,{authSchemePreference:(0,dg.normalizeProvider)(e.authSchemePreference??[])})}})),_g,vg,yg=s((()=>{_g=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:`sts`}),vg={UseGlobalEndpoint:{type:`builtInParams`,name:`useGlobalEndpoint`},UseFIPS:{type:`builtInParams`,name:`useFipsEndpoint`},Endpoint:{type:`builtInParams`,name:`endpoint`},Region:{type:`builtInParams`,name:`region`},UseDualStack:{type:`builtInParams`,name:`useDualstackEndpoint`}}})),bg,Y,X,Z,xg,Sg,Cg,wg,Tg,Eg,Dg,Og,Q,kg,Ag,jg,Mg,Ng,Pg,Fg,Ig,Lg,Rg,zg,Bg,Vg,Hg,Ug,Wg,Gg,Kg,qg,Jg,Yg,Xg,Zg,Qg,$g,e_=s((()=>{bg=`required`,Y=`type`,X=`fn`,Z=`argv`,xg=`ref`,Sg=!1,Cg=!0,wg=`booleanEquals`,Tg=`stringEquals`,Eg=`sigv4`,Dg=`sts`,Og=`us-east-1`,Q=`endpoint`,kg=`https://sts.{Region}.{PartitionResult#dnsSuffix}`,Ag=`tree`,jg=`error`,Mg=`getAttr`,Ng={[bg]:!1,[Y]:`string`},Pg={[bg]:!0,default:!1,[Y]:`boolean`},Fg={[xg]:`Endpoint`},Ig={[X]:`isSet`,[Z]:[{[xg]:`Region`}]},Lg={[xg]:`Region`},Rg={[X]:`aws.partition`,[Z]:[Lg],assign:`PartitionResult`},zg={[xg]:`UseFIPS`},Bg={[xg]:`UseDualStack`},Vg={url:`https://sts.amazonaws.com`,properties:{authSchemes:[{name:Eg,signingName:Dg,signingRegion:Og}]},headers:{}},Hg={},Ug={conditions:[{[X]:Tg,[Z]:[Lg,`aws-global`]}],[Q]:Vg,[Y]:Q},Wg={[X]:wg,[Z]:[zg,!0]},Gg={[X]:wg,[Z]:[Bg,!0]},Kg={[X]:Mg,[Z]:[{[xg]:`PartitionResult`},`supportsFIPS`]},qg={[xg]:`PartitionResult`},Jg={[X]:wg,[Z]:[!0,{[X]:Mg,[Z]:[qg,`supportsDualStack`]}]},Yg=[{[X]:`isSet`,[Z]:[Fg]}],Xg=[Wg],Zg=[Gg],Qg={version:`1.0`,parameters:{Region:Ng,UseDualStack:Pg,UseFIPS:Pg,Endpoint:Ng,UseGlobalEndpoint:Pg},rules:[{conditions:[{[X]:wg,[Z]:[{[xg]:`UseGlobalEndpoint`},Cg]},{[X]:`not`,[Z]:Yg},Ig,Rg,{[X]:wg,[Z]:[zg,Sg]},{[X]:wg,[Z]:[Bg,Sg]}],rules:[{conditions:[{[X]:Tg,[Z]:[Lg,`ap-northeast-1`]}],endpoint:Vg,[Y]:Q},{conditions:[{[X]:Tg,[Z]:[Lg,`ap-south-1`]}],endpoint:Vg,[Y]:Q},{conditions:[{[X]:Tg,[Z]:[Lg,`ap-southeast-1`]}],endpoint:Vg,[Y]:Q},{conditions:[{[X]:Tg,[Z]:[Lg,`ap-southeast-2`]}],endpoint:Vg,[Y]:Q},Ug,{conditions:[{[X]:Tg,[Z]:[Lg,`ca-central-1`]}],endpoint:Vg,[Y]:Q},{conditions:[{[X]:Tg,[Z]:[Lg,`eu-central-1`]}],endpoint:Vg,[Y]:Q},{conditions:[{[X]:Tg,[Z]:[Lg,`eu-north-1`]}],endpoint:Vg,[Y]:Q},{conditions:[{[X]:Tg,[Z]:[Lg,`eu-west-1`]}],endpoint:Vg,[Y]:Q},{conditions:[{[X]:Tg,[Z]:[Lg,`eu-west-2`]}],endpoint:Vg,[Y]:Q},{conditions:[{[X]:Tg,[Z]:[Lg,`eu-west-3`]}],endpoint:Vg,[Y]:Q},{conditions:[{[X]:Tg,[Z]:[Lg,`sa-east-1`]}],endpoint:Vg,[Y]:Q},{conditions:[{[X]:Tg,[Z]:[Lg,Og]}],endpoint:Vg,[Y]:Q},{conditions:[{[X]:Tg,[Z]:[Lg,`us-east-2`]}],endpoint:Vg,[Y]:Q},{conditions:[{[X]:Tg,[Z]:[Lg,`us-west-1`]}],endpoint:Vg,[Y]:Q},{conditions:[{[X]:Tg,[Z]:[Lg,`us-west-2`]}],endpoint:Vg,[Y]:Q},{endpoint:{url:kg,properties:{authSchemes:[{name:Eg,signingName:Dg,signingRegion:`{Region}`}]},headers:Hg},[Y]:Q}],[Y]:Ag},{conditions:Yg,rules:[{conditions:Xg,error:`Invalid Configuration: FIPS and custom endpoint are not supported`,[Y]:jg},{conditions:Zg,error:`Invalid Configuration: Dualstack and custom endpoint are not supported`,[Y]:jg},{endpoint:{url:Fg,properties:Hg,headers:Hg},[Y]:Q}],[Y]:Ag},{conditions:[Ig],rules:[{conditions:[Rg],rules:[{conditions:[Wg,Gg],rules:[{conditions:[{[X]:wg,[Z]:[Cg,Kg]},Jg],rules:[{endpoint:{url:`https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:Hg,headers:Hg},[Y]:Q}],[Y]:Ag},{error:`FIPS and DualStack are enabled, but this partition does not support one or both`,[Y]:jg}],[Y]:Ag},{conditions:Xg,rules:[{conditions:[{[X]:wg,[Z]:[Kg,Cg]}],rules:[{conditions:[{[X]:Tg,[Z]:[{[X]:Mg,[Z]:[qg,`name`]},`aws-us-gov`]}],endpoint:{url:`https://sts.{Region}.amazonaws.com`,properties:Hg,headers:Hg},[Y]:Q},{endpoint:{url:`https://sts-fips.{Region}.{PartitionResult#dnsSuffix}`,properties:Hg,headers:Hg},[Y]:Q}],[Y]:Ag},{error:`FIPS is enabled but this partition does not support FIPS`,[Y]:jg}],[Y]:Ag},{conditions:Zg,rules:[{conditions:[Jg],rules:[{endpoint:{url:`https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:Hg,headers:Hg},[Y]:Q}],[Y]:Ag},{error:`DualStack is enabled but this partition does not support DualStack`,[Y]:jg}],[Y]:Ag},Ug,{endpoint:{url:kg,properties:Hg,headers:Hg},[Y]:Q}],[Y]:Ag}],[Y]:Ag},{error:`Invalid Configuration: Missing Region`,[Y]:jg}]},$g=Qg})),t_,n_,r_,i_,a_=s((()=>{t_=Na(),n_=Aa(),e_(),r_=new n_.EndpointCache({size:50,params:[`Endpoint`,`Region`,`UseDualStack`,`UseFIPS`,`UseGlobalEndpoint`]}),i_=(e,t={})=>r_.get(e,()=>(0,n_.resolveEndpoint)($g,{endpointParams:e,logger:t.logger})),n_.customEndpointFunctions.aws=t_.awsEndpointFunctions})),o_,s_,c_,l_,u_,d_=s((()=>{Sl(),bl(),ka(),o_=K(),s_=Ma(),c_=R(),l_=L(),gg(),a_(),u_=e=>({apiVersion:`2011-06-15`,base64Decoder:e?.base64Decoder??c_.fromBase64,base64Encoder:e?.base64Encoder??c_.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??i_,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??pg,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`),signer:new io},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new va}],logger:e?.logger??new o_.NoOpLogger,protocol:e?.protocol??el,protocolSettings:e?.protocolSettings??{defaultNamespace:`com.amazonaws.sts`,xmlNamespace:`https://sts.amazonaws.com/doc/2011-06-15/`,version:`2011-06-15`,serviceTarget:`AWSSecurityTokenServiceV20110615`},serviceId:e?.serviceId??`STS`,urlParser:e?.urlParser??s_.parseUrl,utf8Decoder:e?.utf8Decoder??l_.fromUtf8,utf8Encoder:e?.utf8Encoder??l_.toUtf8})})),f_,p_,m_,h_,g_,__,v_,y_,b_,x_,S_,C_=s((()=>{Sl(),f_=su(),p_=Tl(),ka(),m_=cu(),h_=zl(),g_=Ml(),__=Ue(),v_=K(),y_=lu(),b_=uu(),x_=Ll(),d_(),S_=e=>{(0,v_.emitWarningIfUnsupportedVersion)(process.version);let t=(0,b_.resolveDefaultsModeConfig)(e),n=()=>t().then(v_.loadConfigsForDefaultMode),r=u_(e);Fa(process.version);let i={profile:e?.profile,logger:r.logger};return{...r,...e,runtime:`node`,defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,g_.loadConfig)(_o,i),bodyLengthChecker:e?.bodyLengthChecker??y_.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,f_.createDefaultUserAgentProvider)({serviceId:r.serviceId,clientVersion:ou}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:t=>t.getIdentityProvider(`aws.auth#sigv4`)||(async t=>await e.credentialDefaultProvider(t?.__config||{})()),signer:new io},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new va}],maxAttempts:e?.maxAttempts??(0,g_.loadConfig)(h_.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,g_.loadConfig)(p_.NODE_REGION_CONFIG_OPTIONS,{...p_.NODE_REGION_CONFIG_FILE_OPTIONS,...i}),requestHandler:__.NodeHttpHandler.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,g_.loadConfig)({...h_.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await n()).retryMode||x_.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??m_.Hash.bind(null,`sha256`),streamCollector:e?.streamCollector??__.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,g_.loadConfig)(p_.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,i),useFipsEndpoint:e?.useFipsEndpoint??(0,g_.loadConfig)(p_.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,i),userAgentAppId:e?.userAgentAppId??(0,g_.loadConfig)(f_.NODE_APP_ID_CONFIG_OPTIONS,i)}}})),w_,T_,E_=s((()=>{w_=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);n===-1?t.push(e):t.splice(n,1,e)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider(){return n},setCredentials(e){r=e},credentials(){return r}}},T_=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})})),D_,O_,k_,A_,j_=s((()=>{D_=cd(),O_=h(),k_=K(),E_(),A_=(e,t)=>{let n=Object.assign((0,D_.getAwsRegionExtensionConfiguration)(e),(0,k_.getDefaultExtensionConfiguration)(e),(0,O_.getHttpHandlerExtensionConfiguration)(e),w_(e));return t.forEach(e=>e.configure(n)),Object.assign(e,(0,D_.resolveAwsRegionExtensionConfiguration)(n),(0,k_.resolveDefaultRuntimeConfig)(n),(0,O_.resolveHttpHandlerRuntimeConfig)(n),T_(n))}})),M_,N_,P_,F_,I_,L_,R_,z_,B_,V_,H_=s((()=>{M_=g(),N_=_(),P_=D(),F_=Cl(),I_=Tl(),ka(),V(),L_=El(),R_=Fl(),z_=zl(),B_=K(),gg(),yg(),C_(),j_(),V_=class extends B_.Client{config;constructor(...[e]){let t=S_(e||{});super(t),this.initConfig=t,this.config=A_(hg((0,R_.resolveEndpointConfig)((0,M_.resolveHostHeaderConfig)((0,I_.resolveRegionConfig)((0,z_.resolveRetryConfig)((0,F_.resolveUserAgentConfig)(_g(t))))))),e?.extensions||[]),this.middlewareStack.use(mt(this.config)),this.middlewareStack.use((0,F_.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,z_.getRetryPlugin)(this.config)),this.middlewareStack.use((0,L_.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,M_.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,N_.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,P_.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(oe(this.config,{httpAuthSchemeParametersProvider:fg,identityProviderConfigProvider:async e=>new la({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use(_e(this.config))}destroy(){super.destroy()}}})),U_,W_,G_=s((()=>{U_=K(),W_=class e extends U_.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}})),K_,q_,J_,Y_,X_,Z_,Q_,$_=s((()=>{G_(),K_=class e extends W_{name=`ExpiredTokenException`;$fault=`client`;constructor(t){super({name:`ExpiredTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},q_=class e extends W_{name=`MalformedPolicyDocumentException`;$fault=`client`;constructor(t){super({name:`MalformedPolicyDocumentException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},J_=class e extends W_{name=`PackedPolicyTooLargeException`;$fault=`client`;constructor(t){super({name:`PackedPolicyTooLargeException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},Y_=class e extends W_{name=`RegionDisabledException`;$fault=`client`;constructor(t){super({name:`RegionDisabledException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},X_=class e extends W_{name=`IDPRejectedClaimException`;$fault=`client`;constructor(t){super({name:`IDPRejectedClaimException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},Z_=class e extends W_{name=`InvalidIdentityTokenException`;$fault=`client`;constructor(t){super({name:`InvalidIdentityTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},Q_=class e extends W_{name=`IDPCommunicationErrorException`;$fault=`client`;constructor(t){super({name:`IDPCommunicationErrorException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}}})),ev,tv,nv,rv,iv,av,ov,sv,cv,lv,uv,dv,fv,pv,mv,hv,gv,_v,vv,yv,bv,xv,Sv,Cv,wv,Tv,Ev,Dv,Ov,kv,Av,jv,Mv,Nv,Pv,Fv,Iv,Lv,Rv,zv,Bv,Vv,Hv,Uv,Wv,Gv,Kv,qv,Jv,Yv,Xv,Zv,Qv,$v,ey,ty,ny,ry,$,iy,ay,oy,sy,cy,ly,uy,dy,fy,py,my,hy,gy,_y,vy,yy,by,xy,Sy,Cy,wy,Ty,Ey,Dy,Oy=s((()=>{V(),$_(),G_(),ev=`Arn`,tv=`AccessKeyId`,nv=`AssumeRole`,rv=`AssumedRoleId`,iv=`AssumeRoleRequest`,av=`AssumeRoleResponse`,ov=`AssumedRoleUser`,sv=`AssumeRoleWithWebIdentity`,cv=`AssumeRoleWithWebIdentityRequest`,lv=`AssumeRoleWithWebIdentityResponse`,uv=`Audience`,dv=`Credentials`,fv=`ContextAssertion`,pv=`DurationSeconds`,mv=`Expiration`,hv=`ExternalId`,gv=`ExpiredTokenException`,_v=`IDPCommunicationErrorException`,vv=`IDPRejectedClaimException`,yv=`InvalidIdentityTokenException`,bv=`Key`,xv=`MalformedPolicyDocumentException`,Sv=`Policy`,Cv=`PolicyArns`,wv=`ProviderArn`,Tv=`ProvidedContexts`,Ev=`ProvidedContextsListType`,Dv=`ProvidedContext`,Ov=`PolicyDescriptorType`,kv=`ProviderId`,Av=`PackedPolicySize`,jv=`PackedPolicyTooLargeException`,Mv=`Provider`,Nv=`RoleArn`,Pv=`RegionDisabledException`,Fv=`RoleSessionName`,Iv=`SecretAccessKey`,Lv=`SubjectFromWebIdentityToken`,Rv=`SourceIdentity`,zv=`SerialNumber`,Bv=`SessionToken`,Vv=`Tags`,Hv=`TokenCode`,Uv=`TransitiveTagKeys`,Wv=`Tag`,Gv=`Value`,Kv=`WebIdentityToken`,qv=`arn`,Jv=`accessKeySecretType`,Yv=`awsQueryError`,Xv=`client`,Zv=`clientTokenType`,Qv=`error`,$v=`httpError`,ey=`message`,ty=`policyDescriptorListType`,ny=`smithy.ts.sdk.synthetic.com.amazonaws.sts`,ry=`tagListType`,$=`com.amazonaws.sts`,iy=[0,$,Jv,8,0],ay=[0,$,Zv,8,0],oy=[3,$,ov,0,[rv,ev],[0,0]],sy=[3,$,iv,0,[Nv,Fv,Cv,Sv,pv,Vv,Uv,hv,zv,Hv,Rv,Tv],[0,0,()=>Cy,0,1,()=>Ty,64,0,0,0,0,()=>wy]],cy=[3,$,av,0,[dv,ov,Av,Rv],[[()=>dy,0],()=>oy,1,0]],ly=[3,$,cv,0,[Nv,Fv,Kv,kv,Cv,Sv,pv],[0,0,[()=>ay,0],0,()=>Cy,0,1]],uy=[3,$,lv,0,[dv,Lv,ov,Av,Mv,uv,Rv],[[()=>dy,0],0,()=>oy,1,0,0,0]],dy=[3,$,dv,0,[tv,Iv,Bv,mv],[0,[()=>iy,0],0,4]],fy=[-3,$,gv,{[Yv]:[`ExpiredTokenException`,400],[Qv]:Xv,[$v]:400},[ey],[0]],B.for($).registerError(fy,K_),py=[-3,$,_v,{[Yv]:[`IDPCommunicationError`,400],[Qv]:Xv,[$v]:400},[ey],[0]],B.for($).registerError(py,Q_),my=[-3,$,vv,{[Yv]:[`IDPRejectedClaim`,403],[Qv]:Xv,[$v]:403},[ey],[0]],B.for($).registerError(my,X_),hy=[-3,$,yv,{[Yv]:[`InvalidIdentityToken`,400],[Qv]:Xv,[$v]:400},[ey],[0]],B.for($).registerError(hy,Z_),gy=[-3,$,xv,{[Yv]:[`MalformedPolicyDocument`,400],[Qv]:Xv,[$v]:400},[ey],[0]],B.for($).registerError(gy,q_),_y=[-3,$,jv,{[Yv]:[`PackedPolicyTooLarge`,400],[Qv]:Xv,[$v]:400},[ey],[0]],B.for($).registerError(_y,J_),vy=[3,$,Ov,0,[qv],[0]],yy=[3,$,Dv,0,[wv,fv],[0,0]],by=[-3,$,Pv,{[Yv]:[`RegionDisabledException`,403],[Qv]:Xv,[$v]:403},[ey],[0]],B.for($).registerError(by,Y_),xy=[3,$,Wv,0,[bv,Gv],[0,0]],Sy=[-3,ny,`STSServiceException`,0,[],[]],B.for(ny).registerError(Sy,W_),Cy=[1,$,ty,0,()=>vy],wy=[1,$,Ev,0,()=>yy],Ty=[1,$,ry,0,()=>xy],Ey=[9,$,nv,0,()=>sy,()=>cy],Dy=[9,$,sv,0,()=>ly,()=>uy]})),ky,Ay,jy,My=s((()=>{ky=Fl(),Ay=K(),yg(),Oy(),jy=class extends Ay.Command.classBuilder().ep(vg).m(function(e,t,n,r){return[(0,ky.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRole`,{}).n(`STSClient`,`AssumeRoleCommand`).sc(Ey).build(){}})),Ny,Py,Fy,Iy=s((()=>{Ny=Fl(),Py=K(),yg(),Oy(),Fy=class extends Py.Command.classBuilder().ep(vg).m(function(e,t,n,r){return[(0,Ny.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRoleWithWebIdentity`,{}).n(`STSClient`,`AssumeRoleWithWebIdentityCommand`).sc(Dy).build(){}})),Ly,Ry,zy,By=s((()=>{Ly=K(),My(),Iy(),H_(),Ry={AssumeRoleCommand:jy,AssumeRoleWithWebIdentityCommand:Fy},zy=class extends V_{},(0,Ly.createAggregatedClient)(Ry,zy)})),Vy=s((()=>{My(),Iy()})),Hy=s((()=>{})),Uy,Wy,Gy,Ky,qy,Jy,Yy=s((()=>{Wa(),Uy=cd(),My(),Iy(),Wy=e=>{if(typeof e?.Arn==`string`){let t=e.Arn.split(`:`);if(t.length>4&&t[4]!==``)return t[4]}},Gy=async(e,t,n,r={})=>{let i=typeof e==`function`?await e():e,a=typeof t==`function`?await t():t,o=``,s=i??a??(o=await(0,Uy.stsRegionDefaultResolver)(r)());return n?.debug?.(`@aws-sdk/client-sts::resolveRegion`,`accepting first of:`,`${i} (credential provider clientConfig)`,`${a} (contextual client)`,`${o} (STS default: AWS_REGION, profile region, or us-east-1)`),s},Ky=(e,t)=>{let n,r;return async(i,a)=>{if(r=i,!n){let{logger:i=e?.parentClientConfig?.logger,profile:a=e?.parentClientConfig?.profile,region:o,requestHandler:s=e?.parentClientConfig?.requestHandler,credentialProviderLogger:c,userAgentAppId:l=e?.parentClientConfig?.userAgentAppId}=e,u=await Gy(o,e?.parentClientConfig?.region,c,{logger:i,profile:a}),d=!Jy(s);n=new t({...e,userAgentAppId:l,profile:a,credentialDefaultProvider:()=>async()=>r,region:u,requestHandler:d?s:void 0,logger:i})}let{Credentials:o,AssumedRoleUser:s}=await n.send(new jy(a));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw Error(`Invalid response from STS.assumeRole call with role ${a.RoleArn}`);let c=Wy(s),l={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...c&&{accountId:c}};return La(l,`CREDENTIALS_STS_ASSUME_ROLE`,`i`),l}},qy=(e,t)=>{let n;return async r=>{if(!n){let{logger:r=e?.parentClientConfig?.logger,profile:i=e?.parentClientConfig?.profile,region:a,requestHandler:o=e?.parentClientConfig?.requestHandler,credentialProviderLogger:s,userAgentAppId:c=e?.parentClientConfig?.userAgentAppId}=e,l=await Gy(a,e?.parentClientConfig?.region,s,{logger:r,profile:i}),u=!Jy(o);n=new t({...e,userAgentAppId:c,profile:i,region:l,requestHandler:u?o:void 0,logger:r})}let{Credentials:i,AssumedRoleUser:a}=await n.send(new Fy(r));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${r.RoleArn}`);let o=Wy(a),s={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...o&&{accountId:o}};return o&&La(s,`RESOLVED_ACCOUNT_ID`,`T`),La(s,`CREDENTIALS_STS_ASSUME_ROLE_WEB_ID`,`k`),s}},Jy=e=>e?.metadata?.handlerProtocol===`h2`})),Xy,Zy,Qy,$y,eb=s((()=>{Yy(),H_(),Xy=(e,t)=>t?class extends e{constructor(e){super(e);for(let e of t)this.middlewareStack.use(e)}}:e,Zy=(e={},t)=>Ky(e,Xy(V_,t)),Qy=(e={},t)=>qy(e,Xy(V_,t)),$y=e=>t=>e({roleAssumer:Zy(t),roleAssumerWithWebIdentity:Qy(t),...t})})),tb=l({AssumeRole$:()=>Ey,AssumeRoleCommand:()=>jy,AssumeRoleRequest$:()=>sy,AssumeRoleResponse$:()=>cy,AssumeRoleWithWebIdentity$:()=>Dy,AssumeRoleWithWebIdentityCommand:()=>Fy,AssumeRoleWithWebIdentityRequest$:()=>ly,AssumeRoleWithWebIdentityResponse$:()=>uy,AssumedRoleUser$:()=>oy,Credentials$:()=>dy,ExpiredTokenException:()=>K_,ExpiredTokenException$:()=>fy,IDPCommunicationErrorException:()=>Q_,IDPCommunicationErrorException$:()=>py,IDPRejectedClaimException:()=>X_,IDPRejectedClaimException$:()=>my,InvalidIdentityTokenException:()=>Z_,InvalidIdentityTokenException$:()=>hy,MalformedPolicyDocumentException:()=>q_,MalformedPolicyDocumentException$:()=>gy,PackedPolicyTooLargeException:()=>J_,PackedPolicyTooLargeException$:()=>_y,PolicyDescriptorType$:()=>vy,ProvidedContext$:()=>yy,RegionDisabledException:()=>Y_,RegionDisabledException$:()=>by,STS:()=>zy,STSClient:()=>V_,STSServiceException:()=>W_,STSServiceException$:()=>Sy,Tag$:()=>xy,__Client:()=>B_.Client,decorateDefaultCredentialProvider:()=>$y,getDefaultRoleAssumer:()=>Zy,getDefaultRoleAssumerWithWebIdentity:()=>Qy}),nb=s((()=>{H_(),By(),Vy(),Oy(),$_(),Hy(),eb(),G_()})),rb=c((e=>{var t=jl(),n=yo(),r=p(`child_process`),i=p(`util`),a=(Wa(),f(Ua));let o=(e,t,n)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let n=new Date;if(new Date(t.Expiration)<n)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let r=t.AccountId;!r&&n?.[e]?.aws_account_id&&(r=n[e].aws_account_id);let i={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...r&&{accountId:r}};return a.setCredentialFeature(i,`CREDENTIALS_PROCESS`,`w`),i},s=async(e,a,s)=>{let c=a[e];if(a[e]){let l=c.credential_process;if(l!==void 0){let c=i.promisify(t.externalDataInterceptor?.getTokenRecord?.().exec??r.exec);try{let{stdout:t}=await c(l),n;try{n=JSON.parse(t.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return o(e,n,a)}catch(e){throw new n.CredentialsProviderError(e.message,{logger:s})}}else throw new n.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:s})}else throw new n.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:s})};e.fromProcess=(e={})=>async({callerClientConfig:n}={})=>{e.logger?.debug(`@aws-sdk/credential-provider-process - fromProcess`);let r=await t.parseKnownFiles(e);return s(t.getProfileName({profile:e.profile??n?.profile}),r,e.logger)}})),ib=c((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})();Object.defineProperty(e,`__esModule`,{value:!0}),e.fromWebToken=void 0,e.fromWebToken=e=>async t=>{e.logger?.debug(`@aws-sdk/credential-provider-web-identity - fromWebToken`);let{roleArn:n,roleSessionName:i,webIdentityToken:a,providerId:o,policyArns:s,policy:c,durationSeconds:l}=e,{roleAssumerWithWebIdentity:u}=e;if(!u){let{getDefaultRoleAssumerWithWebIdentity:n}=await Promise.resolve().then(()=>r((nb(),f(tb))));u=n({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return u({RoleArn:n,RoleSessionName:i??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:a,ProviderId:o,PolicyArns:s,Policy:c,DurationSeconds:l})}})),ab=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.fromTokenFile=void 0;let t=(Wa(),f(Ua)),n=yo(),r=jl(),i=p(`fs`),a=ib(),o=`AWS_WEB_IDENTITY_TOKEN_FILE`;e.fromTokenFile=(e={})=>async s=>{e.logger?.debug(`@aws-sdk/credential-provider-web-identity - fromTokenFile`);let c=e?.webIdentityTokenFile??process.env[o],l=e?.roleArn??process.env.AWS_ROLE_ARN,u=e?.roleSessionName??process.env.AWS_ROLE_SESSION_NAME;if(!c||!l)throw new n.CredentialsProviderError(`Web identity configuration not specified`,{logger:e.logger});let d=await(0,a.fromWebToken)({...e,webIdentityToken:r.externalDataInterceptor?.getTokenRecord?.()[c]??(0,i.readFileSync)(c,{encoding:`ascii`}),roleArn:l,roleSessionName:u})(s);return c===process.env[o]&&(0,t.setCredentialFeature)(d,`CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN`,`h`),d}})),ob=c((e=>{var t=ab(),n=ib();Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),Object.keys(n).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})})),sb=c((e=>{var t=jl(),n=yo(),r=(Wa(),f(Ua)),i=cg();let a=(e,t,r)=>{let i={EcsContainer:async e=>{let{fromHttp:t}=await Promise.resolve().then(()=>d(Yl())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>d(Wl()));return r?.debug(`@aws-sdk/credential-provider-ini - credential_source is EcsContainer`),async()=>n.chain(t(e??{}),i(e))().then(o)},Ec2InstanceMetadata:async e=>{r?.debug(`@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata`);let{fromInstanceMetadata:t}=await Promise.resolve().then(()=>d(Wl()));return async()=>t(e)().then(o)},Environment:async e=>{r?.debug(`@aws-sdk/credential-provider-ini - credential_source is Environment`);let{fromEnv:t}=await Promise.resolve().then(()=>d(Ul()));return async()=>t(e)().then(o)}};if(e in i)return i[e];throw new n.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},o=e=>r.setCredentialFeature(e,`CREDENTIALS_PROFILE_NAMED_PROVIDER`,`p`),s=(e,{profile:t=`default`,logger:n}={})=>!!e&&typeof e==`object`&&typeof e.role_arn==`string`&&[`undefined`,`string`].indexOf(typeof e.role_session_name)>-1&&[`undefined`,`string`].indexOf(typeof e.external_id)>-1&&[`undefined`,`string`].indexOf(typeof e.mfa_serial)>-1&&(c(e,{profile:t,logger:n})||l(e,{profile:t,logger:n})),c=(e,{profile:t,logger:n})=>{let r=typeof e.source_profile==`string`&&e.credential_source===void 0;return r&&n?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),r},l=(e,{profile:t,logger:n})=>{let r=typeof e.credential_source==`string`&&e.source_profile===void 0;return r&&n?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),r},u=async(e,i,o,s,c={},l)=>{o.logger?.debug(`@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)`);let u=i[e],{source_profile:d,region:f}=u;if(!o.roleAssumer){let{getDefaultRoleAssumer:e}=await Promise.resolve().then(()=>(nb(),tb));o.roleAssumer=e({...o.clientConfig,credentialProviderLogger:o.logger,parentClientConfig:{...s,...o?.parentClientConfig,region:f??o?.parentClientConfig?.region??s?.region}},o.clientPlugins)}if(d&&d in c)throw new n.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${t.getProfileName(o)}. Profiles visited: `+Object.keys(c).join(`, `),{logger:o.logger});o.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${d?`source_profile=[${d}]`:`profile=[${e}]`}`);let m=d?l(d,i,o,s,{...c,[d]:!0},p(i[d]??{})):(await a(u.credential_source,e,o.logger)(o))();if(p(u))return m.then(e=>r.setCredentialFeature(e,`CREDENTIALS_PROFILE_SOURCE_PROFILE`,`o`));{let t={RoleArn:u.role_arn,RoleSessionName:u.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:u.external_id,DurationSeconds:parseInt(u.duration_seconds||`3600`,10)},{mfa_serial:i}=u;if(i){if(!o.mfaCodeProvider)throw new n.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:o.logger,tryNextLink:!1});t.SerialNumber=i,t.TokenCode=await o.mfaCodeProvider(i)}let a=await m;return o.roleAssumer(a,t).then(e=>r.setCredentialFeature(e,`CREDENTIALS_PROFILE_SOURCE_PROFILE`,`o`))}},p=e=>!e.role_arn&&!!e.credential_source,m=e=>!!(e&&e.login_session),h=async(e,t,n)=>{let a=await i.fromLoginCredentials({...t,profile:e})({callerClientConfig:n});return r.setCredentialFeature(a,`CREDENTIALS_PROFILE_LOGIN`,`AC`)},g=e=>!!e&&typeof e==`object`&&typeof e.credential_process==`string`,_=async(e,t)=>Promise.resolve().then(()=>d(rb())).then(({fromProcess:n})=>n({...e,profile:t})().then(e=>r.setCredentialFeature(e,`CREDENTIALS_PROFILE_PROCESS`,`v`))),v=async(e,t,n={},i)=>{let{fromSSO:a}=await Promise.resolve().then(()=>d(bp()));return a({profile:e,logger:n.logger,parentClientConfig:n.parentClientConfig,clientConfig:n.clientConfig})({callerClientConfig:i}).then(e=>t.sso_session?r.setCredentialFeature(e,`CREDENTIALS_PROFILE_SSO`,`r`):r.setCredentialFeature(e,`CREDENTIALS_PROFILE_SSO_LEGACY`,`t`))},y=e=>e&&(typeof e.sso_start_url==`string`||typeof e.sso_account_id==`string`||typeof e.sso_session==`string`||typeof e.sso_region==`string`||typeof e.sso_role_name==`string`),b=e=>!!e&&typeof e==`object`&&typeof e.aws_access_key_id==`string`&&typeof e.aws_secret_access_key==`string`&&[`undefined`,`string`].indexOf(typeof e.aws_session_token)>-1&&[`undefined`,`string`].indexOf(typeof e.aws_account_id)>-1,x=async(e,t)=>{t?.logger?.debug(`@aws-sdk/credential-provider-ini - resolveStaticCredentials`);let n={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return r.setCredentialFeature(n,`CREDENTIALS_PROFILE`,`n`)},S=e=>!!e&&typeof e==`object`&&typeof e.web_identity_token_file==`string`&&typeof e.role_arn==`string`&&[`undefined`,`string`].indexOf(typeof e.role_session_name)>-1,C=async(e,t,n)=>Promise.resolve().then(()=>d(ob())).then(({fromTokenFile:i})=>i({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})({callerClientConfig:n}).then(e=>r.setCredentialFeature(e,`CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN`,`q`))),w=async(e,t,r,i,a={},o=!1)=>{let c=t[e];if(Object.keys(a).length>0&&b(c))return x(c,r);if(o||s(c,{profile:e,logger:r.logger}))return u(e,t,r,i,a,w);if(b(c))return x(c,r);if(S(c))return C(c,r,i);if(g(c))return _(r,e);if(y(c))return await v(e,c,r,i);if(m(c))return h(e,r,i);throw new n.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})};e.fromIni=(e={})=>async({callerClientConfig:n}={})=>{e.logger?.debug(`@aws-sdk/credential-provider-ini - fromIni`);let r=await t.parseKnownFiles(e);return w(t.getProfileName({profile:e.profile??n?.profile}),r,e,n)}})),cb=c((e=>{var t=Ul(),n=yo(),r=jl();let i=`AWS_EC2_METADATA_DISABLED`,a=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:a,fromInstanceMetadata:o}=await Promise.resolve().then(()=>d(Wl()));if(process.env[r]||process.env[t]){e.logger?.debug(`@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata`);let{fromHttp:t}=await Promise.resolve().then(()=>d(Yl()));return n.chain(t(e),a(e))}return process.env[i]&&process.env[i]!==`false`?async()=>{throw new n.CredentialsProviderError(`EC2 Instance Metadata Service access disabled`,{logger:e.logger})}:(e.logger?.debug(`@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata`),o(e))};function o(e,t){let n=s(e),r,i,a,o=async e=>{if(e?.forceRefresh)return await n(e);if(a?.expiration&&a?.expiration?.getTime()<Date.now()&&(a=void 0),r)await r;else if(!a||t?.(a))if(a)i||=n(e).then(e=>{a=e,i=void 0});else return r=n(e).then(e=>{a=e,r=void 0}),o(e);return a};return o}let s=e=>async t=>{let n;for(let r of e)try{return await r(t)}catch(e){if(n=e,e?.tryNextLink)continue;throw e}throw n},c=!1,l=(e={})=>o([async()=>{if(e.profile??process.env[r.ENV_PROFILE])throw process.env[t.ENV_KEY]&&process.env[t.ENV_SECRET]&&(c||=((e.logger?.warn&&e.logger?.constructor?.name!==`NoOpLogger`?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),!0)),new n.CredentialsProviderError(`AWS_PROFILE is set, skipping fromEnv provider.`,{logger:e.logger,tryNextLink:!0});return e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv`),t.fromEnv(e)()},async t=>{e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::fromSSO`);let{ssoStartUrl:r,ssoAccountId:i,ssoRegion:a,ssoRoleName:o,ssoSession:s}=e;if(!r&&!i&&!a&&!o&&!s)throw new n.CredentialsProviderError(`Skipping SSO provider in default chain (inputs do not include SSO fields).`,{logger:e.logger});let{fromSSO:c}=await Promise.resolve().then(()=>d(bp()));return c(e)(t)},async t=>{e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::fromIni`);let{fromIni:n}=await Promise.resolve().then(()=>d(sb()));return n(e)(t)},async t=>{e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::fromProcess`);let{fromProcess:n}=await Promise.resolve().then(()=>d(rb()));return n(e)(t)},async t=>{e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile`);let{fromTokenFile:n}=await Promise.resolve().then(()=>d(ob()));return n(e)(t)},async()=>(e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::remoteProvider`),(await a(e))()),async()=>{throw new n.CredentialsProviderError(`Could not load credentials from any providers`,{tryNextLink:!1,logger:e.logger})}],f),u=e=>e?.expiration!==void 0,f=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;e.credentialsTreatedAsExpired=f,e.credentialsWillNeedRefresh=u,e.defaultProvider=l})),lb=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ruleSet=void 0;let t=`required`,n=`type`,r=`argv`,i=`booleanEquals`,a=`stringEquals`,o=`sigv4`,s=`us-east-1`,c=`endpoint`,l=`https://sts.{Region}.{PartitionResult#dnsSuffix}`,u=`tree`,d=`error`,f=`getAttr`,p={[t]:!1,[n]:`string`},m={[t]:!0,default:!1,[n]:`boolean`},h={ref:`Endpoint`},g={fn:`isSet`,[r]:[{ref:`Region`}]},_={ref:`Region`},v={fn:`aws.partition`,[r]:[_],assign:`PartitionResult`},y={ref:`UseFIPS`},b={ref:`UseDualStack`},x={url:`https://sts.amazonaws.com`,properties:{authSchemes:[{name:o,signingName:`sts`,signingRegion:s}]},headers:{}},S={},C={conditions:[{fn:a,[r]:[_,`aws-global`]}],[c]:x,[n]:c},w={fn:i,[r]:[y,!0]},T={fn:i,[r]:[b,!0]},E={fn:f,[r]:[{ref:`PartitionResult`},`supportsFIPS`]},D={ref:`PartitionResult`},O={fn:i,[r]:[!0,{fn:f,[r]:[D,`supportsDualStack`]}]},k=[{fn:`isSet`,[r]:[h]}],A=[w],j=[T];e.ruleSet={version:`1.0`,parameters:{Region:p,UseDualStack:m,UseFIPS:m,Endpoint:p,UseGlobalEndpoint:m},rules:[{conditions:[{fn:i,[r]:[{ref:`UseGlobalEndpoint`},!0]},{fn:`not`,[r]:k},g,v,{fn:i,[r]:[y,!1]},{fn:i,[r]:[b,!1]}],rules:[{conditions:[{fn:a,[r]:[_,`ap-northeast-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`ap-south-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`ap-southeast-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`ap-southeast-2`]}],endpoint:x,[n]:c},C,{conditions:[{fn:a,[r]:[_,`ca-central-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`eu-central-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`eu-north-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`eu-west-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`eu-west-2`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`eu-west-3`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`sa-east-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,s]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`us-east-2`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`us-west-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`us-west-2`]}],endpoint:x,[n]:c},{endpoint:{url:l,properties:{authSchemes:[{name:o,signingName:`sts`,signingRegion:`{Region}`}]},headers:S},[n]:c}],[n]:u},{conditions:k,rules:[{conditions:A,error:`Invalid Configuration: FIPS and custom endpoint are not supported`,[n]:d},{conditions:j,error:`Invalid Configuration: Dualstack and custom endpoint are not supported`,[n]:d},{endpoint:{url:h,properties:S,headers:S},[n]:c}],[n]:u},{conditions:[g],rules:[{conditions:[v],rules:[{conditions:[w,T],rules:[{conditions:[{fn:i,[r]:[!0,E]},O],rules:[{endpoint:{url:`https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:S,headers:S},[n]:c}],[n]:u},{error:`FIPS and DualStack are enabled, but this partition does not support one or both`,[n]:d}],[n]:u},{conditions:A,rules:[{conditions:[{fn:i,[r]:[E,!0]}],rules:[{conditions:[{fn:a,[r]:[{fn:f,[r]:[D,`name`]},`aws-us-gov`]}],endpoint:{url:`https://sts.{Region}.amazonaws.com`,properties:S,headers:S},[n]:c},{endpoint:{url:`https://sts-fips.{Region}.{PartitionResult#dnsSuffix}`,properties:S,headers:S},[n]:c}],[n]:u},{error:`FIPS is enabled but this partition does not support FIPS`,[n]:d}],[n]:u},{conditions:j,rules:[{conditions:[O],rules:[{endpoint:{url:`https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:S,headers:S},[n]:c}],[n]:u},{error:`DualStack is enabled but this partition does not support DualStack`,[n]:d}],[n]:u},C,{endpoint:{url:l,properties:S,headers:S},[n]:c}],[n]:u}],[n]:u},{error:`Invalid Configuration: Missing Region`,[n]:d}]}})),ub=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.defaultEndpointResolver=void 0;let t=Na(),n=Aa(),r=lb(),i=new n.EndpointCache({size:50,params:[`Endpoint`,`Region`,`UseDualStack`,`UseFIPS`,`UseGlobalEndpoint`]});e.defaultEndpointResolver=(e,t={})=>i.get(e,()=>(0,n.resolveEndpoint)(r.ruleSet,{endpointParams:e,logger:t.logger})),n.customEndpointFunctions.aws=t.awsEndpointFunctions})),db=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getRuntimeConfig=void 0;let t=(Sl(),f(xl)),n=(bl(),f(yl)),r=(ka(),f(Oa)),i=K(),a=Ma(),o=R(),s=L(),c=Bl(),l=ub();e.getRuntimeConfig=e=>({apiVersion:`2011-06-15`,base64Decoder:e?.base64Decoder??o.fromBase64,base64Encoder:e?.base64Encoder??o.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??l.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??c.defaultSTSHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`),signer:new t.AwsSdkSigV4Signer},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new r.NoAuthSigner}],logger:e?.logger??new i.NoOpLogger,protocol:e?.protocol??n.AwsQueryProtocol,protocolSettings:e?.protocolSettings??{defaultNamespace:`com.amazonaws.sts`,xmlNamespace:`https://sts.amazonaws.com/doc/2011-06-15/`,version:`2011-06-15`,serviceTarget:`AWSSecurityTokenServiceV20110615`},serviceId:e?.serviceId??`STS`,urlParser:e?.urlParser??a.parseUrl,utf8Decoder:e?.utf8Decoder??s.fromUtf8,utf8Encoder:e?.utf8Encoder??s.toUtf8})})),fb=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getRuntimeConfig=void 0;let t=(Vr(),f(rr)).__importDefault(Hl()),n=(Sl(),f(xl)),r=cb(),i=su(),a=Tl(),o=(ka(),f(Oa)),s=cu(),c=zl(),l=Ml(),u=Ue(),d=K(),p=lu(),m=uu(),h=Ll(),g=db();e.getRuntimeConfig=e=>{(0,d.emitWarningIfUnsupportedVersion)(process.version);let f=(0,m.resolveDefaultsModeConfig)(e),_=()=>f().then(d.loadConfigsForDefaultMode),v=(0,g.getRuntimeConfig)(e);(0,n.emitWarningIfUnsupportedVersion)(process.version);let y={profile:e?.profile,logger:v.logger};return{...v,...e,runtime:`node`,defaultsMode:f,authSchemePreference:e?.authSchemePreference??(0,l.loadConfig)(n.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,y),bodyLengthChecker:e?.bodyLengthChecker??p.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??r.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,i.createDefaultUserAgentProvider)({serviceId:v.serviceId,clientVersion:t.default.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`)||(async e=>await(0,r.defaultProvider)(e?.__config||{})()),signer:new n.AwsSdkSigV4Signer},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new o.NoAuthSigner}],maxAttempts:e?.maxAttempts??(0,l.loadConfig)(c.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,l.loadConfig)(a.NODE_REGION_CONFIG_OPTIONS,{...a.NODE_REGION_CONFIG_FILE_OPTIONS,...y}),requestHandler:u.NodeHttpHandler.create(e?.requestHandler??_),retryMode:e?.retryMode??(0,l.loadConfig)({...c.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await _()).retryMode||h.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??s.Hash.bind(null,`sha256`),streamCollector:e?.streamCollector??u.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,l.loadConfig)(a.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,y),useFipsEndpoint:e?.useFipsEndpoint??(0,l.loadConfig)(a.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,y),userAgentAppId:e?.userAgentAppId??(0,l.loadConfig)(i.NODE_APP_ID_CONFIG_OPTIONS,y)}}})),pb=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.resolveHttpAuthRuntimeConfig=e.getHttpAuthExtensionConfiguration=void 0,e.getHttpAuthExtensionConfiguration=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);n===-1?t.push(e):t.splice(n,1,e)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider(){return n},setCredentials(e){r=e},credentials(){return r}}},e.resolveHttpAuthRuntimeConfig=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})})),mb=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.resolveRuntimeExtensions=void 0;let t=cd(),n=h(),r=K(),i=pb();e.resolveRuntimeExtensions=(e,a)=>{let o=Object.assign((0,t.getAwsRegionExtensionConfiguration)(e),(0,r.getDefaultExtensionConfiguration)(e),(0,n.getHttpHandlerExtensionConfiguration)(e),(0,i.getHttpAuthExtensionConfiguration)(e));return a.forEach(e=>e.configure(o)),Object.assign(e,(0,t.resolveAwsRegionExtensionConfiguration)(o),(0,r.resolveDefaultRuntimeConfig)(o),(0,n.resolveHttpHandlerRuntimeConfig)(o),(0,i.resolveHttpAuthRuntimeConfig)(o))}})),hb=c((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.STSClient=e.__Client=void 0;let t=g(),n=_(),r=D(),i=Cl(),a=Tl(),o=(ka(),f(Oa)),s=(V(),f(Jt)),c=El(),l=Fl(),u=zl(),d=K();Object.defineProperty(e,`__Client`,{enumerable:!0,get:function(){return d.Client}});let p=Bl(),m=Vl(),h=fb(),v=mb();e.STSClient=class extends d.Client{config;constructor(...[e]){let d=(0,h.getRuntimeConfig)(e||{});super(d),this.initConfig=d;let f=(0,m.resolveClientEndpointParameters)(d),g=(0,i.resolveUserAgentConfig)(f),_=(0,u.resolveRetryConfig)(g),y=(0,a.resolveRegionConfig)(_),b=(0,t.resolveHostHeaderConfig)(y),x=(0,l.resolveEndpointConfig)(b),S=(0,p.resolveHttpAuthSchemeConfig)(x);this.config=(0,v.resolveRuntimeExtensions)(S,e?.extensions||[]),this.middlewareStack.use((0,s.getSchemaSerdePlugin)(this.config)),this.middlewareStack.use((0,i.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,u.getRetryPlugin)(this.config)),this.middlewareStack.use((0,c.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,t.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,n.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,r.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,o.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:p.defaultSTSHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async e=>new o.DefaultIdentityProviderConfig({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use((0,o.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}}})),gb=c((e=>{var t=hb(),n=K(),r=Fl(),i=Vl(),a=(V(),f(Jt)),o=(Wa(),f(Ua)),s=cd(),c=class e extends n.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},l=class e extends c{name=`ExpiredTokenException`;$fault=`client`;constructor(t){super({name:`ExpiredTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},u=class e extends c{name=`MalformedPolicyDocumentException`;$fault=`client`;constructor(t){super({name:`MalformedPolicyDocumentException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},d=class e extends c{name=`PackedPolicyTooLargeException`;$fault=`client`;constructor(t){super({name:`PackedPolicyTooLargeException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},p=class e extends c{name=`RegionDisabledException`;$fault=`client`;constructor(t){super({name:`RegionDisabledException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},m=class e extends c{name=`IDPRejectedClaimException`;$fault=`client`;constructor(t){super({name:`IDPRejectedClaimException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},h=class e extends c{name=`InvalidIdentityTokenException`;$fault=`client`;constructor(t){super({name:`InvalidIdentityTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},g=class e extends c{name=`IDPCommunicationErrorException`;$fault=`client`;constructor(t){super({name:`IDPCommunicationErrorException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},_=class e extends c{name=`InvalidAuthorizationMessageException`;$fault=`client`;constructor(t){super({name:`InvalidAuthorizationMessageException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},v=class e extends c{name=`ExpiredTradeInTokenException`;$fault=`client`;constructor(t){super({name:`ExpiredTradeInTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},y=class e extends c{name=`JWTPayloadSizeExceededException`;$fault=`client`;constructor(t){super({name:`JWTPayloadSizeExceededException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},b=class e extends c{name=`OutboundWebIdentityFederationDisabledException`;$fault=`client`;constructor(t){super({name:`OutboundWebIdentityFederationDisabledException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},x=class e extends c{name=`SessionDurationEscalationException`;$fault=`client`;constructor(t){super({name:`SessionDurationEscalationException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}};let S=`AccessKeyId`,C=`AssumedRoleUser`,w=`Account`,T=`Audience`,E=`Credentials`,D=`DurationSeconds`,O=`Expiration`,k=`FederatedUser`,A=`Policy`,j=`PolicyArns`,M=`PackedPolicySize`,ee=`RoleArn`,te=`RoleSessionName`,ne=`SourceIdentity`,re=`SerialNumber`,ie=`Tags`,ae=`TokenCode`,oe=`WebIdentityToken`,N=`awsQueryError`,se=`client`,P=`error`,ce=`httpError`,le=`message`,ue=`smithy.ts.sdk.synthetic.com.amazonaws.sts`,F=`com.amazonaws.sts`;var de=[0,F,`accessKeySecretType`,8,0],fe=[0,F,`clientTokenType`,8,0],I=[0,F,`SAMLAssertionType`,8,0],pe=[0,F,`tradeInTokenType`,8,0],me=[0,F,`webIdentityTokenType`,8,0],he=[3,F,C,0,[`AssumedRoleId`,`Arn`],[0,0]],ge=[3,F,`AssumeRoleRequest`,0,[ee,te,j,A,D,ie,`TransitiveTagKeys`,`ExternalId`,re,ae,ne,`ProvidedContexts`],[0,0,()=>et,0,1,()=>nt,64,0,0,0,0,()=>tt]],_e=[3,F,`AssumeRoleResponse`,0,[E,C,M,ne],[[()=>we,0],()=>he,1,0]],ve=[3,F,`AssumeRoleWithSAMLRequest`,0,[ee,`PrincipalArn`,`SAMLAssertion`,j,A,D],[0,0,[()=>I,0],()=>et,0,1]],ye=[3,F,`AssumeRoleWithSAMLResponse`,0,[E,C,M,`Subject`,`SubjectType`,`Issuer`,T,`NameQualifier`,ne],[[()=>we,0],()=>he,1,0,0,0,0,0,0]],be=[3,F,`AssumeRoleWithWebIdentityRequest`,0,[ee,te,oe,`ProviderId`,j,A,D],[0,0,[()=>fe,0],0,()=>et,0,1]],xe=[3,F,`AssumeRoleWithWebIdentityResponse`,0,[E,`SubjectFromWebIdentityToken`,C,M,`Provider`,T,ne],[[()=>we,0],0,()=>he,1,0,0,0]],Se=[3,F,`AssumeRootRequest`,0,[`TargetPrincipal`,`TaskPolicyArn`,D],[0,()=>Je,1]],Ce=[3,F,`AssumeRootResponse`,0,[E,ne],[[()=>we,0],0]],we=[3,F,E,0,[S,`SecretAccessKey`,`SessionToken`,O],[0,[()=>de,0],0,4]],Te=[3,F,`DecodeAuthorizationMessageRequest`,0,[`EncodedMessage`],[0]],Ee=[3,F,`DecodeAuthorizationMessageResponse`,0,[`DecodedMessage`],[0]],De=[-3,F,`ExpiredTokenException`,{[N]:[`ExpiredTokenException`,400],[P]:se,[ce]:400},[le],[0]];a.TypeRegistry.for(F).registerError(De,l);var Oe=[-3,F,`ExpiredTradeInTokenException`,{[N]:[`ExpiredTradeInTokenException`,400],[P]:se,[ce]:400},[le],[0]];a.TypeRegistry.for(F).registerError(Oe,v);var L=[3,F,k,0,[`FederatedUserId`,`Arn`],[0,0]],ke=[3,F,`GetAccessKeyInfoRequest`,0,[S],[0]],R=[3,F,`GetAccessKeyInfoResponse`,0,[w],[0]],Ae=[3,F,`GetCallerIdentityRequest`,0,[],[]],je=[3,F,`GetCallerIdentityResponse`,0,[`UserId`,w,`Arn`],[0,0,0]],Me=[3,F,`GetDelegatedAccessTokenRequest`,0,[`TradeInToken`],[[()=>pe,0]]],Ne=[3,F,`GetDelegatedAccessTokenResponse`,0,[E,M,`AssumedPrincipal`],[[()=>we,0],1,0]],Pe=[3,F,`GetFederationTokenRequest`,0,[`Name`,A,j,D,ie],[0,0,()=>et,1,()=>nt]],Fe=[3,F,`GetFederationTokenResponse`,0,[E,k,M],[[()=>we,0],()=>L,1]],Ie=[3,F,`GetSessionTokenRequest`,0,[D,re,ae],[1,0,0]],Le=[3,F,`GetSessionTokenResponse`,0,[E],[[()=>we,0]]],Re=[3,F,`GetWebIdentityTokenRequest`,0,[T,D,`SigningAlgorithm`,ie],[64,1,0,()=>nt]],ze=[3,F,`GetWebIdentityTokenResponse`,0,[oe,O],[[()=>me,0],4]],Be=[-3,F,`IDPCommunicationErrorException`,{[N]:[`IDPCommunicationError`,400],[P]:se,[ce]:400},[le],[0]];a.TypeRegistry.for(F).registerError(Be,g);var Ve=[-3,F,`IDPRejectedClaimException`,{[N]:[`IDPRejectedClaim`,403],[P]:se,[ce]:403},[le],[0]];a.TypeRegistry.for(F).registerError(Ve,m);var He=[-3,F,`InvalidAuthorizationMessageException`,{[N]:[`InvalidAuthorizationMessageException`,400],[P]:se,[ce]:400},[le],[0]];a.TypeRegistry.for(F).registerError(He,_);var Ue=[-3,F,`InvalidIdentityTokenException`,{[N]:[`InvalidIdentityToken`,400],[P]:se,[ce]:400},[le],[0]];a.TypeRegistry.for(F).registerError(Ue,h);var We=[-3,F,`JWTPayloadSizeExceededException`,{[N]:[`JWTPayloadSizeExceededException`,400],[P]:se,[ce]:400},[le],[0]];a.TypeRegistry.for(F).registerError(We,y);var Ge=[-3,F,`MalformedPolicyDocumentException`,{[N]:[`MalformedPolicyDocument`,400],[P]:se,[ce]:400},[le],[0]];a.TypeRegistry.for(F).registerError(Ge,u);var Ke=[-3,F,`OutboundWebIdentityFederationDisabledException`,{[N]:[`OutboundWebIdentityFederationDisabledException`,403],[P]:se,[ce]:403},[le],[0]];a.TypeRegistry.for(F).registerError(Ke,b);var qe=[-3,F,`PackedPolicyTooLargeException`,{[N]:[`PackedPolicyTooLarge`,400],[P]:se,[ce]:400},[le],[0]];a.TypeRegistry.for(F).registerError(qe,d);var Je=[3,F,`PolicyDescriptorType`,0,[`arn`],[0]],Ye=[3,F,`ProvidedContext`,0,[`ProviderArn`,`ContextAssertion`],[0,0]],Xe=[-3,F,`RegionDisabledException`,{[N]:[`RegionDisabledException`,403],[P]:se,[ce]:403},[le],[0]];a.TypeRegistry.for(F).registerError(Xe,p);var Ze=[-3,F,`SessionDurationEscalationException`,{[N]:[`SessionDurationEscalationException`,403],[P]:se,[ce]:403},[le],[0]];a.TypeRegistry.for(F).registerError(Ze,x);var Qe=[3,F,`Tag`,0,[`Key`,`Value`],[0,0]],$e=[-3,ue,`STSServiceException`,0,[],[]];a.TypeRegistry.for(ue).registerError($e,c);var et=[1,F,`policyDescriptorListType`,0,()=>Je],tt=[1,F,`ProvidedContextsListType`,0,()=>Ye],nt=[1,F,`tagListType`,0,()=>Qe],rt=[9,F,`AssumeRole`,0,()=>ge,()=>_e],it=[9,F,`AssumeRoleWithSAML`,0,()=>ve,()=>ye],at=[9,F,`AssumeRoleWithWebIdentity`,0,()=>be,()=>xe],ot=[9,F,`AssumeRoot`,0,()=>Se,()=>Ce],st=[9,F,`DecodeAuthorizationMessage`,0,()=>Te,()=>Ee],ct=[9,F,`GetAccessKeyInfo`,0,()=>ke,()=>R],lt=[9,F,`GetCallerIdentity`,0,()=>Ae,()=>je],ut=[9,F,`GetDelegatedAccessToken`,0,()=>Me,()=>Ne],dt=[9,F,`GetFederationToken`,0,()=>Pe,()=>Fe],ft=[9,F,`GetSessionToken`,0,()=>Ie,()=>Le],pt=[9,F,`GetWebIdentityToken`,0,()=>Re,()=>ze],mt=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRole`,{}).n(`STSClient`,`AssumeRoleCommand`).sc(rt).build(){},ht=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRoleWithSAML`,{}).n(`STSClient`,`AssumeRoleWithSAMLCommand`).sc(it).build(){},gt=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRoleWithWebIdentity`,{}).n(`STSClient`,`AssumeRoleWithWebIdentityCommand`).sc(at).build(){},_t=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRoot`,{}).n(`STSClient`,`AssumeRootCommand`).sc(ot).build(){},vt=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`DecodeAuthorizationMessage`,{}).n(`STSClient`,`DecodeAuthorizationMessageCommand`).sc(st).build(){},yt=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetAccessKeyInfo`,{}).n(`STSClient`,`GetAccessKeyInfoCommand`).sc(ct).build(){},bt=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetCallerIdentity`,{}).n(`STSClient`,`GetCallerIdentityCommand`).sc(lt).build(){},xt=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetDelegatedAccessToken`,{}).n(`STSClient`,`GetDelegatedAccessTokenCommand`).sc(ut).build(){},St=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetFederationToken`,{}).n(`STSClient`,`GetFederationTokenCommand`).sc(dt).build(){},Ct=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetSessionToken`,{}).n(`STSClient`,`GetSessionTokenCommand`).sc(ft).build(){},wt=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetWebIdentityToken`,{}).n(`STSClient`,`GetWebIdentityTokenCommand`).sc(pt).build(){};let Tt={AssumeRoleCommand:mt,AssumeRoleWithSAMLCommand:ht,AssumeRoleWithWebIdentityCommand:gt,AssumeRootCommand:_t,DecodeAuthorizationMessageCommand:vt,GetAccessKeyInfoCommand:yt,GetCallerIdentityCommand:bt,GetDelegatedAccessTokenCommand:xt,GetFederationTokenCommand:St,GetSessionTokenCommand:Ct,GetWebIdentityTokenCommand:wt};var Et=class extends t.STSClient{};n.createAggregatedClient(Tt,Et);let Dt=e=>{if(typeof e?.Arn==`string`){let t=e.Arn.split(`:`);if(t.length>4&&t[4]!==``)return t[4]}},Ot=async(e,t,n,r={})=>{let i=typeof e==`function`?await e():e,a=typeof t==`function`?await t():t,o=``,c=i??a??(o=await s.stsRegionDefaultResolver(r)());return n?.debug?.(`@aws-sdk/client-sts::resolveRegion`,`accepting first of:`,`${i} (credential provider clientConfig)`,`${a} (contextual client)`,`${o} (STS default: AWS_REGION, profile region, or us-east-1)`),c},kt=(e,t)=>{let n,r;return async(i,a)=>{if(r=i,!n){let{logger:i=e?.parentClientConfig?.logger,profile:a=e?.parentClientConfig?.profile,region:o,requestHandler:s=e?.parentClientConfig?.requestHandler,credentialProviderLogger:c,userAgentAppId:l=e?.parentClientConfig?.userAgentAppId}=e,u=await Ot(o,e?.parentClientConfig?.region,c,{logger:i,profile:a}),d=!jt(s);n=new t({...e,userAgentAppId:l,profile:a,credentialDefaultProvider:()=>async()=>r,region:u,requestHandler:d?s:void 0,logger:i})}let{Credentials:s,AssumedRoleUser:c}=await n.send(new mt(a));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw Error(`Invalid response from STS.assumeRole call with role ${a.RoleArn}`);let l=Dt(c),u={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...l&&{accountId:l}};return o.setCredentialFeature(u,`CREDENTIALS_STS_ASSUME_ROLE`,`i`),u}},At=(e,t)=>{let n;return async r=>{if(!n){let{logger:r=e?.parentClientConfig?.logger,profile:i=e?.parentClientConfig?.profile,region:a,requestHandler:o=e?.parentClientConfig?.requestHandler,credentialProviderLogger:s,userAgentAppId:c=e?.parentClientConfig?.userAgentAppId}=e,l=await Ot(a,e?.parentClientConfig?.region,s,{logger:r,profile:i}),u=!jt(o);n=new t({...e,userAgentAppId:c,profile:i,region:l,requestHandler:u?o:void 0,logger:r})}let{Credentials:i,AssumedRoleUser:a}=await n.send(new gt(r));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${r.RoleArn}`);let s=Dt(a),c={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...s&&{accountId:s}};return s&&o.setCredentialFeature(c,`RESOLVED_ACCOUNT_ID`,`T`),o.setCredentialFeature(c,`CREDENTIALS_STS_ASSUME_ROLE_WEB_ID`,`k`),c}},jt=e=>e?.metadata?.handlerProtocol===`h2`,Mt=(e,t)=>t?class extends e{constructor(e){super(e);for(let e of t)this.middlewareStack.use(e)}}:e,Nt=(e={},n)=>kt(e,Mt(t.STSClient,n)),Pt=(e={},n)=>At(e,Mt(t.STSClient,n));Object.defineProperty(e,`$Command`,{enumerable:!0,get:function(){return n.Command}}),e.AssumeRole$=rt,e.AssumeRoleCommand=mt,e.AssumeRoleRequest$=ge,e.AssumeRoleResponse$=_e,e.AssumeRoleWithSAML$=it,e.AssumeRoleWithSAMLCommand=ht,e.AssumeRoleWithSAMLRequest$=ve,e.AssumeRoleWithSAMLResponse$=ye,e.AssumeRoleWithWebIdentity$=at,e.AssumeRoleWithWebIdentityCommand=gt,e.AssumeRoleWithWebIdentityRequest$=be,e.AssumeRoleWithWebIdentityResponse$=xe,e.AssumeRoot$=ot,e.AssumeRootCommand=_t,e.AssumeRootRequest$=Se,e.AssumeRootResponse$=Ce,e.AssumedRoleUser$=he,e.Credentials$=we,e.DecodeAuthorizationMessage$=st,e.DecodeAuthorizationMessageCommand=vt,e.DecodeAuthorizationMessageRequest$=Te,e.DecodeAuthorizationMessageResponse$=Ee,e.ExpiredTokenException=l,e.ExpiredTokenException$=De,e.ExpiredTradeInTokenException=v,e.ExpiredTradeInTokenException$=Oe,e.FederatedUser$=L,e.GetAccessKeyInfo$=ct,e.GetAccessKeyInfoCommand=yt,e.GetAccessKeyInfoRequest$=ke,e.GetAccessKeyInfoResponse$=R,e.GetCallerIdentity$=lt,e.GetCallerIdentityCommand=bt,e.GetCallerIdentityRequest$=Ae,e.GetCallerIdentityResponse$=je,e.GetDelegatedAccessToken$=ut,e.GetDelegatedAccessTokenCommand=xt,e.GetDelegatedAccessTokenRequest$=Me,e.GetDelegatedAccessTokenResponse$=Ne,e.GetFederationToken$=dt,e.GetFederationTokenCommand=St,e.GetFederationTokenRequest$=Pe,e.GetFederationTokenResponse$=Fe,e.GetSessionToken$=ft,e.GetSessionTokenCommand=Ct,e.GetSessionTokenRequest$=Ie,e.GetSessionTokenResponse$=Le,e.GetWebIdentityToken$=pt,e.GetWebIdentityTokenCommand=wt,e.GetWebIdentityTokenRequest$=Re,e.GetWebIdentityTokenResponse$=ze,e.IDPCommunicationErrorException=g,e.IDPCommunicationErrorException$=Be,e.IDPRejectedClaimException=m,e.IDPRejectedClaimException$=Ve,e.InvalidAuthorizationMessageException=_,e.InvalidAuthorizationMessageException$=He,e.InvalidIdentityTokenException=h,e.InvalidIdentityTokenException$=Ue,e.JWTPayloadSizeExceededException=y,e.JWTPayloadSizeExceededException$=We,e.MalformedPolicyDocumentException=u,e.MalformedPolicyDocumentException$=Ge,e.OutboundWebIdentityFederationDisabledException=b,e.OutboundWebIdentityFederationDisabledException$=Ke,e.PackedPolicyTooLargeException=d,e.PackedPolicyTooLargeException$=qe,e.PolicyDescriptorType$=Je,e.ProvidedContext$=Ye,e.RegionDisabledException=p,e.RegionDisabledException$=Xe,e.STS=Et,e.STSServiceException=c,e.STSServiceException$=$e,e.SessionDurationEscalationException=x,e.SessionDurationEscalationException$=Ze,e.Tag$=Qe,e.decorateDefaultCredentialProvider=e=>t=>e({roleAssumer:Nt(t),roleAssumerWithWebIdentity:Pt(t),...t}),e.getDefaultRoleAssumer=Nt,e.getDefaultRoleAssumerWithWebIdentity=Pt,Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})}))();const _b=new gb.STSClient,vb=async()=>_b.send(new gb.GetCallerIdentityCommand);export{vb as handler};